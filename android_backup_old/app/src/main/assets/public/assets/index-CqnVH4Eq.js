var MO=Object.defineProperty;var Wv=t=>{throw TypeError(t)};var LO=(t,e,r)=>e in t?MO(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var T=(t,e,r)=>LO(t,typeof e!="symbol"?e+"":e,r),wh=(t,e,r)=>e.has(t)||Wv("Cannot "+r);var E=(t,e,r)=>(wh(t,e,"read from private field"),r?r.call(t):e.get(t)),ue=(t,e,r)=>e.has(t)?Wv("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),Z=(t,e,r,n)=>(wh(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),_e=(t,e,r)=>(wh(t,e,"access private method"),r);var xu=(t,e,r,n)=>({set _(s){Z(t,e,s,r)},get _(){return E(t,e,n)}});function FO(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var Jr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Zj(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function $O(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return t[n]}})}),r}var Xj={exports:{}},Cf={},ek={exports:{}},Ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kc=Symbol.for("react.element"),UO=Symbol.for("react.portal"),BO=Symbol.for("react.fragment"),zO=Symbol.for("react.strict_mode"),VO=Symbol.for("react.profiler"),WO=Symbol.for("react.provider"),qO=Symbol.for("react.context"),HO=Symbol.for("react.forward_ref"),KO=Symbol.for("react.suspense"),GO=Symbol.for("react.memo"),QO=Symbol.for("react.lazy"),qv=Symbol.iterator;function YO(t){return t===null||typeof t!="object"?null:(t=qv&&t[qv]||t["@@iterator"],typeof t=="function"?t:null)}var tk={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},rk=Object.assign,nk={};function Zo(t,e,r){this.props=t,this.context=e,this.refs=nk,this.updater=r||tk}Zo.prototype.isReactComponent={};Zo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Zo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function sk(){}sk.prototype=Zo.prototype;function Tg(t,e,r){this.props=t,this.context=e,this.refs=nk,this.updater=r||tk}var Ag=Tg.prototype=new sk;Ag.constructor=Tg;rk(Ag,Zo.prototype);Ag.isPureReactComponent=!0;var Hv=Array.isArray,ik=Object.prototype.hasOwnProperty,Og={current:null},ak={key:!0,ref:!0,__self:!0,__source:!0};function ok(t,e,r){var n,s={},i=null,a=null;if(e!=null)for(n in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)ik.call(e,n)&&!ak.hasOwnProperty(n)&&(s[n]=e[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(t&&t.defaultProps)for(n in l=t.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:Kc,type:t,key:i,ref:a,props:s,_owner:Og.current}}function JO(t,e){return{$$typeof:Kc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Rg(t){return typeof t=="object"&&t!==null&&t.$$typeof===Kc}function ZO(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var Kv=/\/+/g;function bh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?ZO(""+t.key):e.toString(36)}function Qu(t,e,r,n,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Kc:case UO:a=!0}}if(a)return a=t,s=s(a),t=n===""?"."+bh(a,0):n,Hv(s)?(r="",t!=null&&(r=t.replace(Kv,"$&/")+"/"),Qu(s,e,r,"",function(u){return u})):s!=null&&(Rg(s)&&(s=JO(s,r+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(Kv,"$&/")+"/")+t)),e.push(s)),1;if(a=0,n=n===""?".":n+":",Hv(t))for(var l=0;l<t.length;l++){i=t[l];var c=n+bh(i,l);a+=Qu(i,e,r,c,s)}else if(c=YO(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=n+bh(i,l++),a+=Qu(i,e,r,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function wu(t,e,r){if(t==null)return t;var n=[],s=0;return Qu(t,n,"","",function(i){return e.call(r,i,s++)}),n}function XO(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var fr={current:null},Yu={transition:null},eR={ReactCurrentDispatcher:fr,ReactCurrentBatchConfig:Yu,ReactCurrentOwner:Og};function lk(){throw Error("act(...) is not supported in production builds of React.")}Ce.Children={map:wu,forEach:function(t,e,r){wu(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return wu(t,function(){e++}),e},toArray:function(t){return wu(t,function(e){return e})||[]},only:function(t){if(!Rg(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ce.Component=Zo;Ce.Fragment=BO;Ce.Profiler=VO;Ce.PureComponent=Tg;Ce.StrictMode=zO;Ce.Suspense=KO;Ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eR;Ce.act=lk;Ce.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=rk({},t.props),s=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=Og.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)ik.call(e,c)&&!ak.hasOwnProperty(c)&&(n[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:Kc,type:t.type,key:s,ref:i,props:n,_owner:a}};Ce.createContext=function(t){return t={$$typeof:qO,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:WO,_context:t},t.Consumer=t};Ce.createElement=ok;Ce.createFactory=function(t){var e=ok.bind(null,t);return e.type=t,e};Ce.createRef=function(){return{current:null}};Ce.forwardRef=function(t){return{$$typeof:HO,render:t}};Ce.isValidElement=Rg;Ce.lazy=function(t){return{$$typeof:QO,_payload:{_status:-1,_result:t},_init:XO}};Ce.memo=function(t,e){return{$$typeof:GO,type:t,compare:e===void 0?null:e}};Ce.startTransition=function(t){var e=Yu.transition;Yu.transition={};try{t()}finally{Yu.transition=e}};Ce.unstable_act=lk;Ce.useCallback=function(t,e){return fr.current.useCallback(t,e)};Ce.useContext=function(t){return fr.current.useContext(t)};Ce.useDebugValue=function(){};Ce.useDeferredValue=function(t){return fr.current.useDeferredValue(t)};Ce.useEffect=function(t,e){return fr.current.useEffect(t,e)};Ce.useId=function(){return fr.current.useId()};Ce.useImperativeHandle=function(t,e,r){return fr.current.useImperativeHandle(t,e,r)};Ce.useInsertionEffect=function(t,e){return fr.current.useInsertionEffect(t,e)};Ce.useLayoutEffect=function(t,e){return fr.current.useLayoutEffect(t,e)};Ce.useMemo=function(t,e){return fr.current.useMemo(t,e)};Ce.useReducer=function(t,e,r){return fr.current.useReducer(t,e,r)};Ce.useRef=function(t){return fr.current.useRef(t)};Ce.useState=function(t){return fr.current.useState(t)};Ce.useSyncExternalStore=function(t,e,r){return fr.current.useSyncExternalStore(t,e,r)};Ce.useTransition=function(){return fr.current.useTransition()};Ce.version="18.3.1";ek.exports=Ce;var y=ek.exports;const ge=Zj(y),ck=FO({__proto__:null,default:ge},[y]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tR=y,rR=Symbol.for("react.element"),nR=Symbol.for("react.fragment"),sR=Object.prototype.hasOwnProperty,iR=tR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,aR={key:!0,ref:!0,__self:!0,__source:!0};function uk(t,e,r){var n,s={},i=null,a=null;r!==void 0&&(i=""+r),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(n in e)sR.call(e,n)&&!aR.hasOwnProperty(n)&&(s[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)s[n]===void 0&&(s[n]=e[n]);return{$$typeof:rR,type:t,key:i,ref:a,props:s,_owner:iR.current}}Cf.Fragment=nR;Cf.jsx=uk;Cf.jsxs=uk;Xj.exports=Cf;var o=Xj.exports,dk={exports:{}},Br={},fk={exports:{}},hk={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(P,L){var K=P.length;P.push(L);e:for(;0<K;){var re=K-1>>>1,G=P[re];if(0<s(G,L))P[re]=L,P[K]=G,K=re;else break e}}function r(P){return P.length===0?null:P[0]}function n(P){if(P.length===0)return null;var L=P[0],K=P.pop();if(K!==L){P[0]=K;e:for(var re=0,G=P.length,je=G>>>1;re<je;){var le=2*(re+1)-1,Ke=P[le],We=le+1,ie=P[We];if(0>s(Ke,K))We<G&&0>s(ie,Ke)?(P[re]=ie,P[We]=K,re=We):(P[re]=Ke,P[le]=K,re=le);else if(We<G&&0>s(ie,K))P[re]=ie,P[We]=K,re=We;else break e}}return L}function s(P,L){var K=P.sortIndex-L.sortIndex;return K!==0?K:P.id-L.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,f=null,h=3,v=!1,p=!1,g=!1,b=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(P){for(var L=r(u);L!==null;){if(L.callback===null)n(u);else if(L.startTime<=P)n(u),L.sortIndex=L.expirationTime,e(c,L);else break;L=r(u)}}function _(P){if(g=!1,x(P),!p)if(r(c)!==null)p=!0,V(S);else{var L=r(u);L!==null&&U(_,L.startTime-P)}}function S(P,L){p=!1,g&&(g=!1,w(N),N=-1),v=!0;var K=h;try{for(x(L),f=r(c);f!==null&&(!(f.expirationTime>L)||P&&!M());){var re=f.callback;if(typeof re=="function"){f.callback=null,h=f.priorityLevel;var G=re(f.expirationTime<=L);L=t.unstable_now(),typeof G=="function"?f.callback=G:f===r(c)&&n(c),x(L)}else n(c);f=r(c)}if(f!==null)var je=!0;else{var le=r(u);le!==null&&U(_,le.startTime-L),je=!1}return je}finally{f=null,h=K,v=!1}}var j=!1,k=null,N=-1,A=5,I=-1;function M(){return!(t.unstable_now()-I<A)}function F(){if(k!==null){var P=t.unstable_now();I=P;var L=!0;try{L=k(!0,P)}finally{L?O():(j=!1,k=null)}}else j=!1}var O;if(typeof m=="function")O=function(){m(F)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,R=z.port2;z.port1.onmessage=F,O=function(){R.postMessage(null)}}else O=function(){b(F,0)};function V(P){k=P,j||(j=!0,O())}function U(P,L){N=b(function(){P(t.unstable_now())},L)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(P){P.callback=null},t.unstable_continueExecution=function(){p||v||(p=!0,V(S))},t.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<P?Math.floor(1e3/P):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(P){switch(h){case 1:case 2:case 3:var L=3;break;default:L=h}var K=h;h=L;try{return P()}finally{h=K}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(P,L){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var K=h;h=P;try{return L()}finally{h=K}},t.unstable_scheduleCallback=function(P,L,K){var re=t.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?re+K:re):K=re,P){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=K+G,P={id:d++,callback:L,priorityLevel:P,startTime:K,expirationTime:G,sortIndex:-1},K>re?(P.sortIndex=K,e(u,P),r(c)===null&&P===r(u)&&(g?(w(N),N=-1):g=!0,U(_,K-re))):(P.sortIndex=G,e(c,P),p||v||(p=!0,V(S))),P},t.unstable_shouldYield=M,t.unstable_wrapCallback=function(P){var L=h;return function(){var K=h;h=L;try{return P.apply(this,arguments)}finally{h=K}}}})(hk);fk.exports=hk;var oR=fk.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lR=y,$r=oR;function q(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var mk=new Set,tc={};function xa(t,e){Io(t,e),Io(t+"Capture",e)}function Io(t,e){for(tc[t]=e,t=0;t<e.length;t++)mk.add(e[t])}var gs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Am=Object.prototype.hasOwnProperty,cR=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Gv={},Qv={};function uR(t){return Am.call(Qv,t)?!0:Am.call(Gv,t)?!1:cR.test(t)?Qv[t]=!0:(Gv[t]=!0,!1)}function dR(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function fR(t,e,r,n){if(e===null||typeof e>"u"||dR(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function hr(t,e,r,n,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var $t={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){$t[t]=new hr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];$t[e]=new hr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){$t[t]=new hr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){$t[t]=new hr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){$t[t]=new hr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){$t[t]=new hr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){$t[t]=new hr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){$t[t]=new hr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){$t[t]=new hr(t,5,!1,t.toLowerCase(),null,!1,!1)});var Ig=/[\-:]([a-z])/g;function Dg(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Ig,Dg);$t[e]=new hr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Ig,Dg);$t[e]=new hr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Ig,Dg);$t[e]=new hr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){$t[t]=new hr(t,1,!1,t.toLowerCase(),null,!1,!1)});$t.xlinkHref=new hr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){$t[t]=new hr(t,1,!1,t.toLowerCase(),null,!0,!0)});function Mg(t,e,r,n){var s=$t.hasOwnProperty(e)?$t[e]:null;(s!==null?s.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(fR(e,r,s,n)&&(r=null),n||s===null?uR(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):s.mustUseProperty?t[s.propertyName]=r===null?s.type===3?!1:"":r:(e=s.attributeName,n=s.attributeNamespace,r===null?t.removeAttribute(e):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var Cs=lR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,bu=Symbol.for("react.element"),Wa=Symbol.for("react.portal"),qa=Symbol.for("react.fragment"),Lg=Symbol.for("react.strict_mode"),Om=Symbol.for("react.profiler"),pk=Symbol.for("react.provider"),gk=Symbol.for("react.context"),Fg=Symbol.for("react.forward_ref"),Rm=Symbol.for("react.suspense"),Im=Symbol.for("react.suspense_list"),$g=Symbol.for("react.memo"),$s=Symbol.for("react.lazy"),yk=Symbol.for("react.offscreen"),Yv=Symbol.iterator;function hl(t){return t===null||typeof t!="object"?null:(t=Yv&&t[Yv]||t["@@iterator"],typeof t=="function"?t:null)}var lt=Object.assign,_h;function Pl(t){if(_h===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);_h=e&&e[1]||""}return`
`+_h+t}var Sh=!1;function jh(t,e){if(!t||Sh)return"";Sh=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){n=u}t.call(e.prototype)}else{try{throw Error()}catch(u){n=u}t()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=n.stack.split(`
`),a=s.length-1,l=i.length-1;1<=a&&0<=l&&s[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==i[l]){var c=`
`+s[a].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=a&&0<=l);break}}}finally{Sh=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Pl(t):""}function hR(t){switch(t.tag){case 5:return Pl(t.type);case 16:return Pl("Lazy");case 13:return Pl("Suspense");case 19:return Pl("SuspenseList");case 0:case 2:case 15:return t=jh(t.type,!1),t;case 11:return t=jh(t.type.render,!1),t;case 1:return t=jh(t.type,!0),t;default:return""}}function Dm(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case qa:return"Fragment";case Wa:return"Portal";case Om:return"Profiler";case Lg:return"StrictMode";case Rm:return"Suspense";case Im:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case gk:return(t.displayName||"Context")+".Consumer";case pk:return(t._context.displayName||"Context")+".Provider";case Fg:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case $g:return e=t.displayName||null,e!==null?e:Dm(t.type)||"Memo";case $s:e=t._payload,t=t._init;try{return Dm(t(e))}catch{}}return null}function mR(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Dm(e);case 8:return e===Lg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function di(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function vk(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function pR(t){var e=vk(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){n=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function _u(t){t._valueTracker||(t._valueTracker=pR(t))}function xk(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=vk(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function vd(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Mm(t,e){var r=e.checked;return lt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function Jv(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=di(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function wk(t,e){e=e.checked,e!=null&&Mg(t,"checked",e,!1)}function Lm(t,e){wk(t,e);var r=di(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Fm(t,e.type,r):e.hasOwnProperty("defaultValue")&&Fm(t,e.type,di(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Zv(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function Fm(t,e,r){(e!=="number"||vd(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Tl=Array.isArray;function so(t,e,r,n){if(t=t.options,e){e={};for(var s=0;s<r.length;s++)e["$"+r[s]]=!0;for(r=0;r<t.length;r++)s=e.hasOwnProperty("$"+t[r].value),t[r].selected!==s&&(t[r].selected=s),s&&n&&(t[r].defaultSelected=!0)}else{for(r=""+di(r),e=null,s=0;s<t.length;s++){if(t[s].value===r){t[s].selected=!0,n&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function $m(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(q(91));return lt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Xv(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(q(92));if(Tl(r)){if(1<r.length)throw Error(q(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:di(r)}}function bk(t,e){var r=di(e.value),n=di(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function e0(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function _k(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Um(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?_k(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Su,Sk=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,s){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Su=Su||document.createElement("div"),Su.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Su.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function rc(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var Ll={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},gR=["Webkit","ms","Moz","O"];Object.keys(Ll).forEach(function(t){gR.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ll[e]=Ll[t]})});function jk(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||Ll.hasOwnProperty(t)&&Ll[t]?(""+e).trim():e+"px"}function kk(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=jk(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,s):t[r]=s}}var yR=lt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Bm(t,e){if(e){if(yR[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(q(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(q(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(q(61))}if(e.style!=null&&typeof e.style!="object")throw Error(q(62))}}function zm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vm=null;function Ug(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Wm=null,io=null,ao=null;function t0(t){if(t=Yc(t)){if(typeof Wm!="function")throw Error(q(280));var e=t.stateNode;e&&(e=Of(e),Wm(t.stateNode,t.type,e))}}function Nk(t){io?ao?ao.push(t):ao=[t]:io=t}function Ck(){if(io){var t=io,e=ao;if(ao=io=null,t0(t),e)for(t=0;t<e.length;t++)t0(e[t])}}function Ek(t,e){return t(e)}function Pk(){}var kh=!1;function Tk(t,e,r){if(kh)return t(e,r);kh=!0;try{return Ek(t,e,r)}finally{kh=!1,(io!==null||ao!==null)&&(Pk(),Ck())}}function nc(t,e){var r=t.stateNode;if(r===null)return null;var n=Of(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(q(231,e,typeof r));return r}var qm=!1;if(gs)try{var ml={};Object.defineProperty(ml,"passive",{get:function(){qm=!0}}),window.addEventListener("test",ml,ml),window.removeEventListener("test",ml,ml)}catch{qm=!1}function vR(t,e,r,n,s,i,a,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(r,u)}catch(d){this.onError(d)}}var Fl=!1,xd=null,wd=!1,Hm=null,xR={onError:function(t){Fl=!0,xd=t}};function wR(t,e,r,n,s,i,a,l,c){Fl=!1,xd=null,vR.apply(xR,arguments)}function bR(t,e,r,n,s,i,a,l,c){if(wR.apply(this,arguments),Fl){if(Fl){var u=xd;Fl=!1,xd=null}else throw Error(q(198));wd||(wd=!0,Hm=u)}}function wa(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function Ak(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function r0(t){if(wa(t)!==t)throw Error(q(188))}function _R(t){var e=t.alternate;if(!e){if(e=wa(t),e===null)throw Error(q(188));return e!==t?null:t}for(var r=t,n=e;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return r0(s),t;if(i===n)return r0(s),e;i=i.sibling}throw Error(q(188))}if(r.return!==n.return)r=s,n=i;else{for(var a=!1,l=s.child;l;){if(l===r){a=!0,r=s,n=i;break}if(l===n){a=!0,n=s,r=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===r){a=!0,r=i,n=s;break}if(l===n){a=!0,n=i,r=s;break}l=l.sibling}if(!a)throw Error(q(189))}}if(r.alternate!==n)throw Error(q(190))}if(r.tag!==3)throw Error(q(188));return r.stateNode.current===r?t:e}function Ok(t){return t=_R(t),t!==null?Rk(t):null}function Rk(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Rk(t);if(e!==null)return e;t=t.sibling}return null}var Ik=$r.unstable_scheduleCallback,n0=$r.unstable_cancelCallback,SR=$r.unstable_shouldYield,jR=$r.unstable_requestPaint,pt=$r.unstable_now,kR=$r.unstable_getCurrentPriorityLevel,Bg=$r.unstable_ImmediatePriority,Dk=$r.unstable_UserBlockingPriority,bd=$r.unstable_NormalPriority,NR=$r.unstable_LowPriority,Mk=$r.unstable_IdlePriority,Ef=null,Vn=null;function CR(t){if(Vn&&typeof Vn.onCommitFiberRoot=="function")try{Vn.onCommitFiberRoot(Ef,t,void 0,(t.current.flags&128)===128)}catch{}}var xn=Math.clz32?Math.clz32:TR,ER=Math.log,PR=Math.LN2;function TR(t){return t>>>=0,t===0?32:31-(ER(t)/PR|0)|0}var ju=64,ku=4194304;function Al(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function _d(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,s=t.suspendedLanes,i=t.pingedLanes,a=r&268435455;if(a!==0){var l=a&~s;l!==0?n=Al(l):(i&=a,i!==0&&(n=Al(i)))}else a=r&~s,a!==0?n=Al(a):i!==0&&(n=Al(i));if(n===0)return 0;if(e!==0&&e!==n&&!(e&s)&&(s=n&-n,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-xn(e),s=1<<r,n|=t[r],e&=~s;return n}function AR(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function OR(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-xn(i),l=1<<a,c=s[a];c===-1?(!(l&r)||l&n)&&(s[a]=AR(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function Km(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Lk(){var t=ju;return ju<<=1,!(ju&4194240)&&(ju=64),t}function Nh(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function Gc(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-xn(e),t[e]=r}function RR(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var s=31-xn(r),i=1<<s;e[s]=0,n[s]=-1,t[s]=-1,r&=~i}}function zg(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-xn(r),s=1<<n;s&e|t[n]&e&&(t[n]|=e),r&=~s}}var He=0;function Fk(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var $k,Vg,Uk,Bk,zk,Gm=!1,Nu=[],ni=null,si=null,ii=null,sc=new Map,ic=new Map,Bs=[],IR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function s0(t,e){switch(t){case"focusin":case"focusout":ni=null;break;case"dragenter":case"dragleave":si=null;break;case"mouseover":case"mouseout":ii=null;break;case"pointerover":case"pointerout":sc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ic.delete(e.pointerId)}}function pl(t,e,r,n,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Yc(e),e!==null&&Vg(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function DR(t,e,r,n,s){switch(e){case"focusin":return ni=pl(ni,t,e,r,n,s),!0;case"dragenter":return si=pl(si,t,e,r,n,s),!0;case"mouseover":return ii=pl(ii,t,e,r,n,s),!0;case"pointerover":var i=s.pointerId;return sc.set(i,pl(sc.get(i)||null,t,e,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,ic.set(i,pl(ic.get(i)||null,t,e,r,n,s)),!0}return!1}function Vk(t){var e=$i(t.target);if(e!==null){var r=wa(e);if(r!==null){if(e=r.tag,e===13){if(e=Ak(r),e!==null){t.blockedOn=e,zk(t.priority,function(){Uk(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ju(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=Qm(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);Vm=n,r.target.dispatchEvent(n),Vm=null}else return e=Yc(r),e!==null&&Vg(e),t.blockedOn=r,!1;e.shift()}return!0}function i0(t,e,r){Ju(t)&&r.delete(e)}function MR(){Gm=!1,ni!==null&&Ju(ni)&&(ni=null),si!==null&&Ju(si)&&(si=null),ii!==null&&Ju(ii)&&(ii=null),sc.forEach(i0),ic.forEach(i0)}function gl(t,e){t.blockedOn===e&&(t.blockedOn=null,Gm||(Gm=!0,$r.unstable_scheduleCallback($r.unstable_NormalPriority,MR)))}function ac(t){function e(s){return gl(s,t)}if(0<Nu.length){gl(Nu[0],t);for(var r=1;r<Nu.length;r++){var n=Nu[r];n.blockedOn===t&&(n.blockedOn=null)}}for(ni!==null&&gl(ni,t),si!==null&&gl(si,t),ii!==null&&gl(ii,t),sc.forEach(e),ic.forEach(e),r=0;r<Bs.length;r++)n=Bs[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<Bs.length&&(r=Bs[0],r.blockedOn===null);)Vk(r),r.blockedOn===null&&Bs.shift()}var oo=Cs.ReactCurrentBatchConfig,Sd=!0;function LR(t,e,r,n){var s=He,i=oo.transition;oo.transition=null;try{He=1,Wg(t,e,r,n)}finally{He=s,oo.transition=i}}function FR(t,e,r,n){var s=He,i=oo.transition;oo.transition=null;try{He=4,Wg(t,e,r,n)}finally{He=s,oo.transition=i}}function Wg(t,e,r,n){if(Sd){var s=Qm(t,e,r,n);if(s===null)Mh(t,e,n,jd,r),s0(t,n);else if(DR(s,t,e,r,n))n.stopPropagation();else if(s0(t,n),e&4&&-1<IR.indexOf(t)){for(;s!==null;){var i=Yc(s);if(i!==null&&$k(i),i=Qm(t,e,r,n),i===null&&Mh(t,e,n,jd,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else Mh(t,e,n,null,r)}}var jd=null;function Qm(t,e,r,n){if(jd=null,t=Ug(n),t=$i(t),t!==null)if(e=wa(t),e===null)t=null;else if(r=e.tag,r===13){if(t=Ak(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return jd=t,null}function Wk(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(kR()){case Bg:return 1;case Dk:return 4;case bd:case NR:return 16;case Mk:return 536870912;default:return 16}default:return 16}}var ti=null,qg=null,Zu=null;function qk(){if(Zu)return Zu;var t,e=qg,r=e.length,n,s="value"in ti?ti.value:ti.textContent,i=s.length;for(t=0;t<r&&e[t]===s[t];t++);var a=r-t;for(n=1;n<=a&&e[r-n]===s[i-n];n++);return Zu=s.slice(t,1<n?1-n:void 0)}function Xu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Cu(){return!0}function a0(){return!1}function zr(t){function e(r,n,s,i,a){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(r=t[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Cu:a0,this.isPropagationStopped=a0,this}return lt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Cu)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Cu)},persist:function(){},isPersistent:Cu}),e}var Xo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Hg=zr(Xo),Qc=lt({},Xo,{view:0,detail:0}),$R=zr(Qc),Ch,Eh,yl,Pf=lt({},Qc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Kg,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==yl&&(yl&&t.type==="mousemove"?(Ch=t.screenX-yl.screenX,Eh=t.screenY-yl.screenY):Eh=Ch=0,yl=t),Ch)},movementY:function(t){return"movementY"in t?t.movementY:Eh}}),o0=zr(Pf),UR=lt({},Pf,{dataTransfer:0}),BR=zr(UR),zR=lt({},Qc,{relatedTarget:0}),Ph=zr(zR),VR=lt({},Xo,{animationName:0,elapsedTime:0,pseudoElement:0}),WR=zr(VR),qR=lt({},Xo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),HR=zr(qR),KR=lt({},Xo,{data:0}),l0=zr(KR),GR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},QR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},YR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function JR(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=YR[t])?!!e[t]:!1}function Kg(){return JR}var ZR=lt({},Qc,{key:function(t){if(t.key){var e=GR[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Xu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?QR[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Kg,charCode:function(t){return t.type==="keypress"?Xu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Xu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),XR=zr(ZR),eI=lt({},Pf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),c0=zr(eI),tI=lt({},Qc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Kg}),rI=zr(tI),nI=lt({},Xo,{propertyName:0,elapsedTime:0,pseudoElement:0}),sI=zr(nI),iI=lt({},Pf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),aI=zr(iI),oI=[9,13,27,32],Gg=gs&&"CompositionEvent"in window,$l=null;gs&&"documentMode"in document&&($l=document.documentMode);var lI=gs&&"TextEvent"in window&&!$l,Hk=gs&&(!Gg||$l&&8<$l&&11>=$l),u0=" ",d0=!1;function Kk(t,e){switch(t){case"keyup":return oI.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Gk(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ha=!1;function cI(t,e){switch(t){case"compositionend":return Gk(e);case"keypress":return e.which!==32?null:(d0=!0,u0);case"textInput":return t=e.data,t===u0&&d0?null:t;default:return null}}function uI(t,e){if(Ha)return t==="compositionend"||!Gg&&Kk(t,e)?(t=qk(),Zu=qg=ti=null,Ha=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Hk&&e.locale!=="ko"?null:e.data;default:return null}}var dI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function f0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!dI[t.type]:e==="textarea"}function Qk(t,e,r,n){Nk(n),e=kd(e,"onChange"),0<e.length&&(r=new Hg("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var Ul=null,oc=null;function fI(t){aN(t,0)}function Tf(t){var e=Qa(t);if(xk(e))return t}function hI(t,e){if(t==="change")return e}var Yk=!1;if(gs){var Th;if(gs){var Ah="oninput"in document;if(!Ah){var h0=document.createElement("div");h0.setAttribute("oninput","return;"),Ah=typeof h0.oninput=="function"}Th=Ah}else Th=!1;Yk=Th&&(!document.documentMode||9<document.documentMode)}function m0(){Ul&&(Ul.detachEvent("onpropertychange",Jk),oc=Ul=null)}function Jk(t){if(t.propertyName==="value"&&Tf(oc)){var e=[];Qk(e,oc,t,Ug(t)),Tk(fI,e)}}function mI(t,e,r){t==="focusin"?(m0(),Ul=e,oc=r,Ul.attachEvent("onpropertychange",Jk)):t==="focusout"&&m0()}function pI(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Tf(oc)}function gI(t,e){if(t==="click")return Tf(e)}function yI(t,e){if(t==="input"||t==="change")return Tf(e)}function vI(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var _n=typeof Object.is=="function"?Object.is:vI;function lc(t,e){if(_n(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!Am.call(e,s)||!_n(t[s],e[s]))return!1}return!0}function p0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function g0(t,e){var r=p0(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=p0(r)}}function Zk(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Zk(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Xk(){for(var t=window,e=vd();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=vd(t.document)}return e}function Qg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function xI(t){var e=Xk(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&Zk(r.ownerDocument.documentElement,r)){if(n!==null&&Qg(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!t.extend&&i>n&&(s=n,n=i,i=s),s=g0(r,i);var a=g0(r,n);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>n?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var wI=gs&&"documentMode"in document&&11>=document.documentMode,Ka=null,Ym=null,Bl=null,Jm=!1;function y0(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Jm||Ka==null||Ka!==vd(n)||(n=Ka,"selectionStart"in n&&Qg(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Bl&&lc(Bl,n)||(Bl=n,n=kd(Ym,"onSelect"),0<n.length&&(e=new Hg("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Ka)))}function Eu(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Ga={animationend:Eu("Animation","AnimationEnd"),animationiteration:Eu("Animation","AnimationIteration"),animationstart:Eu("Animation","AnimationStart"),transitionend:Eu("Transition","TransitionEnd")},Oh={},eN={};gs&&(eN=document.createElement("div").style,"AnimationEvent"in window||(delete Ga.animationend.animation,delete Ga.animationiteration.animation,delete Ga.animationstart.animation),"TransitionEvent"in window||delete Ga.transitionend.transition);function Af(t){if(Oh[t])return Oh[t];if(!Ga[t])return t;var e=Ga[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in eN)return Oh[t]=e[r];return t}var tN=Af("animationend"),rN=Af("animationiteration"),nN=Af("animationstart"),sN=Af("transitionend"),iN=new Map,v0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _i(t,e){iN.set(t,e),xa(e,[t])}for(var Rh=0;Rh<v0.length;Rh++){var Ih=v0[Rh],bI=Ih.toLowerCase(),_I=Ih[0].toUpperCase()+Ih.slice(1);_i(bI,"on"+_I)}_i(tN,"onAnimationEnd");_i(rN,"onAnimationIteration");_i(nN,"onAnimationStart");_i("dblclick","onDoubleClick");_i("focusin","onFocus");_i("focusout","onBlur");_i(sN,"onTransitionEnd");Io("onMouseEnter",["mouseout","mouseover"]);Io("onMouseLeave",["mouseout","mouseover"]);Io("onPointerEnter",["pointerout","pointerover"]);Io("onPointerLeave",["pointerout","pointerover"]);xa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));xa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));xa("onBeforeInput",["compositionend","keypress","textInput","paste"]);xa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));xa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));xa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ol="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),SI=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ol));function x0(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,bR(n,e,void 0,t),t.currentTarget=null}function aN(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],s=n.event;n=n.listeners;e:{var i=void 0;if(e)for(var a=n.length-1;0<=a;a--){var l=n[a],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;x0(s,l,u),i=c}else for(a=0;a<n.length;a++){if(l=n[a],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;x0(s,l,u),i=c}}}if(wd)throw t=Hm,wd=!1,Hm=null,t}function et(t,e){var r=e[rp];r===void 0&&(r=e[rp]=new Set);var n=t+"__bubble";r.has(n)||(oN(e,t,2,!1),r.add(n))}function Dh(t,e,r){var n=0;e&&(n|=4),oN(r,t,n,e)}var Pu="_reactListening"+Math.random().toString(36).slice(2);function cc(t){if(!t[Pu]){t[Pu]=!0,mk.forEach(function(r){r!=="selectionchange"&&(SI.has(r)||Dh(r,!1,t),Dh(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Pu]||(e[Pu]=!0,Dh("selectionchange",!1,e))}}function oN(t,e,r,n){switch(Wk(e)){case 1:var s=LR;break;case 4:s=FR;break;default:s=Wg}r=s.bind(null,e,r,t),s=void 0,!qm||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),n?s!==void 0?t.addEventListener(e,r,{capture:!0,passive:s}):t.addEventListener(e,r,!0):s!==void 0?t.addEventListener(e,r,{passive:s}):t.addEventListener(e,r,!1)}function Mh(t,e,r,n,s){var i=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=n.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;l!==null;){if(a=$i(l),a===null)return;if(c=a.tag,c===5||c===6){n=i=a;continue e}l=l.parentNode}}n=n.return}Tk(function(){var u=i,d=Ug(r),f=[];e:{var h=iN.get(t);if(h!==void 0){var v=Hg,p=t;switch(t){case"keypress":if(Xu(r)===0)break e;case"keydown":case"keyup":v=XR;break;case"focusin":p="focus",v=Ph;break;case"focusout":p="blur",v=Ph;break;case"beforeblur":case"afterblur":v=Ph;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=o0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=BR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=rI;break;case tN:case rN:case nN:v=WR;break;case sN:v=sI;break;case"scroll":v=$R;break;case"wheel":v=aI;break;case"copy":case"cut":case"paste":v=HR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=c0}var g=(e&4)!==0,b=!g&&t==="scroll",w=g?h!==null?h+"Capture":null:h;g=[];for(var m=u,x;m!==null;){x=m;var _=x.stateNode;if(x.tag===5&&_!==null&&(x=_,w!==null&&(_=nc(m,w),_!=null&&g.push(uc(m,_,x)))),b)break;m=m.return}0<g.length&&(h=new v(h,p,null,r,d),f.push({event:h,listeners:g}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",v=t==="mouseout"||t==="pointerout",h&&r!==Vm&&(p=r.relatedTarget||r.fromElement)&&($i(p)||p[ys]))break e;if((v||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,v?(p=r.relatedTarget||r.toElement,v=u,p=p?$i(p):null,p!==null&&(b=wa(p),p!==b||p.tag!==5&&p.tag!==6)&&(p=null)):(v=null,p=u),v!==p)){if(g=o0,_="onMouseLeave",w="onMouseEnter",m="mouse",(t==="pointerout"||t==="pointerover")&&(g=c0,_="onPointerLeave",w="onPointerEnter",m="pointer"),b=v==null?h:Qa(v),x=p==null?h:Qa(p),h=new g(_,m+"leave",v,r,d),h.target=b,h.relatedTarget=x,_=null,$i(d)===u&&(g=new g(w,m+"enter",p,r,d),g.target=x,g.relatedTarget=b,_=g),b=_,v&&p)t:{for(g=v,w=p,m=0,x=g;x;x=ka(x))m++;for(x=0,_=w;_;_=ka(_))x++;for(;0<m-x;)g=ka(g),m--;for(;0<x-m;)w=ka(w),x--;for(;m--;){if(g===w||w!==null&&g===w.alternate)break t;g=ka(g),w=ka(w)}g=null}else g=null;v!==null&&w0(f,h,v,g,!1),p!==null&&b!==null&&w0(f,b,p,g,!0)}}e:{if(h=u?Qa(u):window,v=h.nodeName&&h.nodeName.toLowerCase(),v==="select"||v==="input"&&h.type==="file")var S=hI;else if(f0(h))if(Yk)S=yI;else{S=pI;var j=mI}else(v=h.nodeName)&&v.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(S=gI);if(S&&(S=S(t,u))){Qk(f,S,r,d);break e}j&&j(t,h,u),t==="focusout"&&(j=h._wrapperState)&&j.controlled&&h.type==="number"&&Fm(h,"number",h.value)}switch(j=u?Qa(u):window,t){case"focusin":(f0(j)||j.contentEditable==="true")&&(Ka=j,Ym=u,Bl=null);break;case"focusout":Bl=Ym=Ka=null;break;case"mousedown":Jm=!0;break;case"contextmenu":case"mouseup":case"dragend":Jm=!1,y0(f,r,d);break;case"selectionchange":if(wI)break;case"keydown":case"keyup":y0(f,r,d)}var k;if(Gg)e:{switch(t){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else Ha?Kk(t,r)&&(N="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(N="onCompositionStart");N&&(Hk&&r.locale!=="ko"&&(Ha||N!=="onCompositionStart"?N==="onCompositionEnd"&&Ha&&(k=qk()):(ti=d,qg="value"in ti?ti.value:ti.textContent,Ha=!0)),j=kd(u,N),0<j.length&&(N=new l0(N,t,null,r,d),f.push({event:N,listeners:j}),k?N.data=k:(k=Gk(r),k!==null&&(N.data=k)))),(k=lI?cI(t,r):uI(t,r))&&(u=kd(u,"onBeforeInput"),0<u.length&&(d=new l0("onBeforeInput","beforeinput",null,r,d),f.push({event:d,listeners:u}),d.data=k))}aN(f,e)})}function uc(t,e,r){return{instance:t,listener:e,currentTarget:r}}function kd(t,e){for(var r=e+"Capture",n=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=nc(t,r),i!=null&&n.unshift(uc(t,i,s)),i=nc(t,e),i!=null&&n.push(uc(t,i,s))),t=t.return}return n}function ka(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function w0(t,e,r,n,s){for(var i=e._reactName,a=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,s?(c=nc(r,i),c!=null&&a.unshift(uc(r,c,l))):s||(c=nc(r,i),c!=null&&a.push(uc(r,c,l)))),r=r.return}a.length!==0&&t.push({event:e,listeners:a})}var jI=/\r\n?/g,kI=/\u0000|\uFFFD/g;function b0(t){return(typeof t=="string"?t:""+t).replace(jI,`
`).replace(kI,"")}function Tu(t,e,r){if(e=b0(e),b0(t)!==e&&r)throw Error(q(425))}function Nd(){}var Zm=null,Xm=null;function ep(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var tp=typeof setTimeout=="function"?setTimeout:void 0,NI=typeof clearTimeout=="function"?clearTimeout:void 0,_0=typeof Promise=="function"?Promise:void 0,CI=typeof queueMicrotask=="function"?queueMicrotask:typeof _0<"u"?function(t){return _0.resolve(null).then(t).catch(EI)}:tp;function EI(t){setTimeout(function(){throw t})}function Lh(t,e){var r=e,n=0;do{var s=r.nextSibling;if(t.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){t.removeChild(s),ac(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);ac(e)}function ai(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function S0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var el=Math.random().toString(36).slice(2),Fn="__reactFiber$"+el,dc="__reactProps$"+el,ys="__reactContainer$"+el,rp="__reactEvents$"+el,PI="__reactListeners$"+el,TI="__reactHandles$"+el;function $i(t){var e=t[Fn];if(e)return e;for(var r=t.parentNode;r;){if(e=r[ys]||r[Fn]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=S0(t);t!==null;){if(r=t[Fn])return r;t=S0(t)}return e}t=r,r=t.parentNode}return null}function Yc(t){return t=t[Fn]||t[ys],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Qa(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(q(33))}function Of(t){return t[dc]||null}var np=[],Ya=-1;function Si(t){return{current:t}}function tt(t){0>Ya||(t.current=np[Ya],np[Ya]=null,Ya--)}function Je(t,e){Ya++,np[Ya]=t.current,t.current=e}var fi={},Ht=Si(fi),Sr=Si(!1),sa=fi;function Do(t,e){var r=t.type.contextTypes;if(!r)return fi;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=e[i];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function jr(t){return t=t.childContextTypes,t!=null}function Cd(){tt(Sr),tt(Ht)}function j0(t,e,r){if(Ht.current!==fi)throw Error(q(168));Je(Ht,e),Je(Sr,r)}function lN(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in e))throw Error(q(108,mR(t)||"Unknown",s));return lt({},r,n)}function Ed(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||fi,sa=Ht.current,Je(Ht,t),Je(Sr,Sr.current),!0}function k0(t,e,r){var n=t.stateNode;if(!n)throw Error(q(169));r?(t=lN(t,e,sa),n.__reactInternalMemoizedMergedChildContext=t,tt(Sr),tt(Ht),Je(Ht,t)):tt(Sr),Je(Sr,r)}var cs=null,Rf=!1,Fh=!1;function cN(t){cs===null?cs=[t]:cs.push(t)}function AI(t){Rf=!0,cN(t)}function ji(){if(!Fh&&cs!==null){Fh=!0;var t=0,e=He;try{var r=cs;for(He=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}cs=null,Rf=!1}catch(s){throw cs!==null&&(cs=cs.slice(t+1)),Ik(Bg,ji),s}finally{He=e,Fh=!1}}return null}var Ja=[],Za=0,Pd=null,Td=0,Hr=[],Kr=0,ia=null,fs=1,hs="";function Oi(t,e){Ja[Za++]=Td,Ja[Za++]=Pd,Pd=t,Td=e}function uN(t,e,r){Hr[Kr++]=fs,Hr[Kr++]=hs,Hr[Kr++]=ia,ia=t;var n=fs;t=hs;var s=32-xn(n)-1;n&=~(1<<s),r+=1;var i=32-xn(e)+s;if(30<i){var a=s-s%5;i=(n&(1<<a)-1).toString(32),n>>=a,s-=a,fs=1<<32-xn(e)+s|r<<s|n,hs=i+t}else fs=1<<i|r<<s|n,hs=t}function Yg(t){t.return!==null&&(Oi(t,1),uN(t,1,0))}function Jg(t){for(;t===Pd;)Pd=Ja[--Za],Ja[Za]=null,Td=Ja[--Za],Ja[Za]=null;for(;t===ia;)ia=Hr[--Kr],Hr[Kr]=null,hs=Hr[--Kr],Hr[Kr]=null,fs=Hr[--Kr],Hr[Kr]=null}var Mr=null,Dr=null,nt=!1,fn=null;function dN(t,e){var r=Gr(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function N0(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Mr=t,Dr=ai(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Mr=t,Dr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=ia!==null?{id:fs,overflow:hs}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Gr(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,Mr=t,Dr=null,!0):!1;default:return!1}}function sp(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ip(t){if(nt){var e=Dr;if(e){var r=e;if(!N0(t,e)){if(sp(t))throw Error(q(418));e=ai(r.nextSibling);var n=Mr;e&&N0(t,e)?dN(n,r):(t.flags=t.flags&-4097|2,nt=!1,Mr=t)}}else{if(sp(t))throw Error(q(418));t.flags=t.flags&-4097|2,nt=!1,Mr=t}}}function C0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Mr=t}function Au(t){if(t!==Mr)return!1;if(!nt)return C0(t),nt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!ep(t.type,t.memoizedProps)),e&&(e=Dr)){if(sp(t))throw fN(),Error(q(418));for(;e;)dN(t,e),e=ai(e.nextSibling)}if(C0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(q(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Dr=ai(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Dr=null}}else Dr=Mr?ai(t.stateNode.nextSibling):null;return!0}function fN(){for(var t=Dr;t;)t=ai(t.nextSibling)}function Mo(){Dr=Mr=null,nt=!1}function Zg(t){fn===null?fn=[t]:fn.push(t)}var OI=Cs.ReactCurrentBatchConfig;function vl(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(q(309));var n=r.stateNode}if(!n)throw Error(q(147,t));var s=n,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var l=s.refs;a===null?delete l[i]:l[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(q(284));if(!r._owner)throw Error(q(290,t))}return t}function Ou(t,e){throw t=Object.prototype.toString.call(e),Error(q(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function E0(t){var e=t._init;return e(t._payload)}function hN(t){function e(w,m){if(t){var x=w.deletions;x===null?(w.deletions=[m],w.flags|=16):x.push(m)}}function r(w,m){if(!t)return null;for(;m!==null;)e(w,m),m=m.sibling;return null}function n(w,m){for(w=new Map;m!==null;)m.key!==null?w.set(m.key,m):w.set(m.index,m),m=m.sibling;return w}function s(w,m){return w=ui(w,m),w.index=0,w.sibling=null,w}function i(w,m,x){return w.index=x,t?(x=w.alternate,x!==null?(x=x.index,x<m?(w.flags|=2,m):x):(w.flags|=2,m)):(w.flags|=1048576,m)}function a(w){return t&&w.alternate===null&&(w.flags|=2),w}function l(w,m,x,_){return m===null||m.tag!==6?(m=qh(x,w.mode,_),m.return=w,m):(m=s(m,x),m.return=w,m)}function c(w,m,x,_){var S=x.type;return S===qa?d(w,m,x.props.children,_,x.key):m!==null&&(m.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===$s&&E0(S)===m.type)?(_=s(m,x.props),_.ref=vl(w,m,x),_.return=w,_):(_=ad(x.type,x.key,x.props,null,w.mode,_),_.ref=vl(w,m,x),_.return=w,_)}function u(w,m,x,_){return m===null||m.tag!==4||m.stateNode.containerInfo!==x.containerInfo||m.stateNode.implementation!==x.implementation?(m=Hh(x,w.mode,_),m.return=w,m):(m=s(m,x.children||[]),m.return=w,m)}function d(w,m,x,_,S){return m===null||m.tag!==7?(m=ea(x,w.mode,_,S),m.return=w,m):(m=s(m,x),m.return=w,m)}function f(w,m,x){if(typeof m=="string"&&m!==""||typeof m=="number")return m=qh(""+m,w.mode,x),m.return=w,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case bu:return x=ad(m.type,m.key,m.props,null,w.mode,x),x.ref=vl(w,null,m),x.return=w,x;case Wa:return m=Hh(m,w.mode,x),m.return=w,m;case $s:var _=m._init;return f(w,_(m._payload),x)}if(Tl(m)||hl(m))return m=ea(m,w.mode,x,null),m.return=w,m;Ou(w,m)}return null}function h(w,m,x,_){var S=m!==null?m.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return S!==null?null:l(w,m,""+x,_);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case bu:return x.key===S?c(w,m,x,_):null;case Wa:return x.key===S?u(w,m,x,_):null;case $s:return S=x._init,h(w,m,S(x._payload),_)}if(Tl(x)||hl(x))return S!==null?null:d(w,m,x,_,null);Ou(w,x)}return null}function v(w,m,x,_,S){if(typeof _=="string"&&_!==""||typeof _=="number")return w=w.get(x)||null,l(m,w,""+_,S);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case bu:return w=w.get(_.key===null?x:_.key)||null,c(m,w,_,S);case Wa:return w=w.get(_.key===null?x:_.key)||null,u(m,w,_,S);case $s:var j=_._init;return v(w,m,x,j(_._payload),S)}if(Tl(_)||hl(_))return w=w.get(x)||null,d(m,w,_,S,null);Ou(m,_)}return null}function p(w,m,x,_){for(var S=null,j=null,k=m,N=m=0,A=null;k!==null&&N<x.length;N++){k.index>N?(A=k,k=null):A=k.sibling;var I=h(w,k,x[N],_);if(I===null){k===null&&(k=A);break}t&&k&&I.alternate===null&&e(w,k),m=i(I,m,N),j===null?S=I:j.sibling=I,j=I,k=A}if(N===x.length)return r(w,k),nt&&Oi(w,N),S;if(k===null){for(;N<x.length;N++)k=f(w,x[N],_),k!==null&&(m=i(k,m,N),j===null?S=k:j.sibling=k,j=k);return nt&&Oi(w,N),S}for(k=n(w,k);N<x.length;N++)A=v(k,w,N,x[N],_),A!==null&&(t&&A.alternate!==null&&k.delete(A.key===null?N:A.key),m=i(A,m,N),j===null?S=A:j.sibling=A,j=A);return t&&k.forEach(function(M){return e(w,M)}),nt&&Oi(w,N),S}function g(w,m,x,_){var S=hl(x);if(typeof S!="function")throw Error(q(150));if(x=S.call(x),x==null)throw Error(q(151));for(var j=S=null,k=m,N=m=0,A=null,I=x.next();k!==null&&!I.done;N++,I=x.next()){k.index>N?(A=k,k=null):A=k.sibling;var M=h(w,k,I.value,_);if(M===null){k===null&&(k=A);break}t&&k&&M.alternate===null&&e(w,k),m=i(M,m,N),j===null?S=M:j.sibling=M,j=M,k=A}if(I.done)return r(w,k),nt&&Oi(w,N),S;if(k===null){for(;!I.done;N++,I=x.next())I=f(w,I.value,_),I!==null&&(m=i(I,m,N),j===null?S=I:j.sibling=I,j=I);return nt&&Oi(w,N),S}for(k=n(w,k);!I.done;N++,I=x.next())I=v(k,w,N,I.value,_),I!==null&&(t&&I.alternate!==null&&k.delete(I.key===null?N:I.key),m=i(I,m,N),j===null?S=I:j.sibling=I,j=I);return t&&k.forEach(function(F){return e(w,F)}),nt&&Oi(w,N),S}function b(w,m,x,_){if(typeof x=="object"&&x!==null&&x.type===qa&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case bu:e:{for(var S=x.key,j=m;j!==null;){if(j.key===S){if(S=x.type,S===qa){if(j.tag===7){r(w,j.sibling),m=s(j,x.props.children),m.return=w,w=m;break e}}else if(j.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===$s&&E0(S)===j.type){r(w,j.sibling),m=s(j,x.props),m.ref=vl(w,j,x),m.return=w,w=m;break e}r(w,j);break}else e(w,j);j=j.sibling}x.type===qa?(m=ea(x.props.children,w.mode,_,x.key),m.return=w,w=m):(_=ad(x.type,x.key,x.props,null,w.mode,_),_.ref=vl(w,m,x),_.return=w,w=_)}return a(w);case Wa:e:{for(j=x.key;m!==null;){if(m.key===j)if(m.tag===4&&m.stateNode.containerInfo===x.containerInfo&&m.stateNode.implementation===x.implementation){r(w,m.sibling),m=s(m,x.children||[]),m.return=w,w=m;break e}else{r(w,m);break}else e(w,m);m=m.sibling}m=Hh(x,w.mode,_),m.return=w,w=m}return a(w);case $s:return j=x._init,b(w,m,j(x._payload),_)}if(Tl(x))return p(w,m,x,_);if(hl(x))return g(w,m,x,_);Ou(w,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,m!==null&&m.tag===6?(r(w,m.sibling),m=s(m,x),m.return=w,w=m):(r(w,m),m=qh(x,w.mode,_),m.return=w,w=m),a(w)):r(w,m)}return b}var Lo=hN(!0),mN=hN(!1),Ad=Si(null),Od=null,Xa=null,Xg=null;function ey(){Xg=Xa=Od=null}function ty(t){var e=Ad.current;tt(Ad),t._currentValue=e}function ap(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function lo(t,e){Od=t,Xg=Xa=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(wr=!0),t.firstContext=null)}function Zr(t){var e=t._currentValue;if(Xg!==t)if(t={context:t,memoizedValue:e,next:null},Xa===null){if(Od===null)throw Error(q(308));Xa=t,Od.dependencies={lanes:0,firstContext:t}}else Xa=Xa.next=t;return e}var Ui=null;function ry(t){Ui===null?Ui=[t]:Ui.push(t)}function pN(t,e,r,n){var s=e.interleaved;return s===null?(r.next=r,ry(e)):(r.next=s.next,s.next=r),e.interleaved=r,vs(t,n)}function vs(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Us=!1;function ny(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function gN(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ms(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function oi(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,Oe&2){var s=n.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),n.pending=e,vs(t,r)}return s=n.interleaved,s===null?(e.next=e,ry(n)):(e.next=s.next,s.next=e),n.interleaved=e,vs(t,r)}function ed(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,zg(t,r)}}function P0(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=a:i=i.next=a,r=r.next}while(r!==null);i===null?s=i=e:i=i.next=e}else s=i=e;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function Rd(t,e,r,n){var s=t.updateQueue;Us=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,a===null?i=u:a.next=u,a=c;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==a&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var f=s.baseState;a=0,d=u=c=null,l=i;do{var h=l.lane,v=l.eventTime;if((n&h)===h){d!==null&&(d=d.next={eventTime:v,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var p=t,g=l;switch(h=e,v=r,g.tag){case 1:if(p=g.payload,typeof p=="function"){f=p.call(v,f,h);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,h=typeof p=="function"?p.call(v,f,h):p,h==null)break e;f=lt({},f,h);break e;case 2:Us=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,h=s.effects,h===null?s.effects=[l]:h.push(l))}else v={eventTime:v,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=v,c=f):d=d.next=v,a|=h;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;h=l,l=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(d===null&&(c=f),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);oa|=a,t.lanes=a,t.memoizedState=f}}function T0(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(q(191,s));s.call(n)}}}var Jc={},Wn=Si(Jc),fc=Si(Jc),hc=Si(Jc);function Bi(t){if(t===Jc)throw Error(q(174));return t}function sy(t,e){switch(Je(hc,e),Je(fc,t),Je(Wn,Jc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Um(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Um(e,t)}tt(Wn),Je(Wn,e)}function Fo(){tt(Wn),tt(fc),tt(hc)}function yN(t){Bi(hc.current);var e=Bi(Wn.current),r=Um(e,t.type);e!==r&&(Je(fc,t),Je(Wn,r))}function iy(t){fc.current===t&&(tt(Wn),tt(fc))}var at=Si(0);function Id(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var $h=[];function ay(){for(var t=0;t<$h.length;t++)$h[t]._workInProgressVersionPrimary=null;$h.length=0}var td=Cs.ReactCurrentDispatcher,Uh=Cs.ReactCurrentBatchConfig,aa=0,ot=null,Ct=null,Tt=null,Dd=!1,zl=!1,mc=0,RI=0;function zt(){throw Error(q(321))}function oy(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!_n(t[r],e[r]))return!1;return!0}function ly(t,e,r,n,s,i){if(aa=i,ot=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,td.current=t===null||t.memoizedState===null?LI:FI,t=r(n,s),zl){i=0;do{if(zl=!1,mc=0,25<=i)throw Error(q(301));i+=1,Tt=Ct=null,e.updateQueue=null,td.current=$I,t=r(n,s)}while(zl)}if(td.current=Md,e=Ct!==null&&Ct.next!==null,aa=0,Tt=Ct=ot=null,Dd=!1,e)throw Error(q(300));return t}function cy(){var t=mc!==0;return mc=0,t}function On(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tt===null?ot.memoizedState=Tt=t:Tt=Tt.next=t,Tt}function Xr(){if(Ct===null){var t=ot.alternate;t=t!==null?t.memoizedState:null}else t=Ct.next;var e=Tt===null?ot.memoizedState:Tt.next;if(e!==null)Tt=e,Ct=t;else{if(t===null)throw Error(q(310));Ct=t,t={memoizedState:Ct.memoizedState,baseState:Ct.baseState,baseQueue:Ct.baseQueue,queue:Ct.queue,next:null},Tt===null?ot.memoizedState=Tt=t:Tt=Tt.next=t}return Tt}function pc(t,e){return typeof e=="function"?e(t):e}function Bh(t){var e=Xr(),r=e.queue;if(r===null)throw Error(q(311));r.lastRenderedReducer=t;var n=Ct,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var l=a=null,c=null,u=i;do{var d=u.lane;if((aa&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:t(n,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,a=n):c=c.next=f,ot.lanes|=d,oa|=d}u=u.next}while(u!==null&&u!==i);c===null?a=n:c.next=l,_n(n,e.memoizedState)||(wr=!0),e.memoizedState=n,e.baseState=a,e.baseQueue=c,r.lastRenderedState=n}if(t=r.interleaved,t!==null){s=t;do i=s.lane,ot.lanes|=i,oa|=i,s=s.next;while(s!==t)}else s===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function zh(t){var e=Xr(),r=e.queue;if(r===null)throw Error(q(311));r.lastRenderedReducer=t;var n=r.dispatch,s=r.pending,i=e.memoizedState;if(s!==null){r.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);_n(i,e.memoizedState)||(wr=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),r.lastRenderedState=i}return[i,n]}function vN(){}function xN(t,e){var r=ot,n=Xr(),s=e(),i=!_n(n.memoizedState,s);if(i&&(n.memoizedState=s,wr=!0),n=n.queue,uy(_N.bind(null,r,n,t),[t]),n.getSnapshot!==e||i||Tt!==null&&Tt.memoizedState.tag&1){if(r.flags|=2048,gc(9,bN.bind(null,r,n,s,e),void 0,null),At===null)throw Error(q(349));aa&30||wN(r,e,s)}return s}function wN(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=ot.updateQueue,e===null?(e={lastEffect:null,stores:null},ot.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function bN(t,e,r,n){e.value=r,e.getSnapshot=n,SN(e)&&jN(t)}function _N(t,e,r){return r(function(){SN(e)&&jN(t)})}function SN(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!_n(t,r)}catch{return!0}}function jN(t){var e=vs(t,1);e!==null&&wn(e,t,1,-1)}function A0(t){var e=On();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:pc,lastRenderedState:t},e.queue=t,t=t.dispatch=MI.bind(null,ot,t),[e.memoizedState,t]}function gc(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=ot.updateQueue,e===null?(e={lastEffect:null,stores:null},ot.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function kN(){return Xr().memoizedState}function rd(t,e,r,n){var s=On();ot.flags|=t,s.memoizedState=gc(1|e,r,void 0,n===void 0?null:n)}function If(t,e,r,n){var s=Xr();n=n===void 0?null:n;var i=void 0;if(Ct!==null){var a=Ct.memoizedState;if(i=a.destroy,n!==null&&oy(n,a.deps)){s.memoizedState=gc(e,r,i,n);return}}ot.flags|=t,s.memoizedState=gc(1|e,r,i,n)}function O0(t,e){return rd(8390656,8,t,e)}function uy(t,e){return If(2048,8,t,e)}function NN(t,e){return If(4,2,t,e)}function CN(t,e){return If(4,4,t,e)}function EN(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function PN(t,e,r){return r=r!=null?r.concat([t]):null,If(4,4,EN.bind(null,e,t),r)}function dy(){}function TN(t,e){var r=Xr();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&oy(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function AN(t,e){var r=Xr();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&oy(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function ON(t,e,r){return aa&21?(_n(r,e)||(r=Lk(),ot.lanes|=r,oa|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,wr=!0),t.memoizedState=r)}function II(t,e){var r=He;He=r!==0&&4>r?r:4,t(!0);var n=Uh.transition;Uh.transition={};try{t(!1),e()}finally{He=r,Uh.transition=n}}function RN(){return Xr().memoizedState}function DI(t,e,r){var n=ci(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},IN(t))DN(e,r);else if(r=pN(t,e,r,n),r!==null){var s=cr();wn(r,t,n,s),MN(r,e,n)}}function MI(t,e,r){var n=ci(t),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(IN(t))DN(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,l=i(a,r);if(s.hasEagerState=!0,s.eagerState=l,_n(l,a)){var c=e.interleaved;c===null?(s.next=s,ry(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}r=pN(t,e,s,n),r!==null&&(s=cr(),wn(r,t,n,s),MN(r,e,n))}}function IN(t){var e=t.alternate;return t===ot||e!==null&&e===ot}function DN(t,e){zl=Dd=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function MN(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,zg(t,r)}}var Md={readContext:Zr,useCallback:zt,useContext:zt,useEffect:zt,useImperativeHandle:zt,useInsertionEffect:zt,useLayoutEffect:zt,useMemo:zt,useReducer:zt,useRef:zt,useState:zt,useDebugValue:zt,useDeferredValue:zt,useTransition:zt,useMutableSource:zt,useSyncExternalStore:zt,useId:zt,unstable_isNewReconciler:!1},LI={readContext:Zr,useCallback:function(t,e){return On().memoizedState=[t,e===void 0?null:e],t},useContext:Zr,useEffect:O0,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,rd(4194308,4,EN.bind(null,e,t),r)},useLayoutEffect:function(t,e){return rd(4194308,4,t,e)},useInsertionEffect:function(t,e){return rd(4,2,t,e)},useMemo:function(t,e){var r=On();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=On();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=DI.bind(null,ot,t),[n.memoizedState,t]},useRef:function(t){var e=On();return t={current:t},e.memoizedState=t},useState:A0,useDebugValue:dy,useDeferredValue:function(t){return On().memoizedState=t},useTransition:function(){var t=A0(!1),e=t[0];return t=II.bind(null,t[1]),On().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=ot,s=On();if(nt){if(r===void 0)throw Error(q(407));r=r()}else{if(r=e(),At===null)throw Error(q(349));aa&30||wN(n,e,r)}s.memoizedState=r;var i={value:r,getSnapshot:e};return s.queue=i,O0(_N.bind(null,n,i,t),[t]),n.flags|=2048,gc(9,bN.bind(null,n,i,r,e),void 0,null),r},useId:function(){var t=On(),e=At.identifierPrefix;if(nt){var r=hs,n=fs;r=(n&~(1<<32-xn(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=mc++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=RI++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},FI={readContext:Zr,useCallback:TN,useContext:Zr,useEffect:uy,useImperativeHandle:PN,useInsertionEffect:NN,useLayoutEffect:CN,useMemo:AN,useReducer:Bh,useRef:kN,useState:function(){return Bh(pc)},useDebugValue:dy,useDeferredValue:function(t){var e=Xr();return ON(e,Ct.memoizedState,t)},useTransition:function(){var t=Bh(pc)[0],e=Xr().memoizedState;return[t,e]},useMutableSource:vN,useSyncExternalStore:xN,useId:RN,unstable_isNewReconciler:!1},$I={readContext:Zr,useCallback:TN,useContext:Zr,useEffect:uy,useImperativeHandle:PN,useInsertionEffect:NN,useLayoutEffect:CN,useMemo:AN,useReducer:zh,useRef:kN,useState:function(){return zh(pc)},useDebugValue:dy,useDeferredValue:function(t){var e=Xr();return Ct===null?e.memoizedState=t:ON(e,Ct.memoizedState,t)},useTransition:function(){var t=zh(pc)[0],e=Xr().memoizedState;return[t,e]},useMutableSource:vN,useSyncExternalStore:xN,useId:RN,unstable_isNewReconciler:!1};function on(t,e){if(t&&t.defaultProps){e=lt({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function op(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:lt({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Df={isMounted:function(t){return(t=t._reactInternals)?wa(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=cr(),s=ci(t),i=ms(n,s);i.payload=e,r!=null&&(i.callback=r),e=oi(t,i,s),e!==null&&(wn(e,t,s,n),ed(e,t,s))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=cr(),s=ci(t),i=ms(n,s);i.tag=1,i.payload=e,r!=null&&(i.callback=r),e=oi(t,i,s),e!==null&&(wn(e,t,s,n),ed(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=cr(),n=ci(t),s=ms(r,n);s.tag=2,e!=null&&(s.callback=e),e=oi(t,s,n),e!==null&&(wn(e,t,n,r),ed(e,t,n))}};function R0(t,e,r,n,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,i,a):e.prototype&&e.prototype.isPureReactComponent?!lc(r,n)||!lc(s,i):!0}function LN(t,e,r){var n=!1,s=fi,i=e.contextType;return typeof i=="object"&&i!==null?i=Zr(i):(s=jr(e)?sa:Ht.current,n=e.contextTypes,i=(n=n!=null)?Do(t,s):fi),e=new e(r,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Df,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function I0(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&Df.enqueueReplaceState(e,e.state,null)}function lp(t,e,r,n){var s=t.stateNode;s.props=r,s.state=t.memoizedState,s.refs={},ny(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Zr(i):(i=jr(e)?sa:Ht.current,s.context=Do(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(op(t,e,i,r),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Df.enqueueReplaceState(s,s.state,null),Rd(t,r,s,n),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function $o(t,e){try{var r="",n=e;do r+=hR(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Vh(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function cp(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var UI=typeof WeakMap=="function"?WeakMap:Map;function FN(t,e,r){r=ms(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){Fd||(Fd=!0,xp=n),cp(t,e)},r}function $N(t,e,r){r=ms(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var s=e.value;r.payload=function(){return n(s)},r.callback=function(){cp(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){cp(t,e),typeof n!="function"&&(li===null?li=new Set([this]):li.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),r}function D0(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new UI;var s=new Set;n.set(e,s)}else s=n.get(e),s===void 0&&(s=new Set,n.set(e,s));s.has(r)||(s.add(r),t=eD.bind(null,t,e,r),e.then(t,t))}function M0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function L0(t,e,r,n,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=ms(-1,1),e.tag=2,oi(r,e,1))),r.lanes|=1),t)}var BI=Cs.ReactCurrentOwner,wr=!1;function tr(t,e,r,n){e.child=t===null?mN(e,null,r,n):Lo(e,t.child,r,n)}function F0(t,e,r,n,s){r=r.render;var i=e.ref;return lo(e,s),n=ly(t,e,r,n,i,s),r=cy(),t!==null&&!wr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,xs(t,e,s)):(nt&&r&&Yg(e),e.flags|=1,tr(t,e,n,s),e.child)}function $0(t,e,r,n,s){if(t===null){var i=r.type;return typeof i=="function"&&!xy(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=i,UN(t,e,i,n,s)):(t=ad(r.type,null,n,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var a=i.memoizedProps;if(r=r.compare,r=r!==null?r:lc,r(a,n)&&t.ref===e.ref)return xs(t,e,s)}return e.flags|=1,t=ui(i,n),t.ref=e.ref,t.return=e,e.child=t}function UN(t,e,r,n,s){if(t!==null){var i=t.memoizedProps;if(lc(i,n)&&t.ref===e.ref)if(wr=!1,e.pendingProps=n=i,(t.lanes&s)!==0)t.flags&131072&&(wr=!0);else return e.lanes=t.lanes,xs(t,e,s)}return up(t,e,r,n,s)}function BN(t,e,r){var n=e.pendingProps,s=n.children,i=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Je(to,Ar),Ar|=r;else{if(!(r&1073741824))return t=i!==null?i.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Je(to,Ar),Ar|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,Je(to,Ar),Ar|=n}else i!==null?(n=i.baseLanes|r,e.memoizedState=null):n=r,Je(to,Ar),Ar|=n;return tr(t,e,s,r),e.child}function zN(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function up(t,e,r,n,s){var i=jr(r)?sa:Ht.current;return i=Do(e,i),lo(e,s),r=ly(t,e,r,n,i,s),n=cy(),t!==null&&!wr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,xs(t,e,s)):(nt&&n&&Yg(e),e.flags|=1,tr(t,e,r,s),e.child)}function U0(t,e,r,n,s){if(jr(r)){var i=!0;Ed(e)}else i=!1;if(lo(e,s),e.stateNode===null)nd(t,e),LN(e,r,n),lp(e,r,n,s),n=!0;else if(t===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var c=a.context,u=r.contextType;typeof u=="object"&&u!==null?u=Zr(u):(u=jr(r)?sa:Ht.current,u=Do(e,u));var d=r.getDerivedStateFromProps,f=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==n||c!==u)&&I0(e,a,n,u),Us=!1;var h=e.memoizedState;a.state=h,Rd(e,n,a,s),c=e.memoizedState,l!==n||h!==c||Sr.current||Us?(typeof d=="function"&&(op(e,r,d,n),c=e.memoizedState),(l=Us||R0(e,r,l,n,h,c,u))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=c),a.props=n,a.state=c,a.context=u,n=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{a=e.stateNode,gN(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:on(e.type,l),a.props=u,f=e.pendingProps,h=a.context,c=r.contextType,typeof c=="object"&&c!==null?c=Zr(c):(c=jr(r)?sa:Ht.current,c=Do(e,c));var v=r.getDerivedStateFromProps;(d=typeof v=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==f||h!==c)&&I0(e,a,n,c),Us=!1,h=e.memoizedState,a.state=h,Rd(e,n,a,s);var p=e.memoizedState;l!==f||h!==p||Sr.current||Us?(typeof v=="function"&&(op(e,r,v,n),p=e.memoizedState),(u=Us||R0(e,r,u,n,h,p,c)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,p,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,p,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=p),a.props=n,a.state=p,a.context=c,n=u):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),n=!1)}return dp(t,e,r,n,i,s)}function dp(t,e,r,n,s,i){zN(t,e);var a=(e.flags&128)!==0;if(!n&&!a)return s&&k0(e,r,!1),xs(t,e,i);n=e.stateNode,BI.current=e;var l=a&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&a?(e.child=Lo(e,t.child,null,i),e.child=Lo(e,null,l,i)):tr(t,e,l,i),e.memoizedState=n.state,s&&k0(e,r,!0),e.child}function VN(t){var e=t.stateNode;e.pendingContext?j0(t,e.pendingContext,e.pendingContext!==e.context):e.context&&j0(t,e.context,!1),sy(t,e.containerInfo)}function B0(t,e,r,n,s){return Mo(),Zg(s),e.flags|=256,tr(t,e,r,n),e.child}var fp={dehydrated:null,treeContext:null,retryLane:0};function hp(t){return{baseLanes:t,cachePool:null,transitions:null}}function WN(t,e,r){var n=e.pendingProps,s=at.current,i=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Je(at,s&1),t===null)return ip(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=n.children,t=n.fallback,i?(n=e.mode,i=e.child,a={mode:"hidden",children:a},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=Ff(a,n,0,null),t=ea(t,n,r,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=hp(r),e.memoizedState=fp,t):fy(e,a));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return zI(t,e,a,n,l,s,r);if(i){i=n.fallback,a=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:n.children};return!(a&1)&&e.child!==s?(n=e.child,n.childLanes=0,n.pendingProps=c,e.deletions=null):(n=ui(s,c),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=ui(l,i):(i=ea(i,a,r,null),i.flags|=2),i.return=e,n.return=e,n.sibling=i,e.child=n,n=i,i=e.child,a=t.child.memoizedState,a=a===null?hp(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~r,e.memoizedState=fp,n}return i=t.child,t=i.sibling,n=ui(i,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function fy(t,e){return e=Ff({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ru(t,e,r,n){return n!==null&&Zg(n),Lo(e,t.child,null,r),t=fy(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function zI(t,e,r,n,s,i,a){if(r)return e.flags&256?(e.flags&=-257,n=Vh(Error(q(422))),Ru(t,e,a,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=n.fallback,s=e.mode,n=Ff({mode:"visible",children:n.children},s,0,null),i=ea(i,s,a,null),i.flags|=2,n.return=e,i.return=e,n.sibling=i,e.child=n,e.mode&1&&Lo(e,t.child,null,a),e.child.memoizedState=hp(a),e.memoizedState=fp,i);if(!(e.mode&1))return Ru(t,e,a,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(q(419)),n=Vh(i,n,void 0),Ru(t,e,a,n)}if(l=(a&t.childLanes)!==0,wr||l){if(n=At,n!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,vs(t,s),wn(n,t,s,-1))}return vy(),n=Vh(Error(q(421))),Ru(t,e,a,n)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=tD.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Dr=ai(s.nextSibling),Mr=e,nt=!0,fn=null,t!==null&&(Hr[Kr++]=fs,Hr[Kr++]=hs,Hr[Kr++]=ia,fs=t.id,hs=t.overflow,ia=e),e=fy(e,n.children),e.flags|=4096,e)}function z0(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),ap(t.return,e,r)}function Wh(t,e,r,n,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function qN(t,e,r){var n=e.pendingProps,s=n.revealOrder,i=n.tail;if(tr(t,e,n.children,r),n=at.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&z0(t,r,e);else if(t.tag===19)z0(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Je(at,n),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(r=e.child,s=null;r!==null;)t=r.alternate,t!==null&&Id(t)===null&&(s=r),r=r.sibling;r=s,r===null?(s=e.child,e.child=null):(s=r.sibling,r.sibling=null),Wh(e,!1,s,r,i);break;case"backwards":for(r=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Id(t)===null){e.child=s;break}t=s.sibling,s.sibling=r,r=s,s=t}Wh(e,!0,r,null,i);break;case"together":Wh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function nd(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function xs(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),oa|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(q(153));if(e.child!==null){for(t=e.child,r=ui(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=ui(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function VI(t,e,r){switch(e.tag){case 3:VN(e),Mo();break;case 5:yN(e);break;case 1:jr(e.type)&&Ed(e);break;case 4:sy(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,s=e.memoizedProps.value;Je(Ad,n._currentValue),n._currentValue=s;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Je(at,at.current&1),e.flags|=128,null):r&e.child.childLanes?WN(t,e,r):(Je(at,at.current&1),t=xs(t,e,r),t!==null?t.sibling:null);Je(at,at.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return qN(t,e,r);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Je(at,at.current),n)break;return null;case 22:case 23:return e.lanes=0,BN(t,e,r)}return xs(t,e,r)}var HN,mp,KN,GN;HN=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};mp=function(){};KN=function(t,e,r,n){var s=t.memoizedProps;if(s!==n){t=e.stateNode,Bi(Wn.current);var i=null;switch(r){case"input":s=Mm(t,s),n=Mm(t,n),i=[];break;case"select":s=lt({},s,{value:void 0}),n=lt({},n,{value:void 0}),i=[];break;case"textarea":s=$m(t,s),n=$m(t,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=Nd)}Bm(r,n);var a;r=null;for(u in s)if(!n.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(a in l)l.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(tc.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var c=n[u];if(l=s!=null?s[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(r||(r={}),r[a]=c[a])}else r||(i||(i=[]),i.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(tc.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&et("scroll",t),i||l===c||(i=[])):(i=i||[]).push(u,c))}r&&(i=i||[]).push("style",r);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};GN=function(t,e,r,n){r!==n&&(e.flags|=4)};function xl(t,e){if(!nt)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Vt(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function WI(t,e,r){var n=e.pendingProps;switch(Jg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vt(e),null;case 1:return jr(e.type)&&Cd(),Vt(e),null;case 3:return n=e.stateNode,Fo(),tt(Sr),tt(Ht),ay(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Au(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,fn!==null&&(_p(fn),fn=null))),mp(t,e),Vt(e),null;case 5:iy(e);var s=Bi(hc.current);if(r=e.type,t!==null&&e.stateNode!=null)KN(t,e,r,n,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(q(166));return Vt(e),null}if(t=Bi(Wn.current),Au(e)){n=e.stateNode,r=e.type;var i=e.memoizedProps;switch(n[Fn]=e,n[dc]=i,t=(e.mode&1)!==0,r){case"dialog":et("cancel",n),et("close",n);break;case"iframe":case"object":case"embed":et("load",n);break;case"video":case"audio":for(s=0;s<Ol.length;s++)et(Ol[s],n);break;case"source":et("error",n);break;case"img":case"image":case"link":et("error",n),et("load",n);break;case"details":et("toggle",n);break;case"input":Jv(n,i),et("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},et("invalid",n);break;case"textarea":Xv(n,i),et("invalid",n)}Bm(r,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&Tu(n.textContent,l,t),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Tu(n.textContent,l,t),s=["children",""+l]):tc.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&et("scroll",n)}switch(r){case"input":_u(n),Zv(n,i,!0);break;case"textarea":_u(n),e0(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=Nd)}n=s,e.updateQueue=n,n!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=_k(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=a.createElement(r,{is:n.is}):(t=a.createElement(r),r==="select"&&(a=t,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):t=a.createElementNS(t,r),t[Fn]=e,t[dc]=n,HN(t,e,!1,!1),e.stateNode=t;e:{switch(a=zm(r,n),r){case"dialog":et("cancel",t),et("close",t),s=n;break;case"iframe":case"object":case"embed":et("load",t),s=n;break;case"video":case"audio":for(s=0;s<Ol.length;s++)et(Ol[s],t);s=n;break;case"source":et("error",t),s=n;break;case"img":case"image":case"link":et("error",t),et("load",t),s=n;break;case"details":et("toggle",t),s=n;break;case"input":Jv(t,n),s=Mm(t,n),et("invalid",t);break;case"option":s=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},s=lt({},n,{value:void 0}),et("invalid",t);break;case"textarea":Xv(t,n),s=$m(t,n),et("invalid",t);break;default:s=n}Bm(r,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?kk(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Sk(t,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&rc(t,c):typeof c=="number"&&rc(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(tc.hasOwnProperty(i)?c!=null&&i==="onScroll"&&et("scroll",t):c!=null&&Mg(t,i,c,a))}switch(r){case"input":_u(t),Zv(t,n,!1);break;case"textarea":_u(t),e0(t);break;case"option":n.value!=null&&t.setAttribute("value",""+di(n.value));break;case"select":t.multiple=!!n.multiple,i=n.value,i!=null?so(t,!!n.multiple,i,!1):n.defaultValue!=null&&so(t,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Nd)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Vt(e),null;case 6:if(t&&e.stateNode!=null)GN(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(q(166));if(r=Bi(hc.current),Bi(Wn.current),Au(e)){if(n=e.stateNode,r=e.memoizedProps,n[Fn]=e,(i=n.nodeValue!==r)&&(t=Mr,t!==null))switch(t.tag){case 3:Tu(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Tu(n.nodeValue,r,(t.mode&1)!==0)}i&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Fn]=e,e.stateNode=n}return Vt(e),null;case 13:if(tt(at),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(nt&&Dr!==null&&e.mode&1&&!(e.flags&128))fN(),Mo(),e.flags|=98560,i=!1;else if(i=Au(e),n!==null&&n.dehydrated!==null){if(t===null){if(!i)throw Error(q(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(q(317));i[Fn]=e}else Mo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Vt(e),i=!1}else fn!==null&&(_p(fn),fn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||at.current&1?Pt===0&&(Pt=3):vy())),e.updateQueue!==null&&(e.flags|=4),Vt(e),null);case 4:return Fo(),mp(t,e),t===null&&cc(e.stateNode.containerInfo),Vt(e),null;case 10:return ty(e.type._context),Vt(e),null;case 17:return jr(e.type)&&Cd(),Vt(e),null;case 19:if(tt(at),i=e.memoizedState,i===null)return Vt(e),null;if(n=(e.flags&128)!==0,a=i.rendering,a===null)if(n)xl(i,!1);else{if(Pt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Id(t),a!==null){for(e.flags|=128,xl(i,!1),n=a.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)i=r,t=n,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Je(at,at.current&1|2),e.child}t=t.sibling}i.tail!==null&&pt()>Uo&&(e.flags|=128,n=!0,xl(i,!1),e.lanes=4194304)}else{if(!n)if(t=Id(a),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),xl(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!nt)return Vt(e),null}else 2*pt()-i.renderingStartTime>Uo&&r!==1073741824&&(e.flags|=128,n=!0,xl(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(r=i.last,r!==null?r.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=pt(),e.sibling=null,r=at.current,Je(at,n?r&1|2:r&1),e):(Vt(e),null);case 22:case 23:return yy(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Ar&1073741824&&(Vt(e),e.subtreeFlags&6&&(e.flags|=8192)):Vt(e),null;case 24:return null;case 25:return null}throw Error(q(156,e.tag))}function qI(t,e){switch(Jg(e),e.tag){case 1:return jr(e.type)&&Cd(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Fo(),tt(Sr),tt(Ht),ay(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return iy(e),null;case 13:if(tt(at),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(q(340));Mo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return tt(at),null;case 4:return Fo(),null;case 10:return ty(e.type._context),null;case 22:case 23:return yy(),null;case 24:return null;default:return null}}var Iu=!1,qt=!1,HI=typeof WeakSet=="function"?WeakSet:Set,te=null;function eo(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){ut(t,e,n)}else r.current=null}function pp(t,e,r){try{r()}catch(n){ut(t,e,n)}}var V0=!1;function KI(t,e){if(Zm=Sd,t=Xk(),Qg(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var a=0,l=-1,c=-1,u=0,d=0,f=t,h=null;t:for(;;){for(var v;f!==r||s!==0&&f.nodeType!==3||(l=a+s),f!==i||n!==0&&f.nodeType!==3||(c=a+n),f.nodeType===3&&(a+=f.nodeValue.length),(v=f.firstChild)!==null;)h=f,f=v;for(;;){if(f===t)break t;if(h===r&&++u===s&&(l=a),h===i&&++d===n&&(c=a),(v=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=v}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Xm={focusedElem:t,selectionRange:r},Sd=!1,te=e;te!==null;)if(e=te,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,te=t;else for(;te!==null;){e=te;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,b=p.memoizedState,w=e.stateNode,m=w.getSnapshotBeforeUpdate(e.elementType===e.type?g:on(e.type,g),b);w.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(q(163))}}catch(_){ut(e,e.return,_)}if(t=e.sibling,t!==null){t.return=e.return,te=t;break}te=e.return}return p=V0,V0=!1,p}function Vl(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&pp(e,r,i)}s=s.next}while(s!==n)}}function Mf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function gp(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function QN(t){var e=t.alternate;e!==null&&(t.alternate=null,QN(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Fn],delete e[dc],delete e[rp],delete e[PI],delete e[TI])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function YN(t){return t.tag===5||t.tag===3||t.tag===4}function W0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||YN(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function yp(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Nd));else if(n!==4&&(t=t.child,t!==null))for(yp(t,e,r),t=t.sibling;t!==null;)yp(t,e,r),t=t.sibling}function vp(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(vp(t,e,r),t=t.sibling;t!==null;)vp(t,e,r),t=t.sibling}var Dt=null,cn=!1;function As(t,e,r){for(r=r.child;r!==null;)JN(t,e,r),r=r.sibling}function JN(t,e,r){if(Vn&&typeof Vn.onCommitFiberUnmount=="function")try{Vn.onCommitFiberUnmount(Ef,r)}catch{}switch(r.tag){case 5:qt||eo(r,e);case 6:var n=Dt,s=cn;Dt=null,As(t,e,r),Dt=n,cn=s,Dt!==null&&(cn?(t=Dt,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Dt.removeChild(r.stateNode));break;case 18:Dt!==null&&(cn?(t=Dt,r=r.stateNode,t.nodeType===8?Lh(t.parentNode,r):t.nodeType===1&&Lh(t,r),ac(t)):Lh(Dt,r.stateNode));break;case 4:n=Dt,s=cn,Dt=r.stateNode.containerInfo,cn=!0,As(t,e,r),Dt=n,cn=s;break;case 0:case 11:case 14:case 15:if(!qt&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&pp(r,e,a),s=s.next}while(s!==n)}As(t,e,r);break;case 1:if(!qt&&(eo(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){ut(r,e,l)}As(t,e,r);break;case 21:As(t,e,r);break;case 22:r.mode&1?(qt=(n=qt)||r.memoizedState!==null,As(t,e,r),qt=n):As(t,e,r);break;default:As(t,e,r)}}function q0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new HI),e.forEach(function(n){var s=rD.bind(null,t,n);r.has(n)||(r.add(n),n.then(s,s))})}}function rn(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:Dt=l.stateNode,cn=!1;break e;case 3:Dt=l.stateNode.containerInfo,cn=!0;break e;case 4:Dt=l.stateNode.containerInfo,cn=!0;break e}l=l.return}if(Dt===null)throw Error(q(160));JN(i,a,s),Dt=null,cn=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){ut(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)ZN(e,t),e=e.sibling}function ZN(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(rn(e,t),Pn(t),n&4){try{Vl(3,t,t.return),Mf(3,t)}catch(g){ut(t,t.return,g)}try{Vl(5,t,t.return)}catch(g){ut(t,t.return,g)}}break;case 1:rn(e,t),Pn(t),n&512&&r!==null&&eo(r,r.return);break;case 5:if(rn(e,t),Pn(t),n&512&&r!==null&&eo(r,r.return),t.flags&32){var s=t.stateNode;try{rc(s,"")}catch(g){ut(t,t.return,g)}}if(n&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,a=r!==null?r.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&wk(s,i),zm(l,a);var u=zm(l,i);for(a=0;a<c.length;a+=2){var d=c[a],f=c[a+1];d==="style"?kk(s,f):d==="dangerouslySetInnerHTML"?Sk(s,f):d==="children"?rc(s,f):Mg(s,d,f,u)}switch(l){case"input":Lm(s,i);break;case"textarea":bk(s,i);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var v=i.value;v!=null?so(s,!!i.multiple,v,!1):h!==!!i.multiple&&(i.defaultValue!=null?so(s,!!i.multiple,i.defaultValue,!0):so(s,!!i.multiple,i.multiple?[]:"",!1))}s[dc]=i}catch(g){ut(t,t.return,g)}}break;case 6:if(rn(e,t),Pn(t),n&4){if(t.stateNode===null)throw Error(q(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(g){ut(t,t.return,g)}}break;case 3:if(rn(e,t),Pn(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{ac(e.containerInfo)}catch(g){ut(t,t.return,g)}break;case 4:rn(e,t),Pn(t);break;case 13:rn(e,t),Pn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(py=pt())),n&4&&q0(t);break;case 22:if(d=r!==null&&r.memoizedState!==null,t.mode&1?(qt=(u=qt)||d,rn(e,t),qt=u):rn(e,t),Pn(t),n&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(te=t,d=t.child;d!==null;){for(f=te=d;te!==null;){switch(h=te,v=h.child,h.tag){case 0:case 11:case 14:case 15:Vl(4,h,h.return);break;case 1:eo(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){n=h,r=h.return;try{e=n,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(g){ut(n,r,g)}}break;case 5:eo(h,h.return);break;case 22:if(h.memoizedState!==null){K0(f);continue}}v!==null?(v.return=h,te=v):K0(f)}d=d.sibling}e:for(d=null,f=t;;){if(f.tag===5){if(d===null){d=f;try{s=f.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=f.stateNode,c=f.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=jk("display",a))}catch(g){ut(t,t.return,g)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(g){ut(t,t.return,g)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:rn(e,t),Pn(t),n&4&&q0(t);break;case 21:break;default:rn(e,t),Pn(t)}}function Pn(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(YN(r)){var n=r;break e}r=r.return}throw Error(q(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(rc(s,""),n.flags&=-33);var i=W0(t);vp(t,i,s);break;case 3:case 4:var a=n.stateNode.containerInfo,l=W0(t);yp(t,l,a);break;default:throw Error(q(161))}}catch(c){ut(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function GI(t,e,r){te=t,XN(t)}function XN(t,e,r){for(var n=(t.mode&1)!==0;te!==null;){var s=te,i=s.child;if(s.tag===22&&n){var a=s.memoizedState!==null||Iu;if(!a){var l=s.alternate,c=l!==null&&l.memoizedState!==null||qt;l=Iu;var u=qt;if(Iu=a,(qt=c)&&!u)for(te=s;te!==null;)a=te,c=a.child,a.tag===22&&a.memoizedState!==null?G0(s):c!==null?(c.return=a,te=c):G0(s);for(;i!==null;)te=i,XN(i),i=i.sibling;te=s,Iu=l,qt=u}H0(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,te=i):H0(t)}}function H0(t){for(;te!==null;){var e=te;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:qt||Mf(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!qt)if(r===null)n.componentDidMount();else{var s=e.elementType===e.type?r.memoizedProps:on(e.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&T0(e,i,n);break;case 3:var a=e.updateQueue;if(a!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}T0(e,a,r)}break;case 5:var l=e.stateNode;if(r===null&&e.flags&4){r=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&ac(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(q(163))}qt||e.flags&512&&gp(e)}catch(h){ut(e,e.return,h)}}if(e===t){te=null;break}if(r=e.sibling,r!==null){r.return=e.return,te=r;break}te=e.return}}function K0(t){for(;te!==null;){var e=te;if(e===t){te=null;break}var r=e.sibling;if(r!==null){r.return=e.return,te=r;break}te=e.return}}function G0(t){for(;te!==null;){var e=te;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{Mf(4,e)}catch(c){ut(e,r,c)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var s=e.return;try{n.componentDidMount()}catch(c){ut(e,s,c)}}var i=e.return;try{gp(e)}catch(c){ut(e,i,c)}break;case 5:var a=e.return;try{gp(e)}catch(c){ut(e,a,c)}}}catch(c){ut(e,e.return,c)}if(e===t){te=null;break}var l=e.sibling;if(l!==null){l.return=e.return,te=l;break}te=e.return}}var QI=Math.ceil,Ld=Cs.ReactCurrentDispatcher,hy=Cs.ReactCurrentOwner,Qr=Cs.ReactCurrentBatchConfig,Oe=0,At=null,_t=null,Lt=0,Ar=0,to=Si(0),Pt=0,yc=null,oa=0,Lf=0,my=0,Wl=null,vr=null,py=0,Uo=1/0,os=null,Fd=!1,xp=null,li=null,Du=!1,ri=null,$d=0,ql=0,wp=null,sd=-1,id=0;function cr(){return Oe&6?pt():sd!==-1?sd:sd=pt()}function ci(t){return t.mode&1?Oe&2&&Lt!==0?Lt&-Lt:OI.transition!==null?(id===0&&(id=Lk()),id):(t=He,t!==0||(t=window.event,t=t===void 0?16:Wk(t.type)),t):1}function wn(t,e,r,n){if(50<ql)throw ql=0,wp=null,Error(q(185));Gc(t,r,n),(!(Oe&2)||t!==At)&&(t===At&&(!(Oe&2)&&(Lf|=r),Pt===4&&zs(t,Lt)),kr(t,n),r===1&&Oe===0&&!(e.mode&1)&&(Uo=pt()+500,Rf&&ji()))}function kr(t,e){var r=t.callbackNode;OR(t,e);var n=_d(t,t===At?Lt:0);if(n===0)r!==null&&n0(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&n0(r),e===1)t.tag===0?AI(Q0.bind(null,t)):cN(Q0.bind(null,t)),CI(function(){!(Oe&6)&&ji()}),r=null;else{switch(Fk(n)){case 1:r=Bg;break;case 4:r=Dk;break;case 16:r=bd;break;case 536870912:r=Mk;break;default:r=bd}r=o1(r,e1.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function e1(t,e){if(sd=-1,id=0,Oe&6)throw Error(q(327));var r=t.callbackNode;if(co()&&t.callbackNode!==r)return null;var n=_d(t,t===At?Lt:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Ud(t,n);else{e=n;var s=Oe;Oe|=2;var i=r1();(At!==t||Lt!==e)&&(os=null,Uo=pt()+500,Xi(t,e));do try{ZI();break}catch(l){t1(t,l)}while(!0);ey(),Ld.current=i,Oe=s,_t!==null?e=0:(At=null,Lt=0,e=Pt)}if(e!==0){if(e===2&&(s=Km(t),s!==0&&(n=s,e=bp(t,s))),e===1)throw r=yc,Xi(t,0),zs(t,n),kr(t,pt()),r;if(e===6)zs(t,n);else{if(s=t.current.alternate,!(n&30)&&!YI(s)&&(e=Ud(t,n),e===2&&(i=Km(t),i!==0&&(n=i,e=bp(t,i))),e===1))throw r=yc,Xi(t,0),zs(t,n),kr(t,pt()),r;switch(t.finishedWork=s,t.finishedLanes=n,e){case 0:case 1:throw Error(q(345));case 2:Ri(t,vr,os);break;case 3:if(zs(t,n),(n&130023424)===n&&(e=py+500-pt(),10<e)){if(_d(t,0)!==0)break;if(s=t.suspendedLanes,(s&n)!==n){cr(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=tp(Ri.bind(null,t,vr,os),e);break}Ri(t,vr,os);break;case 4:if(zs(t,n),(n&4194240)===n)break;for(e=t.eventTimes,s=-1;0<n;){var a=31-xn(n);i=1<<a,a=e[a],a>s&&(s=a),n&=~i}if(n=s,n=pt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*QI(n/1960))-n,10<n){t.timeoutHandle=tp(Ri.bind(null,t,vr,os),n);break}Ri(t,vr,os);break;case 5:Ri(t,vr,os);break;default:throw Error(q(329))}}}return kr(t,pt()),t.callbackNode===r?e1.bind(null,t):null}function bp(t,e){var r=Wl;return t.current.memoizedState.isDehydrated&&(Xi(t,e).flags|=256),t=Ud(t,e),t!==2&&(e=vr,vr=r,e!==null&&_p(e)),t}function _p(t){vr===null?vr=t:vr.push.apply(vr,t)}function YI(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!_n(i(),s))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function zs(t,e){for(e&=~my,e&=~Lf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-xn(e),n=1<<r;t[r]=-1,e&=~n}}function Q0(t){if(Oe&6)throw Error(q(327));co();var e=_d(t,0);if(!(e&1))return kr(t,pt()),null;var r=Ud(t,e);if(t.tag!==0&&r===2){var n=Km(t);n!==0&&(e=n,r=bp(t,n))}if(r===1)throw r=yc,Xi(t,0),zs(t,e),kr(t,pt()),r;if(r===6)throw Error(q(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ri(t,vr,os),kr(t,pt()),null}function gy(t,e){var r=Oe;Oe|=1;try{return t(e)}finally{Oe=r,Oe===0&&(Uo=pt()+500,Rf&&ji())}}function la(t){ri!==null&&ri.tag===0&&!(Oe&6)&&co();var e=Oe;Oe|=1;var r=Qr.transition,n=He;try{if(Qr.transition=null,He=1,t)return t()}finally{He=n,Qr.transition=r,Oe=e,!(Oe&6)&&ji()}}function yy(){Ar=to.current,tt(to)}function Xi(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,NI(r)),_t!==null)for(r=_t.return;r!==null;){var n=r;switch(Jg(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Cd();break;case 3:Fo(),tt(Sr),tt(Ht),ay();break;case 5:iy(n);break;case 4:Fo();break;case 13:tt(at);break;case 19:tt(at);break;case 10:ty(n.type._context);break;case 22:case 23:yy()}r=r.return}if(At=t,_t=t=ui(t.current,null),Lt=Ar=e,Pt=0,yc=null,my=Lf=oa=0,vr=Wl=null,Ui!==null){for(e=0;e<Ui.length;e++)if(r=Ui[e],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var a=i.next;i.next=s,n.next=a}r.pending=n}Ui=null}return t}function t1(t,e){do{var r=_t;try{if(ey(),td.current=Md,Dd){for(var n=ot.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Dd=!1}if(aa=0,Tt=Ct=ot=null,zl=!1,mc=0,hy.current=null,r===null||r.return===null){Pt=1,yc=e,_t=null;break}e:{var i=t,a=r.return,l=r,c=e;if(e=Lt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var v=M0(a);if(v!==null){v.flags&=-257,L0(v,a,l,i,e),v.mode&1&&D0(i,u,e),e=v,c=u;var p=e.updateQueue;if(p===null){var g=new Set;g.add(c),e.updateQueue=g}else p.add(c);break e}else{if(!(e&1)){D0(i,u,e),vy();break e}c=Error(q(426))}}else if(nt&&l.mode&1){var b=M0(a);if(b!==null){!(b.flags&65536)&&(b.flags|=256),L0(b,a,l,i,e),Zg($o(c,l));break e}}i=c=$o(c,l),Pt!==4&&(Pt=2),Wl===null?Wl=[i]:Wl.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var w=FN(i,c,e);P0(i,w);break e;case 1:l=c;var m=i.type,x=i.stateNode;if(!(i.flags&128)&&(typeof m.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(li===null||!li.has(x)))){i.flags|=65536,e&=-e,i.lanes|=e;var _=$N(i,l,e);P0(i,_);break e}}i=i.return}while(i!==null)}s1(r)}catch(S){e=S,_t===r&&r!==null&&(_t=r=r.return);continue}break}while(!0)}function r1(){var t=Ld.current;return Ld.current=Md,t===null?Md:t}function vy(){(Pt===0||Pt===3||Pt===2)&&(Pt=4),At===null||!(oa&268435455)&&!(Lf&268435455)||zs(At,Lt)}function Ud(t,e){var r=Oe;Oe|=2;var n=r1();(At!==t||Lt!==e)&&(os=null,Xi(t,e));do try{JI();break}catch(s){t1(t,s)}while(!0);if(ey(),Oe=r,Ld.current=n,_t!==null)throw Error(q(261));return At=null,Lt=0,Pt}function JI(){for(;_t!==null;)n1(_t)}function ZI(){for(;_t!==null&&!SR();)n1(_t)}function n1(t){var e=a1(t.alternate,t,Ar);t.memoizedProps=t.pendingProps,e===null?s1(t):_t=e,hy.current=null}function s1(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=qI(r,e),r!==null){r.flags&=32767,_t=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Pt=6,_t=null;return}}else if(r=WI(r,e,Ar),r!==null){_t=r;return}if(e=e.sibling,e!==null){_t=e;return}_t=e=t}while(e!==null);Pt===0&&(Pt=5)}function Ri(t,e,r){var n=He,s=Qr.transition;try{Qr.transition=null,He=1,XI(t,e,r,n)}finally{Qr.transition=s,He=n}return null}function XI(t,e,r,n){do co();while(ri!==null);if(Oe&6)throw Error(q(327));r=t.finishedWork;var s=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(q(177));t.callbackNode=null,t.callbackPriority=0;var i=r.lanes|r.childLanes;if(RR(t,i),t===At&&(_t=At=null,Lt=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Du||(Du=!0,o1(bd,function(){return co(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Qr.transition,Qr.transition=null;var a=He;He=1;var l=Oe;Oe|=4,hy.current=null,KI(t,r),ZN(r,t),xI(Xm),Sd=!!Zm,Xm=Zm=null,t.current=r,GI(r),jR(),Oe=l,He=a,Qr.transition=i}else t.current=r;if(Du&&(Du=!1,ri=t,$d=s),i=t.pendingLanes,i===0&&(li=null),CR(r.stateNode),kr(t,pt()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)s=e[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(Fd)throw Fd=!1,t=xp,xp=null,t;return $d&1&&t.tag!==0&&co(),i=t.pendingLanes,i&1?t===wp?ql++:(ql=0,wp=t):ql=0,ji(),null}function co(){if(ri!==null){var t=Fk($d),e=Qr.transition,r=He;try{if(Qr.transition=null,He=16>t?16:t,ri===null)var n=!1;else{if(t=ri,ri=null,$d=0,Oe&6)throw Error(q(331));var s=Oe;for(Oe|=4,te=t.current;te!==null;){var i=te,a=i.child;if(te.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(te=u;te!==null;){var d=te;switch(d.tag){case 0:case 11:case 15:Vl(8,d,i)}var f=d.child;if(f!==null)f.return=d,te=f;else for(;te!==null;){d=te;var h=d.sibling,v=d.return;if(QN(d),d===u){te=null;break}if(h!==null){h.return=v,te=h;break}te=v}}}var p=i.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var b=g.sibling;g.sibling=null,g=b}while(g!==null)}}te=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,te=a;else e:for(;te!==null;){if(i=te,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Vl(9,i,i.return)}var w=i.sibling;if(w!==null){w.return=i.return,te=w;break e}te=i.return}}var m=t.current;for(te=m;te!==null;){a=te;var x=a.child;if(a.subtreeFlags&2064&&x!==null)x.return=a,te=x;else e:for(a=m;te!==null;){if(l=te,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Mf(9,l)}}catch(S){ut(l,l.return,S)}if(l===a){te=null;break e}var _=l.sibling;if(_!==null){_.return=l.return,te=_;break e}te=l.return}}if(Oe=s,ji(),Vn&&typeof Vn.onPostCommitFiberRoot=="function")try{Vn.onPostCommitFiberRoot(Ef,t)}catch{}n=!0}return n}finally{He=r,Qr.transition=e}}return!1}function Y0(t,e,r){e=$o(r,e),e=FN(t,e,1),t=oi(t,e,1),e=cr(),t!==null&&(Gc(t,1,e),kr(t,e))}function ut(t,e,r){if(t.tag===3)Y0(t,t,r);else for(;e!==null;){if(e.tag===3){Y0(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(li===null||!li.has(n))){t=$o(r,t),t=$N(e,t,1),e=oi(e,t,1),t=cr(),e!==null&&(Gc(e,1,t),kr(e,t));break}}e=e.return}}function eD(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=cr(),t.pingedLanes|=t.suspendedLanes&r,At===t&&(Lt&r)===r&&(Pt===4||Pt===3&&(Lt&130023424)===Lt&&500>pt()-py?Xi(t,0):my|=r),kr(t,e)}function i1(t,e){e===0&&(t.mode&1?(e=ku,ku<<=1,!(ku&130023424)&&(ku=4194304)):e=1);var r=cr();t=vs(t,e),t!==null&&(Gc(t,e,r),kr(t,r))}function tD(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),i1(t,r)}function rD(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,s=t.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(q(314))}n!==null&&n.delete(e),i1(t,r)}var a1;a1=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Sr.current)wr=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return wr=!1,VI(t,e,r);wr=!!(t.flags&131072)}else wr=!1,nt&&e.flags&1048576&&uN(e,Td,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;nd(t,e),t=e.pendingProps;var s=Do(e,Ht.current);lo(e,r),s=ly(null,e,n,t,s,r);var i=cy();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,jr(n)?(i=!0,Ed(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,ny(e),s.updater=Df,e.stateNode=s,s._reactInternals=e,lp(e,n,t,r),e=dp(null,e,n,!0,i,r)):(e.tag=0,nt&&i&&Yg(e),tr(null,e,s,r),e=e.child),e;case 16:n=e.elementType;e:{switch(nd(t,e),t=e.pendingProps,s=n._init,n=s(n._payload),e.type=n,s=e.tag=sD(n),t=on(n,t),s){case 0:e=up(null,e,n,t,r);break e;case 1:e=U0(null,e,n,t,r);break e;case 11:e=F0(null,e,n,t,r);break e;case 14:e=$0(null,e,n,on(n.type,t),r);break e}throw Error(q(306,n,""))}return e;case 0:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:on(n,s),up(t,e,n,s,r);case 1:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:on(n,s),U0(t,e,n,s,r);case 3:e:{if(VN(e),t===null)throw Error(q(387));n=e.pendingProps,i=e.memoizedState,s=i.element,gN(t,e),Rd(e,n,null,r);var a=e.memoizedState;if(n=a.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=$o(Error(q(423)),e),e=B0(t,e,n,r,s);break e}else if(n!==s){s=$o(Error(q(424)),e),e=B0(t,e,n,r,s);break e}else for(Dr=ai(e.stateNode.containerInfo.firstChild),Mr=e,nt=!0,fn=null,r=mN(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Mo(),n===s){e=xs(t,e,r);break e}tr(t,e,n,r)}e=e.child}return e;case 5:return yN(e),t===null&&ip(e),n=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,a=s.children,ep(n,s)?a=null:i!==null&&ep(n,i)&&(e.flags|=32),zN(t,e),tr(t,e,a,r),e.child;case 6:return t===null&&ip(e),null;case 13:return WN(t,e,r);case 4:return sy(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Lo(e,null,n,r):tr(t,e,n,r),e.child;case 11:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:on(n,s),F0(t,e,n,s,r);case 7:return tr(t,e,e.pendingProps,r),e.child;case 8:return tr(t,e,e.pendingProps.children,r),e.child;case 12:return tr(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,Je(Ad,n._currentValue),n._currentValue=a,i!==null)if(_n(i.value,a)){if(i.children===s.children&&!Sr.current){e=xs(t,e,r);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=ms(-1,r&-r),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),ap(i.return,r,e),l.lanes|=r;break}c=c.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(q(341));a.lanes|=r,l=a.alternate,l!==null&&(l.lanes|=r),ap(a,r,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}tr(t,e,s.children,r),e=e.child}return e;case 9:return s=e.type,n=e.pendingProps.children,lo(e,r),s=Zr(s),n=n(s),e.flags|=1,tr(t,e,n,r),e.child;case 14:return n=e.type,s=on(n,e.pendingProps),s=on(n.type,s),$0(t,e,n,s,r);case 15:return UN(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:on(n,s),nd(t,e),e.tag=1,jr(n)?(t=!0,Ed(e)):t=!1,lo(e,r),LN(e,n,s),lp(e,n,s,r),dp(null,e,n,!0,t,r);case 19:return qN(t,e,r);case 22:return BN(t,e,r)}throw Error(q(156,e.tag))};function o1(t,e){return Ik(t,e)}function nD(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gr(t,e,r,n){return new nD(t,e,r,n)}function xy(t){return t=t.prototype,!(!t||!t.isReactComponent)}function sD(t){if(typeof t=="function")return xy(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Fg)return 11;if(t===$g)return 14}return 2}function ui(t,e){var r=t.alternate;return r===null?(r=Gr(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function ad(t,e,r,n,s,i){var a=2;if(n=t,typeof t=="function")xy(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case qa:return ea(r.children,s,i,e);case Lg:a=8,s|=8;break;case Om:return t=Gr(12,r,e,s|2),t.elementType=Om,t.lanes=i,t;case Rm:return t=Gr(13,r,e,s),t.elementType=Rm,t.lanes=i,t;case Im:return t=Gr(19,r,e,s),t.elementType=Im,t.lanes=i,t;case yk:return Ff(r,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case pk:a=10;break e;case gk:a=9;break e;case Fg:a=11;break e;case $g:a=14;break e;case $s:a=16,n=null;break e}throw Error(q(130,t==null?t:typeof t,""))}return e=Gr(a,r,e,s),e.elementType=t,e.type=n,e.lanes=i,e}function ea(t,e,r,n){return t=Gr(7,t,n,e),t.lanes=r,t}function Ff(t,e,r,n){return t=Gr(22,t,n,e),t.elementType=yk,t.lanes=r,t.stateNode={isHidden:!1},t}function qh(t,e,r){return t=Gr(6,t,null,e),t.lanes=r,t}function Hh(t,e,r){return e=Gr(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function iD(t,e,r,n,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Nh(0),this.expirationTimes=Nh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Nh(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function wy(t,e,r,n,s,i,a,l,c){return t=new iD(t,e,r,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Gr(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},ny(i),t}function aD(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Wa,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function l1(t){if(!t)return fi;t=t._reactInternals;e:{if(wa(t)!==t||t.tag!==1)throw Error(q(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(jr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(q(171))}if(t.tag===1){var r=t.type;if(jr(r))return lN(t,r,e)}return e}function c1(t,e,r,n,s,i,a,l,c){return t=wy(r,n,!0,t,s,i,a,l,c),t.context=l1(null),r=t.current,n=cr(),s=ci(r),i=ms(n,s),i.callback=e??null,oi(r,i,s),t.current.lanes=s,Gc(t,s,n),kr(t,n),t}function $f(t,e,r,n){var s=e.current,i=cr(),a=ci(s);return r=l1(r),e.context===null?e.context=r:e.pendingContext=r,e=ms(i,a),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=oi(s,e,a),t!==null&&(wn(t,s,a,i),ed(t,s,a)),a}function Bd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function J0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function by(t,e){J0(t,e),(t=t.alternate)&&J0(t,e)}function oD(){return null}var u1=typeof reportError=="function"?reportError:function(t){console.error(t)};function _y(t){this._internalRoot=t}Uf.prototype.render=_y.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(q(409));$f(t,e,null,null)};Uf.prototype.unmount=_y.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;la(function(){$f(null,t,null,null)}),e[ys]=null}};function Uf(t){this._internalRoot=t}Uf.prototype.unstable_scheduleHydration=function(t){if(t){var e=Bk();t={blockedOn:null,target:t,priority:e};for(var r=0;r<Bs.length&&e!==0&&e<Bs[r].priority;r++);Bs.splice(r,0,t),r===0&&Vk(t)}};function Sy(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Bf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Z0(){}function lD(t,e,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var u=Bd(a);i.call(u)}}var a=c1(e,n,t,0,null,!1,!1,"",Z0);return t._reactRootContainer=a,t[ys]=a.current,cc(t.nodeType===8?t.parentNode:t),la(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var u=Bd(c);l.call(u)}}var c=wy(t,0,!1,null,null,!1,!1,"",Z0);return t._reactRootContainer=c,t[ys]=c.current,cc(t.nodeType===8?t.parentNode:t),la(function(){$f(e,c,r,n)}),c}function zf(t,e,r,n,s){var i=r._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var l=s;s=function(){var c=Bd(a);l.call(c)}}$f(e,a,t,s)}else a=lD(r,e,t,s,n);return Bd(a)}$k=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Al(e.pendingLanes);r!==0&&(zg(e,r|1),kr(e,pt()),!(Oe&6)&&(Uo=pt()+500,ji()))}break;case 13:la(function(){var n=vs(t,1);if(n!==null){var s=cr();wn(n,t,1,s)}}),by(t,1)}};Vg=function(t){if(t.tag===13){var e=vs(t,134217728);if(e!==null){var r=cr();wn(e,t,134217728,r)}by(t,134217728)}};Uk=function(t){if(t.tag===13){var e=ci(t),r=vs(t,e);if(r!==null){var n=cr();wn(r,t,e,n)}by(t,e)}};Bk=function(){return He};zk=function(t,e){var r=He;try{return He=t,e()}finally{He=r}};Wm=function(t,e,r){switch(e){case"input":if(Lm(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var s=Of(n);if(!s)throw Error(q(90));xk(n),Lm(n,s)}}}break;case"textarea":bk(t,r);break;case"select":e=r.value,e!=null&&so(t,!!r.multiple,e,!1)}};Ek=gy;Pk=la;var cD={usingClientEntryPoint:!1,Events:[Yc,Qa,Of,Nk,Ck,gy]},wl={findFiberByHostInstance:$i,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},uD={bundleType:wl.bundleType,version:wl.version,rendererPackageName:wl.rendererPackageName,rendererConfig:wl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Cs.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Ok(t),t===null?null:t.stateNode},findFiberByHostInstance:wl.findFiberByHostInstance||oD,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Mu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Mu.isDisabled&&Mu.supportsFiber)try{Ef=Mu.inject(uD),Vn=Mu}catch{}}Br.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cD;Br.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Sy(e))throw Error(q(200));return aD(t,e,null,r)};Br.createRoot=function(t,e){if(!Sy(t))throw Error(q(299));var r=!1,n="",s=u1;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=wy(t,1,!1,null,null,r,!1,n,s),t[ys]=e.current,cc(t.nodeType===8?t.parentNode:t),new _y(e)};Br.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(q(188)):(t=Object.keys(t).join(","),Error(q(268,t)));return t=Ok(e),t=t===null?null:t.stateNode,t};Br.flushSync=function(t){return la(t)};Br.hydrate=function(t,e,r){if(!Bf(e))throw Error(q(200));return zf(null,t,e,!0,r)};Br.hydrateRoot=function(t,e,r){if(!Sy(t))throw Error(q(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",a=u1;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),e=c1(e,null,t,1,r??null,s,!1,i,a),t[ys]=e.current,cc(t),n)for(t=0;t<n.length;t++)r=n[t],s=r._getVersion,s=s(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,s]:e.mutableSourceEagerHydrationData.push(r,s);return new Uf(e)};Br.render=function(t,e,r){if(!Bf(e))throw Error(q(200));return zf(null,t,e,!1,r)};Br.unmountComponentAtNode=function(t){if(!Bf(t))throw Error(q(40));return t._reactRootContainer?(la(function(){zf(null,null,t,!1,function(){t._reactRootContainer=null,t[ys]=null})}),!0):!1};Br.unstable_batchedUpdates=gy;Br.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!Bf(r))throw Error(q(200));if(t==null||t._reactInternals===void 0)throw Error(q(38));return zf(t,e,r,!1,n)};Br.version="18.3.1-next-f1338f8080-20240426";function d1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(d1)}catch(t){console.error(t)}}d1(),dk.exports=Br;var tl=dk.exports;const dD=Zj(tl);var f1,X0=tl;f1=X0.createRoot,X0.hydrateRoot;function fD(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var r,n,s,i,a=[],l="",c=t.split("/");for(c[0]||c.shift();s=c.shift();)r=s[0],r==="*"?(a.push(r),l+=s[1]==="?"?"(?:/(.*))?":"/(.*)"):r===":"?(n=s.indexOf("?",1),i=s.indexOf(".",1),a.push(s.substring(1,~n?n:~i?i:s.length)),l+=~n&&!~i?"(?:/([^/]+?))?":"/([^/]+?)",~i&&(l+=(~n?"?":"")+"\\"+s.substring(i))):l+="/"+s;return{keys:a,pattern:new RegExp("^"+l+(e?"(?=$|/)":"/?$"),"i")}}var h1={exports:{}},m1={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bo=y;function hD(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var mD=typeof Object.is=="function"?Object.is:hD,pD=Bo.useState,gD=Bo.useEffect,yD=Bo.useLayoutEffect,vD=Bo.useDebugValue;function xD(t,e){var r=e(),n=pD({inst:{value:r,getSnapshot:e}}),s=n[0].inst,i=n[1];return yD(function(){s.value=r,s.getSnapshot=e,Kh(s)&&i({inst:s})},[t,r,e]),gD(function(){return Kh(s)&&i({inst:s}),t(function(){Kh(s)&&i({inst:s})})},[t]),vD(r),r}function Kh(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!mD(t,r)}catch{return!0}}function wD(t,e){return e()}var bD=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?wD:xD;m1.useSyncExternalStore=Bo.useSyncExternalStore!==void 0?Bo.useSyncExternalStore:bD;h1.exports=m1;var _D=h1.exports;const SD=ck.useInsertionEffect,jD=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",kD=jD?y.useLayoutEffect:y.useEffect,ND=SD||kD,p1=t=>{const e=y.useRef([t,(...r)=>e[0](...r)]).current;return ND(()=>{e[0]=t}),e[1]},CD="popstate",jy="pushState",ky="replaceState",ED="hashchange",ex=[CD,jy,ky,ED],PD=t=>{for(const e of ex)addEventListener(e,t);return()=>{for(const e of ex)removeEventListener(e,t)}},g1=(t,e)=>_D.useSyncExternalStore(PD,t,e),TD=()=>location.search,AD=({ssrSearch:t=""}={})=>g1(TD,()=>t),tx=()=>location.pathname,OD=({ssrPath:t}={})=>g1(tx,t?()=>t:tx),RD=(t,{replace:e=!1,state:r=null}={})=>history[e?ky:jy](r,"",t),ID=(t={})=>[OD(t),RD],rx=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[rx]>"u"){for(const t of[jy,ky]){const e=history[t];history[t]=function(){const r=e.apply(this,arguments),n=new Event(t);return n.arguments=arguments,dispatchEvent(n),r}}Object.defineProperty(window,rx,{value:!0})}const DD=(t,e)=>e.toLowerCase().indexOf(t.toLowerCase())?"~"+e:e.slice(t.length)||"/",y1=(t="")=>t==="/"?"":t,MD=(t,e)=>t[0]==="~"?t.slice(1):y1(e)+t,LD=(t="",e)=>DD(nx(y1(t)),nx(e)),nx=t=>{try{return decodeURI(t)}catch{return t}},v1={hook:ID,searchHook:AD,parser:fD,base:"",ssrPath:void 0,ssrSearch:void 0,hrefs:t=>t},x1=y.createContext(v1),Zc=()=>y.useContext(x1),w1={},b1=y.createContext(w1),FD=()=>y.useContext(b1),Vf=t=>{const[e,r]=t.hook(t);return[LD(t.base,e),p1((n,s)=>r(MD(n,t.base),s))]},rl=()=>Vf(Zc()),_1=(t,e,r,n)=>{const{pattern:s,keys:i}=e instanceof RegExp?{keys:!1,pattern:e}:t(e||"*",n),a=s.exec(r)||[],[l,...c]=a;return l!==void 0?[!0,(()=>{const u=i!==!1?Object.fromEntries(i.map((f,h)=>[f,c[h]])):a.groups;let d={...c};return u&&Object.assign(d,u),d})(),...n?[l]:[]]:[!1,null]},$D=({children:t,...e})=>{var d,f;const r=Zc(),n=e.hook?v1:r;let s=n;const[i,a]=((d=e.ssrPath)==null?void 0:d.split("?"))??[];a&&(e.ssrSearch=a,e.ssrPath=i),e.hrefs=e.hrefs??((f=e.hook)==null?void 0:f.hrefs);let l=y.useRef({}),c=l.current,u=c;for(let h in n){const v=h==="base"?n[h]+(e[h]||""):e[h]||n[h];c===u&&v!==u[h]&&(l.current=u={...u}),u[h]=v,v!==n[h]&&(s=u)}return y.createElement(x1.Provider,{value:s,children:t})},sx=({children:t,component:e},r)=>e?y.createElement(e,{params:r}):typeof t=="function"?t(r):t,UD=t=>{let e=y.useRef(w1),r=e.current;for(const n in t)t[n]!==r[n]&&(r=t);return Object.keys(t).length===0&&(r=t),e.current=r},jt=({path:t,nest:e,match:r,...n})=>{const s=Zc(),[i]=Vf(s),[a,l,c]=r??_1(s.parser,t,i,e),u=UD({...FD(),...l});if(!a)return null;const d=c?y.createElement($D,{base:c},sx(n,u)):sx(n,u);return y.createElement(b1.Provider,{value:u,children:d})},Ft=y.forwardRef((t,e)=>{const r=Zc(),[n,s]=Vf(r),{to:i="",href:a=i,onClick:l,asChild:c,children:u,className:d,replace:f,state:h,...v}=t,p=p1(b=>{b.ctrlKey||b.metaKey||b.altKey||b.shiftKey||b.button!==0||(l==null||l(b),b.defaultPrevented||(b.preventDefault(),s(a,t)))}),g=r.hrefs(a[0]==="~"?a.slice(1):r.base+a,r);return c&&y.isValidElement(u)?y.cloneElement(u,{onClick:p,href:g}):y.createElement("a",{...v,onClick:p,href:g,className:d!=null&&d.call?d(n===a):d,children:u,ref:e})}),S1=t=>Array.isArray(t)?t.flatMap(e=>S1(e&&e.type===y.Fragment?e.props.children:e)):[t],BD=({children:t,location:e})=>{const r=Zc(),[n]=Vf(r);for(const s of S1(t)){let i=0;if(y.isValidElement(s)&&(i=_1(r.parser,s.props.path,e||n,s.props.nest))[0])return y.cloneElement(s,{match:i})}return null};var nl=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},ca=typeof window>"u"||"Deno"in globalThis;function Wr(){}function zD(t,e){return typeof t=="function"?t(e):t}function Sp(t){return typeof t=="number"&&t>=0&&t!==1/0}function j1(t,e){return Math.max(t+(e||0)-Date.now(),0)}function uo(t,e){return typeof t=="function"?t(e):t}function hn(t,e){return typeof t=="function"?t(e):t}function ix(t,e){const{type:r="all",exact:n,fetchStatus:s,predicate:i,queryKey:a,stale:l}=t;if(a){if(n){if(e.queryHash!==Ny(a,e.options))return!1}else if(!vc(e.queryKey,a))return!1}if(r!=="all"){const c=e.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||s&&s!==e.state.fetchStatus||i&&!i(e))}function ax(t,e){const{exact:r,status:n,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(r){if(ua(e.options.mutationKey)!==ua(i))return!1}else if(!vc(e.options.mutationKey,i))return!1}return!(n&&e.state.status!==n||s&&!s(e))}function Ny(t,e){return((e==null?void 0:e.queryKeyHashFn)||ua)(t)}function ua(t){return JSON.stringify(t,(e,r)=>jp(r)?Object.keys(r).sort().reduce((n,s)=>(n[s]=r[s],n),{}):r)}function vc(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(r=>!vc(t[r],e[r])):!1}function k1(t,e){if(t===e)return t;const r=ox(t)&&ox(e);if(r||jp(t)&&jp(e)){const n=r?t:Object.keys(t),s=n.length,i=r?e:Object.keys(e),a=i.length,l=r?[]:{};let c=0;for(let u=0;u<a;u++){const d=r?u:i[u];(!r&&n.includes(d)||r)&&t[d]===void 0&&e[d]===void 0?(l[d]=void 0,c++):(l[d]=k1(t[d],e[d]),l[d]===t[d]&&t[d]!==void 0&&c++)}return s===a&&c===s?t:l}return e}function zd(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const r in t)if(t[r]!==e[r])return!1;return!0}function ox(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function jp(t){if(!lx(t))return!1;const e=t.constructor;if(e===void 0)return!0;const r=e.prototype;return!(!lx(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function lx(t){return Object.prototype.toString.call(t)==="[object Object]"}function VD(t){return new Promise(e=>{setTimeout(e,t)})}function kp(t,e,r){return typeof r.structuralSharing=="function"?r.structuralSharing(t,e):r.structuralSharing!==!1?k1(t,e):e}function WD(t,e,r=0){const n=[...t,e];return r&&n.length>r?n.slice(1):n}function qD(t,e,r=0){const n=[e,...t];return r&&n.length>r?n.slice(0,-1):n}var Cy=Symbol();function N1(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===Cy?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var Hi,Hs,bo,rb,HD=(rb=class extends nl{constructor(){super();ue(this,Hi);ue(this,Hs);ue(this,bo);Z(this,bo,e=>{if(!ca&&window.addEventListener){const r=()=>e();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){E(this,Hs)||this.setEventListener(E(this,bo))}onUnsubscribe(){var e;this.hasListeners()||((e=E(this,Hs))==null||e.call(this),Z(this,Hs,void 0))}setEventListener(e){var r;Z(this,bo,e),(r=E(this,Hs))==null||r.call(this),Z(this,Hs,e(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(e){E(this,Hi)!==e&&(Z(this,Hi,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(r=>{r(e)})}isFocused(){var e;return typeof E(this,Hi)=="boolean"?E(this,Hi):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Hi=new WeakMap,Hs=new WeakMap,bo=new WeakMap,rb),Ey=new HD,_o,Ks,So,nb,KD=(nb=class extends nl{constructor(){super();ue(this,_o,!0);ue(this,Ks);ue(this,So);Z(this,So,e=>{if(!ca&&window.addEventListener){const r=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){E(this,Ks)||this.setEventListener(E(this,So))}onUnsubscribe(){var e;this.hasListeners()||((e=E(this,Ks))==null||e.call(this),Z(this,Ks,void 0))}setEventListener(e){var r;Z(this,So,e),(r=E(this,Ks))==null||r.call(this),Z(this,Ks,e(this.setOnline.bind(this)))}setOnline(e){E(this,_o)!==e&&(Z(this,_o,e),this.listeners.forEach(n=>{n(e)}))}isOnline(){return E(this,_o)}},_o=new WeakMap,Ks=new WeakMap,So=new WeakMap,nb),Vd=new KD;function Np(){let t,e;const r=new Promise((s,i)=>{t=s,e=i});r.status="pending",r.catch(()=>{});function n(s){Object.assign(r,s),delete r.resolve,delete r.reject}return r.resolve=s=>{n({status:"fulfilled",value:s}),t(s)},r.reject=s=>{n({status:"rejected",reason:s}),e(s)},r}function GD(t){return Math.min(1e3*2**t,3e4)}function C1(t){return(t??"online")==="online"?Vd.isOnline():!0}var E1=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function Gh(t){return t instanceof E1}function P1(t){let e=!1,r=0,n=!1,s;const i=Np(),a=g=>{var b;n||(h(new E1(g)),(b=t.abort)==null||b.call(t))},l=()=>{e=!0},c=()=>{e=!1},u=()=>Ey.isFocused()&&(t.networkMode==="always"||Vd.isOnline())&&t.canRun(),d=()=>C1(t.networkMode)&&t.canRun(),f=g=>{var b;n||(n=!0,(b=t.onSuccess)==null||b.call(t,g),s==null||s(),i.resolve(g))},h=g=>{var b;n||(n=!0,(b=t.onError)==null||b.call(t,g),s==null||s(),i.reject(g))},v=()=>new Promise(g=>{var b;s=w=>{(n||u())&&g(w)},(b=t.onPause)==null||b.call(t)}).then(()=>{var g;s=void 0,n||(g=t.onContinue)==null||g.call(t)}),p=()=>{if(n)return;let g;const b=r===0?t.initialPromise:void 0;try{g=b??t.fn()}catch(w){g=Promise.reject(w)}Promise.resolve(g).then(f).catch(w=>{var j;if(n)return;const m=t.retry??(ca?0:3),x=t.retryDelay??GD,_=typeof x=="function"?x(r,w):x,S=m===!0||typeof m=="number"&&r<m||typeof m=="function"&&m(r,w);if(e||!S){h(w);return}r++,(j=t.onFail)==null||j.call(t,r,w),VD(_).then(()=>u()?void 0:v()).then(()=>{e?h(w):p()})})};return{promise:i,cancel:a,continue:()=>(s==null||s(),i),cancelRetry:l,continueRetry:c,canStart:d,start:()=>(d()?p():v().then(p),i)}}function QD(){let t=[],e=0,r=l=>{l()},n=l=>{l()},s=l=>setTimeout(l,0);const i=l=>{e?t.push(l):s(()=>{r(l)})},a=()=>{const l=t;t=[],l.length&&s(()=>{n(()=>{l.forEach(c=>{r(c)})})})};return{batch:l=>{let c;e++;try{c=l()}finally{e--,e||a()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{n=l},setScheduler:l=>{s=l}}}var Et=QD(),Ki,sb,T1=(sb=class{constructor(){ue(this,Ki)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Sp(this.gcTime)&&Z(this,Ki,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(ca?1/0:5*60*1e3))}clearGcTimeout(){E(this,Ki)&&(clearTimeout(E(this,Ki)),Z(this,Ki,void 0))}},Ki=new WeakMap,sb),jo,ko,Vr,Wt,Vc,Gi,ln,is,ib,YD=(ib=class extends T1{constructor(e){super();ue(this,ln);ue(this,jo);ue(this,ko);ue(this,Vr);ue(this,Wt);ue(this,Vc);ue(this,Gi);Z(this,Gi,!1),Z(this,Vc,e.defaultOptions),this.setOptions(e.options),this.observers=[],Z(this,Vr,e.cache),this.queryKey=e.queryKey,this.queryHash=e.queryHash,Z(this,jo,JD(this.options)),this.state=e.state??E(this,jo),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=E(this,Wt))==null?void 0:e.promise}setOptions(e){this.options={...E(this,Vc),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&E(this,Vr).remove(this)}setData(e,r){const n=kp(this.state.data,e,this.options);return _e(this,ln,is).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(e,r){_e(this,ln,is).call(this,{type:"setState",state:e,setStateOptions:r})}cancel(e){var n,s;const r=(n=E(this,Wt))==null?void 0:n.promise;return(s=E(this,Wt))==null||s.cancel(e),r?r.then(Wr).catch(Wr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(E(this,jo))}isActive(){return this.observers.some(e=>hn(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Cy||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(e=0){return this.state.isInvalidated||this.state.data===void 0||!j1(this.state.dataUpdatedAt,e)}onFocus(){var r;const e=this.observers.find(n=>n.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(r=E(this,Wt))==null||r.continue()}onOnline(){var r;const e=this.observers.find(n=>n.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(r=E(this,Wt))==null||r.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),E(this,Vr).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(r=>r!==e),this.observers.length||(E(this,Wt)&&(E(this,Gi)?E(this,Wt).cancel({revert:!0}):E(this,Wt).cancelRetry()),this.scheduleGc()),E(this,Vr).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||_e(this,ln,is).call(this,{type:"invalidate"})}fetch(e,r){var c,u,d;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(E(this,Wt))return E(this,Wt).continueRetry(),E(this,Wt).promise}if(e&&this.setOptions(e),!this.options.queryFn){const f=this.observers.find(h=>h.options.queryFn);f&&this.setOptions(f.options)}const n=new AbortController,s=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>(Z(this,Gi,!0),n.signal)})},i=()=>{const f=N1(this.options,r),h={queryKey:this.queryKey,meta:this.meta};return s(h),Z(this,Gi,!1),this.options.persister?this.options.persister(f,h,this):f(h)},a={fetchOptions:r,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:i};s(a),(c=this.options.behavior)==null||c.onFetch(a,this),Z(this,ko,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=a.fetchOptions)==null?void 0:u.meta))&&_e(this,ln,is).call(this,{type:"fetch",meta:(d=a.fetchOptions)==null?void 0:d.meta});const l=f=>{var h,v,p,g;Gh(f)&&f.silent||_e(this,ln,is).call(this,{type:"error",error:f}),Gh(f)||((v=(h=E(this,Vr).config).onError)==null||v.call(h,f,this),(g=(p=E(this,Vr).config).onSettled)==null||g.call(p,this.state.data,f,this)),this.scheduleGc()};return Z(this,Wt,P1({initialPromise:r==null?void 0:r.initialPromise,fn:a.fetchFn,abort:n.abort.bind(n),onSuccess:f=>{var h,v,p,g;if(f===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(f)}catch(b){l(b);return}(v=(h=E(this,Vr).config).onSuccess)==null||v.call(h,f,this),(g=(p=E(this,Vr).config).onSettled)==null||g.call(p,f,this.state.error,this),this.scheduleGc()},onError:l,onFail:(f,h)=>{_e(this,ln,is).call(this,{type:"failed",failureCount:f,error:h})},onPause:()=>{_e(this,ln,is).call(this,{type:"pause"})},onContinue:()=>{_e(this,ln,is).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),E(this,Wt).start()}},jo=new WeakMap,ko=new WeakMap,Vr=new WeakMap,Wt=new WeakMap,Vc=new WeakMap,Gi=new WeakMap,ln=new WeakSet,is=function(e){const r=n=>{switch(e.type){case"failed":return{...n,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...A1(n.data,this.options),fetchMeta:e.meta??null};case"success":return{...n,data:e.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=e.error;return Gh(s)&&s.revert&&E(this,ko)?{...E(this,ko),fetchStatus:"idle"}:{...n,error:s,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...e.state}}};this.state=r(this.state),Et.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),E(this,Vr).notify({query:this,type:"updated",action:e})})},ib);function A1(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:C1(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function JD(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,r=e!==void 0,n=r?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var In,ab,ZD=(ab=class extends nl{constructor(e={}){super();ue(this,In);this.config=e,Z(this,In,new Map)}build(e,r,n){const s=r.queryKey,i=r.queryHash??Ny(s,r);let a=this.get(i);return a||(a=new YD({cache:this,queryKey:s,queryHash:i,options:e.defaultQueryOptions(r),state:n,defaultOptions:e.getQueryDefaults(s)}),this.add(a)),a}add(e){E(this,In).has(e.queryHash)||(E(this,In).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const r=E(this,In).get(e.queryHash);r&&(e.destroy(),r===e&&E(this,In).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Et.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return E(this,In).get(e)}getAll(){return[...E(this,In).values()]}find(e){const r={exact:!0,...e};return this.getAll().find(n=>ix(r,n))}findAll(e={}){const r=this.getAll();return Object.keys(e).length>0?r.filter(n=>ix(e,n)):r}notify(e){Et.batch(()=>{this.listeners.forEach(r=>{r(e)})})}onFocus(){Et.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Et.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},In=new WeakMap,ab),Dn,Zt,Qi,Mn,Ms,ob,XD=(ob=class extends T1{constructor(e){super();ue(this,Mn);ue(this,Dn);ue(this,Zt);ue(this,Qi);this.mutationId=e.mutationId,Z(this,Zt,e.mutationCache),Z(this,Dn,[]),this.state=e.state||O1(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){E(this,Dn).includes(e)||(E(this,Dn).push(e),this.clearGcTimeout(),E(this,Zt).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){Z(this,Dn,E(this,Dn).filter(r=>r!==e)),this.scheduleGc(),E(this,Zt).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){E(this,Dn).length||(this.state.status==="pending"?this.scheduleGc():E(this,Zt).remove(this))}continue(){var e;return((e=E(this,Qi))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var s,i,a,l,c,u,d,f,h,v,p,g,b,w,m,x,_,S,j,k;Z(this,Qi,P1({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(N,A)=>{_e(this,Mn,Ms).call(this,{type:"failed",failureCount:N,error:A})},onPause:()=>{_e(this,Mn,Ms).call(this,{type:"pause"})},onContinue:()=>{_e(this,Mn,Ms).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>E(this,Zt).canRun(this)}));const r=this.state.status==="pending",n=!E(this,Qi).canStart();try{if(!r){_e(this,Mn,Ms).call(this,{type:"pending",variables:e,isPaused:n}),await((i=(s=E(this,Zt).config).onMutate)==null?void 0:i.call(s,e,this));const A=await((l=(a=this.options).onMutate)==null?void 0:l.call(a,e));A!==this.state.context&&_e(this,Mn,Ms).call(this,{type:"pending",context:A,variables:e,isPaused:n})}const N=await E(this,Qi).start();return await((u=(c=E(this,Zt).config).onSuccess)==null?void 0:u.call(c,N,e,this.state.context,this)),await((f=(d=this.options).onSuccess)==null?void 0:f.call(d,N,e,this.state.context)),await((v=(h=E(this,Zt).config).onSettled)==null?void 0:v.call(h,N,null,this.state.variables,this.state.context,this)),await((g=(p=this.options).onSettled)==null?void 0:g.call(p,N,null,e,this.state.context)),_e(this,Mn,Ms).call(this,{type:"success",data:N}),N}catch(N){try{throw await((w=(b=E(this,Zt).config).onError)==null?void 0:w.call(b,N,e,this.state.context,this)),await((x=(m=this.options).onError)==null?void 0:x.call(m,N,e,this.state.context)),await((S=(_=E(this,Zt).config).onSettled)==null?void 0:S.call(_,void 0,N,this.state.variables,this.state.context,this)),await((k=(j=this.options).onSettled)==null?void 0:k.call(j,void 0,N,e,this.state.context)),N}finally{_e(this,Mn,Ms).call(this,{type:"error",error:N})}}finally{E(this,Zt).runNext(this)}}},Dn=new WeakMap,Zt=new WeakMap,Qi=new WeakMap,Mn=new WeakSet,Ms=function(e){const r=n=>{switch(e.type){case"failed":return{...n,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...n,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:e.error,failureCount:n.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Et.batch(()=>{E(this,Dn).forEach(n=>{n.onMutationUpdate(e)}),E(this,Zt).notify({mutation:this,type:"updated",action:e})})},ob);function O1(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Tr,Wc,lb,eM=(lb=class extends nl{constructor(e={}){super();ue(this,Tr);ue(this,Wc);this.config=e,Z(this,Tr,new Map),Z(this,Wc,Date.now())}build(e,r,n){const s=new XD({mutationCache:this,mutationId:++xu(this,Wc)._,options:e.defaultMutationOptions(r),state:n});return this.add(s),s}add(e){const r=Lu(e),n=E(this,Tr).get(r)??[];n.push(e),E(this,Tr).set(r,n),this.notify({type:"added",mutation:e})}remove(e){var n;const r=Lu(e);if(E(this,Tr).has(r)){const s=(n=E(this,Tr).get(r))==null?void 0:n.filter(i=>i!==e);s&&(s.length===0?E(this,Tr).delete(r):E(this,Tr).set(r,s))}this.notify({type:"removed",mutation:e})}canRun(e){var n;const r=(n=E(this,Tr).get(Lu(e)))==null?void 0:n.find(s=>s.state.status==="pending");return!r||r===e}runNext(e){var n;const r=(n=E(this,Tr).get(Lu(e)))==null?void 0:n.find(s=>s!==e&&s.state.isPaused);return(r==null?void 0:r.continue())??Promise.resolve()}clear(){Et.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...E(this,Tr).values()].flat()}find(e){const r={exact:!0,...e};return this.getAll().find(n=>ax(r,n))}findAll(e={}){return this.getAll().filter(r=>ax(e,r))}notify(e){Et.batch(()=>{this.listeners.forEach(r=>{r(e)})})}resumePausedMutations(){const e=this.getAll().filter(r=>r.state.isPaused);return Et.batch(()=>Promise.all(e.map(r=>r.continue().catch(Wr))))}},Tr=new WeakMap,Wc=new WeakMap,lb);function Lu(t){var e;return((e=t.options.scope)==null?void 0:e.id)??String(t.mutationId)}function cx(t){return{onFetch:(e,r)=>{var d,f,h,v,p;const n=e.options,s=(h=(f=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:f.fetchMore)==null?void 0:h.direction,i=((v=e.state.data)==null?void 0:v.pages)||[],a=((p=e.state.data)==null?void 0:p.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let g=!1;const b=x=>{Object.defineProperty(x,"signal",{enumerable:!0,get:()=>(e.signal.aborted?g=!0:e.signal.addEventListener("abort",()=>{g=!0}),e.signal)})},w=N1(e.options,e.fetchOptions),m=async(x,_,S)=>{if(g)return Promise.reject();if(_==null&&x.pages.length)return Promise.resolve(x);const j={queryKey:e.queryKey,pageParam:_,direction:S?"backward":"forward",meta:e.options.meta};b(j);const k=await w(j),{maxPages:N}=e.options,A=S?qD:WD;return{pages:A(x.pages,k,N),pageParams:A(x.pageParams,_,N)}};if(s&&i.length){const x=s==="backward",_=x?tM:ux,S={pages:i,pageParams:a},j=_(n,S);l=await m(S,j,x)}else{const x=t??i.length;do{const _=c===0?a[0]??n.initialPageParam:ux(n,l);if(c>0&&_==null)break;l=await m(l,_),c++}while(c<x)}return l};e.options.persister?e.fetchFn=()=>{var g,b;return(b=(g=e.options).persister)==null?void 0:b.call(g,u,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},r)}:e.fetchFn=u}}}function ux(t,{pages:e,pageParams:r}){const n=e.length-1;return e.length>0?t.getNextPageParam(e[n],e,r[n],r):void 0}function tM(t,{pages:e,pageParams:r}){var n;return e.length>0?(n=t.getPreviousPageParam)==null?void 0:n.call(t,e[0],e,r[0],r):void 0}var ct,Gs,Qs,No,Co,Ys,Eo,Po,cb,rM=(cb=class{constructor(t={}){ue(this,ct);ue(this,Gs);ue(this,Qs);ue(this,No);ue(this,Co);ue(this,Ys);ue(this,Eo);ue(this,Po);Z(this,ct,t.queryCache||new ZD),Z(this,Gs,t.mutationCache||new eM),Z(this,Qs,t.defaultOptions||{}),Z(this,No,new Map),Z(this,Co,new Map),Z(this,Ys,0)}mount(){xu(this,Ys)._++,E(this,Ys)===1&&(Z(this,Eo,Ey.subscribe(async t=>{t&&(await this.resumePausedMutations(),E(this,ct).onFocus())})),Z(this,Po,Vd.subscribe(async t=>{t&&(await this.resumePausedMutations(),E(this,ct).onOnline())})))}unmount(){var t,e;xu(this,Ys)._--,E(this,Ys)===0&&((t=E(this,Eo))==null||t.call(this),Z(this,Eo,void 0),(e=E(this,Po))==null||e.call(this),Z(this,Po,void 0))}isFetching(t){return E(this,ct).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return E(this,Gs).findAll({...t,status:"pending"}).length}getQueryData(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=E(this,ct).get(e.queryHash))==null?void 0:r.state.data}ensureQueryData(t){const e=this.getQueryData(t.queryKey);if(e===void 0)return this.fetchQuery(t);{const r=this.defaultQueryOptions(t),n=E(this,ct).build(this,r);return t.revalidateIfStale&&n.isStaleByTime(uo(r.staleTime,n))&&this.prefetchQuery(r),Promise.resolve(e)}}getQueriesData(t){return E(this,ct).findAll(t).map(({queryKey:e,state:r})=>{const n=r.data;return[e,n]})}setQueryData(t,e,r){const n=this.defaultQueryOptions({queryKey:t}),s=E(this,ct).get(n.queryHash),i=s==null?void 0:s.state.data,a=zD(e,i);if(a!==void 0)return E(this,ct).build(this,n).setData(a,{...r,manual:!0})}setQueriesData(t,e,r){return Et.batch(()=>E(this,ct).findAll(t).map(({queryKey:n})=>[n,this.setQueryData(n,e,r)]))}getQueryState(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=E(this,ct).get(e.queryHash))==null?void 0:r.state}removeQueries(t){const e=E(this,ct);Et.batch(()=>{e.findAll(t).forEach(r=>{e.remove(r)})})}resetQueries(t,e){const r=E(this,ct),n={type:"active",...t};return Et.batch(()=>(r.findAll(t).forEach(s=>{s.reset()}),this.refetchQueries(n,e)))}cancelQueries(t={},e={}){const r={revert:!0,...e},n=Et.batch(()=>E(this,ct).findAll(t).map(s=>s.cancel(r)));return Promise.all(n).then(Wr).catch(Wr)}invalidateQueries(t={},e={}){return Et.batch(()=>{if(E(this,ct).findAll(t).forEach(n=>{n.invalidate()}),t.refetchType==="none")return Promise.resolve();const r={...t,type:t.refetchType??t.type??"active"};return this.refetchQueries(r,e)})}refetchQueries(t={},e){const r={...e,cancelRefetch:(e==null?void 0:e.cancelRefetch)??!0},n=Et.batch(()=>E(this,ct).findAll(t).filter(s=>!s.isDisabled()).map(s=>{let i=s.fetch(void 0,r);return r.throwOnError||(i=i.catch(Wr)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(n).then(Wr)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const r=E(this,ct).build(this,e);return r.isStaleByTime(uo(e.staleTime,r))?r.fetch(e):Promise.resolve(r.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Wr).catch(Wr)}fetchInfiniteQuery(t){return t.behavior=cx(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Wr).catch(Wr)}ensureInfiniteQueryData(t){return t.behavior=cx(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Vd.isOnline()?E(this,Gs).resumePausedMutations():Promise.resolve()}getQueryCache(){return E(this,ct)}getMutationCache(){return E(this,Gs)}getDefaultOptions(){return E(this,Qs)}setDefaultOptions(t){Z(this,Qs,t)}setQueryDefaults(t,e){E(this,No).set(ua(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...E(this,No).values()];let r={};return e.forEach(n=>{vc(t,n.queryKey)&&(r={...r,...n.defaultOptions})}),r}setMutationDefaults(t,e){E(this,Co).set(ua(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...E(this,Co).values()];let r={};return e.forEach(n=>{vc(t,n.mutationKey)&&(r={...r,...n.defaultOptions})}),r}defaultQueryOptions(t){if(t._defaulted)return t;const e={...E(this,Qs).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Ny(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.enabled!==!0&&e.queryFn===Cy&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...E(this,Qs).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){E(this,ct).clear(),E(this,Gs).clear()}},ct=new WeakMap,Gs=new WeakMap,Qs=new WeakMap,No=new WeakMap,Co=new WeakMap,Ys=new WeakMap,Eo=new WeakMap,Po=new WeakMap,cb),gr,Ee,qc,Xt,Yi,To,Js,Ln,Hc,Ao,Oo,Ji,Zi,Zs,Ro,Ve,Rl,Cp,Ep,Pp,Tp,Ap,Op,Rp,R1,ub,nM=(ub=class extends nl{constructor(e,r){super();ue(this,Ve);ue(this,gr);ue(this,Ee);ue(this,qc);ue(this,Xt);ue(this,Yi);ue(this,To);ue(this,Js);ue(this,Ln);ue(this,Hc);ue(this,Ao);ue(this,Oo);ue(this,Ji);ue(this,Zi);ue(this,Zs);ue(this,Ro,new Set);this.options=r,Z(this,gr,e),Z(this,Ln,null),Z(this,Js,Np()),this.options.experimental_prefetchInRender||E(this,Js).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(E(this,Ee).addObserver(this),dx(E(this,Ee),this.options)?_e(this,Ve,Rl).call(this):this.updateResult(),_e(this,Ve,Tp).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Ip(E(this,Ee),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Ip(E(this,Ee),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,_e(this,Ve,Ap).call(this),_e(this,Ve,Op).call(this),E(this,Ee).removeObserver(this)}setOptions(e,r){const n=this.options,s=E(this,Ee);if(this.options=E(this,gr).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof hn(this.options.enabled,E(this,Ee))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");_e(this,Ve,Rp).call(this),E(this,Ee).setOptions(this.options),n._defaulted&&!zd(this.options,n)&&E(this,gr).getQueryCache().notify({type:"observerOptionsUpdated",query:E(this,Ee),observer:this});const i=this.hasListeners();i&&fx(E(this,Ee),s,this.options,n)&&_e(this,Ve,Rl).call(this),this.updateResult(r),i&&(E(this,Ee)!==s||hn(this.options.enabled,E(this,Ee))!==hn(n.enabled,E(this,Ee))||uo(this.options.staleTime,E(this,Ee))!==uo(n.staleTime,E(this,Ee)))&&_e(this,Ve,Cp).call(this);const a=_e(this,Ve,Ep).call(this);i&&(E(this,Ee)!==s||hn(this.options.enabled,E(this,Ee))!==hn(n.enabled,E(this,Ee))||a!==E(this,Zs))&&_e(this,Ve,Pp).call(this,a)}getOptimisticResult(e){const r=E(this,gr).getQueryCache().build(E(this,gr),e),n=this.createResult(r,e);return iM(this,n)&&(Z(this,Xt,n),Z(this,To,this.options),Z(this,Yi,E(this,Ee).state)),n}getCurrentResult(){return E(this,Xt)}trackResult(e,r){const n={};return Object.keys(e).forEach(s=>{Object.defineProperty(n,s,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(s),r==null||r(s),e[s])})}),n}trackProp(e){E(this,Ro).add(e)}getCurrentQuery(){return E(this,Ee)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const r=E(this,gr).defaultQueryOptions(e),n=E(this,gr).getQueryCache().build(E(this,gr),r);return n.fetch().then(()=>this.createResult(n,r))}fetch(e){return _e(this,Ve,Rl).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),E(this,Xt)))}createResult(e,r){var N;const n=E(this,Ee),s=this.options,i=E(this,Xt),a=E(this,Yi),l=E(this,To),u=e!==n?e.state:E(this,qc),{state:d}=e;let f={...d},h=!1,v;if(r._optimisticResults){const A=this.hasListeners(),I=!A&&dx(e,r),M=A&&fx(e,n,r,s);(I||M)&&(f={...f,...A1(d.data,e.options)}),r._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:p,errorUpdatedAt:g,status:b}=f;if(r.select&&f.data!==void 0)if(i&&f.data===(a==null?void 0:a.data)&&r.select===E(this,Hc))v=E(this,Ao);else try{Z(this,Hc,r.select),v=r.select(f.data),v=kp(i==null?void 0:i.data,v,r),Z(this,Ao,v),Z(this,Ln,null)}catch(A){Z(this,Ln,A)}else v=f.data;if(r.placeholderData!==void 0&&v===void 0&&b==="pending"){let A;if(i!=null&&i.isPlaceholderData&&r.placeholderData===(l==null?void 0:l.placeholderData))A=i.data;else if(A=typeof r.placeholderData=="function"?r.placeholderData((N=E(this,Oo))==null?void 0:N.state.data,E(this,Oo)):r.placeholderData,r.select&&A!==void 0)try{A=r.select(A),Z(this,Ln,null)}catch(I){Z(this,Ln,I)}A!==void 0&&(b="success",v=kp(i==null?void 0:i.data,A,r),h=!0)}E(this,Ln)&&(p=E(this,Ln),v=E(this,Ao),g=Date.now(),b="error");const w=f.fetchStatus==="fetching",m=b==="pending",x=b==="error",_=m&&w,S=v!==void 0,k={status:b,fetchStatus:f.fetchStatus,isPending:m,isSuccess:b==="success",isError:x,isInitialLoading:_,isLoading:_,data:v,dataUpdatedAt:f.dataUpdatedAt,error:p,errorUpdatedAt:g,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>u.dataUpdateCount||f.errorUpdateCount>u.errorUpdateCount,isFetching:w,isRefetching:w&&!m,isLoadingError:x&&!S,isPaused:f.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:x&&S,isStale:Py(e,r),refetch:this.refetch,promise:E(this,Js)};if(this.options.experimental_prefetchInRender){const A=F=>{k.status==="error"?F.reject(k.error):k.data!==void 0&&F.resolve(k.data)},I=()=>{const F=Z(this,Js,k.promise=Np());A(F)},M=E(this,Js);switch(M.status){case"pending":e.queryHash===n.queryHash&&A(M);break;case"fulfilled":(k.status==="error"||k.data!==M.value)&&I();break;case"rejected":(k.status!=="error"||k.error!==M.reason)&&I();break}}return k}updateResult(e){const r=E(this,Xt),n=this.createResult(E(this,Ee),this.options);if(Z(this,Yi,E(this,Ee).state),Z(this,To,this.options),E(this,Yi).data!==void 0&&Z(this,Oo,E(this,Ee)),zd(n,r))return;Z(this,Xt,n);const s={},i=()=>{if(!r)return!0;const{notifyOnChangeProps:a}=this.options,l=typeof a=="function"?a():a;if(l==="all"||!l&&!E(this,Ro).size)return!0;const c=new Set(l??E(this,Ro));return this.options.throwOnError&&c.add("error"),Object.keys(E(this,Xt)).some(u=>{const d=u;return E(this,Xt)[d]!==r[d]&&c.has(d)})};(e==null?void 0:e.listeners)!==!1&&i()&&(s.listeners=!0),_e(this,Ve,R1).call(this,{...s,...e})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&_e(this,Ve,Tp).call(this)}},gr=new WeakMap,Ee=new WeakMap,qc=new WeakMap,Xt=new WeakMap,Yi=new WeakMap,To=new WeakMap,Js=new WeakMap,Ln=new WeakMap,Hc=new WeakMap,Ao=new WeakMap,Oo=new WeakMap,Ji=new WeakMap,Zi=new WeakMap,Zs=new WeakMap,Ro=new WeakMap,Ve=new WeakSet,Rl=function(e){_e(this,Ve,Rp).call(this);let r=E(this,Ee).fetch(this.options,e);return e!=null&&e.throwOnError||(r=r.catch(Wr)),r},Cp=function(){_e(this,Ve,Ap).call(this);const e=uo(this.options.staleTime,E(this,Ee));if(ca||E(this,Xt).isStale||!Sp(e))return;const n=j1(E(this,Xt).dataUpdatedAt,e)+1;Z(this,Ji,setTimeout(()=>{E(this,Xt).isStale||this.updateResult()},n))},Ep=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(E(this,Ee)):this.options.refetchInterval)??!1},Pp=function(e){_e(this,Ve,Op).call(this),Z(this,Zs,e),!(ca||hn(this.options.enabled,E(this,Ee))===!1||!Sp(E(this,Zs))||E(this,Zs)===0)&&Z(this,Zi,setInterval(()=>{(this.options.refetchIntervalInBackground||Ey.isFocused())&&_e(this,Ve,Rl).call(this)},E(this,Zs)))},Tp=function(){_e(this,Ve,Cp).call(this),_e(this,Ve,Pp).call(this,_e(this,Ve,Ep).call(this))},Ap=function(){E(this,Ji)&&(clearTimeout(E(this,Ji)),Z(this,Ji,void 0))},Op=function(){E(this,Zi)&&(clearInterval(E(this,Zi)),Z(this,Zi,void 0))},Rp=function(){const e=E(this,gr).getQueryCache().build(E(this,gr),this.options);if(e===E(this,Ee))return;const r=E(this,Ee);Z(this,Ee,e),Z(this,qc,e.state),this.hasListeners()&&(r==null||r.removeObserver(this),e.addObserver(this))},R1=function(e){Et.batch(()=>{e.listeners&&this.listeners.forEach(r=>{r(E(this,Xt))}),E(this,gr).getQueryCache().notify({query:E(this,Ee),type:"observerResultsUpdated"})})},ub);function sM(t,e){return hn(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function dx(t,e){return sM(t,e)||t.state.data!==void 0&&Ip(t,e,e.refetchOnMount)}function Ip(t,e,r){if(hn(e.enabled,t)!==!1){const n=typeof r=="function"?r(t):r;return n==="always"||n!==!1&&Py(t,e)}return!1}function fx(t,e,r,n){return(t!==e||hn(n.enabled,t)===!1)&&(!r.suspense||t.state.status!=="error")&&Py(t,r)}function Py(t,e){return hn(e.enabled,t)!==!1&&t.isStaleByTime(uo(e.staleTime,t))}function iM(t,e){return!zd(t.getCurrentResult(),e)}var Xs,ei,yr,ds,ps,od,Dp,db,aM=(db=class extends nl{constructor(r,n){super();ue(this,ps);ue(this,Xs);ue(this,ei);ue(this,yr);ue(this,ds);Z(this,Xs,r),this.setOptions(n),this.bindMethods(),_e(this,ps,od).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){var s;const n=this.options;this.options=E(this,Xs).defaultMutationOptions(r),zd(this.options,n)||E(this,Xs).getMutationCache().notify({type:"observerOptionsUpdated",mutation:E(this,yr),observer:this}),n!=null&&n.mutationKey&&this.options.mutationKey&&ua(n.mutationKey)!==ua(this.options.mutationKey)?this.reset():((s=E(this,yr))==null?void 0:s.state.status)==="pending"&&E(this,yr).setOptions(this.options)}onUnsubscribe(){var r;this.hasListeners()||(r=E(this,yr))==null||r.removeObserver(this)}onMutationUpdate(r){_e(this,ps,od).call(this),_e(this,ps,Dp).call(this,r)}getCurrentResult(){return E(this,ei)}reset(){var r;(r=E(this,yr))==null||r.removeObserver(this),Z(this,yr,void 0),_e(this,ps,od).call(this),_e(this,ps,Dp).call(this)}mutate(r,n){var s;return Z(this,ds,n),(s=E(this,yr))==null||s.removeObserver(this),Z(this,yr,E(this,Xs).getMutationCache().build(E(this,Xs),this.options)),E(this,yr).addObserver(this),E(this,yr).execute(r)}},Xs=new WeakMap,ei=new WeakMap,yr=new WeakMap,ds=new WeakMap,ps=new WeakSet,od=function(){var n;const r=((n=E(this,yr))==null?void 0:n.state)??O1();Z(this,ei,{...r,isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset})},Dp=function(r){Et.batch(()=>{var n,s,i,a,l,c,u,d;if(E(this,ds)&&this.hasListeners()){const f=E(this,ei).variables,h=E(this,ei).context;(r==null?void 0:r.type)==="success"?((s=(n=E(this,ds)).onSuccess)==null||s.call(n,r.data,f,h),(a=(i=E(this,ds)).onSettled)==null||a.call(i,r.data,null,f,h)):(r==null?void 0:r.type)==="error"&&((c=(l=E(this,ds)).onError)==null||c.call(l,r.error,f,h),(d=(u=E(this,ds)).onSettled)==null||d.call(u,void 0,r.error,f,h))}this.listeners.forEach(f=>{f(E(this,ei))})})},db),I1=y.createContext(void 0),Zn=t=>{const e=y.useContext(I1);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},oM=({client:t,children:e})=>(y.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),o.jsx(I1.Provider,{value:t,children:e})),D1=y.createContext(!1),lM=()=>y.useContext(D1);D1.Provider;function cM(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var uM=y.createContext(cM()),dM=()=>y.useContext(uM);function M1(t,e){return typeof t=="function"?t(...e):!!t}function Mp(){}var fM=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},hM=t=>{y.useEffect(()=>{t.clearReset()},[t])},mM=({result:t,errorResetBoundary:e,throwOnError:r,query:n})=>t.isError&&!e.isReset()&&!t.isFetching&&n&&M1(r,[t.error,n]),pM=t=>{t.suspense&&(t.staleTime===void 0&&(t.staleTime=1e3),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3)))},gM=(t,e)=>t.isLoading&&t.isFetching&&!e,yM=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,hx=(t,e,r)=>e.fetchOptimistic(t).catch(()=>{r.clearReset()});function vM(t,e,r){var d,f,h,v,p;const n=Zn(),s=lM(),i=dM(),a=n.defaultQueryOptions(t);(f=(d=n.getDefaultOptions().queries)==null?void 0:d._experimental_beforeQuery)==null||f.call(d,a),a._optimisticResults=s?"isRestoring":"optimistic",pM(a),fM(a,i),hM(i);const l=!n.getQueryCache().get(a.queryHash),[c]=y.useState(()=>new e(n,a)),u=c.getOptimisticResult(a);if(y.useSyncExternalStore(y.useCallback(g=>{const b=s?Mp:c.subscribe(Et.batchCalls(g));return c.updateResult(),b},[c,s]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),y.useEffect(()=>{c.setOptions(a,{listeners:!1})},[a,c]),yM(a,u))throw hx(a,c,i);if(mM({result:u,errorResetBoundary:i,throwOnError:a.throwOnError,query:n.getQueryCache().get(a.queryHash)}))throw u.error;if((v=(h=n.getDefaultOptions().queries)==null?void 0:h._experimental_afterQuery)==null||v.call(h,a,u),a.experimental_prefetchInRender&&!ca&&gM(u,s)){const g=l?hx(a,c,i):(p=n.getQueryCache().get(a.queryHash))==null?void 0:p.promise;g==null||g.catch(Mp).finally(()=>{c.updateResult()})}return a.notifyOnChangeProps?u:c.trackResult(u)}function Qe(t,e){return vM(t,nM)}function Fe(t,e){const r=Zn(),[n]=y.useState(()=>new aM(r,t));y.useEffect(()=>{n.setOptions(t)},[n,t]);const s=y.useSyncExternalStore(y.useCallback(a=>n.subscribe(Et.batchCalls(a)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),i=y.useCallback((a,l)=>{n.mutate(a,l).catch(Mp)},[n]);if(s.error&&M1(n.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}const xM="modulepreload",wM=function(t){return"/"+t},mx={},sl=function(e,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(r.map(c=>{if(c=wM(c),c in mx)return;mx[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":xM,u||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),u)return new Promise((h,v)=>{f.addEventListener("load",h),f.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return s.then(a=>{for(const l of a||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})},bM=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>sl(async()=>{const{default:n}=await Promise.resolve().then(()=>il);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)};class Ty extends Error{constructor(e,r="FunctionsError",n){super(e),this.name=r,this.context=n}}class px extends Ty{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class gx extends Ty{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class yx extends Ty{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Lp;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Lp||(Lp={}));var _M=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function l(d){try{u(n.next(d))}catch(f){a(f)}}function c(d){try{u(n.throw(d))}catch(f){a(f)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};class SM{constructor(e,{headers:r={},customFetch:n,region:s=Lp.Any}={}){this.url=e,this.headers=r,this.region=s,this.fetch=bM(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return _M(this,arguments,void 0,function*(r,n={}){var s;try{const{headers:i,method:a,body:l,signal:c}=n;let u={},{region:d}=n;d||(d=this.region);const f=new URL(`${this.url}/${r}`);d&&d!=="any"&&(u["x-region"]=d,f.searchParams.set("forceFunctionRegion",d));let h;l&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(u["Content-Type"]="application/octet-stream",h=l):typeof l=="string"?(u["Content-Type"]="text/plain",h=l):typeof FormData<"u"&&l instanceof FormData?h=l:(u["Content-Type"]="application/json",h=JSON.stringify(l)));const v=yield this.fetch(f.toString(),{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},u),this.headers),i),body:h,signal:c}).catch(w=>{throw w.name==="AbortError"?w:new px(w)}),p=v.headers.get("x-relay-error");if(p&&p==="true")throw new gx(v);if(!v.ok)throw new yx(v);let g=((s=v.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),b;return g==="application/json"?b=yield v.json():g==="application/octet-stream"?b=yield v.blob():g==="text/event-stream"?b=v:g==="multipart/form-data"?b=yield v.formData():b=yield v.text(),{data:b,error:null,response:v}}catch(i){return i instanceof Error&&i.name==="AbortError"?{data:null,error:new px(i)}:{data:null,error:i,response:i instanceof yx||i instanceof gx?i.context:void 0}}})}}var xr={},Ay={},Wf={},Xc={},qf={},Hf={},jM=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},zo=jM();const kM=zo.fetch,L1=zo.fetch.bind(zo),F1=zo.Headers,NM=zo.Request,CM=zo.Response,il=Object.freeze(Object.defineProperty({__proto__:null,Headers:F1,Request:NM,Response:CM,default:L1,fetch:kM},Symbol.toStringTag,{value:"Module"})),EM=$O(il);var Kf={};Object.defineProperty(Kf,"__esModule",{value:!0});let PM=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Kf.default=PM;var $1=Jr&&Jr.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Hf,"__esModule",{value:!0});const TM=$1(EM),AM=$1(Kf);let OM=class{constructor(e){var r,n;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(r=e.shouldThrowOnError)!==null&&r!==void 0?r:!1,this.signal=e.signal,this.isMaybeSingle=(n=e.isMaybeSingle)!==null&&n!==void 0?n:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=TM.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,r){return this.headers=new Headers(this.headers),this.headers.set(e,r),this}then(e,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var a,l,c,u;let d=null,f=null,h=null,v=i.status,p=i.statusText;if(i.ok){if(this.method!=="HEAD"){const m=await i.text();m===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((a=this.headers.get("Accept"))===null||a===void 0)&&a.includes("application/vnd.pgrst.plan+text"))?f=m:f=JSON.parse(m))}const b=(l=this.headers.get("Prefer"))===null||l===void 0?void 0:l.match(/count=(exact|planned|estimated)/),w=(c=i.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");b&&w&&w.length>1&&(h=parseInt(w[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(f)&&(f.length>1?(d={code:"PGRST116",details:`Results contain ${f.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},f=null,h=null,v=406,p="Not Acceptable"):f.length===1?f=f[0]:f=null)}else{const b=await i.text();try{d=JSON.parse(b),Array.isArray(d)&&i.status===404&&(f=[],d=null,v=200,p="OK")}catch{i.status===404&&b===""?(v=204,p="No Content"):d={message:b}}if(d&&this.isMaybeSingle&&(!((u=d==null?void 0:d.details)===null||u===void 0)&&u.includes("0 rows"))&&(d=null,v=200,p="OK"),d&&this.shouldThrowOnError)throw new AM.default(d)}return{error:d,data:f,count:h,status:v,statusText:p}});return this.shouldThrowOnError||(s=s.catch(i=>{var a,l,c;return{error:{message:`${(a=i==null?void 0:i.name)!==null&&a!==void 0?a:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,r)}returns(){return this}overrideTypes(){return this}};Hf.default=OM;var RM=Jr&&Jr.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(qf,"__esModule",{value:!0});const IM=RM(Hf);let DM=class extends IM.default{select(e){let r=!1;const n=(e??"*").split("").map(s=>/\s/.test(s)&&!r?"":(s==='"'&&(r=!r),s)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:r=!0,nullsFirst:n,foreignTable:s,referencedTable:i=s}={}){const a=i?`${i}.order`:"order",l=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${l?`${l},`:""}${e}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,r,{foreignTable:n,referencedTable:s=n}={}){const i=typeof s>"u"?"offset":`${s}.offset`,a=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(a,`${r-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:r=!1,settings:n=!1,buffers:s=!1,wal:i=!1,format:a="text"}={}){var l;const c=[e?"analyze":null,r?"verbose":null,n?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${a}; for="${u}"; options=${c};`),a==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};qf.default=DM;var MM=Jr&&Jr.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Xc,"__esModule",{value:!0});const LM=MM(qf);let FM=class extends LM.default{eq(e,r){return this.url.searchParams.append(e,`eq.${r}`),this}neq(e,r){return this.url.searchParams.append(e,`neq.${r}`),this}gt(e,r){return this.url.searchParams.append(e,`gt.${r}`),this}gte(e,r){return this.url.searchParams.append(e,`gte.${r}`),this}lt(e,r){return this.url.searchParams.append(e,`lt.${r}`),this}lte(e,r){return this.url.searchParams.append(e,`lte.${r}`),this}like(e,r){return this.url.searchParams.append(e,`like.${r}`),this}likeAllOf(e,r){return this.url.searchParams.append(e,`like(all).{${r.join(",")}}`),this}likeAnyOf(e,r){return this.url.searchParams.append(e,`like(any).{${r.join(",")}}`),this}ilike(e,r){return this.url.searchParams.append(e,`ilike.${r}`),this}ilikeAllOf(e,r){return this.url.searchParams.append(e,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(e,r){return this.url.searchParams.append(e,`ilike(any).{${r.join(",")}}`),this}is(e,r){return this.url.searchParams.append(e,`is.${r}`),this}in(e,r){const n=Array.from(new Set(r)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cs.{${r.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(r)}`),this}containedBy(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cd.{${r.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(r)}`),this}rangeGt(e,r){return this.url.searchParams.append(e,`sr.${r}`),this}rangeGte(e,r){return this.url.searchParams.append(e,`nxl.${r}`),this}rangeLt(e,r){return this.url.searchParams.append(e,`sl.${r}`),this}rangeLte(e,r){return this.url.searchParams.append(e,`nxr.${r}`),this}rangeAdjacent(e,r){return this.url.searchParams.append(e,`adj.${r}`),this}overlaps(e,r){return typeof r=="string"?this.url.searchParams.append(e,`ov.${r}`):this.url.searchParams.append(e,`ov.{${r.join(",")}}`),this}textSearch(e,r,{config:n,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const a=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${i}fts${a}.${r}`),this}match(e){return Object.entries(e).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(e,r,n){return this.url.searchParams.append(e,`not.${r}.${n}`),this}or(e,{foreignTable:r,referencedTable:n=r}={}){const s=n?`${n}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,r,n){return this.url.searchParams.append(e,`${r}.${n}`),this}};Xc.default=FM;var $M=Jr&&Jr.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Wf,"__esModule",{value:!0});const bl=$M(Xc);let UM=class{constructor(e,{headers:r={},schema:n,fetch:s}){this.url=e,this.headers=new Headers(r),this.schema=n,this.fetch=s}select(e,r){const{head:n=!1,count:s}=r??{},i=n?"HEAD":"GET";let a=!1;const l=(e??"*").split("").map(c=>/\s/.test(c)&&!a?"":(c==='"'&&(a=!a),c)).join("");return this.url.searchParams.set("select",l),s&&this.headers.append("Prefer",`count=${s}`),new bl.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:r,defaultToNull:n=!0}={}){var s;const i="POST";if(r&&this.headers.append("Prefer",`count=${r}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const a=e.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(a.length>0){const l=[...new Set(a)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new bl.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(e,{onConflict:r,ignoreDuplicates:n=!1,count:s,defaultToNull:i=!0}={}){var a;const l="POST";if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),r!==void 0&&this.url.searchParams.set("on_conflict",r),s&&this.headers.append("Prefer",`count=${s}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const c=e.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new bl.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}update(e,{count:r}={}){var n;const s="PATCH";return r&&this.headers.append("Prefer",`count=${r}`),new bl.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:e}={}){var r;const n="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new bl.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}};Wf.default=UM;var U1=Jr&&Jr.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ay,"__esModule",{value:!0});const BM=U1(Wf),zM=U1(Xc);let VM=class B1{constructor(e,{headers:r={},schema:n,fetch:s}={}){this.url=e,this.headers=new Headers(r),this.schemaName=n,this.fetch=s}from(e){const r=new URL(`${this.url}/${e}`);return new BM.default(r,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new B1(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,r={},{head:n=!1,get:s=!1,count:i}={}){var a;let l;const c=new URL(`${this.url}/rpc/${e}`);let u;n||s?(l=n?"HEAD":"GET",Object.entries(r).filter(([f,h])=>h!==void 0).map(([f,h])=>[f,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([f,h])=>{c.searchParams.append(f,h)})):(l="POST",u=r);const d=new Headers(this.headers);return i&&d.set("Prefer",`count=${i}`),new zM.default({method:l,url:c,headers:d,schema:this.schemaName,body:u,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}};Ay.default=VM;var al=Jr&&Jr.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(xr,"__esModule",{value:!0});xr.PostgrestError=xr.PostgrestBuilder=xr.PostgrestTransformBuilder=xr.PostgrestFilterBuilder=xr.PostgrestQueryBuilder=xr.PostgrestClient=void 0;const z1=al(Ay);xr.PostgrestClient=z1.default;const V1=al(Wf);xr.PostgrestQueryBuilder=V1.default;const W1=al(Xc);xr.PostgrestFilterBuilder=W1.default;const q1=al(qf);xr.PostgrestTransformBuilder=q1.default;const H1=al(Hf);xr.PostgrestBuilder=H1.default;const K1=al(Kf);xr.PostgrestError=K1.default;var WM=xr.default={PostgrestClient:z1.default,PostgrestQueryBuilder:V1.default,PostgrestFilterBuilder:W1.default,PostgrestTransformBuilder:q1.default,PostgrestBuilder:H1.default,PostgrestError:K1.default};const{PostgrestClient:qM,PostgrestQueryBuilder:iq,PostgrestFilterBuilder:aq,PostgrestTransformBuilder:oq,PostgrestBuilder:lq,PostgrestError:cq}=WM;class HM{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,s=parseInt(n.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let r=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(r+=`

Suggested solution: ${e.workaround}`),new Error(r)}static createWebSocket(e,r){const n=this.getWebSocketConstructor();return new n(e,r)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const KM="2.75.0",GM=`realtime-js/${KM}`,QM="1.0.0",Fp=1e4,YM=1e3,JM=100;var Hl;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Hl||(Hl={}));var kt;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(kt||(kt={}));var un;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(un||(un={}));var $p;(function(t){t.websocket="websocket"})($p||($p={}));var Mi;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Mi||(Mi={}));class ZM{constructor(){this.HEADER_LENGTH=1}decode(e,r){return e.constructor===ArrayBuffer?r(this._binaryDecode(e)):r(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const r=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,r,n)}_decodeBroadcast(e,r,n){const s=r.getUint8(1),i=r.getUint8(2);let a=this.HEADER_LENGTH+2;const l=n.decode(e.slice(a,a+s));a=a+s;const c=n.decode(e.slice(a,a+i));a=a+i;const u=JSON.parse(n.decode(e.slice(a,e.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class G1{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ye;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Ye||(Ye={}));const vx=(t,e,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return e?Object.keys(e).reduce((i,a)=>(i[a]=XM(a,t,e,s),i),{}):{}},XM=(t,e,r,n)=>{const s=e.find(l=>l.name===t),i=s==null?void 0:s.type,a=r[t];return i&&!n.includes(i)?Q1(i,a):Up(a)},Q1=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return n4(e,r)}switch(t){case Ye.bool:return e4(e);case Ye.float4:case Ye.float8:case Ye.int2:case Ye.int4:case Ye.int8:case Ye.numeric:case Ye.oid:return t4(e);case Ye.json:case Ye.jsonb:return r4(e);case Ye.timestamp:return s4(e);case Ye.abstime:case Ye.date:case Ye.daterange:case Ye.int4range:case Ye.int8range:case Ye.money:case Ye.reltime:case Ye.text:case Ye.time:case Ye.timestamptz:case Ye.timetz:case Ye.tsrange:case Ye.tstzrange:return Up(e);default:return Up(e)}},Up=t=>t,e4=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},t4=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},r4=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},n4=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,n=t[r];if(t[0]==="{"&&n==="}"){let i;const a=t.slice(1,r);try{i=JSON.parse("["+a+"]")}catch{i=a?a.split(","):[]}return i.map(l=>Q1(e,l))}return t},s4=t=>typeof t=="string"?t.replace(" ","T"):t,Y1=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class Qh{constructor(e,r,n={},s=Fp){this.channel=e,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var n;return this._hasReceived(e)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var xx;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(xx||(xx={}));class Kl{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:a,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Kl.syncState(this.state,s,i,a),this.pendingDiffs.forEach(c=>{this.state=Kl.syncDiff(this.state,c,i,a)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:a,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Kl.syncDiff(this.state,s,i,a),l())}),this.onJoin((s,i,a)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:a})}),this.onLeave((s,i,a)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,n,s){const i=this.cloneDeep(e),a=this.transformState(r),l={},c={};return this.map(i,(u,d)=>{a[u]||(c[u]=d)}),this.map(a,(u,d)=>{const f=i[u];if(f){const h=d.map(b=>b.presence_ref),v=f.map(b=>b.presence_ref),p=d.filter(b=>v.indexOf(b.presence_ref)<0),g=f.filter(b=>h.indexOf(b.presence_ref)<0);p.length>0&&(l[u]=p),g.length>0&&(c[u]=g)}else l[u]=d}),this.syncDiff(i,{joins:l,leaves:c},n,s)}static syncDiff(e,r,n,s){const{joins:i,leaves:a}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(l,c)=>{var u;const d=(u=e[l])!==null&&u!==void 0?u:[];if(e[l]=this.cloneDeep(c),d.length>0){const f=e[l].map(v=>v.presence_ref),h=d.filter(v=>f.indexOf(v.presence_ref)<0);e[l].unshift(...h)}n(l,d,c)}),this.map(a,(l,c)=>{let u=e[l];if(!u)return;const d=c.map(f=>f.presence_ref);u=u.filter(f=>d.indexOf(f.presence_ref)<0),e[l]=u,s(l,u,c),u.length===0&&delete e[l]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(n=>r(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,n)=>{const s=e[n];return"metas"in s?r[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=s,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var wx;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(wx||(wx={}));var Gl;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Gl||(Gl={}));var ls;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(ls||(ls={}));class Oy{constructor(e,r={config:{}},n){var s,i;if(this.topic=e,this.params=r,this.socket=n,this.bindings={},this.state=kt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Qh(this,un.join,this.params,this.timeout),this.rejoinTimer=new G1(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=kt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=kt.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=kt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=kt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=kt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(un.reply,{},(a,l)=>{this._trigger(this._replyEventName(l),a)}),this.presence=new Kl(this),this.broadcastEndpointURL=Y1(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,r=this.timeout){var n,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==kt.closed){const{config:{broadcast:a,presence:l,private:c}}=this.params,u=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(v=>v.filter))!==null&&s!==void 0?s:[],d=!!this.bindings[Gl.PRESENCE]&&this.bindings[Gl.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,f={},h={broadcast:a,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(v=>e==null?void 0:e(ls.CHANNEL_ERROR,v)),this._onClose(()=>e==null?void 0:e(ls.CLOSED)),this.updateJoinPayload(Object.assign({config:h},f)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:v})=>{var p;if(this.socket.setAuth(),v===void 0){e==null||e(ls.SUBSCRIBED);return}else{const g=this.bindings.postgres_changes,b=(p=g==null?void 0:g.length)!==null&&p!==void 0?p:0,w=[];for(let m=0;m<b;m++){const x=g[m],{filter:{event:_,schema:S,table:j,filter:k}}=x,N=v&&v[m];if(N&&N.event===_&&N.schema===S&&N.table===j&&N.filter===k)w.push(Object.assign(Object.assign({},x),{id:N.id}));else{this.unsubscribe(),this.state=kt.errored,e==null||e(ls.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=w,e&&e(ls.SUBSCRIBED);return}}).receive("error",v=>{this.state=kt.errored,e==null||e(ls.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(v).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(ls.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,n){return this.state===kt.joined&&e===Gl.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,r,n)}async send(e,r={}){var n,s;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:a}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var a,l,c;const u=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(a=this.params)===null||a===void 0?void 0:a.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=kt.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(un.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new Qh(this,un.leave,{},e),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=kt.closed,this.bindings={}}async _fetchWithTimeout(e,r,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),a=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(i),a}_push(e,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Qh(this,e,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>JM){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(e,r,n){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,n){var s,i;const a=e.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=un;if(n&&[l,c,u,d].indexOf(a)>=0&&n!==this._joinRef())return;let h=this._onMessage(a,r,n);if(r&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(v=>{var p,g,b;return((p=v.filter)===null||p===void 0?void 0:p.event)==="*"||((b=(g=v.filter)===null||g===void 0?void 0:g.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===a}).map(v=>v.callback(h,n)):(i=this.bindings[a])===null||i===void 0||i.filter(v=>{var p,g,b,w,m,x;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in v){const _=v.id,S=(p=v.filter)===null||p===void 0?void 0:p.event;return _&&((g=r.ids)===null||g===void 0?void 0:g.includes(_))&&(S==="*"||(S==null?void 0:S.toLocaleLowerCase())===((b=r.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const _=(m=(w=v==null?void 0:v.filter)===null||w===void 0?void 0:w.event)===null||m===void 0?void 0:m.toLocaleLowerCase();return _==="*"||_===((x=r==null?void 0:r.event)===null||x===void 0?void 0:x.toLocaleLowerCase())}else return v.type.toLocaleLowerCase()===a}).map(v=>{if(typeof h=="object"&&"ids"in h){const p=h.data,{schema:g,table:b,commit_timestamp:w,type:m,errors:x}=p;h=Object.assign(Object.assign({},{schema:g,table:b,commit_timestamp:w,eventType:m,new:{},old:{},errors:x}),this._getPayloadRecords(p))}v.callback(h,n)})}_isClosed(){return this.state===kt.closed}_isJoined(){return this.state===kt.joined}_isJoining(){return this.state===kt.joining}_isLeaving(){return this.state===kt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,n){const s=e.toLocaleLowerCase(),i={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,r){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&Oy.isEqual(s.filter,r))})),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const n in e)if(e[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(un.close,{},e)}_onError(e){this._on(un.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=kt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=vx(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=vx(e.columns,e.old_record)),r}}const Yh=()=>{},Fu={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},i4=[1e3,2e3,5e3,1e4],a4=1e4,o4=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class l4{constructor(e,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Fp,this.transport=null,this.heartbeatIntervalMs=Fu.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Yh,this.ref=0,this.reconnectTimer=null,this.logger=Yh,this.conn=null,this.sendBuffer=[],this.serializer=new ZM,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let i;return s?i=s:typeof fetch>"u"?i=(...a)=>sl(async()=>{const{default:l}=await Promise.resolve().then(()=>il);return{default:l}},void 0).then(({default:l})=>l(...a)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...a)=>i(...a)},!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${e}/${$p.websocket}`,this.httpEndpoint=Y1(e),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=HM.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const r=e.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:QM}))}disconnect(e,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},e?this.conn.close(e,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,n){this.logger(e,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Hl.connecting:return Mi.Connecting;case Hl.open:return Mi.Open;case Hl.closing:return Mi.Closing;default:return Mi.Closed}}isConnected(){return this.connectionState()===Mi.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,r={config:{}}){const n=`realtime:${e}`,s=this.getChannels().find(i=>i.topic===n);if(s)return s;{const i=new Oy(`realtime:${e}`,r,this);return this.channels.push(i),i}}push(e){const{topic:r,event:n,payload:s,ref:i}=e,a=()=>{this.encode(e,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${i})`,s),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(YM,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Fu.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:s,payload:i,ref:a}=r,l=a?`(${a})`:"",c=i.status||"";this.log("receive",`${c} ${n} ${s} ${l}`.trim(),i),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(s,i,a)),this._triggerStateCallbacks("message",r)})}_clearTimer(e){var r;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var r;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(un.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const n=e.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${e}${n}${s}`}_workerObjectUrl(e){let r;if(e)r=e;else{const n=new Blob([o4],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(e,r=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(e=null){let r;e?r=e:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const s={access_token:r,version:GM};r&&n.updateJoinPayload(s),n.joinedOnce&&n._isJoined()&&n._push(un.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${e}`,r)})}_triggerStateCallbacks(e,r){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new G1(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Fu.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var r,n,s,i,a,l,c,u,d;if(this.transport=(r=e==null?void 0:e.transport)!==null&&r!==void 0?r:null,this.timeout=(n=e==null?void 0:e.timeout)!==null&&n!==void 0?n:Fp,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:Fu.HEARTBEAT_INTERVAL,this.worker=(i=e==null?void 0:e.worker)!==null&&i!==void 0?i:!1,this.accessToken=(a=e==null?void 0:e.accessToken)!==null&&a!==void 0?a:null,this.heartbeatCallback=(l=e==null?void 0:e.heartbeatCallback)!==null&&l!==void 0?l:Yh,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e==null?void 0:e.reconnectAfterMs)!==null&&c!==void 0?c:f=>i4[f-1]||a4,this.encode=(u=e==null?void 0:e.encode)!==null&&u!==void 0?u:(f,h)=>h(JSON.stringify(f)),this.decode=(d=e==null?void 0:e.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class Ry extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function wt(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class c4 extends Ry{constructor(e,r,n){super(e),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Bp extends Ry{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}var u4=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function l(d){try{u(n.next(d))}catch(f){a(f)}}function c(d){try{u(n.throw(d))}catch(f){a(f)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};const J1=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>sl(async()=>{const{default:n}=await Promise.resolve().then(()=>il);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},d4=()=>u4(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield sl(()=>Promise.resolve().then(()=>il),void 0)).Response:Response}),zp=t=>{if(Array.isArray(t))return t.map(r=>zp(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=zp(n)}),e},f4=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var ba=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function l(d){try{u(n.next(d))}catch(f){a(f)}}function c(d){try{u(n.throw(d))}catch(f){a(f)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};const Jh=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),h4=(t,e,r)=>ba(void 0,void 0,void 0,function*(){const n=yield d4();t instanceof n&&!(r!=null&&r.noResolveJson)?t.json().then(s=>{const i=t.status||500,a=(s==null?void 0:s.statusCode)||i+"";e(new c4(Jh(s),i,a))}).catch(s=>{e(new Bp(Jh(s),s))}):e(new Bp(Jh(t),t))}),m4=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!n?s:(f4(n)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(n)):s.body=n,e!=null&&e.duplex&&(s.duplex=e.duplex),Object.assign(Object.assign({},s),r))};function eu(t,e,r,n,s,i){return ba(this,void 0,void 0,function*(){return new Promise((a,l)=>{t(r,m4(e,n,s,i)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>a(c)).catch(c=>h4(c,l,n))})})}function Wd(t,e,r,n){return ba(this,void 0,void 0,function*(){return eu(t,"GET",e,r,n)})}function Rn(t,e,r,n,s){return ba(this,void 0,void 0,function*(){return eu(t,"POST",e,n,s,r)})}function Vp(t,e,r,n,s){return ba(this,void 0,void 0,function*(){return eu(t,"PUT",e,n,s,r)})}function p4(t,e,r,n){return ba(this,void 0,void 0,function*(){return eu(t,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function Z1(t,e,r,n,s){return ba(this,void 0,void 0,function*(){return eu(t,"DELETE",e,n,s,r)})}var g4=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function l(d){try{u(n.next(d))}catch(f){a(f)}}function c(d){try{u(n.throw(d))}catch(f){a(f)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};class y4{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r}then(e,r){return this.execute().then(e,r)}execute(){return g4(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(wt(e))return{data:null,error:e};throw e}})}}var v4=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function l(d){try{u(n.next(d))}catch(f){a(f)}}function c(d){try{u(n.throw(d))}catch(f){a(f)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};class x4{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r}asStream(){return new y4(this.downloadFn,this.shouldThrowOnError)}then(e,r){return this.execute().then(e,r)}execute(){return v4(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(wt(e))return{data:null,error:e};throw e}})}}var pr=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function l(d){try{u(n.next(d))}catch(f){a(f)}}function c(d){try{u(n.throw(d))}catch(f){a(f)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};const w4={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},bx={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class b4{constructor(e,r={},n,s){this.shouldThrowOnError=!1,this.url=e,this.headers=r,this.bucketId=n,this.fetch=J1(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,r,n,s){return pr(this,void 0,void 0,function*(){try{let i;const a=Object.assign(Object.assign({},bx),s);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const c=a.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",a.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",a.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=n,l["cache-control"]=`max-age=${a.cacheControl}`,l["content-type"]=a.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const u=this._removeEmptyFolders(r),d=this._getFinalPath(u),f=yield(e=="PUT"?Vp:Rn)(this.fetch,`${this.url}/object/${d}`,i,Object.assign({headers:l},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{data:{path:u,id:f.Id,fullPath:f.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(wt(i))return{data:null,error:i};throw i}})}upload(e,r,n){return pr(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,n)})}uploadToSignedUrl(e,r,n,s){return pr(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),a=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${a}`);l.searchParams.set("token",r);try{let c;const u=Object.assign({upsert:bx.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const f=yield Vp(this.fetch,l.toString(),c,{headers:d});return{data:{path:i,fullPath:f.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(wt(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,r){return pr(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const i=yield Rn(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),a=new URL(this.url+i.url),l=a.searchParams.get("token");if(!l)throw new Ry("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:l},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(wt(n))return{data:null,error:n};throw n}})}update(e,r,n){return pr(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,n)})}move(e,r,n){return pr(this,void 0,void 0,function*(){try{return{data:yield Rn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(wt(s))return{data:null,error:s};throw s}})}copy(e,r,n){return pr(this,void 0,void 0,function*(){try{return{data:{path:(yield Rn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(wt(s))return{data:null,error:s};throw s}})}createSignedUrl(e,r,n){return pr(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield Rn(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${a}`)},{data:i,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(wt(s))return{data:null,error:s};throw s}})}createSignedUrls(e,r,n){return pr(this,void 0,void 0,function*(){try{const s=yield Rn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${i}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(wt(s))return{data:null,error:s};throw s}})}download(e,r){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),a=i?`?${i}`:"",l=this._getFinalPath(e),c=()=>Wd(this.fetch,`${this.url}/${s}/${l}${a}`,{headers:this.headers,noResolveJson:!0});return new x4(c,this.shouldThrowOnError)}info(e){return pr(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const n=yield Wd(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:zp(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(wt(n))return{data:null,error:n};throw n}})}exists(e){return pr(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield p4(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(wt(n)&&n instanceof Bp){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,r){const n=this._getFinalPath(e),s=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&s.push(i);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&s.push(c);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${u}`)}}}remove(e){return pr(this,void 0,void 0,function*(){try{return{data:yield Z1(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(wt(r))return{data:null,error:r};throw r}})}list(e,r,n){return pr(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},w4),r),{prefix:e||""});return{data:yield Rn(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(wt(s))return{data:null,error:s};throw s}})}listV2(e,r){return pr(this,void 0,void 0,function*(){try{const n=Object.assign({},e);return{data:yield Rn(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(wt(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const _4="2.75.0",S4={"X-Client-Info":`storage-js/${_4}`};var Na=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function l(d){try{u(n.next(d))}catch(f){a(f)}}function c(d){try{u(n.throw(d))}catch(f){a(f)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};class j4{constructor(e,r={},n,s){this.shouldThrowOnError=!1;const i=new URL(e);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},S4),r),this.fetch=J1(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return Na(this,void 0,void 0,function*(){try{return{data:yield Wd(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(wt(e))return{data:null,error:e};throw e}})}getBucket(e){return Na(this,void 0,void 0,function*(){try{return{data:yield Wd(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(wt(r))return{data:null,error:r};throw r}})}createBucket(e){return Na(this,arguments,void 0,function*(r,n={public:!1}){try{return{data:yield Rn(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(wt(s))return{data:null,error:s};throw s}})}updateBucket(e,r){return Na(this,void 0,void 0,function*(){try{return{data:yield Vp(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(wt(n))return{data:null,error:n};throw n}})}emptyBucket(e){return Na(this,void 0,void 0,function*(){try{return{data:yield Rn(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(wt(r))return{data:null,error:r};throw r}})}deleteBucket(e){return Na(this,void 0,void 0,function*(){try{return{data:yield Z1(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(wt(r))return{data:null,error:r};throw r}})}}class k4 extends j4{constructor(e,r={},n,s){super(e,r,n,s)}from(e){return new b4(this.url,this.headers,e,this.fetch)}}const N4="2.75.0";let Il="";typeof Deno<"u"?Il="deno":typeof document<"u"?Il="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Il="react-native":Il="node";const C4={"X-Client-Info":`supabase-js-${Il}/${N4}`},E4={headers:C4},P4={schema:"public"},T4={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},A4={};var O4=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function l(d){try{u(n.next(d))}catch(f){a(f)}}function c(d){try{u(n.throw(d))}catch(f){a(f)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};const R4=t=>{let e;return t?e=t:typeof fetch>"u"?e=L1:e=fetch,(...r)=>e(...r)},I4=()=>typeof Headers>"u"?F1:Headers,D4=(t,e,r)=>{const n=R4(r),s=I4();return(i,a)=>O4(void 0,void 0,void 0,function*(){var l;const c=(l=yield e())!==null&&l!==void 0?l:t;let u=new s(a==null?void 0:a.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(i,Object.assign(Object.assign({},a),{headers:u}))})};var M4=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function l(d){try{u(n.next(d))}catch(f){a(f)}}function c(d){try{u(n.throw(d))}catch(f){a(f)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};function L4(t){return t.endsWith("/")?t:t+"/"}function F4(t,e){var r,n;const{db:s,auth:i,realtime:a,global:l}=t,{db:c,auth:u,realtime:d,global:f}=e,h={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},d),a),storage:{},global:Object.assign(Object.assign(Object.assign({},f),l),{headers:Object.assign(Object.assign({},(r=f==null?void 0:f.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>M4(this,void 0,void 0,function*(){return""})};return t.accessToken?h.accessToken=t.accessToken:delete h.accessToken,h}function $4(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(L4(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const X1="2.75.0",La=30*1e3,Wp=3,Zh=Wp*La,U4="http://localhost:9999",B4="supabase.auth.token",z4={"X-Client-Info":`gotrue-js/${X1}`},qp="X-Supabase-Api-Version",eC={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},V4=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,W4=10*60*1e3;class xc extends Error{constructor(e,r,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function ce(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class q4 extends xc{constructor(e,r,n){super(e,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function H4(t){return ce(t)&&t.name==="AuthApiError"}class Li extends xc{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class ki extends xc{constructor(e,r,n,s){super(e,n,s),this.name=r,this.status=n}}class Ls extends ki{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function K4(t){return ce(t)&&t.name==="AuthSessionMissingError"}class Ca extends ki{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class $u extends ki{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Uu extends ki{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function G4(t){return ce(t)&&t.name==="AuthImplicitGrantRedirectError"}class _x extends ki{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Hp extends ki{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function Xh(t){return ce(t)&&t.name==="AuthRetryableFetchError"}class Sx extends ki{constructor(e,r,n){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class Kp extends ki{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const qd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),jx=` 	
\r=`.split(""),Q4=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<jx.length;e+=1)t[jx[e].charCodeAt(0)]=-2;for(let e=0;e<qd.length;e+=1)t[qd[e].charCodeAt(0)]=e;return t})();function kx(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(qd[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(qd[n]),e.queuedBits-=6}}function tC(t,e,r){const n=Q4[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Nx(t){const e=[],r=a=>{e.push(String.fromCodePoint(a))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=a=>{Z4(a,n,r)};for(let a=0;a<t.length;a+=1)tC(t.charCodeAt(a),s,i);return e.join("")}function Y4(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function J4(t,e){for(let r=0;r<t.length;r+=1){let n=t.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(t.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}Y4(n,e)}}function Z4(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let n=1;n<6;n+=1)if(!(t>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function fo(t){const e=[],r={queue:0,queuedBits:0},n=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)tC(t.charCodeAt(s),r,n);return new Uint8Array(e)}function X4(t){const e=[];return J4(t,r=>e.push(r)),new Uint8Array(e)}function zi(t){const e=[],r={queue:0,queuedBits:0},n=s=>{e.push(s)};return t.forEach(s=>kx(s,r,n)),kx(null,r,n),e.join("")}function eL(t){return Math.round(Date.now()/1e3)+t}function tL(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Pr=()=>typeof window<"u"&&typeof document<"u",Ti={tested:!1,writable:!1},rC=()=>{if(!Pr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ti.tested)return Ti.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Ti.tested=!0,Ti.writable=!0}catch{Ti.tested=!0,Ti.writable=!1}return Ti.writable};function rL(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return r.searchParams.forEach((n,s)=>{e[s]=n}),e}const nC=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>sl(async()=>{const{default:n}=await Promise.resolve().then(()=>il);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},nL=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Fa=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},Ai=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Os=async(t,e)=>{await t.removeItem(e)};class Gf{constructor(){this.promise=new Gf.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}Gf.promiseConstructor=Promise;function em(t){const e=t.split(".");if(e.length!==3)throw new Kp("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!V4.test(e[n]))throw new Kp("JWT not in base64url format");return{header:JSON.parse(Nx(e[0])),payload:JSON.parse(Nx(e[1])),signature:fo(e[2]),raw:{header:e[0],payload:e[1]}}}async function sL(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function iL(t,e){return new Promise((n,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const a=await t(i);if(!e(i,null,a)){n(a);return}}catch(a){if(!e(i,a)){s(a);return}}})()})}function aL(t){return("0"+t.toString(16)).substr(-2)}function oL(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let i=0;i<56;i++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(e),Array.from(e,aL).join("")}async function lL(t){const r=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function cL(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await lL(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ea(t,e,r=!1){const n=oL();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await Fa(t,`${e}-code-verifier`,s);const i=await cL(n);return[i,n===i?"plain":"s256"]}const uL=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function dL(t){const e=t.headers.get(qp);if(!e||!e.match(uL))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function fL(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function hL(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const mL=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Pa(t){if(!mL.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function tm(){const t={};return new Proxy(t,{get:(e,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Cx(t){return JSON.parse(JSON.stringify(t))}var pL=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r};const Ii=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),gL=[502,503,504];async function Ex(t){var e;if(!nL(t))throw new Hp(Ii(t),0);if(gL.includes(t.status))throw new Hp(Ii(t),t.status);let r;try{r=await t.json()}catch(i){throw new Li(Ii(i),i)}let n;const s=dL(t);if(s&&s.getTime()>=eC["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new Sx(Ii(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new Ls}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,a)=>i&&typeof a=="string",!0))throw new Sx(Ii(r),t.status,r.weak_password.reasons);throw new q4(Ii(r),t.status||500,n)}const yL=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function ve(t,e,r,n){var s;const i=Object.assign({},n==null?void 0:n.headers);i[qp]||(i[qp]=eC["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const a=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(a.redirect_to=n.redirectTo);const l=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",c=await vL(t,e,r+l,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function vL(t,e,r,n,s,i){const a=yL(e,n,s,i);let l;try{l=await t(r,Object.assign({},a))}catch(c){throw console.error(c),new Hp(Ii(c),0)}if(l.ok||await Ex(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await Ex(c)}}function nn(t){var e;let r=null;bL(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=eL(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:n},error:null}}function Px(t){const e=nn(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Vs(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function xL(t){return{data:t,error:null}}function wL(t){const{action_link:e,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i}=t,a=pL(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i},c=Object.assign({},a);return{data:{properties:l,user:c},error:null}}function Tx(t){return t}function bL(t){return t.access_token&&t.refresh_token&&t.expires_in}const rm=["global","local","others"];var _L=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r};class SL{constructor({url:e="",headers:r={},fetch:n}){this.url=e,this.headers=r,this.fetch=nC(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,r=rm[0]){if(rm.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${rm.join(", ")}`);try{return await ve(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(ce(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,r={}){try{return await ve(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Vs})}catch(n){if(ce(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:r}=e,n=_L(e,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await ve(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:wL,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(ce(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await ve(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Vs})}catch(r){if(ce(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,n,s,i,a,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await ve(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:Tx});if(d.error)throw d.error;const f=await d.json(),h=(a=d.headers.get("x-total-count"))!==null&&a!==void 0?a:0,v=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return v.length>0&&(v.forEach(p=>{const g=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(p.split(";")[1].split("=")[1]);u[`${b}Page`]=g}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(ce(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){Pa(e);try{return await ve(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Vs})}catch(r){if(ce(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){Pa(e);try{return await ve(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:Vs})}catch(n){if(ce(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,r=!1){Pa(e);try{return await ve(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:Vs})}catch(n){if(ce(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){Pa(e.userId);try{const{data:r,error:n}=await ve(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(ce(r))return{data:null,error:r};throw r}}async _deleteFactor(e){Pa(e.userId),Pa(e.id);try{return{data:await ve(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(ce(r))return{data:null,error:r};throw r}}async _listOAuthClients(e){var r,n,s,i,a,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await ve(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:Tx});if(d.error)throw d.error;const f=await d.json(),h=(a=d.headers.get("x-total-count"))!==null&&a!==void 0?a:0,v=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return v.length>0&&(v.forEach(p=>{const g=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(p.split(";")[1].split("=")[1]);u[`${b}Page`]=g}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(ce(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(e){try{return await ve(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ce(r))return{data:null,error:r};throw r}}async _getOAuthClient(e){try{return await ve(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ce(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await ve(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ce(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(e){try{return await ve(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ce(r))return{data:null,error:r};throw r}}}function Ax(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}const Ta={debug:!!(globalThis&&rC()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class sC extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class jL extends sC{}async function kL(t,e,r){Ta.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),Ta.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){Ta.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await r()}finally{Ta.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw Ta.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new jL(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Ta.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function NL(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function iC(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function CL(t){return parseInt(t,16)}function EL(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,n=>n.toString(16).padStart(2,"0")).join("")}function PL(t){var e;const{chainId:r,domain:n,expirationTime:s,issuedAt:i=new Date,nonce:a,notBefore:l,requestId:c,resources:u,scheme:d,uri:f,version:h}=t;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(a&&a.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!f)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(h!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${h}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const v=iC(t.address),p=d?`${d}://${n}`:n,g=t.statement?`${t.statement}
`:"",b=`${p} wants you to sign in with your Ethereum account:
${v}

${g}`;let w=`URI: ${f}
Version: ${h}
Chain ID: ${r}${a?`
Nonce: ${a}`:""}
Issued At: ${i.toISOString()}`;if(s&&(w+=`
Expiration Time: ${s.toISOString()}`),l&&(w+=`
Not Before: ${l.toISOString()}`),c&&(w+=`
Request ID: ${c}`),u){let m=`
Resources:`;for(const x of u){if(!x||typeof x!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${x}`);m+=`
- ${x}`}w+=m}return`${b}
${w}`}class xt extends Error{constructor({message:e,code:r,cause:n,name:s}){var i;super(e,{cause:n}),this.__isWebAuthnError=!0,this.name=(i=s??(n instanceof Error?n.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=r}}class Hd extends xt{constructor(e,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:e}),this.name="WebAuthnUnknownError",this.originalError=r}}function TL({error:t,options:e}){var r,n,s;const{publicKey:i}=e;if(!i)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new xt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new xt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new xt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new xt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new xt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new xt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return i.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new xt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new xt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const a=window.location.hostname;if(oC(a)){if(i.rp.id!==a)return new xt({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new xt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new xt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new xt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new xt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function AL({error:t,options:e}){const{publicKey:r}=e;if(!r)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new xt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new xt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const n=window.location.hostname;if(oC(n)){if(r.rpId!==n)return new xt({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new xt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new xt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new xt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}var aC=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r};class OL{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const RL=new OL;function IL(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:r,excludeCredentials:n}=t,s=aC(t,["challenge","user","excludeCredentials"]),i=fo(e).buffer,a=Object.assign(Object.assign({},r),{id:fo(r.id).buffer}),l=Object.assign(Object.assign({},s),{challenge:i,user:a});if(n&&n.length>0){l.excludeCredentials=new Array(n.length);for(let c=0;c<n.length;c++){const u=n[c];l.excludeCredentials[c]=Object.assign(Object.assign({},u),{id:fo(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return l}function DL(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:r}=t,n=aC(t,["challenge","allowCredentials"]),s=fo(e).buffer,i=Object.assign(Object.assign({},n),{challenge:s});if(r&&r.length>0){i.allowCredentials=new Array(r.length);for(let a=0;a<r.length;a++){const l=r[a];i.allowCredentials[a]=Object.assign(Object.assign({},l),{id:fo(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return i}function ML(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t;return{id:t.id,rawId:t.id,response:{attestationObject:zi(new Uint8Array(t.response.attestationObject)),clientDataJSON:zi(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function LL(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t,n=t.getClientExtensionResults(),s=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:zi(new Uint8Array(s.authenticatorData)),clientDataJSON:zi(new Uint8Array(s.clientDataJSON)),signature:zi(new Uint8Array(s.signature)),userHandle:s.userHandle?zi(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function oC(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function Ox(){var t,e;return!!(Pr()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function FL(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Hd("Browser returned unexpected credential type",e)}:{data:null,error:new Hd("Empty credential response",e)}}catch(e){return{data:null,error:TL({error:e,options:t})}}}async function $L(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Hd("Browser returned unexpected credential type",e)}:{data:null,error:new Hd("Empty credential response",e)}}catch(e){return{data:null,error:AL({error:e,options:t})}}}const UL={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},BL={userVerification:"preferred",hints:["security-key"]};function Kd(...t){const e=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),r=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),n={};for(const s of t)if(s)for(const i in s){const a=s[i];if(a!==void 0)if(Array.isArray(a))n[i]=a;else if(r(a))n[i]=a;else if(e(a)){const l=n[i];e(l)?n[i]=Kd(l,a):n[i]=Kd(a)}else n[i]=a}return n}function zL(t,e){return Kd(UL,t,e||{})}function VL(t,e){return Kd(BL,t,e||{})}class WL{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:r,friendlyName:n,signal:s},i){try{const{data:a,error:l}=await this.client.mfa.challenge({factorId:e,webauthn:r});if(!a)return{data:null,error:l};const c=s??RL.createNewAbortSignal();if(a.webauthn.type==="create"){const{user:u}=a.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${n}`),u.displayName||(u.displayName=u.name)}switch(a.webauthn.type){case"create":{const u=zL(a.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:d,error:f}=await FL({publicKey:u,signal:c});return d?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:d}},error:null}:{data:null,error:f}}case"request":{const u=VL(a.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:d,error:f}=await $L(Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:u,signal:c}));return d?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:d}},error:null}:{data:null,error:f}}}}catch(a){return ce(a)?{data:null,error:a}:{data:null,error:new Li("Unexpected error in challenge",a)}}}async _verify({challengeId:e,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:e,webauthn:n})}async _authenticate({factorId:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}},i){if(!r)return{data:null,error:new xc("rpId is required for WebAuthn authentication")};try{if(!Ox())return{data:null,error:new Li("Browser does not support WebAuthn",null)};const{data:a,error:l}=await this.challenge({factorId:e,webauthn:{rpId:r,rpOrigins:n},signal:s},{request:i});if(!a)return{data:null,error:l};const{webauthn:c}=a;return this._verify({factorId:e,challengeId:a.challengeId,webauthn:{type:c.type,rpId:r,rpOrigins:n,credential_response:c.credential_response}})}catch(a){return ce(a)?{data:null,error:a}:{data:null,error:new Li("Unexpected error in authenticate",a)}}}async _register({friendlyName:e,rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s},i){if(!r)return{data:null,error:new xc("rpId is required for WebAuthn registration")};try{if(!Ox())return{data:null,error:new Li("Browser does not support WebAuthn",null)};const{data:a,error:l}=await this._enroll({friendlyName:e});if(!a)return await this.client.mfa.listFactors().then(d=>{var f;return(f=d.data)===null||f===void 0?void 0:f.all.find(h=>h.factor_type==="webauthn"&&h.friendly_name===e&&h.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:l};const{data:c,error:u}=await this._challenge({factorId:a.id,friendlyName:a.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:s},{create:i});return c?this._verify({factorId:a.id,challengeId:c.challengeId,webauthn:{rpId:r,rpOrigins:n,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:u}}catch(a){return ce(a)?{data:null,error:a}:{data:null,error:new Li("Unexpected error in register",a)}}}}NL();const qL={url:U4,storageKey:B4,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:z4,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Rx(t,e,r){return await r()}const Aa={};class wc{get jwks(){var e,r;return(r=(e=Aa[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){Aa[this.storageKey]=Object.assign(Object.assign({},Aa[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=Aa[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Aa[this.storageKey]=Object.assign(Object.assign({},Aa[this.storageKey]),{cachedAt:e})}constructor(e){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=wc.nextInstanceID,wc.nextInstanceID+=1,this.instanceID>0&&Pr()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},qL),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new SL({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=nC(s.fetch),this.lock=s.lock||Rx,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Pr()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=kL:this.lock=Rx,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new WL(this)},this.persistSession?(s.storage?this.storage=s.storage:rC()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Ax(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=Ax(this.memoryStorage)),Pr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${X1}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const r=rL(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),Pr()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),G4(i)){const c=(e=i.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:a,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",a,"redirect type",l),await this._saveSession(a),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return ce(r)?{error:r}:{error:new Li("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,n,s;try{const i=await ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:nn}),{data:a,error:l}=i;if(l||!a)return{data:{user:null,session:null},error:l};const c=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(ce(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var r,n,s;try{let i;if("email"in e){const{email:d,password:f,options:h}=e;let v=null,p=null;this.flowType==="pkce"&&([v,p]=await Ea(this.storage,this.storageKey)),i=await ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:d,password:f,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:v,code_challenge_method:p},xform:nn})}else if("phone"in e){const{phone:d,password:f,options:h}=e;i=await ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:f,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},channel:(s=h==null?void 0:h.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:nn})}else throw new $u("You must provide either an email or phone number and a password");const{data:a,error:l}=i;if(l||!a)return{data:{user:null,session:null},error:l};const c=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(ce(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let r;if("email"in e){const{email:i,password:a,options:l}=e;r=await ve(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Px})}else if("phone"in e){const{phone:i,password:a,options:l}=e;r=await ve(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Px})}else throw new $u("You must provide either an email or phone number and a password");const{data:n,error:s}=r;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Ca}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(ce(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(e){var r,n,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;switch(r){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(e){var r,n,s,i,a,l,c,u,d,f,h;let v,p;if("message"in e)v=e.message,p=e.signature;else{const{chain:g,wallet:b,statement:w,options:m}=e;let x;if(Pr())if(typeof b=="object")x=b;else{const A=window;if("ethereum"in A&&typeof A.ethereum=="object"&&"request"in A.ethereum&&typeof A.ethereum.request=="function")x=A.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!(m!=null&&m.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");x=b}const _=new URL((r=m==null?void 0:m.url)!==null&&r!==void 0?r:window.location.href),S=await x.request({method:"eth_requestAccounts"}).then(A=>A).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!S||S.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const j=iC(S[0]);let k=(n=m==null?void 0:m.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!k){const A=await x.request({method:"eth_chainId"});k=CL(A)}const N={domain:_.host,address:j,statement:w,uri:_.href,version:"1",chainId:k,nonce:(s=m==null?void 0:m.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(a=(i=m==null?void 0:m.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(l=m==null?void 0:m.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=m==null?void 0:m.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(u=m==null?void 0:m.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(d=m==null?void 0:m.signInWithEthereum)===null||d===void 0?void 0:d.resources};v=PL(N),p=await x.request({method:"personal_sign",params:[EL(v),j]})}try{const{data:g,error:b}=await ve(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:v,signature:p},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(h=e.options)===null||h===void 0?void 0:h.captchaToken}}:null),xform:nn});if(b)throw b;return!g||!g.session||!g.user?{data:{user:null,session:null},error:new Ca}:(g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),{data:Object.assign({},g),error:b})}catch(g){if(ce(g))return{data:{user:null,session:null},error:g};throw g}}async signInWithSolana(e){var r,n,s,i,a,l,c,u,d,f,h,v;let p,g;if("message"in e)p=e.message,g=e.signature;else{const{chain:b,wallet:w,statement:m,options:x}=e;let _;if(Pr())if(typeof w=="object")_=w;else{const j=window;if("solana"in j&&typeof j.solana=="object"&&("signIn"in j.solana&&typeof j.solana.signIn=="function"||"signMessage"in j.solana&&typeof j.solana.signMessage=="function"))_=j.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!(x!=null&&x.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=w}const S=new URL((r=x==null?void 0:x.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in _&&_.signIn){const j=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},x==null?void 0:x.signInWithSolana),{version:"1",domain:S.host,uri:S.href}),m?{statement:m}:null));let k;if(Array.isArray(j)&&j[0]&&typeof j[0]=="object")k=j[0];else if(j&&typeof j=="object"&&"signedMessage"in j&&"signature"in j)k=j;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in k&&"signature"in k&&(typeof k.signedMessage=="string"||k.signedMessage instanceof Uint8Array)&&k.signature instanceof Uint8Array)p=typeof k.signedMessage=="string"?k.signedMessage:new TextDecoder().decode(k.signedMessage),g=k.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");p=[`${S.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...m?["",m,""]:[""],"Version: 1",`URI: ${S.href}`,`Issued At: ${(s=(n=x==null?void 0:x.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=x==null?void 0:x.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${x.signInWithSolana.notBefore}`]:[],...!((a=x==null?void 0:x.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${x.signInWithSolana.expirationTime}`]:[],...!((l=x==null?void 0:x.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${x.signInWithSolana.chainId}`]:[],...!((c=x==null?void 0:x.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${x.signInWithSolana.nonce}`]:[],...!((u=x==null?void 0:x.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${x.signInWithSolana.requestId}`]:[],...!((f=(d=x==null?void 0:x.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||f===void 0)&&f.length?["Resources",...x.signInWithSolana.resources.map(k=>`- ${k}`)]:[]].join(`
`);const j=await _.signMessage(new TextEncoder().encode(p),"utf8");if(!j||!(j instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=j}}try{const{data:b,error:w}=await ve(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:p,signature:zi(g)},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(v=e.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:nn});if(w)throw w;return!b||!b.session||!b.user?{data:{user:null,session:null},error:new Ca}:(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),{data:Object.assign({},b),error:w})}catch(b){if(ce(b))return{data:{user:null,session:null},error:b};throw b}}async _exchangeCodeForSession(e){const r=await Ai(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:i,error:a}=await ve(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:nn});if(await Os(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Ca}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:a})}catch(i){if(ce(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:r,provider:n,token:s,access_token:i,nonce:a}=e,l=await ve(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:a,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:nn}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Ca}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(r){if(ce(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(e){var r,n,s,i,a;try{if("email"in e){const{email:l,options:c}=e;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Ea(this.storage,this.storageKey));const{error:f}=await ve(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in e){const{phone:l,options:c}=e,{data:u,error:d}=await ve(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(a=c==null?void 0:c.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new $u("You must provide either an email or phone number.")}catch(l){if(ce(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var r,n;try{let s,i;"options"in e&&(s=(r=e.options)===null||r===void 0?void 0:r.redirectTo,i=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:a,error:l}=await ve(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:nn});if(l)throw l;if(!a)throw new Error("An error occurred on token verification.");const c=a.session,u=a.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(ce(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var r,n,s;try{let i=null,a=null;return this.flowType==="pkce"&&([i,a]=await Ea(this.storage,this.storageKey)),await ve(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:a}),headers:this.headers,xform:xL})}catch(i){if(ce(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;if(n)throw n;if(!r)throw new Ls;const{error:s}=await ve(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(ce(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:n,type:s,options:i}=e,{error:a}=await ve(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){const{phone:n,type:s,options:i}=e,{data:a,error:l}=await ve(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:l}}throw new $u("You must provide either an email or phone number and a type")}catch(r){if(ce(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await Ai(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<Zh:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const a=await Ai(this.userStorage,this.storageKey+"-user");a!=null&&a.user?e.user=a.user:e.user=tm()}if(this.storage.isServer&&e.user){let a=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,u,d)=>(!a&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:e},error:null}}const{data:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await ve(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Vs}):await this._useSession(async r=>{var n,s,i;const{data:a,error:l}=r;if(l)throw l;return!(!((n=a.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ls}:await ve(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Vs})})}catch(r){if(ce(r))return K4(r)&&(await this._removeSession(),await Os(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new Ls;const a=s.session;let l=null,c=null;this.flowType==="pkce"&&e.email!=null&&([l,c]=await Ea(this.storage,this.storageKey));const{data:u,error:d}=await ve(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:a.access_token,xform:Vs});if(d)throw d;return a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(n){if(ce(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Ls;const r=Date.now()/1e3;let n=r,s=!0,i=null;const{payload:a}=em(e.access_token);if(a.exp&&(n=a.exp,s=n<=r),s){const{data:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(e.access_token);if(c)throw c;i={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(ce(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var n;if(!e){const{data:a,error:l}=r;if(l)throw l;e=(n=a.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new Ls;const{data:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(ce(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(e,r){try{if(!Pr())throw new Uu("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Uu(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new _x("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Uu("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new _x("No code detected.");const{data:m,error:x}=await this._exchangeCodeForSession(e.code);if(x)throw x;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:m.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:a,expires_in:l,expires_at:c,token_type:u}=e;if(!i||!l||!a||!u)throw new Uu("No session defined in URL");const d=Math.round(Date.now()/1e3),f=parseInt(l);let h=d+f;c&&(h=parseInt(c));const v=h-d;v*1e3<=La&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${v}s, should have been closer to ${f}s`);const p=h-f;d-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,h,d):d-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,h,d);const{data:g,error:b}=await this._getUser(i);if(b)throw b;const w={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:f,expires_at:h,refresh_token:a,token_type:u,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:w,redirectType:e.type},error:null}}catch(n){if(ce(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await Ai(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{error:i};const a=(n=s.session)===null||n===void 0?void 0:n.access_token;if(a){const{error:l}=await this.admin.signOut(a,e);if(l&&!(H4(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await Os(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const r=tL(),n={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async r=>{var n,s;try{const{data:{session:i},error:a}=r;if(a)throw a;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await Ea(this.storage,this.storageKey,!0));try{return await ve(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(ce(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(r){if(ce(r))return{data:null,error:r};throw r}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var r;try{const{data:n,error:s}=await this._useSession(async i=>{var a,l,c,u,d;const{data:f,error:h}=i;if(h)throw h;const v=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await ve(this.fetch,"GET",v,{headers:this.headers,jwt:(d=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return Pr()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:e.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(ce(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async linkIdentityIdToken(e){return await this._useSession(async r=>{var n;try{const{error:s,data:{session:i}}=r;if(s)throw s;const{options:a,provider:l,token:c,access_token:u,nonce:d}=e,f=await ve(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=i==null?void 0:i.access_token)!==null&&n!==void 0?n:void 0,body:{provider:l,id_token:c,access_token:u,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:nn}),{data:h,error:v}=f;return v?{data:{user:null,session:null},error:v}:!h||!h.session||!h.user?{data:{user:null,session:null},error:new Ca}:(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("USER_UPDATED",h.session)),{data:h,error:v})}catch(s){if(ce(s))return{data:{user:null,session:null},error:s};throw s}})}async unlinkIdentity(e){try{return await this._useSession(async r=>{var n,s;const{data:i,error:a}=r;if(a)throw a;return await ve(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(ce(r))return{data:null,error:r};throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await iL(async s=>(s>0&&await sL(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await ve(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:nn})),(s,i)=>{const a=200*Math.pow(2,s);return i&&Xh(i)&&Date.now()+a-n<La})}catch(n){if(this._debug(r,"error",n),ce(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",n),Pr()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await Ai(this.storage,this.storageKey);if(s&&this.userStorage){let a=await Ai(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:s.user},await Fa(this.userStorage,this.storageKey+"-user",a)),s.user=(e=a==null?void 0:a.user)!==null&&e!==void 0?e:tm()}else if(s&&!s.user&&!s.user){const a=await Ai(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(s.user=a.user,await Os(this.storage,this.storageKey+"-user"),await Fa(this.storage,this.storageKey,s)):s.user=tm()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const i=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Zh;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${Zh}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:a}=await this._callRefreshToken(s.refresh_token);a&&(console.error(a),Xh(a)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:l}=await this._getUser(s.access_token);!l&&(a!=null&&a.user)?(s.user=a.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(n,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var r,n;if(!e)throw new Ls;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Gf;const{data:i,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!i.session)throw new Ls;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={data:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(s,"error",i),ce(i)){const a={data:null,error:i};return Xh(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(a),a}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,r,n=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:r});const i=[],a=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,r)}catch(c){i.push(c)}});if(await Promise.all(a),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const r=Object.assign({},e),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Fa(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const i=Cx(s);await Fa(this.storage,this.storageKey,i)}else{const s=Cx(r);await Fa(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await Os(this.storage,this.storageKey),await Os(this.storage,this.storageKey+"-code-verifier"),await Os(this.storage,this.storageKey+"-user"),this.userStorage&&await Os(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Pr()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),La);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-e)/La);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${La}ms, refresh threshold is ${Wp} ticks`),s<=Wp&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof sC)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Pr()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,a]=await Ea(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(a)}`});s.push(l.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await ve(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(ce(r))return{data:null,error:r};throw r}}async _enroll(e){try{return await this._useSession(async r=>{var n,s;const{data:i,error:a}=r;if(a)return{data:null,error:a};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:c,error:u}=await ve(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&c.type==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(ce(r))return{data:null,error:r};throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{data:null,error:i};const a=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?ML(e.webauthn.credential_response):LL(e.webauthn.credential_response)})}:{code:e.code}),{data:l,error:c}=await ve(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:a,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return c?{data:null,error:c}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:c})})}catch(r){if(ce(r))return{data:null,error:r};throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{data:null,error:i};const a=await ve(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});if(a.error)return a;const{data:l}=a;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:IL(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:DL(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(ce(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(e){const{data:r,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){var e;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const s={all:[],phone:[],totp:[],webauthn:[]};for(const i of(e=r==null?void 0:r.factors)!==null&&e!==void 0?e:[])s.all.push(i),i.status==="verified"&&s[i.factor_type].push(i);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var r,n;const{data:{session:s},error:i}=e;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=em(s.access_token);let l=null;a.aal&&(l=a.aal);let c=l;((n=(r=s.user.factors)===null||r===void 0?void 0:r.filter(f=>f.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const d=a.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(e,r={keys:[]}){let n=r.keys.find(l=>l.kid===e);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(l=>l.kid===e),n&&this.jwks_cached_at+W4>s)return n;const{data:i,error:a}=await ve(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,n=i.keys.find(l=>l.kid===e),!n)?null:n}async getClaims(e,r={}){try{let n=e;if(!n){const{data:v,error:p}=await this.getSession();if(p||!v.session)return{data:null,error:p};n=v.session.access_token}const{header:s,payload:i,signature:a,raw:{header:l,payload:c}}=em(n);r!=null&&r.allowExpired||fL(i.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:v}=await this.getUser(n);if(v)throw v;return{data:{claims:i,header:s,signature:a},error:null}}const d=hL(s.alg),f=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,f,a,X4(`${l}.${c}`)))throw new Kp("Invalid JWT signature");return{data:{claims:i,header:s,signature:a},error:null}}catch(n){if(ce(n))return{data:null,error:n};throw n}}}wc.nextInstanceID=0;const HL=wc;class KL extends HL{constructor(e){super(e)}}var GL=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function l(d){try{u(n.next(d))}catch(f){a(f)}}function c(d){try{u(n.throw(d))}catch(f){a(f)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})};class QL{constructor(e,r,n){var s,i,a;this.supabaseUrl=e,this.supabaseKey=r;const l=$4(e);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,u={db:P4,realtime:A4,auth:Object.assign(Object.assign({},T4),{storageKey:c}),global:E4},d=F4(n??{},u);this.storageKey=(s=d.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(f,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=d.auth)!==null&&a!==void 0?a:{},this.headers,d.global.fetch),this.fetch=D4(r,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new qM(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new k4(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new SM(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,r,n)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return GL(this,void 0,void 0,function*(){var e,r;if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:i,storageKey:a,flowType:l,lock:c,debug:u},d,f){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new KL({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),d),storageKey:a,autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:i,flowType:l,lock:c,debug:u,fetch:f,hasCustomAuthorizationHeader:Object.keys(this.headers).some(v=>v.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new l4(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,r,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const YL=(t,e,r)=>new QL(t,e,r);function JL(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}JL()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const lC="https://vsuiumdimczjkbioywtw.supabase.co",ld="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZzdWl1bWRpbWN6amtiaW95d3R3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE5NjI0MzUsImV4cCI6MjA3NzUzODQzNX0._QjuVqW0qlZ91Yo8HPi37iCZsQfo2UxiWxMOdpQcHK4";console.log(" Supabase Client Initialization");console.log(" URL:",lC);console.log(" Key (first 20 chars):",(ld==null?void 0:ld.substring(0,20))+"...");const Ge=YL(lC,ld,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,storage:window.localStorage,flowType:"pkce"}});/*! Capacitor: https://capacitorjs.com/ - MIT License */var Vo;(function(t){t.Unimplemented="UNIMPLEMENTED",t.Unavailable="UNAVAILABLE"})(Vo||(Vo={}));class nm extends Error{constructor(e,r,n){super(e),this.message=e,this.code=r,this.data=n}}const ZL=t=>{var e,r;return t!=null&&t.androidBridge?"android":!((r=(e=t==null?void 0:t.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||r===void 0)&&r.bridge?"ios":"web"},XL=t=>{const e=t.CapacitorCustomPlatform||null,r=t.Capacitor||{},n=r.Plugins=r.Plugins||{},s=()=>e!==null?e.name:ZL(t),i=()=>s()!=="web",a=f=>{const h=u.get(f);return!!(h!=null&&h.platforms.has(s())||l(f))},l=f=>{var h;return(h=r.PluginHeaders)===null||h===void 0?void 0:h.find(v=>v.name===f)},c=f=>t.console.error(f),u=new Map,d=(f,h={})=>{const v=u.get(f);if(v)return console.warn(`Capacitor plugin "${f}" already registered. Cannot register plugins twice.`),v.proxy;const p=s(),g=l(f);let b;const w=async()=>(!b&&p in h?b=typeof h[p]=="function"?b=await h[p]():b=h[p]:e!==null&&!b&&"web"in h&&(b=typeof h.web=="function"?b=await h.web():b=h.web),b),m=(N,A)=>{var I,M;if(g){const F=g==null?void 0:g.methods.find(O=>A===O.name);if(F)return F.rtype==="promise"?O=>r.nativePromise(f,A.toString(),O):(O,z)=>r.nativeCallback(f,A.toString(),O,z);if(N)return(I=N[A])===null||I===void 0?void 0:I.bind(N)}else{if(N)return(M=N[A])===null||M===void 0?void 0:M.bind(N);throw new nm(`"${f}" plugin is not implemented on ${p}`,Vo.Unimplemented)}},x=N=>{let A;const I=(...M)=>{const F=w().then(O=>{const z=m(O,N);if(z){const R=z(...M);return A=R==null?void 0:R.remove,R}else throw new nm(`"${f}.${N}()" is not implemented on ${p}`,Vo.Unimplemented)});return N==="addListener"&&(F.remove=async()=>A()),F};return I.toString=()=>`${N.toString()}() { [capacitor code] }`,Object.defineProperty(I,"name",{value:N,writable:!1,configurable:!1}),I},_=x("addListener"),S=x("removeListener"),j=(N,A)=>{const I=_({eventName:N},A),M=async()=>{const O=await I;S({eventName:N,callbackId:O},A)},F=new Promise(O=>I.then(()=>O({remove:M})));return F.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await M()},F},k=new Proxy({},{get(N,A){switch(A){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return g?j:_;case"removeListener":return S;default:return x(A)}}});return n[f]=k,u.set(f,{name:f,proxy:k,platforms:new Set([...Object.keys(h),...g?[p]:[]])}),k};return r.convertFileSrc||(r.convertFileSrc=f=>f),r.getPlatform=s,r.handleError=c,r.isNativePlatform=i,r.isPluginAvailable=a,r.registerPlugin=d,r.Exception=nm,r.DEBUG=!!r.DEBUG,r.isLoggingEnabled=!!r.isLoggingEnabled,r},eF=t=>t.Capacitor=XL(t),Ut=eF(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),Iy=Ut.registerPlugin;class cC{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,r){let n=!1;this.listeners[e]||(this.listeners[e]=[],n=!0),this.listeners[e].push(r);const i=this.windowListeners[e];i&&!i.registered&&this.addWindowListener(i),n&&this.sendRetainedArgumentsForEvent(e);const a=async()=>this.removeListener(e,r);return Promise.resolve({remove:a})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,r,n){const s=this.listeners[e];if(!s){if(n){let i=this.retainedEventArguments[e];i||(i=[]),i.push(r),this.retainedEventArguments[e]=i}return}s.forEach(i=>i(r))}hasListeners(e){var r;return!!(!((r=this.listeners[e])===null||r===void 0)&&r.length)}registerWindowListener(e,r){this.windowListeners[r]={registered:!1,windowEventName:e,pluginEventName:r,handler:n=>{this.notifyListeners(r,n)}}}unimplemented(e="not implemented"){return new Ut.Exception(e,Vo.Unimplemented)}unavailable(e="not available"){return new Ut.Exception(e,Vo.Unavailable)}async removeListener(e,r){const n=this.listeners[e];if(!n)return;const s=n.indexOf(r);this.listeners[e].splice(s,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const r=this.retainedEventArguments[e];r&&(delete this.retainedEventArguments[e],r.forEach(n=>{this.notifyListeners(e,n)}))}}const Ix=t=>encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),Dx=t=>t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class tF extends cC{async getCookies(){const e=document.cookie,r={};return e.split(";").forEach(n=>{if(n.length<=0)return;let[s,i]=n.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");s=Dx(s).trim(),i=Dx(i).trim(),r[s]=i}),r}async setCookie(e){try{const r=Ix(e.key),n=Ix(e.value),s=`; expires=${(e.expires||"").replace("expires=","")}`,i=(e.path||"/").replace("path=",""),a=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${r}=${n||""}${s}; path=${i}; ${a};`}catch(r){return Promise.reject(r)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(r){return Promise.reject(r)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const r of e)document.cookie=r.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}Iy("CapacitorCookies",{web:()=>new tF});const rF=async t=>new Promise((e,r)=>{const n=new FileReader;n.onload=()=>{const s=n.result;e(s.indexOf(",")>=0?s.split(",")[1]:s)},n.onerror=s=>r(s),n.readAsDataURL(t)}),nF=(t={})=>{const e=Object.keys(t);return Object.keys(t).map(s=>s.toLocaleLowerCase()).reduce((s,i,a)=>(s[i]=t[e[a]],s),{})},sF=(t,e=!0)=>t?Object.entries(t).reduce((n,s)=>{const[i,a]=s;let l,c;return Array.isArray(a)?(c="",a.forEach(u=>{l=e?encodeURIComponent(u):u,c+=`${i}=${l}&`}),c.slice(0,-1)):(l=e?encodeURIComponent(a):a,c=`${i}=${l}`),`${n}&${c}`},"").substr(1):null,iF=(t,e={})=>{const r=Object.assign({method:t.method||"GET",headers:t.headers},e),s=nF(t.headers)["content-type"]||"";if(typeof t.data=="string")r.body=t.data;else if(s.includes("application/x-www-form-urlencoded")){const i=new URLSearchParams;for(const[a,l]of Object.entries(t.data||{}))i.set(a,l);r.body=i.toString()}else if(s.includes("multipart/form-data")||t.data instanceof FormData){const i=new FormData;if(t.data instanceof FormData)t.data.forEach((l,c)=>{i.append(c,l)});else for(const l of Object.keys(t.data))i.append(l,t.data[l]);r.body=i;const a=new Headers(r.headers);a.delete("content-type"),r.headers=a}else(s.includes("application/json")||typeof t.data=="object")&&(r.body=JSON.stringify(t.data));return r};class aF extends cC{async request(e){const r=iF(e,e.webFetchExtra),n=sF(e.params,e.shouldEncodeUrlParams),s=n?`${e.url}?${n}`:e.url,i=await fetch(s,r),a=i.headers.get("content-type")||"";let{responseType:l="text"}=i.ok?e:{};a.includes("application/json")&&(l="json");let c,u;switch(l){case"arraybuffer":case"blob":u=await i.blob(),c=await rF(u);break;case"json":c=await i.json();break;case"document":case"text":default:c=await i.text()}const d={};return i.headers.forEach((f,h)=>{d[h]=f}),{data:c,headers:d,status:i.status,url:i.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}Iy("CapacitorHttp",{web:()=>new aF});const br=Iy("Preferences",{web:()=>sl(()=>import("./web-YyMZf2yN.js"),[]).then(t=>new t.PreferencesWeb)}),uC=(Ut.isNativePlatform(),"https://jitsjournal-backend.onrender.com");let gn=null,yn=null,Vi=null,ro=null,Mx=!1;async function oF(){if(Mx)return;const t=performance.now();if(Ut.isNativePlatform())try{const[e,r,n,s]=await Promise.all([br.get({key:"supabase_user_id"}),br.get({key:"supabase_access_token"}),br.get({key:"supabase_email"}),br.get({key:"supabase_metadata"})]);if(e.value&&(gn=e.value),r.value&&(yn=r.value),n.value&&(Vi=n.value),s.value)try{ro=JSON.parse(s.value)}catch(a){console.error("Failed to parse cached metadata:",a)}const i=performance.now()-t;console.log(` BOOTSTRAP: Hydrated auth cache from Preferences in ${i.toFixed(1)}ms`,{hasId:!!gn,hasToken:!!yn,hasEmail:!!Vi,hasMetadata:!!ro})}catch(e){console.error("Failed to hydrate auth cache:",e)}else try{const e=localStorage.getItem("supabase_user_id"),r=localStorage.getItem("supabase_access_token"),n=localStorage.getItem("supabase_email"),s=localStorage.getItem("supabase_metadata");if(e&&(gn=e),r&&(yn=r),n&&(Vi=n),s)try{ro=JSON.parse(s)}catch(a){console.error("Failed to parse cached metadata:",a)}const i=performance.now()-t;console.log(` BOOTSTRAP: Hydrated auth cache from localStorage in ${i.toFixed(1)}ms`,{hasId:!!gn,hasToken:!!yn,hasEmail:!!Vi,hasMetadata:!!ro})}catch(e){console.error("Failed to hydrate auth cache from localStorage:",e)}Mx=!0}async function Tn(t){gn=t,Ut.isNativePlatform()?t?(await br.set({key:"supabase_user_id",value:t}),console.log(" Persisted Supabase ID to Preferences")):(await br.remove({key:"supabase_user_id"}),console.log(" Cleared Supabase ID from Preferences")):t?(localStorage.setItem("supabase_user_id",t),console.log(" Persisted Supabase ID to localStorage")):(localStorage.removeItem("supabase_user_id"),console.log(" Cleared Supabase ID from localStorage"))}async function An(t){yn=t,Ut.isNativePlatform()?t?(await br.set({key:"supabase_access_token",value:t}),console.log(" Persisted access token to Preferences")):(await br.remove({key:"supabase_access_token"}),console.log(" Cleared access token from Preferences")):t?(localStorage.setItem("supabase_access_token",t),console.log(" Persisted access token to localStorage")):(localStorage.removeItem("supabase_access_token"),console.log(" Cleared access token from localStorage"))}async function Bu(t,e){Vi=t,ro=e,Ut.isNativePlatform()?(t?await br.set({key:"supabase_email",value:t}):await br.remove({key:"supabase_email"}),e?await br.set({key:"supabase_metadata",value:JSON.stringify(e)}):await br.remove({key:"supabase_metadata"}),console.log(" Persisted session data to Preferences")):(t?localStorage.setItem("supabase_email",t):localStorage.removeItem("supabase_email"),e?localStorage.setItem("supabase_metadata",JSON.stringify(e)):localStorage.removeItem("supabase_metadata"),console.log(" Persisted session data to localStorage"))}function lF(){return gn&&Vi&&yn?(console.log(" Using cached session data (skipping slow getSession() call!)"),{id:gn,email:Vi,metadata:ro||{},token:yn}):null}async function dC(){var e;const t=performance.now();if(gn){const r=performance.now()-t;return console.log(` getSupabaseId from cache in ${r.toFixed(1)}ms`),gn}if(Ut.isNativePlatform())try{const{value:r}=await br.get({key:"supabase_user_id"});if(r){gn=r;const n=performance.now()-t;return console.log(` Loaded Supabase ID from Preferences in ${n.toFixed(1)}ms (cache miss - should have been preloaded!)`),r}}catch(r){console.error("Failed to read from Preferences:",r)}else try{const r=localStorage.getItem("supabase_user_id");if(r){gn=r;const n=performance.now()-t;return console.log(` Loaded Supabase ID from localStorage in ${n.toFixed(1)}ms (cache miss - should have been preloaded!)`),r}}catch(r){console.error("Failed to read from localStorage:",r)}try{console.log(" SLOW PATH: Falling back to getSession() - this should only happen once after first login");const{data:{session:r}}=await Ge.auth.getSession(),n=((e=r==null?void 0:r.user)==null?void 0:e.id)||null;n&&await Tn(n);const s=performance.now()-t;return console.log(` getSession() took ${s.toFixed(1)}ms`),n}catch(r){return console.error("Failed to get Supabase user:",r),null}}async function fC(){const t=performance.now();if(yn){const e=performance.now()-t;return console.log(` getAccessToken from cache in ${e.toFixed(1)}ms`),yn}if(Ut.isNativePlatform())try{const{value:e}=await br.get({key:"supabase_access_token"});if(e){yn=e;const r=performance.now()-t;return console.log(` Loaded access token from Preferences in ${r.toFixed(1)}ms (cache miss - should have been preloaded!)`),e}}catch(e){console.error("Failed to read access token from Preferences:",e)}else try{const e=localStorage.getItem("supabase_access_token");if(e){yn=e;const r=performance.now()-t;return console.log(` Loaded access token from localStorage in ${r.toFixed(1)}ms (cache miss - should have been preloaded!)`),e}}catch(e){console.error("Failed to read access token from localStorage:",e)}try{console.log(" SLOW PATH: Falling back to getSession() for token - this should only happen once after first login");const{data:{session:e}}=await Ge.auth.getSession(),r=(e==null?void 0:e.access_token)||null;r&&await An(r);const n=performance.now()-t;return console.log(` getSession() for token took ${n.toFixed(1)}ms`),r}catch(e){return console.error("Failed to get access token:",e),null}}const sr=new rM({defaultOptions:{queries:{retry:1,refetchOnWindowFocus:!1,queryFn:async({queryKey:t})=>{const[e,r]=await Promise.all([dC(),fC()]),n={"Content-Type":"application/json"};r?(n.Authorization=`Bearer ${r}`,console.log(" Query with Authorization header (fast path!)")):e?console.log(" Query with supabaseId (fallback path)"):console.warn(" No auth available for query");let s=`${uC}${t[0]}`;if(e){const a=s.includes("?")?"&":"?";s+=`${a}supabaseId=${e}`}const i=await fetch(s,{headers:n});if(!i.ok)throw(i.status===401||i.status===403)&&(console.log(" Auth failed - may need to refresh"),sessionStorage.setItem("auth_failure","true")),new Error(`${i.status}: ${i.statusText}`);return i.json()}}}});async function dt(t,e,r){const[n,s]=await Promise.all([dC(),fC()]),i={"Content-Type":"application/json"};s?(i.Authorization=`Bearer ${s}`,console.log(" Mutation with Authorization header (fast path!)")):console.log(" Mutation with supabaseId (fallback path)");const a={method:t,headers:i};r?a.body=JSON.stringify({...r,supabaseId:n}):n&&(a.body=JSON.stringify({supabaseId:n}));const l=`${uC}${e}`,c=await fetch(l,a);if(!c.ok){if(c.status===401||c.status===403)throw console.log(" Auth failed in API request"),new Error("Authentication required. Please refresh the page and try again.");let u=`${c.status}: ${c.statusText}`;try{u=(await c.json()).message||u}catch{const d=await c.text();u=`${c.status}: ${d}`}throw new Error(u)}return c.status===204?null:c.json()}const cF=(Ut.isNativePlatform(),"https://jitsjournal-backend.onrender.com"),hC=y.createContext(void 0),Gt=()=>{const t=y.useContext(hC);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t};async function ho(t,e,r,n,s=3){var a,l;const i=4-s;console.log(" Loading user data for supabaseId:",t,`(attempt ${i}/3)`);try{const c=new AbortController,u=setTimeout(()=>c.abort(),1e4),d={};n&&(d.Authorization=`Bearer ${n}`,console.log(" Including Supabase access token in request"));const f=await fetch(`${cF}/api/user/by-supabase-id/${t}`,{signal:c.signal,headers:d});if(clearTimeout(u),console.log(" User endpoint response status:",f.status),f.ok){const v=await f.json();return console.log(" User data loaded successfully:",{id:v.id,email:v.email}),{id:v.id.toString(),email:v.email,firstName:v.first_name,lastName:v.last_name,subscriptionStatus:v.subscription_status||"free",subscriptionPlan:v.subscription_plan,role:v.role||"user",createdAt:v.created_at,supabaseId:v.supabase_uid}}if(f.status===404)return s>1?(console.log(" User not found yet (signup race condition), retrying in 1000ms..."),await new Promise(v=>setTimeout(v,1e3)),ho(t,e,r,n,s-1)):(console.error(" User not found in database for supabaseId:",t),null);if(f.status>=500&&s>0){const v=Math.min(1e3*Math.pow(2,i-1),5e3);return console.log(` Server error ${f.status}, retrying in ${v}ms...`),await new Promise(p=>setTimeout(p,v)),ho(t,e,r,n,s-1)}const h=await f.text();return console.error(" Unexpected error from backend:",f.status,h),null}catch(c){if(s>0&&(c.name==="AbortError"||(a=c.message)!=null&&a.includes("fetch")||(l=c.message)!=null&&l.includes("network"))){const u=Math.min(1e3*Math.pow(2,i-1),5e3);return console.log(` Network error (${c.message}), retrying in ${u}ms...`),await new Promise(d=>setTimeout(d,u)),ho(t,e,r,n,s-1)}return console.error(" Fatal error in getUserFromSupabaseId:",c),null}}const uF=({children:t})=>{const[e,r]=y.useState(null),[n,s]=y.useState(null),[i,a]=y.useState(null),[l,c]=y.useState(!0),[u,d]=y.useState("Loading..."),[f,h]=y.useState(!1),v=ge.useRef(null),p=ge.useRef(!1);y.useEffect(()=>{(async()=>{await oF(),h(!0),console.log(" Auth cache hydrated - app ready to render")})()},[]),y.useEffect(()=>{if(!f)return;(async()=>{d("Checking session...");const _=lF();if(Ut.isNativePlatform()&&_){console.log(" FAST PATH: Using cached session data on mobile - skipping slow getSession() call!");const N={user:{id:_.id,email:_.email,user_metadata:_.metadata},access_token:_.token};a(N),s(N.user);try{d("Loading your data...");const A=performance.now(),I=await ho(_.id,_.email,_.metadata,_.token),M=performance.now()-A;if(console.log(`  getUserFromSupabaseId() took ${M.toFixed(0)}ms`),I){sr.clear(),r(I),v.current=_.id,c(!1),console.log(" Fast path auth complete!");return}}catch(A){console.error(" Fast path failed, falling back to slow path:",A)}}const S=performance.now(),{data:{session:j}}=await Ge.auth.getSession(),k=performance.now()-S;if(console.log(`  supabase.auth.getSession() took ${k.toFixed(0)}ms`),a(j),s((j==null?void 0:j.user)??null),j!=null&&j.user)try{await Promise.all([Tn(j.user.id),An(j.access_token),Bu(j.user.email||null,j.user.user_metadata)]),d("Loading your data...");const N=performance.now(),A=await ho(j.user.id,j.user.email||"",j.user.user_metadata,j.access_token),I=performance.now()-N;console.log(`  getUserFromSupabaseId() took ${I.toFixed(0)}ms`),A?(sr.clear(),r(A),v.current=j.user.id,c(!1)):(await Ge.auth.signOut(),await Promise.all([Tn(null),An(null),Bu(null,null)]),r(null),a(null),s(null),c(!1))}catch{await Ge.auth.signOut(),await Promise.all([Tn(null),An(null),Bu(null,null)]),r(null),a(null),s(null),c(!1)}else await Promise.all([Tn(null),An(null),Bu(null,null)]),c(!1)})().catch(_=>{console.error("Session check failed:",_),c(!1)});const{data:{subscription:x}}=Ge.auth.onAuthStateChange(async(_,S)=>{if(console.log(" Auth state change:",_,"isSigningUp:",p.current),p.current){console.log(" Ignoring auth state change during signup");return}if(a(S),s((S==null?void 0:S.user)??null),S!=null&&S.user){if(await Promise.all([Tn(S.user.id),An(S.access_token)]),_==="TOKEN_REFRESHED"||v.current===S.user.id){c(!1);return}c(!0),d("Signing you in...");try{const j=await ho(S.user.id,S.user.email||"",S.user.user_metadata,S.access_token);j?(sr.clear(),r(j),v.current=S.user.id,c(!1)):(_!=="SIGNED_IN"?(console.log(" User data not found, signing out (event:",_,")"),await Ge.auth.signOut(),await Promise.all([Tn(null),An(null)]),r(null),a(null),s(null)):console.log(" Fresh sign-in detected, user data not ready yet. Keeping session active."),c(!1))}catch{_!=="SIGNED_IN"&&(await Ge.auth.signOut(),await Promise.all([Tn(null),An(null)]),r(null),a(null),s(null)),c(!1)}}else await Promise.all([Tn(null),An(null)]),r(null),v.current=null,c(!1)});return()=>x.unsubscribe()},[f]);const g=m=>{r(m)},b=async()=>{await Ge.auth.signOut(),await Promise.all([Tn(null),An(null)]),r(null),a(null),s(null),sr.clear()},w=m=>{console.log(" Setting signup in progress:",m),p.current=m};return f?o.jsx(hC.Provider,{value:{user:e,supabaseUser:n,session:i,isLoading:l,loadingMessage:u,login:g,logout:b,isAuthenticated:!!e,setSignupInProgress:w},children:t}):o.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100vh"},children:o.jsx("p",{children:"Initializing..."})})},mC=y.createContext(void 0);function dF({children:t}){const[e,r]=y.useState(!0);y.useEffect(()=>{const a=localStorage.getItem("bjj_darkmode")!=="false";localStorage.getItem("bjj_darkmode")||localStorage.setItem("bjj_darkmode","true"),r(a),n(a)},[]);const n=a=>{a?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},s=a=>{r(a),localStorage.setItem("bjj_darkmode",a.toString()),n(a)},i=()=>{s(!e)};return o.jsx(mC.Provider,{value:{darkMode:e,toggleDarkMode:i,setDarkMode:s},children:t})}function fF(){const t=y.useContext(mC);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t}function hF(){const[t]=rl();y.useEffect(()=>{window.scrollTo({top:0,left:0,behavior:"instant"}),document.body.scrollTop=0,document.documentElement.scrollTop=0},[t])}const mF=1,pC=4e3;let sm=0;function pF(){return sm=(sm+1)%Number.MAX_SAFE_INTEGER,sm.toString()}const im=new Map,Lx=t=>{if(im.has(t))return;const e=setTimeout(()=>{im.delete(t),Ql({type:"REMOVE_TOAST",toastId:t})},pC);im.set(t,e)},gF=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,mF)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(r=>r.id===e.toast.id?{...r,...e.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=e;return r?Lx(r):t.toasts.forEach(n=>{Lx(n.id)}),{...t,toasts:t.toasts.map(n=>n.id===r||r===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(r=>r.id!==e.toastId)}}},cd=[];let ud={toasts:[]};function Ql(t){ud=gF(ud,t),cd.forEach(e=>{e(ud)})}function yF({duration:t=pC,...e}){const r=pF(),n=i=>Ql({type:"UPDATE_TOAST",toast:{...i,id:r}}),s=()=>Ql({type:"DISMISS_TOAST",toastId:r});return Ql({type:"ADD_TOAST",toast:{...e,id:r,open:!0,onOpenChange:i=>{i||s()}}}),setTimeout(()=>{s()},t),{id:r,dismiss:s,update:n}}function Ot(){const[t,e]=y.useState(ud);return y.useEffect(()=>(cd.push(e),()=>{const r=cd.indexOf(e);r>-1&&cd.splice(r,1)}),[t]),{...t,toast:yF,dismiss:r=>Ql({type:"DISMISS_TOAST",toastId:r})}}const Wi={async getAll(t){const{data:e,error:r}=await Ge.from("classes").select("*").eq("user_id",t).order("date",{ascending:!1});if(r)throw r;return(e||[]).map(n=>({...n,classType:n.class_type,techniquesFocused:n.techniques_focused,rollingPartners:n.rolling_partners,yourSubmissions:n.your_submissions,partnerSubmissions:n.partner_submissions,cardioRating:n.cardio_rating}))},async create(t,e){const r={date:e.date,time:e.time,duration:e.duration,class_type:e.classType,instructor:e.instructor||"",techniques_focused:e.techniquesFocused||"",rolling_partners:e.rollingPartners||[],your_submissions:e.yourSubmissions||0,partner_submissions:e.partnerSubmissions||0,cardio_rating:e.cardioRating||3,user_id:t};console.log("Class data being sent to Supabase:",JSON.stringify(r,null,2));const{data:n,error:s}=await Ge.from("classes").insert(r).select().single();if(s)throw console.error("Class creation error:",s),console.error("Error details:",JSON.stringify(s,null,2)),s;return console.log("Class created successfully:",n),{...n,classType:n.class_type,techniquesFocused:n.techniques_focused,rollingPartners:n.rolling_partners,yourSubmissions:n.your_submissions,partnerSubmissions:n.partner_submissions,cardioRating:n.cardio_rating}},async update(t,e,r){const n={date:r.date,time:r.time,duration:r.duration,class_type:r.classType,instructor:r.instructor||"",techniques_focused:r.techniquesFocused||"",rolling_partners:r.rollingPartners||[],your_submissions:r.yourSubmissions||0,partner_submissions:r.partnerSubmissions||0,cardio_rating:r.cardioRating||3},{data:s,error:i}=await Ge.from("classes").update(n).eq("id",t).eq("user_id",e).select().single();if(i)throw i;return{...s,classType:s.class_type,techniquesFocused:s.techniques_focused,rollingPartners:s.rolling_partners,yourSubmissions:s.your_submissions,partnerSubmissions:s.partner_submissions,cardioRating:s.cardio_rating}},async delete(t,e){const{error:r}=await Ge.from("classes").delete().eq("id",t).eq("user_id",e);if(r)throw r;return{success:!0}}},Ws={async getCurrent(t){const{data:e,error:r}=await Ge.from("belts").select("*").eq("user_id",t).order("promotion_date",{ascending:!1}).limit(1).single();if(r&&r.code!=="PGRST116")throw r;return e},async getAll(t){const{data:e,error:r}=await Ge.from("belts").select("*").eq("user_id",t).order("promotion_date",{ascending:!1});if(r)throw r;return e||[]},async create(t,e){const{data:r,error:n}=await Ge.from("belts").insert({belt:e.belt,stripes:e.stripes,promotion_date:e.promotionDate,instructor:e.instructor,notes:e.notes,user_id:t}).select().single();if(n)throw n;return r},async update(t,e,r){const{data:n,error:s}=await Ge.from("belts").update({belt:r.belt,stripes:r.stripes,promotion_date:r.promotionDate,instructor:r.instructor,notes:r.notes}).eq("id",t).eq("user_id",e).select().single();if(s)throw s;return n},async delete(t,e){const{error:r}=await Ge.from("belts").delete().eq("id",t).eq("user_id",e);if(r)throw r}},am={async getCurrent(t){const e=new Date,r=e.getUTCDay(),n=r===0?0:-r,s=new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()+n,0,0,0,0)),i=s.toISOString().split("T")[0];console.log("getCurrent - Looking for week:",i);const{data:a,error:l}=await Ge.from("weekly_commitments").select("*").eq("user_id",t).gte("week_start_date",i).lt("week_start_date",new Date(s.getTime()+24*60*60*1e3).toISOString().split("T")[0]).order("created_at",{ascending:!1}).limit(1).single();if(console.log("getCurrent - Found:",a,"Error:",l),l&&l.code!=="PGRST116")throw l;return a},async create(t,e){console.log("Creating weekly commitment with userId:",t,"data:",e);const{data:r,error:n}=await Ge.from("weekly_commitments").insert({week_start_date:e.weekStartDate,target_classes:e.targetClasses,completed_classes:e.completedClasses||0,is_completed:e.isCompleted||0,user_id:t}).select().single();if(n)throw console.error("Weekly commitment creation error:",n),console.error("Error details:",JSON.stringify(n,null,2)),n;return console.log("Weekly commitment created successfully:",r),r},async update(t,e,r){console.log("Updating weekly commitment:",t,"userId:",e,"data:",r);const n={};r.weekStartDate!==void 0&&(n.week_start_date=r.weekStartDate),r.targetClasses!==void 0&&(n.target_classes=r.targetClasses),r.completedClasses!==void 0&&(n.completed_classes=r.completedClasses),r.isCompleted!==void 0&&(n.is_completed=r.isCompleted);const{data:s,error:i}=await Ge.from("weekly_commitments").update(n).eq("id",t).eq("user_id",e).select().single();if(i)throw console.error("Weekly commitment update error:",i),console.error("Error details:",JSON.stringify(i,null,2)),i;return console.log("Weekly commitment updated successfully:",s),s}},Fx={async getAll(t){const{data:e,error:r}=await Ge.from("drawings").select("*").eq("user_id",t).order("created_at",{ascending:!1});if(r)throw r;return e||[]},async create(t,e){const{data:r,error:n}=await Ge.from("drawings").insert({...e,user_id:t}).select().single();if(n)throw n;return r}};function vF(){const[t,e]=y.useState(!1),[r,n]=y.useState(3),{toast:s}=Ot(),i=Zn(),{user:a}=Gt();ge.useEffect(()=>{a&&console.log("WeeklyGoals user object:",{id:a.id,type:typeof a.id,email:a.email})},[a]);const{data:l}=Qe({queryKey:["weeklyCommitments","current",a==null?void 0:a.id],queryFn:()=>am.getCurrent(a.id),enabled:!!(a!=null&&a.id),staleTime:6e4}),{data:c=[]}=Qe({queryKey:["classes",a==null?void 0:a.id],queryFn:()=>Wi.getAll(a.id),enabled:!!(a!=null&&a.id),staleTime:6e4}),u=new Date,d=new Date(u.getUTCFullYear(),u.getUTCMonth(),u.getUTCDate()-u.getUTCDay()+1);d.setUTCHours(0,0,0,0);const f=Array.isArray(c)?c.filter(m=>new Date(m.date)>=d).length:0,h=Fe({mutationFn:async m=>{if(!(a!=null&&a.id))throw new Error("User not authenticated");return l&&l.id?await am.update(l.id,a.id,m):await am.create(a.id,m)},onSuccess:m=>{console.log("Weekly goal mutation success:",m),i.invalidateQueries({queryKey:["weeklyCommitments","current",a==null?void 0:a.id]}),i.invalidateQueries({queryKey:["classes",a==null?void 0:a.id]}),e(!1),s({title:"Success",description:`Weekly goal set to ${r} classes!`,duration:4e3})}}),v=m=>{if(m.preventDefault(),h.isPending)return;const x=new Date,_=x.getUTCDay(),S=_===0?0:-_,j=new Date(Date.UTC(x.getUTCFullYear(),x.getUTCMonth(),x.getUTCDate()+S,0,0,0,0));console.log("FRONTEND: Creating goal for week:",j.toISOString()),h.mutate({weekStartDate:j,targetClasses:r,completedClasses:f,isCompleted:f>=r?1:0})},p=(l==null?void 0:l.target_classes)||0,g=f,b=p>0?Math.min(g/p*100,100):0,w=Math.max(p-g,0);return o.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-md",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Weekly Goals"}),o.jsx("button",{onClick:()=>e(!t),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:l?"Update":"Set Goal"})]}),t&&o.jsxs("form",{onSubmit:v,className:"mb-4 p-4 bg-gray-50 rounded-lg",children:[o.jsxs("div",{className:"mb-3",children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Classes this week: ",r]}),o.jsx("input",{type:"range",min:"1",max:"10",value:r,onChange:m=>n(parseInt(m.target.value)),className:"w-full"}),o.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[o.jsx("span",{children:"1"}),o.jsx("span",{children:"5"}),o.jsx("span",{children:"10"})]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{type:"submit",disabled:h.isPending,className:"flex-1 bg-blue-600 text-white py-2 px-3 rounded-lg text-sm hover:bg-blue-700 disabled:opacity-50",children:h.isPending?"Saving...":"Set Goal"}),o.jsx("button",{type:"button",onClick:()=>e(!1),className:"px-3 py-2 text-gray-600 hover:text-gray-800 text-sm",children:"Cancel"})]})]}),l?o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("span",{className:"text-sm text-gray-600",children:"Progress this week"}),o.jsxs("span",{className:"text-sm font-medium text-gray-800",children:[g," / ",p," classes"]})]}),o.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 mb-3",children:o.jsx("div",{className:`h-3 rounded-full transition-all duration-300 ${b>=100?"bg-green-500":b>=75?"bg-yellow-500":"bg-blue-500"}`,style:{width:`${b}%`}})}),o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("div",{className:`${b>=100?"text-green-600":"text-gray-600"}`,children:b>=100?o.jsx("span",{className:"font-medium",children:" Goal completed!"}):w===1?o.jsxs("span",{children:[w," more class to go!"]}):w>1?o.jsxs("span",{children:[w," more classes to go!"]}):o.jsx("span",{children:"Keep it up!"})}),o.jsxs("div",{className:"text-gray-500",children:[Math.round(b),"%"]})]}),b>=100&&o.jsxs("div",{className:"mt-3 p-3 bg-green-50 rounded-lg text-center",children:[o.jsx("div",{className:"text-green-800 font-medium text-sm",children:"Excellent work this week! "}),o.jsx("div",{className:"text-green-600 text-xs mt-1",children:"You've reached your training goal"})]})]}):o.jsxs("div",{className:"text-center py-4 text-gray-500",children:[o.jsx("p",{className:"text-sm",children:"No weekly goal set yet."}),o.jsx("p",{className:"text-xs",children:"Set a goal to track your progress!"})]})]})}/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xF=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),gC=(...t)=>t.filter((e,r,n)=>!!e&&n.indexOf(e)===r).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var wF={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bF=y.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:i,iconNode:a,...l},c)=>y.createElement("svg",{ref:c,...wF,width:e,height:e,stroke:t,strokeWidth:n?Number(r)*24/Number(e):r,className:gC("lucide",s),...l},[...a.map(([u,d])=>y.createElement(u,d)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=(t,e)=>{const r=y.forwardRef(({className:n,...s},i)=>y.createElement(bF,{ref:i,iconNode:e,className:gC(`lucide-${xF(t)}`,n),...s}));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qf=pe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yl=pe("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gd=pe("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $x=pe("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _F=pe("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dn=pe("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tu=pe("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SF=pe("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dy=pe("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yC=pe("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vC=pe("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jF=pe("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kF=pe("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NF=pe("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CF=pe("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ux=pe("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EF=pe("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xC=pe("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qd=pe("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bc=pe("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PF=pe("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const om=pe("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TF=pe("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AF=pe("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OF=pe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gp=pe("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qp=pe("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yp=pe("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RF=pe("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jp=pe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bx=pe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IF=pe("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DF=pe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zp=pe("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MF=pe("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zx=pe("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LF=pe("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ws=pe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yd=pe("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FF=pe("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $F=pe("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UF=pe("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jd=pe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $n=pe("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vx=pe("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BF=pe("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);function zF(){const[t,e]=y.useState(!1),r=y.useRef(null),{user:n,logout:s}=Gt(),{data:i=[]}=Qe({queryKey:["classes",n==null?void 0:n.id],queryFn:async()=>n!=null&&n.id?await Wi.getAll(n.id):[],enabled:!!(n!=null&&n.id)}),{data:a}=Qe({queryKey:["current-belt",n==null?void 0:n.id],queryFn:async()=>{if(!(n!=null&&n.id))return null;console.log("ProfileDropdown - Fetching belt for user ID:",n.id);const u=await Ws.getCurrent(n.id);return console.log("ProfileDropdown - Belt data received:",u),u},enabled:!!(n!=null&&n.id)});y.useEffect(()=>{const u=d=>{r.current&&!r.current.contains(d.target)&&e(!1)};return document.addEventListener("mousedown",u),()=>document.removeEventListener("mousedown",u)},[]);const l=u=>u?new Date(u).toLocaleDateString():"No promotions yet",c=()=>{if(!a)return"White Belt";const{belt:u,stripes:d}=a,f=u.charAt(0).toUpperCase()+u.slice(1),h=d>0?` (${d} stripe${d>1?"s":""})`:"";return`${f} Belt${h}`};return o.jsxs("div",{className:"relative",ref:r,children:[o.jsxs("button",{onClick:()=>e(!t),className:"flex items-center space-x-3 bg-white rounded-full p-2 shadow-md hover:shadow-lg transition-shadow duration-200 border border-gray-200",children:[o.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-red-500 rounded-full flex items-center justify-center",children:o.jsx(Jd,{className:"w-4 h-4 text-white"})}),o.jsxs("div",{className:"hidden md:block text-left",children:[o.jsx("p",{className:"text-sm font-medium text-gray-900",children:(n==null?void 0:n.firstName)||"User"}),o.jsx("p",{className:"text-xs text-gray-500",children:c()})]}),o.jsx(tu,{className:`w-4 h-4 text-gray-500 transition-transform duration-200 ${t?"rotate-180":""}`})]}),t&&o.jsxs("div",{className:"absolute right-0 mt-2 w-80 bg-white rounded-xl shadow-lg border border-gray-200 z-50",children:[o.jsx("div",{className:"p-4 border-b border-gray-100",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-red-500 rounded-full flex items-center justify-center",children:o.jsx(Jd,{className:"w-6 h-6 text-white"})}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("h3",{className:"font-semibold text-gray-900",children:[n==null?void 0:n.firstName," ",n==null?void 0:n.lastName]}),o.jsx("p",{className:"text-sm text-gray-600",children:n==null?void 0:n.email}),o.jsx("p",{className:"text-sm font-medium text-blue-600",children:c()})]})]})}),o.jsxs("div",{className:"p-4 border-b border-gray-100",children:[o.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Your Progress"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(_F,{className:"w-4 h-4 text-blue-500"}),o.jsx("span",{className:"text-sm text-gray-600",children:"Total Classes"})]}),o.jsx("span",{className:"text-sm font-semibold text-gray-900",children:i.length})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Yl,{className:"w-4 h-4 text-yellow-500"}),o.jsx("span",{className:"text-sm text-gray-600",children:"Last Promotion"})]}),o.jsx("span",{className:"text-sm font-semibold text-gray-900",children:l(a==null?void 0:a.promotion_date)})]})]})]}),o.jsxs("div",{className:"p-2",children:[o.jsx(Ft,{href:"/settings",children:o.jsxs("button",{onClick:()=>e(!1),className:"w-full flex items-center space-x-3 px-3 py-2 text-sm text-gray-700 hover:bg-gray-50 rounded-lg transition-colors",children:[o.jsx(DF,{className:"w-4 h-4"}),o.jsx("span",{children:"Settings"})]})}),o.jsx(Ft,{href:"/belts",children:o.jsxs("button",{onClick:()=>e(!1),className:"w-full flex items-center space-x-3 px-3 py-2 text-sm text-gray-700 hover:bg-gray-50 rounded-lg transition-colors",children:[o.jsx(Yl,{className:"w-4 h-4"}),o.jsx("span",{children:"Belt Progress"})]})}),o.jsxs("button",{onClick:()=>{s(),e(!1)},className:"w-full flex items-center space-x-3 px-3 py-2 text-sm text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:[o.jsx(OF,{className:"w-4 h-4"}),o.jsx("span",{children:"Log Out"})]})]})]})]})}const VF=()=>{const t=[{quote:"The ground is my ocean, I'm the shark, and most people don't even know how to swim",author:"Rickson Gracie"},{quote:"A belt only covers two inches of your ass. You have to cover the rest",author:"Royce Gracie"},{quote:"Always assume that your opponent is going to be bigger, stronger and faster than you",author:"Helio Gracie"},{quote:"If you think, you are late. If you are late, you use strength. If you use strength, you tire. And if you tire, you die",author:"Saulo Ribeiro"}],[e]=y.useState(()=>t[Math.floor(Math.random()*t.length)]);return o.jsxs("div",{className:"text-center",children:[o.jsxs("h2",{className:"text-xl font-bold mb-3 leading-tight",children:['"',e.quote,'"']}),o.jsxs("p",{className:"text-blue-100 text-sm",children:["- ",e.author]})]})};function WF(){const{user:t}=Gt(),{data:e}=Qe({queryKey:["belts","current",t==null?void 0:t.id],queryFn:()=>Ws.getCurrent(t.id),enabled:!!(t!=null&&t.id),staleTime:6e4});console.log("Current belt data:",e);const{data:r=[]}=Qe({queryKey:["classes",t==null?void 0:t.id],queryFn:()=>Wi.getAll(t.id),enabled:!!(t!=null&&t.id),staleTime:6e4}),n=new Date,s=new Date(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()-n.getUTCDay()+1);s.setUTCHours(0,0,0,0);const i=Array.isArray(r)?r.filter(p=>new Date(p.date)>=s).length:0,a=Array.isArray(r)?r.length:0,l=Array.isArray(r)?r.reduce((p,g)=>p+(g.duration||0),0):0,c=Array.isArray(r)?r.reduce((p,g)=>{const b=g.classType||g.class_type||"Unknown";return p[b]=(p[b]||0)+1,p},{}):{},u=Array.isArray(r)?Math.max(0,...r.map(p=>p.yourSubmissions||p.your_submissions||0)):0,d={};Array.isArray(r)&&r.forEach(p=>{const g=new Date(p.date),b=new Date(g.getUTCFullYear(),g.getUTCMonth(),g.getUTCDate()-g.getUTCDay()+1);b.setUTCHours(0,0,0,0);const w=b.toISOString().split("T")[0];d[w]=(d[w]||0)+(p.yourSubmissions||p.your_submissions||0)});const f=Math.max(0,...Object.values(d)),h={classesThisWeek:i,totalClasses:a,totalMinutes:l,classTypeBreakdown:c,highestSubsPerSession:u,highestSubsPerWeek:f},v=({belt:p,stripes:g})=>{const b=m=>({white:"bg-white border-2 border-gray-400",blue:"bg-blue-600",purple:"bg-purple-600",brown:"bg-amber-800",black:"bg-black"})[m]||"bg-gray-400",w=m=>({white:"bg-gray-800",blue:"bg-blue-800",purple:"bg-purple-800",brown:"bg-amber-900",black:"bg-gray-900"})[m]||"bg-gray-600";return o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("div",{className:`${b(p)} w-20 h-5 rounded-sm shadow-md relative flex items-center justify-center`,children:[o.jsx("div",{className:`${w(p)} absolute left-0 top-0 bottom-0 w-1.5 rounded-l-sm`}),o.jsx("span",{className:`${p==="white"?"text-black":"text-white"} font-bold text-xs`,children:"BJJ"}),o.jsx("div",{className:"absolute right-1 top-1/2 transform -translate-y-1/2 flex gap-0.5",children:Array.from({length:g}).map((m,x)=>o.jsx("div",{className:"w-1 h-3 bg-gray-300 rounded-sm"},x))})]}),o.jsxs("div",{className:"text-xs font-medium capitalize text-gray-800 dark:text-white",children:[p," Belt ",g>0&&`(${g} stripe${g!==1?"s":""})`]})]})};return o.jsxs("div",{className:"p-6 max-w-md mx-auto min-h-screen bg-gray-50 dark:bg-gray-900",children:[o.jsx("div",{className:"flex justify-end mb-4",children:o.jsx(zF,{})}),o.jsx("div",{className:"mb-8 relative overflow-hidden rounded-3xl z-0 glow-pulse",children:o.jsxs("div",{className:"bg-gradient-to-r from-pink-500 via-purple-500 to-cyan-500 p-8 text-white",children:[o.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/20 rounded-full -translate-y-8 translate-x-8 bounce-fun"}),o.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-yellow-300/30 rounded-full translate-y-8 -translate-x-8 bounce-fun",style:{animationDelay:"1s"}}),o.jsx("div",{className:"absolute top-1/2 left-1/4 w-16 h-16 bg-green-300/20 rounded-full bounce-fun",style:{animationDelay:"0.5s"}}),o.jsx("div",{className:"relative z-10",children:o.jsx(VF,{})})]})}),o.jsx("div",{className:"mb-8",children:o.jsx(vF,{})}),o.jsxs("div",{className:"mb-8",children:[o.jsx("h3",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-6",children:"Quick Actions "}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs(Ft,{to:"/classes",className:"bg-gradient-to-br from-red-500 to-red-600 text-white p-6 rounded-2xl shadow-lg hover-scale transition-all duration-200 block",children:[o.jsx("div",{className:"text-2xl mb-2",children:""}),o.jsx("div",{className:"font-bold text-lg mb-1",children:"Log Class"}),o.jsx("div",{className:"text-sm opacity-90",children:"Record your training"})]}),o.jsxs(Ft,{to:"/notes",className:"bg-gradient-to-br from-violet-500 to-violet-600 text-white p-6 rounded-2xl shadow-lg hover-scale transition-all duration-200 block",children:[o.jsx("div",{className:"text-2xl mb-2",children:""}),o.jsx("div",{className:"font-bold text-lg mb-1",children:"New Note"}),o.jsx("div",{className:"text-sm opacity-90",children:"Save techniques"})]})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-8",children:[o.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 text-white p-6 rounded-2xl shadow-lg hover-scale transition-all duration-200",children:[o.jsx("div",{className:"text-lg font-bold mb-2",children:"Your Stats "}),o.jsxs("div",{className:"space-y-1 text-sm opacity-90",children:[Object.entries(h.classTypeBreakdown).length>0?Object.entries(h.classTypeBreakdown).map(([p,g])=>o.jsxs("div",{children:[p,": ",g]},p)):o.jsx("div",{children:"No classes yet"}),o.jsxs("div",{className:"border-t border-white/20 mt-2 pt-2",children:[o.jsxs("div",{children:["Best Session: ",h.highestSubsPerSession," subs"]}),o.jsxs("div",{children:["Best Week: ",h.highestSubsPerWeek," subs"]})]})]})]}),o.jsxs("div",{className:"bg-gradient-to-br from-emerald-500 to-emerald-600 text-white p-6 rounded-2xl shadow-lg hover-scale transition-all duration-200",children:[o.jsx("div",{className:"text-3xl font-bold mb-2",children:h.totalClasses}),o.jsx("div",{className:"text-sm opacity-90",children:"Total Classes"}),o.jsx("div",{className:"mt-2 text-2xl",children:""})]}),o.jsxs(Ft,{to:"/belts",className:"bg-gradient-to-br from-purple-500 to-purple-600 text-white p-6 rounded-2xl shadow-lg hover-scale transition-all duration-200 block",children:[o.jsx("div",{className:"mb-2",children:e?o.jsx(v,{belt:e.belt,stripes:e.stripes}):o.jsx("div",{className:"text-sm text-purple-100",children:"No belt recorded"})}),o.jsx("div",{className:"text-sm opacity-90",children:"Current Belt"}),o.jsx("div",{className:"mt-2 text-2xl",children:""})]}),o.jsxs("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 text-white p-6 rounded-2xl shadow-lg hover-scale transition-all duration-200",children:[o.jsxs("div",{className:"text-3xl font-bold mb-2",children:[(h.totalMinutes/60).toFixed(1),"hrs"]}),o.jsx("div",{className:"text-sm opacity-90",children:"Total Hours"}),o.jsx("div",{className:"mt-2 text-2xl",children:""})]})]}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-md",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Recent Activity"}),o.jsx("div",{className:"space-y-3",children:Array.isArray(r)&&r.length>0?r.slice(0,3).map(p=>o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-8 h-8 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center",children:o.jsx("span",{className:"text-blue-600 dark:text-blue-400 text-sm",children:""})}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:"Training Session"}),o.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[new Date(p.date).toLocaleDateString(),"  ",p.classType||p.class_type||"Unknown"]})]})]},p.id)):o.jsxs("div",{className:"text-center py-4 text-gray-500 dark:text-gray-400",children:[o.jsx("p",{children:"No recent activity"}),o.jsx("p",{className:"text-sm",children:"Start by logging your first class!"})]})})]})]})}const qF=["Joe@cleancutconstructions.com.au","joe833360@gmail.com","Bjjjitsjournal@gmail.com","bjjjitsjournal@gmail.com","admin@apexbjj.com.au"],wC=t=>t?qF.includes(t):!1,Yf=(t,e,r)=>wC(t)||e==="premium"||e==="active"?!0:r?new Date(r)>new Date:!1,HF=(t,e,r)=>wC(t)?"Premium (Unlimited)":Yf(t,e,r)?"Premium":"Free Tier",ta={classes:3,notes:3,dataLimitGB:0,communitySharesPerWeek:0};function KF(){y.useEffect(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]);const[t,e]=y.useState(!1),[r,n]=y.useState(null),[s,i]=y.useState(!1),[a,l]=y.useState(null),[c,u]=y.useState(null),d=()=>new Intl.DateTimeFormat("en-CA",{timeZone:"Australia/Sydney",year:"numeric",month:"2-digit",day:"2-digit"}).format(new Date),[f,h]=y.useState({date:d(),time:"18:00",duration:60,type:"Gi",instructor:"",notes:"",rollingPartners:"",yourSubmissions:0,partnerSubmissions:0,cardioRating:3}),{toast:v}=Ot(),p=Zn(),{user:g}=Gt(),b=Yf(g==null?void 0:g.email,g==null?void 0:g.subscriptionStatus),{data:w=[],isLoading:m}=Qe({queryKey:["classes",g==null?void 0:g.id],queryFn:async()=>g!=null&&g.id?await Wi.getAll(g.id):[],enabled:!!(g!=null&&g.id)}),x=Array.isArray(w)?w:[],_=Fe({mutationFn:async({classData:O,originalFormData:z})=>{if(!(g!=null&&g.id))throw new Error("User not authenticated");return{result:await Wi.create(g.id,O),originalFormData:z}},onSuccess:({originalFormData:O})=>{p.invalidateQueries({queryKey:["classes",g==null?void 0:g.id]}),p.invalidateQueries({queryKey:["weekly-commitment",g==null?void 0:g.id]}),p.invalidateQueries({queryKey:["current-belt",g==null?void 0:g.id]}),p.refetchQueries({queryKey:["classes",g==null?void 0:g.id]}),p.refetchQueries({queryKey:["weekly-commitment",g==null?void 0:g.id]});let z="Your training session has been recorded.";const R=[];if(O.instructor&&O.instructor.trim()&&R.push(`with ${O.instructor}`),O.notes&&O.notes.trim()){const V=O.notes.trim().length>30?O.notes.trim().substring(0,30)+"...":O.notes.trim();R.push(V)}R.length>0&&(z=`${O.type} class logged - ${R.join("  ")}`),v({title:"Class Logged!",description:z,duration:4e3}),k()},onError:O=>{v({title:"Error",description:"Failed to log class. Please try again.",variant:"destructive"})}}),S=Fe({mutationFn:async({classId:O,classData:z})=>{if(!(g!=null&&g.id))throw new Error("User not authenticated");return await Wi.update(O,g.id,z)},onSuccess:()=>{p.invalidateQueries({queryKey:["classes",g==null?void 0:g.id]}),v({title:"Class Updated!",description:"Your class has been updated successfully.",duration:4e3}),k()},onError:()=>{v({title:"Error",description:"Failed to update class. Please try again.",variant:"destructive"})}}),j=Fe({mutationFn:async O=>{if(!(g!=null&&g.id))throw new Error("User not authenticated");return await Wi.delete(O,g.id)},onSuccess:()=>{p.invalidateQueries({queryKey:["classes",g==null?void 0:g.id]}),p.invalidateQueries({queryKey:["weekly-commitment",g==null?void 0:g.id]}),v({title:"Class Deleted",description:"Your class has been removed.",duration:4e3}),i(!1),l(null)},onError:()=>{v({title:"Error",description:"Failed to delete class. Please try again.",variant:"destructive"})}}),k=()=>{e(!1),n(null),h({date:d(),time:"18:00",duration:60,type:"Gi",instructor:"",notes:"",rollingPartners:"",yourSubmissions:0,partnerSubmissions:0,cardioRating:3})},N=O=>{var z,R;n(O.id),h({date:O.date.split("T")[0],time:O.time||"18:00",duration:O.duration,type:O.classType||O.class_type,instructor:O.instructor||"",notes:O.techniquesFocused||O.techniques_focused||"",rollingPartners:((z=O.rollingPartners)==null?void 0:z.join(", "))||((R=O.rolling_partners)==null?void 0:R.join(", "))||"",yourSubmissions:O.yourSubmissions||O.your_submissions||0,partnerSubmissions:O.partnerSubmissions||O.partner_submissions||0,cardioRating:O.cardioRating||O.cardio_rating||3}),e(!0)},A=O=>{l(O),i(!0)},I=()=>{a&&j.mutate(a)},M=O=>{if(O.preventDefault(),!r&&!b&&Array.isArray(w)&&w.length>=ta.classes){v({title:"Class Limit Reached",description:`Free tier is limited to ${ta.classes} classes. Upgrade to Premium for unlimited class logging!`,variant:"destructive"});return}const z={date:f.date,time:f.time,duration:f.duration,classType:f.type,instructor:f.instructor,techniquesFocused:f.notes,rollingPartners:f.rollingPartners?f.rollingPartners.split(",").map(R=>R.trim()).filter(R=>R):[],yourSubmissions:f.yourSubmissions,partnerSubmissions:f.partnerSubmissions,cardioRating:f.cardioRating};r?S.mutate({classId:r,classData:z}):_.mutate({classData:z,originalFormData:{...f}})},F=O=>{const{name:z,value:R}=O.target;h(V=>({...V,[z]:["duration","yourSubmissions","partnerSubmissions","cardioRating"].includes(z)?parseInt(R)||0:R}))};return t?o.jsxs("div",{className:"p-6 max-w-md mx-auto bg-background min-h-screen",style:{paddingTop:"max(1.5rem, env(safe-area-inset-top))"},children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h2",{className:"text-2xl font-bold text-foreground",children:r?"Edit Class":"Log Class"}),o.jsx("button",{onClick:k,className:"text-muted-foreground hover:text-foreground",children:""})]}),o.jsxs("form",{onSubmit:M,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-foreground mb-1",children:"Date"}),o.jsx("input",{type:"date",name:"date",value:f.date,onChange:F,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white text-black",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-foreground mb-1",children:"Time"}),o.jsx("input",{type:"time",name:"time",value:f.time,onChange:F,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white text-black",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-foreground mb-1",children:"Duration (minutes)"}),o.jsx("input",{type:"number",name:"duration",value:f.duration,onChange:F,min:"30",max:"240",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white text-black",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),o.jsxs("select",{name:"type",value:f.type,onChange:F,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white text-black",children:[o.jsx("option",{value:"Gi",children:"Gi"}),o.jsx("option",{value:"No Gi",children:"No Gi"}),o.jsx("option",{value:"Open Mat",children:"Open Mat"}),o.jsx("option",{value:"Competition",children:"Competition"}),o.jsx("option",{value:"Drilling",children:"Drilling"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Instructor"}),o.jsx("input",{type:"text",name:"instructor",value:f.instructor,onChange:F,placeholder:"Enter instructor name",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white text-black placeholder-gray-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),o.jsx("textarea",{name:"notes",value:f.notes,onChange:F,rows:3,placeholder:"What did you work on today?",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white text-black placeholder-gray-500"})]}),o.jsxs("div",{className:"border-t pt-4 mt-4",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-700 mb-3",children:"Rolling Session"}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Rolling Partners"}),o.jsx("input",{type:"text",name:"rollingPartners",value:f.rollingPartners,onChange:F,placeholder:"Who did you roll with? (comma separated)",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white text-black placeholder-gray-500"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Your Submissions"}),o.jsx("input",{type:"number",name:"yourSubmissions",value:f.yourSubmissions,onChange:F,min:"0",max:"50",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white text-black"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Partner Submissions"}),o.jsx("input",{type:"number",name:"partnerSubmissions",value:f.partnerSubmissions,onChange:F,min:"0",max:"50",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white text-black"})]})]}),o.jsxs("div",{className:"mt-4",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"How did your cardio feel? (1-5)"}),o.jsxs("select",{name:"cardioRating",value:f.cardioRating,onChange:F,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white text-black",children:[o.jsx("option",{value:1,children:"1 - Exhausted"}),o.jsx("option",{value:2,children:"2 - Tired"}),o.jsx("option",{value:3,children:"3 - Average"}),o.jsx("option",{value:4,children:"4 - Good"}),o.jsx("option",{value:5,children:"5 - Excellent"})]})]})]}),o.jsx("button",{type:"submit",className:"w-full bg-gradient-to-r from-blue-500 to-blue-600 text-white py-3 px-4 rounded-lg font-medium hover:from-blue-600 hover:to-blue-700 transition-all duration-200",children:r?"Update Class":"Log Class"})]})]}):o.jsxs("div",{className:"p-6 max-w-md mx-auto bg-background min-h-screen",style:{paddingTop:"max(1.5rem, env(safe-area-inset-top))"},children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Classes"}),o.jsx("button",{onClick:()=>e(!0),className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white px-4 py-2 rounded-lg font-medium hover:from-blue-600 hover:to-purple-700 transition-all duration-200",children:"+ New Class"})]}),o.jsx("div",{className:"space-y-3",children:x.map((O,z)=>{const R=c===O.id;return o.jsxs("div",{className:"bg-gradient-to-r from-slate-50 to-gray-50 dark:from-slate-800/50 dark:to-gray-800/50 border border-slate-200 dark:border-slate-700 rounded-lg shadow-sm hover-scale transition-all duration-200",children:[o.jsxs("div",{onClick:()=>u(R?null:O.id),className:"cursor-pointer p-4 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[o.jsx("span",{className:"text-blue-600 dark:text-blue-400 font-semibold",children:O.classType}),o.jsx("span",{className:"text-gray-400",children:""}),o.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[new Date(O.date).toLocaleDateString(),O.time&&` @ ${O.time}`]})]}),R?o.jsx(yC,{className:"w-5 h-5 text-gray-500"}):o.jsx(tu,{className:"w-5 h-5 text-gray-500"})]}),R&&o.jsxs("div",{className:"px-4 pb-4 space-y-3 border-t border-slate-200 dark:border-slate-700 pt-3",children:[O.instructor&&o.jsxs("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:[o.jsx("strong",{children:"Instructor:"})," ",O.instructor]}),O.techniquesFocused&&o.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[o.jsx("strong",{children:"Notes:"})," ",O.techniquesFocused]}),O.rollingPartners&&O.rollingPartners.length>0&&o.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[o.jsx("strong",{children:"Rolling Partners:"})," ",O.rollingPartners.join(", ")]}),(O.yourSubmissions>0||O.partnerSubmissions>0||O.cardioRating)&&o.jsxs("div",{className:"flex gap-4 text-sm text-gray-600 dark:text-gray-400",children:[(O.yourSubmissions>0||O.partnerSubmissions>0)&&o.jsxs("span",{children:[o.jsx("strong",{children:"Submissions:"})," You ",O.yourSubmissions||0," - ",O.partnerSubmissions||0," Partners"]}),O.cardioRating&&o.jsxs("span",{children:[o.jsx("strong",{children:"Cardio:"})," ",O.cardioRating,"/5",O.cardioRating===1&&" ",O.cardioRating===2&&" ",O.cardioRating===3&&" ",O.cardioRating===4&&" ",O.cardioRating===5&&" "]})]}),o.jsxs("div",{className:"flex gap-2 pt-2 border-t border-slate-200 dark:border-slate-700",children:[o.jsxs("button",{onClick:V=>{V.stopPropagation(),N(O)},className:"flex items-center gap-2 flex-1 justify-center px-4 py-2 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded transition-colors font-medium","data-testid":`button-edit-class-${O.id}`,children:[o.jsx(LF,{className:"w-4 h-4"}),"Edit"]}),o.jsxs("button",{onClick:V=>{V.stopPropagation(),A(O.id)},className:"flex items-center gap-2 flex-1 justify-center px-4 py-2 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors font-medium","data-testid":`button-delete-class-${O.id}`,children:[o.jsx(ws,{className:"w-4 h-4"}),"Delete"]})]})]})]},O.id)})}),s&&o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-sm w-full",children:[o.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2",children:"Delete Class?"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Are you sure you want to delete this class? This action cannot be undone."}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:()=>{i(!1),l(null)},className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors","data-testid":"button-cancel-delete",children:"Cancel"}),o.jsx("button",{onClick:I,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors","data-testid":"button-confirm-delete",children:"Delete"})]})]})})]})}function bC(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(r=bC(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function _C(){for(var t,e,r=0,n="",s=arguments.length;r<s;r++)(t=arguments[r])&&(e=bC(t))&&(n&&(n+=" "),n+=e);return n}const Wx=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,qx=_C,My=(t,e)=>r=>{var n;if((e==null?void 0:e.variants)==null)return qx(t,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:s,defaultVariants:i}=e,a=Object.keys(s).map(u=>{const d=r==null?void 0:r[u],f=i==null?void 0:i[u];if(d===null)return null;const h=Wx(d)||Wx(f);return s[u][h]}),l=r&&Object.entries(r).reduce((u,d)=>{let[f,h]=d;return h===void 0||(u[f]=h),u},{}),c=e==null||(n=e.compoundVariants)===null||n===void 0?void 0:n.reduce((u,d)=>{let{class:f,className:h,...v}=d;return Object.entries(v).every(p=>{let[g,b]=p;return Array.isArray(b)?b.includes({...i,...l}[g]):{...i,...l}[g]===b})?[...u,f,h]:u},[]);return qx(t,a,c,r==null?void 0:r.class,r==null?void 0:r.className)},Ly="-",GF=t=>{const e=YF(t),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=t;return{getClassGroupId:a=>{const l=a.split(Ly);return l[0]===""&&l.length!==1&&l.shift(),SC(l,e)||QF(a)},getConflictingClassGroupIds:(a,l)=>{const c=r[a]||[];return l&&n[a]?[...c,...n[a]]:c}}},SC=(t,e)=>{var a;if(t.length===0)return e.classGroupId;const r=t[0],n=e.nextPart.get(r),s=n?SC(t.slice(1),n):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(Ly);return(a=e.validators.find(({validator:l})=>l(i)))==null?void 0:a.classGroupId},Hx=/^\[(.+)\]$/,QF=t=>{if(Hx.test(t)){const e=Hx.exec(t)[1],r=e==null?void 0:e.substring(0,e.indexOf(":"));if(r)return"arbitrary.."+r}},YF=t=>{const{theme:e,prefix:r}=t,n={nextPart:new Map,validators:[]};return ZF(Object.entries(t.classGroups),r).forEach(([i,a])=>{Xp(a,n,i,e)}),n},Xp=(t,e,r,n)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:Kx(e,s);i.classGroupId=r;return}if(typeof s=="function"){if(JF(s)){Xp(s(n),e,r,n);return}e.validators.push({validator:s,classGroupId:r});return}Object.entries(s).forEach(([i,a])=>{Xp(a,Kx(e,i),r,n)})})},Kx=(t,e)=>{let r=t;return e.split(Ly).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},JF=t=>t.isThemeGetter,ZF=(t,e)=>e?t.map(([r,n])=>{const s=n.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([a,l])=>[e+a,l])):i);return[r,s]}):t,XF=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,r=new Map,n=new Map;const s=(i,a)=>{r.set(i,a),e++,e>t&&(e=0,n=r,r=new Map)};return{get(i){let a=r.get(i);if(a!==void 0)return a;if((a=n.get(i))!==void 0)return s(i,a),a},set(i,a){r.has(i)?r.set(i,a):s(i,a)}}},jC="!",e3=t=>{const{separator:e,experimentalParseClassName:r}=t,n=e.length===1,s=e[0],i=e.length,a=l=>{const c=[];let u=0,d=0,f;for(let b=0;b<l.length;b++){let w=l[b];if(u===0){if(w===s&&(n||l.slice(b,b+i)===e)){c.push(l.slice(d,b)),d=b+i;continue}if(w==="/"){f=b;continue}}w==="["?u++:w==="]"&&u--}const h=c.length===0?l:l.substring(d),v=h.startsWith(jC),p=v?h.substring(1):h,g=f&&f>d?f-d:void 0;return{modifiers:c,hasImportantModifier:v,baseClassName:p,maybePostfixModifierPosition:g}};return r?l=>r({className:l,parseClassName:a}):a},t3=t=>{if(t.length<=1)return t;const e=[];let r=[];return t.forEach(n=>{n[0]==="["?(e.push(...r.sort(),n),r=[]):r.push(n)}),e.push(...r.sort()),e},r3=t=>({cache:XF(t.cacheSize),parseClassName:e3(t),...GF(t)}),n3=/\s+/,s3=(t,e)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:s}=e,i=[],a=t.trim().split(n3);let l="";for(let c=a.length-1;c>=0;c-=1){const u=a[c],{modifiers:d,hasImportantModifier:f,baseClassName:h,maybePostfixModifierPosition:v}=r(u);let p=!!v,g=n(p?h.substring(0,v):h);if(!g){if(!p){l=u+(l.length>0?" "+l:l);continue}if(g=n(h),!g){l=u+(l.length>0?" "+l:l);continue}p=!1}const b=t3(d).join(":"),w=f?b+jC:b,m=w+g;if(i.includes(m))continue;i.push(m);const x=s(g,p);for(let _=0;_<x.length;++_){const S=x[_];i.push(w+S)}l=u+(l.length>0?" "+l:l)}return l};function i3(){let t=0,e,r,n="";for(;t<arguments.length;)(e=arguments[t++])&&(r=kC(e))&&(n&&(n+=" "),n+=r);return n}const kC=t=>{if(typeof t=="string")return t;let e,r="";for(let n=0;n<t.length;n++)t[n]&&(e=kC(t[n]))&&(r&&(r+=" "),r+=e);return r};function a3(t,...e){let r,n,s,i=a;function a(c){const u=e.reduce((d,f)=>f(d),t());return r=r3(u),n=r.cache.get,s=r.cache.set,i=l,l(c)}function l(c){const u=n(c);if(u)return u;const d=s3(c,r);return s(c,d),d}return function(){return i(i3.apply(null,arguments))}}const Xe=t=>{const e=r=>r[t]||[];return e.isThemeGetter=!0,e},NC=/^\[(?:([a-z-]+):)?(.+)\]$/i,o3=/^\d+\/\d+$/,l3=new Set(["px","full","screen"]),c3=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,u3=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,d3=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,f3=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,h3=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,rs=t=>mo(t)||l3.has(t)||o3.test(t),Rs=t=>ol(t,"length",b3),mo=t=>!!t&&!Number.isNaN(Number(t)),lm=t=>ol(t,"number",mo),_l=t=>!!t&&Number.isInteger(Number(t)),m3=t=>t.endsWith("%")&&mo(t.slice(0,-1)),be=t=>NC.test(t),Is=t=>c3.test(t),p3=new Set(["length","size","percentage"]),g3=t=>ol(t,p3,CC),y3=t=>ol(t,"position",CC),v3=new Set(["image","url"]),x3=t=>ol(t,v3,S3),w3=t=>ol(t,"",_3),Sl=()=>!0,ol=(t,e,r)=>{const n=NC.exec(t);return n?n[1]?typeof e=="string"?n[1]===e:e.has(n[1]):r(n[2]):!1},b3=t=>u3.test(t)&&!d3.test(t),CC=()=>!1,_3=t=>f3.test(t),S3=t=>h3.test(t),j3=()=>{const t=Xe("colors"),e=Xe("spacing"),r=Xe("blur"),n=Xe("brightness"),s=Xe("borderColor"),i=Xe("borderRadius"),a=Xe("borderSpacing"),l=Xe("borderWidth"),c=Xe("contrast"),u=Xe("grayscale"),d=Xe("hueRotate"),f=Xe("invert"),h=Xe("gap"),v=Xe("gradientColorStops"),p=Xe("gradientColorStopPositions"),g=Xe("inset"),b=Xe("margin"),w=Xe("opacity"),m=Xe("padding"),x=Xe("saturate"),_=Xe("scale"),S=Xe("sepia"),j=Xe("skew"),k=Xe("space"),N=Xe("translate"),A=()=>["auto","contain","none"],I=()=>["auto","hidden","clip","visible","scroll"],M=()=>["auto",be,e],F=()=>[be,e],O=()=>["",rs,Rs],z=()=>["auto",mo,be],R=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],V=()=>["solid","dashed","dotted","double","none"],U=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],P=()=>["start","end","center","between","around","evenly","stretch"],L=()=>["","0",be],K=()=>["auto","avoid","all","avoid-page","page","left","right","column"],re=()=>[mo,be];return{cacheSize:500,separator:":",theme:{colors:[Sl],spacing:[rs,Rs],blur:["none","",Is,be],brightness:re(),borderColor:[t],borderRadius:["none","","full",Is,be],borderSpacing:F(),borderWidth:O(),contrast:re(),grayscale:L(),hueRotate:re(),invert:L(),gap:F(),gradientColorStops:[t],gradientColorStopPositions:[m3,Rs],inset:M(),margin:M(),opacity:re(),padding:F(),saturate:re(),scale:re(),sepia:L(),skew:re(),space:F(),translate:F()},classGroups:{aspect:[{aspect:["auto","square","video",be]}],container:["container"],columns:[{columns:[Is]}],"break-after":[{"break-after":K()}],"break-before":[{"break-before":K()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...R(),be]}],overflow:[{overflow:I()}],"overflow-x":[{"overflow-x":I()}],"overflow-y":[{"overflow-y":I()}],overscroll:[{overscroll:A()}],"overscroll-x":[{"overscroll-x":A()}],"overscroll-y":[{"overscroll-y":A()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",_l,be]}],basis:[{basis:M()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",be]}],grow:[{grow:L()}],shrink:[{shrink:L()}],order:[{order:["first","last","none",_l,be]}],"grid-cols":[{"grid-cols":[Sl]}],"col-start-end":[{col:["auto",{span:["full",_l,be]},be]}],"col-start":[{"col-start":z()}],"col-end":[{"col-end":z()}],"grid-rows":[{"grid-rows":[Sl]}],"row-start-end":[{row:["auto",{span:[_l,be]},be]}],"row-start":[{"row-start":z()}],"row-end":[{"row-end":z()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",be]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",be]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...P()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...P(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...P(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[m]}],px:[{px:[m]}],py:[{py:[m]}],ps:[{ps:[m]}],pe:[{pe:[m]}],pt:[{pt:[m]}],pr:[{pr:[m]}],pb:[{pb:[m]}],pl:[{pl:[m]}],m:[{m:[b]}],mx:[{mx:[b]}],my:[{my:[b]}],ms:[{ms:[b]}],me:[{me:[b]}],mt:[{mt:[b]}],mr:[{mr:[b]}],mb:[{mb:[b]}],ml:[{ml:[b]}],"space-x":[{"space-x":[k]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[k]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",be,e]}],"min-w":[{"min-w":[be,e,"min","max","fit"]}],"max-w":[{"max-w":[be,e,"none","full","min","max","fit","prose",{screen:[Is]},Is]}],h:[{h:[be,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[be,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[be,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[be,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Is,Rs]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",lm]}],"font-family":[{font:[Sl]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",be]}],"line-clamp":[{"line-clamp":["none",mo,lm]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",rs,be]}],"list-image":[{"list-image":["none",be]}],"list-style-type":[{list:["none","disc","decimal",be]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[w]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[w]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...V(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",rs,Rs]}],"underline-offset":[{"underline-offset":["auto",rs,be]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:F()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",be]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",be]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[w]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...R(),y3]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",g3]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},x3]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[p]}],"gradient-via-pos":[{via:[p]}],"gradient-to-pos":[{to:[p]}],"gradient-from":[{from:[v]}],"gradient-via":[{via:[v]}],"gradient-to":[{to:[v]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[w]}],"border-style":[{border:[...V(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[w]}],"divide-style":[{divide:V()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...V()]}],"outline-offset":[{"outline-offset":[rs,be]}],"outline-w":[{outline:[rs,Rs]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:O()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[w]}],"ring-offset-w":[{"ring-offset":[rs,Rs]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Is,w3]}],"shadow-color":[{shadow:[Sl]}],opacity:[{opacity:[w]}],"mix-blend":[{"mix-blend":[...U(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":U()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Is,be]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[f]}],saturate:[{saturate:[x]}],sepia:[{sepia:[S]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[w]}],"backdrop-saturate":[{"backdrop-saturate":[x]}],"backdrop-sepia":[{"backdrop-sepia":[S]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",be]}],duration:[{duration:re()}],ease:[{ease:["linear","in","out","in-out",be]}],delay:[{delay:re()}],animate:[{animate:["none","spin","ping","pulse","bounce",be]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[_]}],"scale-x":[{"scale-x":[_]}],"scale-y":[{"scale-y":[_]}],rotate:[{rotate:[_l,be]}],"translate-x":[{"translate-x":[N]}],"translate-y":[{"translate-y":[N]}],"skew-x":[{"skew-x":[j]}],"skew-y":[{"skew-y":[j]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",be]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",be]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":F()}],"scroll-mx":[{"scroll-mx":F()}],"scroll-my":[{"scroll-my":F()}],"scroll-ms":[{"scroll-ms":F()}],"scroll-me":[{"scroll-me":F()}],"scroll-mt":[{"scroll-mt":F()}],"scroll-mr":[{"scroll-mr":F()}],"scroll-mb":[{"scroll-mb":F()}],"scroll-ml":[{"scroll-ml":F()}],"scroll-p":[{"scroll-p":F()}],"scroll-px":[{"scroll-px":F()}],"scroll-py":[{"scroll-py":F()}],"scroll-ps":[{"scroll-ps":F()}],"scroll-pe":[{"scroll-pe":F()}],"scroll-pt":[{"scroll-pt":F()}],"scroll-pr":[{"scroll-pr":F()}],"scroll-pb":[{"scroll-pb":F()}],"scroll-pl":[{"scroll-pl":F()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",be]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[rs,Rs,lm]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},k3=a3(j3);function fe(...t){return k3(_C(t))}const N3=My("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),_c=y.forwardRef(({className:t,variant:e,...r},n)=>o.jsx("div",{ref:n,role:"alert",className:fe(N3({variant:e}),t),...r}));_c.displayName="Alert";const C3=y.forwardRef(({className:t,...e},r)=>o.jsx("h5",{ref:r,className:fe("mb-1 font-medium leading-none tracking-tight",t),...e}));C3.displayName="AlertTitle";const Sc=y.forwardRef(({className:t,...e},r)=>o.jsx("div",{ref:r,className:fe("text-sm [&_p]:leading-relaxed",t),...e}));Sc.displayName="AlertDescription";const E3=(Ut.isNativePlatform(),"https://jitsjournal-backend.onrender.com");function P3({noteId:t,existingVideo:e,onVideoUploaded:r}){const[n,s]=y.useState(!1),[i,a]=y.useState(0),l=y.useRef(null),c=y.useRef(null),{toast:u}=Ot(),d=Zn(),{user:f}=Gt(),{data:h}=Qe({queryKey:["/api/storage/usage"]}),v=Fe({mutationFn:async({file:j,thumbnail:k})=>{var F;const N=new FormData;N.append("video",j),N.append("fileName",j.name),N.append("fileSize",j.size.toString()),N.append("userId",((F=f==null?void 0:f.id)==null?void 0:F.toString())||""),N.append("supabaseId",(f==null?void 0:f.supabaseId)||""),k&&N.append("thumbnail",k),console.log(" FormData being sent:"),console.log("  - userId:",f==null?void 0:f.id),console.log("  - supabaseId:",f==null?void 0:f.supabaseId),console.log("  - fileName:",j.name),console.log("  - fileSize:",j.size),a(30);const A=`${E3}/api/notes/${t}/upload-video`;console.log(" Starting video upload to:",A),console.log(" File size:",j.size,"bytes");const I=await fetch(A,{method:"POST",body:N}).catch(O=>{throw console.error(" Fetch error:",O),new Error(`Network error: ${O.message}`)});if(console.log(" Response status:",I.status),!I.ok){const O=await I.json();throw console.error(" Server error:",O),new Error(O.message||"Upload failed")}a(80);const M=await I.json();return a(100),M},onSuccess:()=>{setTimeout(()=>{s(!1),a(0)},500),d.invalidateQueries({queryKey:["notes"]}),d.invalidateQueries({queryKey:["/api/storage/usage"]}),u({title:"Video uploaded successfully!",description:"Your video has been attached to the note"}),r==null||r()},onError:j=>{s(!1),a(0),console.error("Video upload error:",j),u({title:"Upload failed",description:j.message||"Failed to upload video. Please try again.",variant:"destructive"})}}),p=Fe({mutationFn:async()=>await dt("DELETE",`/api/notes/${t}/video?userId=${f==null?void 0:f.id}`),onSuccess:()=>{d.invalidateQueries({queryKey:["notes"]}),d.invalidateQueries({queryKey:["/api/storage/usage"]}),u({title:"Video removed",description:"Video has been removed from the note"}),r==null||r()},onError:j=>{u({title:"Remove failed",description:"Failed to remove video. Please try again.",variant:"destructive"})}}),g=j=>{var A;const k=(A=j.target.files)==null?void 0:A[0];if(!k)return;if(!k.type.startsWith("video/")){u({title:"Invalid file type",description:"Please select a video file",variant:"destructive"});return}const N=5*1024*1024*1024;if(k.size>N){u({title:"File too large",description:"Video must be less than 5GB",variant:"destructive"});return}if(h){const I=k.size,M=h.remaining;if(I>M){const F=(I/1048576).toFixed(1);u({title:"Storage quota exceeded",description:`This video (${F} MB) exceeds your remaining storage (${h.remainingFormatted}). Delete videos or upgrade your plan.`,variant:"destructive"});return}}b(k)},b=async j=>{s(!0),a(10);try{const k=await w(j);a(20),v.mutate({file:j,thumbnail:k})}catch(k){console.error("Upload error:",k),s(!1),a(0),u({title:"Upload failed",description:"Failed to process video file",variant:"destructive"})}},w=j=>new Promise(k=>{const N=document.createElement("video");N.crossOrigin="anonymous",N.onloadeddata=()=>{N.currentTime=1},N.onseeked=()=>{const A=document.createElement("canvas"),I=A.getContext("2d");A.width=N.videoWidth,A.height=N.videoHeight,I==null||I.drawImage(N,0,0);const M=A.toDataURL("image/jpeg",.8);k(M)},N.onerror=()=>k(""),N.src=URL.createObjectURL(j)}),m=()=>{p.mutate()},x=()=>{var j;(j=l.current)==null||j.click()};if(e)return o.jsxs("div",{className:"mt-4 p-4 border border-gray-200 rounded-lg bg-gray-50",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Vx,{className:"w-5 h-5 text-blue-600"}),o.jsx("span",{className:"font-medium text-gray-800",children:"Attached Video"})]}),o.jsx("button",{onClick:m,disabled:p.isPending,className:"text-red-600 hover:text-red-700 p-1",children:o.jsx(ws,{className:"w-4 h-4"})})]}),o.jsxs("div",{className:"relative",children:[o.jsx("video",{ref:c,src:e.videoUrl,controls:!0,className:"w-full rounded-lg shadow-sm",style:{maxHeight:"300px"},children:"Your browser does not support the video tag."}),o.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:[" ",e.videoFileName]})]})]});const _=h&&h.percentage>=80,S=h&&h.percentage>=100;return o.jsxs("div",{className:"mt-4",children:[_&&!S&&o.jsxs(_c,{className:"mb-4","data-testid":"alert-storage-warning-upload",children:[o.jsx(Yd,{className:"h-4 w-4"}),o.jsxs(Sc,{children:["You're using ",h==null?void 0:h.percentage.toFixed(0),"% of your storage (",h==null?void 0:h.remainingFormatted," remaining). Consider deleting old videos or upgrading your plan."]})]}),S&&o.jsxs(_c,{variant:"destructive",className:"mb-4","data-testid":"alert-storage-full-upload",children:[o.jsx(Yd,{className:"h-4 w-4"}),o.jsx(Sc,{children:"Storage limit reached. Delete videos or upgrade to continue uploading."})]}),o.jsx("input",{ref:l,type:"file",accept:"video/*",onChange:g,className:"hidden"}),n?o.jsx("div",{className:"p-6 border-2 border-blue-300 border-dashed rounded-lg bg-blue-50",children:o.jsxs("div",{className:"text-center",children:[o.jsx(Vx,{className:"w-8 h-8 text-blue-600 mx-auto mb-3 animate-pulse"}),o.jsx("p",{className:"text-blue-800 font-medium mb-2",children:i<50?"Reading video file...":i<60?"Generating thumbnail...":i<100?"Uploading to server...":"Finalizing..."}),o.jsx("div",{className:"w-full bg-blue-200 rounded-full h-3 mb-2",children:o.jsx("div",{className:"bg-blue-600 h-3 rounded-full transition-all duration-500 ease-out",style:{width:`${i}%`}})}),o.jsxs("p",{className:"text-sm text-blue-600 font-medium",children:[Math.round(i),"% complete"]}),o.jsx("p",{className:"text-xs text-blue-500 mt-1",children:"Please wait, do not close this page"})]})}):o.jsx("div",{className:"w-full",children:o.jsx("button",{onClick:x,className:"w-full p-6 border-2 border-gray-300 border-dashed rounded-lg hover:border-blue-400 hover:bg-blue-50 transition-colors group",disabled:n,children:o.jsxs("div",{className:"text-center",children:[o.jsx($F,{className:"w-8 h-8 text-gray-400 group-hover:text-blue-600 mx-auto mb-3"}),o.jsx("span",{className:"text-lg text-gray-600 group-hover:text-blue-600 font-medium",children:"Upload Video from Gallery"}),o.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Select a video file from your device"})]})})}),o.jsx("p",{className:"text-xs text-gray-500 mt-3 text-center",children:"Supported formats: MP4, MOV, AVI  Maximum file size: 5GB"})]})}function Gx(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Jf(...t){return e=>{let r=!1;const n=t.map(s=>{const i=Gx(s,e);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let s=0;s<n.length;s++){const i=n[s];typeof i=="function"?i():Gx(t[s],null)}}}}function $e(...t){return y.useCallback(Jf(...t),t)}function hi(t){const e=T3(t),r=y.forwardRef((n,s)=>{const{children:i,...a}=n,l=y.Children.toArray(i),c=l.find(O3);if(c){const u=c.props.children,d=l.map(f=>f===c?y.Children.count(u)>1?y.Children.only(null):y.isValidElement(u)?u.props.children:null:f);return o.jsx(e,{...a,ref:s,children:y.isValidElement(u)?y.cloneElement(u,void 0,d):null})}return o.jsx(e,{...a,ref:s,children:i})});return r.displayName=`${t}.Slot`,r}var EC=hi("Slot");function T3(t){const e=y.forwardRef((r,n)=>{const{children:s,...i}=r;if(y.isValidElement(s)){const a=I3(s),l=R3(i,s.props);return s.type!==y.Fragment&&(l.ref=n?Jf(n,a):a),y.cloneElement(s,l)}return y.Children.count(s)>1?y.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var PC=Symbol("radix.slottable");function A3(t){const e=({children:r})=>o.jsx(o.Fragment,{children:r});return e.displayName=`${t}.Slottable`,e.__radixId=PC,e}function O3(t){return y.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===PC}function R3(t,e){const r={...e};for(const n in e){const s=t[n],i=e[n];/^on[A-Z]/.test(n)?s&&i?r[n]=(...l)=>{i(...l),s(...l)}:s&&(r[n]=s):n==="style"?r[n]={...s,...i}:n==="className"&&(r[n]=[s,i].filter(Boolean).join(" "))}return{...t,...r}}function I3(t){var n,s;let e=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}const jc=My("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),ze=y.forwardRef(({className:t,variant:e,size:r,asChild:n=!1,...s},i)=>{const a=n?EC:"button";return o.jsx(a,{className:fe(jc({variant:e,size:r,className:t})),ref:i,...s})});ze.displayName="Button";function se(t,e,{checkForDefaultPrevented:r=!0}={}){return function(s){if(t==null||t(s),r===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function D3(t,e){const r=y.createContext(e),n=i=>{const{children:a,...l}=i,c=y.useMemo(()=>l,Object.values(l));return o.jsx(r.Provider,{value:c,children:a})};n.displayName=t+"Provider";function s(i){const a=y.useContext(r);if(a)return a;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[n,s]}function Xn(t,e=[]){let r=[];function n(i,a){const l=y.createContext(a),c=r.length;r=[...r,a];const u=f=>{var w;const{scope:h,children:v,...p}=f,g=((w=h==null?void 0:h[t])==null?void 0:w[c])||l,b=y.useMemo(()=>p,Object.values(p));return o.jsx(g.Provider,{value:b,children:v})};u.displayName=i+"Provider";function d(f,h){var g;const v=((g=h==null?void 0:h[t])==null?void 0:g[c])||l,p=y.useContext(v);if(p)return p;if(a!==void 0)return a;throw new Error(`\`${f}\` must be used within \`${i}\``)}return[u,d]}const s=()=>{const i=r.map(a=>y.createContext(a));return function(l){const c=(l==null?void 0:l[t])||i;return y.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return s.scopeName=t,[n,M3(s,...e)]}function M3(...t){const e=t[0];if(t.length===1)return e;const r=()=>{const n=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const a=n.reduce((l,{useScope:c,scopeName:u})=>{const f=c(i)[`__scope${u}`];return{...l,...f}},{});return y.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return r.scopeName=e.scopeName,r}function en(t){const e=y.useRef(t);return y.useEffect(()=>{e.current=t}),y.useMemo(()=>(...r)=>{var n;return(n=e.current)==null?void 0:n.call(e,...r)},[])}function Wo({prop:t,defaultProp:e,onChange:r=()=>{}}){const[n,s]=L3({defaultProp:e,onChange:r}),i=t!==void 0,a=i?t:n,l=en(r),c=y.useCallback(u=>{if(i){const f=typeof u=="function"?u(t):u;f!==t&&l(f)}else s(u)},[i,t,s,l]);return[a,c]}function L3({defaultProp:t,onChange:e}){const r=y.useState(t),[n]=r,s=y.useRef(n),i=en(e);return y.useEffect(()=>{s.current!==n&&(i(n),s.current=n)},[n,s,i]),r}var F3=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Ne=F3.reduce((t,e)=>{const r=hi(`Primitive.${e}`),n=y.forwardRef((s,i)=>{const{asChild:a,...l}=s,c=a?r:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),o.jsx(c,{...l,ref:i})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function TC(t,e){t&&tl.flushSync(()=>t.dispatchEvent(e))}function Fy(t){const e=t+"CollectionProvider",[r,n]=Xn(e),[s,i]=r(e,{collectionRef:{current:null},itemMap:new Map}),a=g=>{const{scope:b,children:w}=g,m=ge.useRef(null),x=ge.useRef(new Map).current;return o.jsx(s,{scope:b,itemMap:x,collectionRef:m,children:w})};a.displayName=e;const l=t+"CollectionSlot",c=hi(l),u=ge.forwardRef((g,b)=>{const{scope:w,children:m}=g,x=i(l,w),_=$e(b,x.collectionRef);return o.jsx(c,{ref:_,children:m})});u.displayName=l;const d=t+"CollectionItemSlot",f="data-radix-collection-item",h=hi(d),v=ge.forwardRef((g,b)=>{const{scope:w,children:m,...x}=g,_=ge.useRef(null),S=$e(b,_),j=i(d,w);return ge.useEffect(()=>(j.itemMap.set(_,{ref:_,...x}),()=>void j.itemMap.delete(_))),o.jsx(h,{[f]:"",ref:S,children:m})});v.displayName=d;function p(g){const b=i(t+"CollectionConsumer",g);return ge.useCallback(()=>{const m=b.collectionRef.current;if(!m)return[];const x=Array.from(m.querySelectorAll(`[${f}]`));return Array.from(b.itemMap.values()).sort((j,k)=>x.indexOf(j.ref.current)-x.indexOf(k.ref.current))},[b.collectionRef,b.itemMap])}return[{Provider:a,Slot:u,ItemSlot:v},p,n]}var $3=y.createContext(void 0);function $y(t){const e=y.useContext($3);return t||e||"ltr"}function U3(t,e=globalThis==null?void 0:globalThis.document){const r=en(t);y.useEffect(()=>{const n=s=>{s.key==="Escape"&&r(s)};return e.addEventListener("keydown",n,{capture:!0}),()=>e.removeEventListener("keydown",n,{capture:!0})},[r,e])}var B3="DismissableLayer",eg="dismissableLayer.update",z3="dismissableLayer.pointerDownOutside",V3="dismissableLayer.focusOutside",Qx,AC=y.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),ru=y.forwardRef((t,e)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:a,onDismiss:l,...c}=t,u=y.useContext(AC),[d,f]=y.useState(null),h=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,v]=y.useState({}),p=$e(e,k=>f(k)),g=Array.from(u.layers),[b]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),w=g.indexOf(b),m=d?g.indexOf(d):-1,x=u.layersWithOutsidePointerEventsDisabled.size>0,_=m>=w,S=H3(k=>{const N=k.target,A=[...u.branches].some(I=>I.contains(N));!_||A||(s==null||s(k),a==null||a(k),k.defaultPrevented||l==null||l())},h),j=K3(k=>{const N=k.target;[...u.branches].some(I=>I.contains(N))||(i==null||i(k),a==null||a(k),k.defaultPrevented||l==null||l())},h);return U3(k=>{m===u.layers.size-1&&(n==null||n(k),!k.defaultPrevented&&l&&(k.preventDefault(),l()))},h),y.useEffect(()=>{if(d)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(Qx=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),Yx(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=Qx)}},[d,h,r,u]),y.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),Yx())},[d,u]),y.useEffect(()=>{const k=()=>v({});return document.addEventListener(eg,k),()=>document.removeEventListener(eg,k)},[]),o.jsx(Ne.div,{...c,ref:p,style:{pointerEvents:x?_?"auto":"none":void 0,...t.style},onFocusCapture:se(t.onFocusCapture,j.onFocusCapture),onBlurCapture:se(t.onBlurCapture,j.onBlurCapture),onPointerDownCapture:se(t.onPointerDownCapture,S.onPointerDownCapture)})});ru.displayName=B3;var W3="DismissableLayerBranch",q3=y.forwardRef((t,e)=>{const r=y.useContext(AC),n=y.useRef(null),s=$e(e,n);return y.useEffect(()=>{const i=n.current;if(i)return r.branches.add(i),()=>{r.branches.delete(i)}},[r.branches]),o.jsx(Ne.div,{...t,ref:s})});q3.displayName=W3;function H3(t,e=globalThis==null?void 0:globalThis.document){const r=en(t),n=y.useRef(!1),s=y.useRef(()=>{});return y.useEffect(()=>{const i=l=>{if(l.target&&!n.current){let c=function(){OC(z3,r,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=c,e.addEventListener("click",s.current,{once:!0})):c()}else e.removeEventListener("click",s.current);n.current=!1},a=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(a),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,r]),{onPointerDownCapture:()=>n.current=!0}}function K3(t,e=globalThis==null?void 0:globalThis.document){const r=en(t),n=y.useRef(!1);return y.useEffect(()=>{const s=i=>{i.target&&!n.current&&OC(V3,r,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function Yx(){const t=new CustomEvent(eg);document.dispatchEvent(t)}function OC(t,e,r,{discrete:n}){const s=r.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:r});e&&s.addEventListener(t,e,{once:!0}),n?TC(s,i):s.dispatchEvent(i)}var cm=0;function Zf(){y.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??Jx()),document.body.insertAdjacentElement("beforeend",t[1]??Jx()),cm++,()=>{cm===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),cm--}},[])}function Jx(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var um="focusScope.autoFocusOnMount",dm="focusScope.autoFocusOnUnmount",Zx={bubbles:!1,cancelable:!0},G3="FocusScope",nu=y.forwardRef((t,e)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...a}=t,[l,c]=y.useState(null),u=en(s),d=en(i),f=y.useRef(null),h=$e(e,g=>c(g)),v=y.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;y.useEffect(()=>{if(n){let g=function(x){if(v.paused||!l)return;const _=x.target;l.contains(_)?f.current=_:Fs(f.current,{select:!0})},b=function(x){if(v.paused||!l)return;const _=x.relatedTarget;_!==null&&(l.contains(_)||Fs(f.current,{select:!0}))},w=function(x){if(document.activeElement===document.body)for(const S of x)S.removedNodes.length>0&&Fs(l)};document.addEventListener("focusin",g),document.addEventListener("focusout",b);const m=new MutationObserver(w);return l&&m.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",b),m.disconnect()}}},[n,l,v.paused]),y.useEffect(()=>{if(l){ew.add(v);const g=document.activeElement;if(!l.contains(g)){const w=new CustomEvent(um,Zx);l.addEventListener(um,u),l.dispatchEvent(w),w.defaultPrevented||(Q3(e$(RC(l)),{select:!0}),document.activeElement===g&&Fs(l))}return()=>{l.removeEventListener(um,u),setTimeout(()=>{const w=new CustomEvent(dm,Zx);l.addEventListener(dm,d),l.dispatchEvent(w),w.defaultPrevented||Fs(g??document.body,{select:!0}),l.removeEventListener(dm,d),ew.remove(v)},0)}}},[l,u,d,v]);const p=y.useCallback(g=>{if(!r&&!n||v.paused)return;const b=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,w=document.activeElement;if(b&&w){const m=g.currentTarget,[x,_]=Y3(m);x&&_?!g.shiftKey&&w===_?(g.preventDefault(),r&&Fs(x,{select:!0})):g.shiftKey&&w===x&&(g.preventDefault(),r&&Fs(_,{select:!0})):w===m&&g.preventDefault()}},[r,n,v.paused]);return o.jsx(Ne.div,{tabIndex:-1,...a,ref:h,onKeyDown:p})});nu.displayName=G3;function Q3(t,{select:e=!1}={}){const r=document.activeElement;for(const n of t)if(Fs(n,{select:e}),document.activeElement!==r)return}function Y3(t){const e=RC(t),r=Xx(e,t),n=Xx(e.reverse(),t);return[r,n]}function RC(t){const e=[],r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)e.push(r.currentNode);return e}function Xx(t,e){for(const r of t)if(!J3(r,{upTo:e}))return r}function J3(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function Z3(t){return t instanceof HTMLInputElement&&"select"in t}function Fs(t,{select:e=!1}={}){if(t&&t.focus){const r=document.activeElement;t.focus({preventScroll:!0}),t!==r&&Z3(t)&&e&&t.select()}}var ew=X3();function X3(){let t=[];return{add(e){const r=t[0];e!==r&&(r==null||r.pause()),t=tw(t,e),t.unshift(e)},remove(e){var r;t=tw(t,e),(r=t[0])==null||r.resume()}}}function tw(t,e){const r=[...t],n=r.indexOf(e);return n!==-1&&r.splice(n,1),r}function e$(t){return t.filter(e=>e.tagName!=="A")}var ur=globalThis!=null&&globalThis.document?y.useLayoutEffect:()=>{},t$=ck[" useId ".trim().toString()]||(()=>{}),r$=0;function qn(t){const[e,r]=y.useState(t$());return ur(()=>{r(n=>n??String(r$++))},[t]),e?`radix-${e}`:""}const n$=["top","right","bottom","left"],mi=Math.min,Rr=Math.max,Zd=Math.round,zu=Math.floor,Hn=t=>({x:t,y:t}),s$={left:"right",right:"left",bottom:"top",top:"bottom"},i$={start:"end",end:"start"};function tg(t,e,r){return Rr(t,mi(e,r))}function bs(t,e){return typeof t=="function"?t(e):t}function _s(t){return t.split("-")[0]}function ll(t){return t.split("-")[1]}function Uy(t){return t==="x"?"y":"x"}function By(t){return t==="y"?"height":"width"}function pi(t){return["top","bottom"].includes(_s(t))?"y":"x"}function zy(t){return Uy(pi(t))}function a$(t,e,r){r===void 0&&(r=!1);const n=ll(t),s=zy(t),i=By(s);let a=s==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(a=Xd(a)),[a,Xd(a)]}function o$(t){const e=Xd(t);return[rg(t),e,rg(e)]}function rg(t){return t.replace(/start|end/g,e=>i$[e])}function l$(t,e,r){const n=["left","right"],s=["right","left"],i=["top","bottom"],a=["bottom","top"];switch(t){case"top":case"bottom":return r?e?s:n:e?n:s;case"left":case"right":return e?i:a;default:return[]}}function c$(t,e,r,n){const s=ll(t);let i=l$(_s(t),r==="start",n);return s&&(i=i.map(a=>a+"-"+s),e&&(i=i.concat(i.map(rg)))),i}function Xd(t){return t.replace(/left|right|bottom|top/g,e=>s$[e])}function u$(t){return{top:0,right:0,bottom:0,left:0,...t}}function IC(t){return typeof t!="number"?u$(t):{top:t,right:t,bottom:t,left:t}}function ef(t){const{x:e,y:r,width:n,height:s}=t;return{width:n,height:s,top:r,left:e,right:e+n,bottom:r+s,x:e,y:r}}function rw(t,e,r){let{reference:n,floating:s}=t;const i=pi(e),a=zy(e),l=By(a),c=_s(e),u=i==="y",d=n.x+n.width/2-s.width/2,f=n.y+n.height/2-s.height/2,h=n[l]/2-s[l]/2;let v;switch(c){case"top":v={x:d,y:n.y-s.height};break;case"bottom":v={x:d,y:n.y+n.height};break;case"right":v={x:n.x+n.width,y:f};break;case"left":v={x:n.x-s.width,y:f};break;default:v={x:n.x,y:n.y}}switch(ll(e)){case"start":v[a]-=h*(r&&u?-1:1);break;case"end":v[a]+=h*(r&&u?-1:1);break}return v}const d$=async(t,e,r)=>{const{placement:n="bottom",strategy:s="absolute",middleware:i=[],platform:a}=r,l=i.filter(Boolean),c=await(a.isRTL==null?void 0:a.isRTL(e));let u=await a.getElementRects({reference:t,floating:e,strategy:s}),{x:d,y:f}=rw(u,n,c),h=n,v={},p=0;for(let g=0;g<l.length;g++){const{name:b,fn:w}=l[g],{x:m,y:x,data:_,reset:S}=await w({x:d,y:f,initialPlacement:n,placement:h,strategy:s,middlewareData:v,rects:u,platform:a,elements:{reference:t,floating:e}});d=m??d,f=x??f,v={...v,[b]:{...v[b],..._}},S&&p<=50&&(p++,typeof S=="object"&&(S.placement&&(h=S.placement),S.rects&&(u=S.rects===!0?await a.getElementRects({reference:t,floating:e,strategy:s}):S.rects),{x:d,y:f}=rw(u,h,c)),g=-1)}return{x:d,y:f,placement:h,strategy:s,middlewareData:v}};async function kc(t,e){var r;e===void 0&&(e={});const{x:n,y:s,platform:i,rects:a,elements:l,strategy:c}=t,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:f="floating",altBoundary:h=!1,padding:v=0}=bs(e,t),p=IC(v),b=l[h?f==="floating"?"reference":"floating":f],w=ef(await i.getClippingRect({element:(r=await(i.isElement==null?void 0:i.isElement(b)))==null||r?b:b.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:u,rootBoundary:d,strategy:c})),m=f==="floating"?{x:n,y:s,width:a.floating.width,height:a.floating.height}:a.reference,x=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),_=await(i.isElement==null?void 0:i.isElement(x))?await(i.getScale==null?void 0:i.getScale(x))||{x:1,y:1}:{x:1,y:1},S=ef(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:m,offsetParent:x,strategy:c}):m);return{top:(w.top-S.top+p.top)/_.y,bottom:(S.bottom-w.bottom+p.bottom)/_.y,left:(w.left-S.left+p.left)/_.x,right:(S.right-w.right+p.right)/_.x}}const f$=t=>({name:"arrow",options:t,async fn(e){const{x:r,y:n,placement:s,rects:i,platform:a,elements:l,middlewareData:c}=e,{element:u,padding:d=0}=bs(t,e)||{};if(u==null)return{};const f=IC(d),h={x:r,y:n},v=zy(s),p=By(v),g=await a.getDimensions(u),b=v==="y",w=b?"top":"left",m=b?"bottom":"right",x=b?"clientHeight":"clientWidth",_=i.reference[p]+i.reference[v]-h[v]-i.floating[p],S=h[v]-i.reference[v],j=await(a.getOffsetParent==null?void 0:a.getOffsetParent(u));let k=j?j[x]:0;(!k||!await(a.isElement==null?void 0:a.isElement(j)))&&(k=l.floating[x]||i.floating[p]);const N=_/2-S/2,A=k/2-g[p]/2-1,I=mi(f[w],A),M=mi(f[m],A),F=I,O=k-g[p]-M,z=k/2-g[p]/2+N,R=tg(F,z,O),V=!c.arrow&&ll(s)!=null&&z!==R&&i.reference[p]/2-(z<F?I:M)-g[p]/2<0,U=V?z<F?z-F:z-O:0;return{[v]:h[v]+U,data:{[v]:R,centerOffset:z-R-U,...V&&{alignmentOffset:U}},reset:V}}}),h$=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var r,n;const{placement:s,middlewareData:i,rects:a,initialPlacement:l,platform:c,elements:u}=e,{mainAxis:d=!0,crossAxis:f=!0,fallbackPlacements:h,fallbackStrategy:v="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:g=!0,...b}=bs(t,e);if((r=i.arrow)!=null&&r.alignmentOffset)return{};const w=_s(s),m=pi(l),x=_s(l)===l,_=await(c.isRTL==null?void 0:c.isRTL(u.floating)),S=h||(x||!g?[Xd(l)]:o$(l)),j=p!=="none";!h&&j&&S.push(...c$(l,g,p,_));const k=[l,...S],N=await kc(e,b),A=[];let I=((n=i.flip)==null?void 0:n.overflows)||[];if(d&&A.push(N[w]),f){const z=a$(s,a,_);A.push(N[z[0]],N[z[1]])}if(I=[...I,{placement:s,overflows:A}],!A.every(z=>z<=0)){var M,F;const z=(((M=i.flip)==null?void 0:M.index)||0)+1,R=k[z];if(R)return{data:{index:z,overflows:I},reset:{placement:R}};let V=(F=I.filter(U=>U.overflows[0]<=0).sort((U,P)=>U.overflows[1]-P.overflows[1])[0])==null?void 0:F.placement;if(!V)switch(v){case"bestFit":{var O;const U=(O=I.filter(P=>{if(j){const L=pi(P.placement);return L===m||L==="y"}return!0}).map(P=>[P.placement,P.overflows.filter(L=>L>0).reduce((L,K)=>L+K,0)]).sort((P,L)=>P[1]-L[1])[0])==null?void 0:O[0];U&&(V=U);break}case"initialPlacement":V=l;break}if(s!==V)return{reset:{placement:V}}}return{}}}};function nw(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function sw(t){return n$.some(e=>t[e]>=0)}const m$=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:r}=e,{strategy:n="referenceHidden",...s}=bs(t,e);switch(n){case"referenceHidden":{const i=await kc(e,{...s,elementContext:"reference"}),a=nw(i,r.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:sw(a)}}}case"escaped":{const i=await kc(e,{...s,altBoundary:!0}),a=nw(i,r.floating);return{data:{escapedOffsets:a,escaped:sw(a)}}}default:return{}}}}};async function p$(t,e){const{placement:r,platform:n,elements:s}=t,i=await(n.isRTL==null?void 0:n.isRTL(s.floating)),a=_s(r),l=ll(r),c=pi(r)==="y",u=["left","top"].includes(a)?-1:1,d=i&&c?-1:1,f=bs(e,t);let{mainAxis:h,crossAxis:v,alignmentAxis:p}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return l&&typeof p=="number"&&(v=l==="end"?p*-1:p),c?{x:v*d,y:h*u}:{x:h*u,y:v*d}}const g$=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var r,n;const{x:s,y:i,placement:a,middlewareData:l}=e,c=await p$(e,t);return a===((r=l.offset)==null?void 0:r.placement)&&(n=l.arrow)!=null&&n.alignmentOffset?{}:{x:s+c.x,y:i+c.y,data:{...c,placement:a}}}}},y$=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:r,y:n,placement:s}=e,{mainAxis:i=!0,crossAxis:a=!1,limiter:l={fn:b=>{let{x:w,y:m}=b;return{x:w,y:m}}},...c}=bs(t,e),u={x:r,y:n},d=await kc(e,c),f=pi(_s(s)),h=Uy(f);let v=u[h],p=u[f];if(i){const b=h==="y"?"top":"left",w=h==="y"?"bottom":"right",m=v+d[b],x=v-d[w];v=tg(m,v,x)}if(a){const b=f==="y"?"top":"left",w=f==="y"?"bottom":"right",m=p+d[b],x=p-d[w];p=tg(m,p,x)}const g=l.fn({...e,[h]:v,[f]:p});return{...g,data:{x:g.x-r,y:g.y-n,enabled:{[h]:i,[f]:a}}}}}},v$=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:r,y:n,placement:s,rects:i,middlewareData:a}=e,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=bs(t,e),d={x:r,y:n},f=pi(s),h=Uy(f);let v=d[h],p=d[f];const g=bs(l,e),b=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(c){const x=h==="y"?"height":"width",_=i.reference[h]-i.floating[x]+b.mainAxis,S=i.reference[h]+i.reference[x]-b.mainAxis;v<_?v=_:v>S&&(v=S)}if(u){var w,m;const x=h==="y"?"width":"height",_=["top","left"].includes(_s(s)),S=i.reference[f]-i.floating[x]+(_&&((w=a.offset)==null?void 0:w[f])||0)+(_?0:b.crossAxis),j=i.reference[f]+i.reference[x]+(_?0:((m=a.offset)==null?void 0:m[f])||0)-(_?b.crossAxis:0);p<S?p=S:p>j&&(p=j)}return{[h]:v,[f]:p}}}},x$=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var r,n;const{placement:s,rects:i,platform:a,elements:l}=e,{apply:c=()=>{},...u}=bs(t,e),d=await kc(e,u),f=_s(s),h=ll(s),v=pi(s)==="y",{width:p,height:g}=i.floating;let b,w;f==="top"||f==="bottom"?(b=f,w=h===(await(a.isRTL==null?void 0:a.isRTL(l.floating))?"start":"end")?"left":"right"):(w=f,b=h==="end"?"top":"bottom");const m=g-d.top-d.bottom,x=p-d.left-d.right,_=mi(g-d[b],m),S=mi(p-d[w],x),j=!e.middlewareData.shift;let k=_,N=S;if((r=e.middlewareData.shift)!=null&&r.enabled.x&&(N=x),(n=e.middlewareData.shift)!=null&&n.enabled.y&&(k=m),j&&!h){const I=Rr(d.left,0),M=Rr(d.right,0),F=Rr(d.top,0),O=Rr(d.bottom,0);v?N=p-2*(I!==0||M!==0?I+M:Rr(d.left,d.right)):k=g-2*(F!==0||O!==0?F+O:Rr(d.top,d.bottom))}await c({...e,availableWidth:N,availableHeight:k});const A=await a.getDimensions(l.floating);return p!==A.width||g!==A.height?{reset:{rects:!0}}:{}}}};function Xf(){return typeof window<"u"}function cl(t){return DC(t)?(t.nodeName||"").toLowerCase():"#document"}function Lr(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function es(t){var e;return(e=(DC(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function DC(t){return Xf()?t instanceof Node||t instanceof Lr(t).Node:!1}function Sn(t){return Xf()?t instanceof Element||t instanceof Lr(t).Element:!1}function Gn(t){return Xf()?t instanceof HTMLElement||t instanceof Lr(t).HTMLElement:!1}function iw(t){return!Xf()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Lr(t).ShadowRoot}function su(t){const{overflow:e,overflowX:r,overflowY:n,display:s}=jn(t);return/auto|scroll|overlay|hidden|clip/.test(e+n+r)&&!["inline","contents"].includes(s)}function w$(t){return["table","td","th"].includes(cl(t))}function eh(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function Vy(t){const e=Wy(),r=Sn(t)?jn(t):t;return["transform","translate","scale","rotate","perspective"].some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!e&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!e&&(r.filter?r.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(n=>(r.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(r.contain||"").includes(n))}function b$(t){let e=gi(t);for(;Gn(e)&&!qo(e);){if(Vy(e))return e;if(eh(e))return null;e=gi(e)}return null}function Wy(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function qo(t){return["html","body","#document"].includes(cl(t))}function jn(t){return Lr(t).getComputedStyle(t)}function th(t){return Sn(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function gi(t){if(cl(t)==="html")return t;const e=t.assignedSlot||t.parentNode||iw(t)&&t.host||es(t);return iw(e)?e.host:e}function MC(t){const e=gi(t);return qo(e)?t.ownerDocument?t.ownerDocument.body:t.body:Gn(e)&&su(e)?e:MC(e)}function Nc(t,e,r){var n;e===void 0&&(e=[]),r===void 0&&(r=!0);const s=MC(t),i=s===((n=t.ownerDocument)==null?void 0:n.body),a=Lr(s);if(i){const l=ng(a);return e.concat(a,a.visualViewport||[],su(s)?s:[],l&&r?Nc(l):[])}return e.concat(s,Nc(s,[],r))}function ng(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function LC(t){const e=jn(t);let r=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const s=Gn(t),i=s?t.offsetWidth:r,a=s?t.offsetHeight:n,l=Zd(r)!==i||Zd(n)!==a;return l&&(r=i,n=a),{width:r,height:n,$:l}}function qy(t){return Sn(t)?t:t.contextElement}function po(t){const e=qy(t);if(!Gn(e))return Hn(1);const r=e.getBoundingClientRect(),{width:n,height:s,$:i}=LC(e);let a=(i?Zd(r.width):r.width)/n,l=(i?Zd(r.height):r.height)/s;return(!a||!Number.isFinite(a))&&(a=1),(!l||!Number.isFinite(l))&&(l=1),{x:a,y:l}}const _$=Hn(0);function FC(t){const e=Lr(t);return!Wy()||!e.visualViewport?_$:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function S$(t,e,r){return e===void 0&&(e=!1),!r||e&&r!==Lr(t)?!1:e}function da(t,e,r,n){e===void 0&&(e=!1),r===void 0&&(r=!1);const s=t.getBoundingClientRect(),i=qy(t);let a=Hn(1);e&&(n?Sn(n)&&(a=po(n)):a=po(t));const l=S$(i,r,n)?FC(i):Hn(0);let c=(s.left+l.x)/a.x,u=(s.top+l.y)/a.y,d=s.width/a.x,f=s.height/a.y;if(i){const h=Lr(i),v=n&&Sn(n)?Lr(n):n;let p=h,g=ng(p);for(;g&&n&&v!==p;){const b=po(g),w=g.getBoundingClientRect(),m=jn(g),x=w.left+(g.clientLeft+parseFloat(m.paddingLeft))*b.x,_=w.top+(g.clientTop+parseFloat(m.paddingTop))*b.y;c*=b.x,u*=b.y,d*=b.x,f*=b.y,c+=x,u+=_,p=Lr(g),g=ng(p)}}return ef({width:d,height:f,x:c,y:u})}function Hy(t,e){const r=th(t).scrollLeft;return e?e.left+r:da(es(t)).left+r}function $C(t,e,r){r===void 0&&(r=!1);const n=t.getBoundingClientRect(),s=n.left+e.scrollLeft-(r?0:Hy(t,n)),i=n.top+e.scrollTop;return{x:s,y:i}}function j$(t){let{elements:e,rect:r,offsetParent:n,strategy:s}=t;const i=s==="fixed",a=es(n),l=e?eh(e.floating):!1;if(n===a||l&&i)return r;let c={scrollLeft:0,scrollTop:0},u=Hn(1);const d=Hn(0),f=Gn(n);if((f||!f&&!i)&&((cl(n)!=="body"||su(a))&&(c=th(n)),Gn(n))){const v=da(n);u=po(n),d.x=v.x+n.clientLeft,d.y=v.y+n.clientTop}const h=a&&!f&&!i?$C(a,c,!0):Hn(0);return{width:r.width*u.x,height:r.height*u.y,x:r.x*u.x-c.scrollLeft*u.x+d.x+h.x,y:r.y*u.y-c.scrollTop*u.y+d.y+h.y}}function k$(t){return Array.from(t.getClientRects())}function N$(t){const e=es(t),r=th(t),n=t.ownerDocument.body,s=Rr(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),i=Rr(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let a=-r.scrollLeft+Hy(t);const l=-r.scrollTop;return jn(n).direction==="rtl"&&(a+=Rr(e.clientWidth,n.clientWidth)-s),{width:s,height:i,x:a,y:l}}function C$(t,e){const r=Lr(t),n=es(t),s=r.visualViewport;let i=n.clientWidth,a=n.clientHeight,l=0,c=0;if(s){i=s.width,a=s.height;const u=Wy();(!u||u&&e==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:i,height:a,x:l,y:c}}function E$(t,e){const r=da(t,!0,e==="fixed"),n=r.top+t.clientTop,s=r.left+t.clientLeft,i=Gn(t)?po(t):Hn(1),a=t.clientWidth*i.x,l=t.clientHeight*i.y,c=s*i.x,u=n*i.y;return{width:a,height:l,x:c,y:u}}function aw(t,e,r){let n;if(e==="viewport")n=C$(t,r);else if(e==="document")n=N$(es(t));else if(Sn(e))n=E$(e,r);else{const s=FC(t);n={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return ef(n)}function UC(t,e){const r=gi(t);return r===e||!Sn(r)||qo(r)?!1:jn(r).position==="fixed"||UC(r,e)}function P$(t,e){const r=e.get(t);if(r)return r;let n=Nc(t,[],!1).filter(l=>Sn(l)&&cl(l)!=="body"),s=null;const i=jn(t).position==="fixed";let a=i?gi(t):t;for(;Sn(a)&&!qo(a);){const l=jn(a),c=Vy(a);!c&&l.position==="fixed"&&(s=null),(i?!c&&!s:!c&&l.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||su(a)&&!c&&UC(t,a))?n=n.filter(d=>d!==a):s=l,a=gi(a)}return e.set(t,n),n}function T$(t){let{element:e,boundary:r,rootBoundary:n,strategy:s}=t;const a=[...r==="clippingAncestors"?eh(e)?[]:P$(e,this._c):[].concat(r),n],l=a[0],c=a.reduce((u,d)=>{const f=aw(e,d,s);return u.top=Rr(f.top,u.top),u.right=mi(f.right,u.right),u.bottom=mi(f.bottom,u.bottom),u.left=Rr(f.left,u.left),u},aw(e,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function A$(t){const{width:e,height:r}=LC(t);return{width:e,height:r}}function O$(t,e,r){const n=Gn(e),s=es(e),i=r==="fixed",a=da(t,!0,i,e);let l={scrollLeft:0,scrollTop:0};const c=Hn(0);if(n||!n&&!i)if((cl(e)!=="body"||su(s))&&(l=th(e)),n){const h=da(e,!0,i,e);c.x=h.x+e.clientLeft,c.y=h.y+e.clientTop}else s&&(c.x=Hy(s));const u=s&&!n&&!i?$C(s,l):Hn(0),d=a.left+l.scrollLeft-c.x-u.x,f=a.top+l.scrollTop-c.y-u.y;return{x:d,y:f,width:a.width,height:a.height}}function fm(t){return jn(t).position==="static"}function ow(t,e){if(!Gn(t)||jn(t).position==="fixed")return null;if(e)return e(t);let r=t.offsetParent;return es(t)===r&&(r=r.ownerDocument.body),r}function BC(t,e){const r=Lr(t);if(eh(t))return r;if(!Gn(t)){let s=gi(t);for(;s&&!qo(s);){if(Sn(s)&&!fm(s))return s;s=gi(s)}return r}let n=ow(t,e);for(;n&&w$(n)&&fm(n);)n=ow(n,e);return n&&qo(n)&&fm(n)&&!Vy(n)?r:n||b$(t)||r}const R$=async function(t){const e=this.getOffsetParent||BC,r=this.getDimensions,n=await r(t.floating);return{reference:O$(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function I$(t){return jn(t).direction==="rtl"}const D$={convertOffsetParentRelativeRectToViewportRelativeRect:j$,getDocumentElement:es,getClippingRect:T$,getOffsetParent:BC,getElementRects:R$,getClientRects:k$,getDimensions:A$,getScale:po,isElement:Sn,isRTL:I$};function zC(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function M$(t,e){let r=null,n;const s=es(t);function i(){var l;clearTimeout(n),(l=r)==null||l.disconnect(),r=null}function a(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const u=t.getBoundingClientRect(),{left:d,top:f,width:h,height:v}=u;if(l||e(),!h||!v)return;const p=zu(f),g=zu(s.clientWidth-(d+h)),b=zu(s.clientHeight-(f+v)),w=zu(d),x={rootMargin:-p+"px "+-g+"px "+-b+"px "+-w+"px",threshold:Rr(0,mi(1,c))||1};let _=!0;function S(j){const k=j[0].intersectionRatio;if(k!==c){if(!_)return a();k?a(!1,k):n=setTimeout(()=>{a(!1,1e-7)},1e3)}k===1&&!zC(u,t.getBoundingClientRect())&&a(),_=!1}try{r=new IntersectionObserver(S,{...x,root:s.ownerDocument})}catch{r=new IntersectionObserver(S,x)}r.observe(t)}return a(!0),i}function L$(t,e,r,n){n===void 0&&(n={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,u=qy(t),d=s||i?[...u?Nc(u):[],...Nc(e)]:[];d.forEach(w=>{s&&w.addEventListener("scroll",r,{passive:!0}),i&&w.addEventListener("resize",r)});const f=u&&l?M$(u,r):null;let h=-1,v=null;a&&(v=new ResizeObserver(w=>{let[m]=w;m&&m.target===u&&v&&(v.unobserve(e),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var x;(x=v)==null||x.observe(e)})),r()}),u&&!c&&v.observe(u),v.observe(e));let p,g=c?da(t):null;c&&b();function b(){const w=da(t);g&&!zC(g,w)&&r(),g=w,p=requestAnimationFrame(b)}return r(),()=>{var w;d.forEach(m=>{s&&m.removeEventListener("scroll",r),i&&m.removeEventListener("resize",r)}),f==null||f(),(w=v)==null||w.disconnect(),v=null,c&&cancelAnimationFrame(p)}}const F$=g$,$$=y$,U$=h$,B$=x$,z$=m$,lw=f$,V$=v$,W$=(t,e,r)=>{const n=new Map,s={platform:D$,...r},i={...s.platform,_c:n};return d$(t,e,{...s,platform:i})};var dd=typeof document<"u"?y.useLayoutEffect:y.useEffect;function tf(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let r,n,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(r=t.length,r!==e.length)return!1;for(n=r;n--!==0;)if(!tf(t[n],e[n]))return!1;return!0}if(s=Object.keys(t),r=s.length,r!==Object.keys(e).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(e,s[n]))return!1;for(n=r;n--!==0;){const i=s[n];if(!(i==="_owner"&&t.$$typeof)&&!tf(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function VC(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function cw(t,e){const r=VC(t);return Math.round(e*r)/r}function hm(t){const e=y.useRef(t);return dd(()=>{e.current=t}),e}function q$(t){t===void 0&&(t={});const{placement:e="bottom",strategy:r="absolute",middleware:n=[],platform:s,elements:{reference:i,floating:a}={},transform:l=!0,whileElementsMounted:c,open:u}=t,[d,f]=y.useState({x:0,y:0,strategy:r,placement:e,middlewareData:{},isPositioned:!1}),[h,v]=y.useState(n);tf(h,n)||v(n);const[p,g]=y.useState(null),[b,w]=y.useState(null),m=y.useCallback(P=>{P!==j.current&&(j.current=P,g(P))},[]),x=y.useCallback(P=>{P!==k.current&&(k.current=P,w(P))},[]),_=i||p,S=a||b,j=y.useRef(null),k=y.useRef(null),N=y.useRef(d),A=c!=null,I=hm(c),M=hm(s),F=hm(u),O=y.useCallback(()=>{if(!j.current||!k.current)return;const P={placement:e,strategy:r,middleware:h};M.current&&(P.platform=M.current),W$(j.current,k.current,P).then(L=>{const K={...L,isPositioned:F.current!==!1};z.current&&!tf(N.current,K)&&(N.current=K,tl.flushSync(()=>{f(K)}))})},[h,e,r,M,F]);dd(()=>{u===!1&&N.current.isPositioned&&(N.current.isPositioned=!1,f(P=>({...P,isPositioned:!1})))},[u]);const z=y.useRef(!1);dd(()=>(z.current=!0,()=>{z.current=!1}),[]),dd(()=>{if(_&&(j.current=_),S&&(k.current=S),_&&S){if(I.current)return I.current(_,S,O);O()}},[_,S,O,I,A]);const R=y.useMemo(()=>({reference:j,floating:k,setReference:m,setFloating:x}),[m,x]),V=y.useMemo(()=>({reference:_,floating:S}),[_,S]),U=y.useMemo(()=>{const P={position:r,left:0,top:0};if(!V.floating)return P;const L=cw(V.floating,d.x),K=cw(V.floating,d.y);return l?{...P,transform:"translate("+L+"px, "+K+"px)",...VC(V.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:L,top:K}},[r,l,V.floating,d.x,d.y]);return y.useMemo(()=>({...d,update:O,refs:R,elements:V,floatingStyles:U}),[d,O,R,V,U])}const H$=t=>{function e(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:t,fn(r){const{element:n,padding:s}=typeof t=="function"?t(r):t;return n&&e(n)?n.current!=null?lw({element:n.current,padding:s}).fn(r):{}:n?lw({element:n,padding:s}).fn(r):{}}}},K$=(t,e)=>({...F$(t),options:[t,e]}),G$=(t,e)=>({...$$(t),options:[t,e]}),Q$=(t,e)=>({...V$(t),options:[t,e]}),Y$=(t,e)=>({...U$(t),options:[t,e]}),J$=(t,e)=>({...B$(t),options:[t,e]}),Z$=(t,e)=>({...z$(t),options:[t,e]}),X$=(t,e)=>({...H$(t),options:[t,e]});var e5="Arrow",WC=y.forwardRef((t,e)=>{const{children:r,width:n=10,height:s=5,...i}=t;return o.jsx(Ne.svg,{...i,ref:e,width:n,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?r:o.jsx("polygon",{points:"0,0 30,0 15,10"})})});WC.displayName=e5;var t5=WC;function r5(t){const[e,r]=y.useState(void 0);return ur(()=>{if(t){r({width:t.offsetWidth,height:t.offsetHeight});const n=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let a,l;if("borderBoxSize"in i){const c=i.borderBoxSize,u=Array.isArray(c)?c[0]:c;a=u.inlineSize,l=u.blockSize}else a=t.offsetWidth,l=t.offsetHeight;r({width:a,height:l})});return n.observe(t,{box:"border-box"}),()=>n.unobserve(t)}else r(void 0)},[t]),e}var Ky="Popper",[qC,ul]=Xn(Ky),[n5,HC]=qC(Ky),KC=t=>{const{__scopePopper:e,children:r}=t,[n,s]=y.useState(null);return o.jsx(n5,{scope:e,anchor:n,onAnchorChange:s,children:r})};KC.displayName=Ky;var GC="PopperAnchor",QC=y.forwardRef((t,e)=>{const{__scopePopper:r,virtualRef:n,...s}=t,i=HC(GC,r),a=y.useRef(null),l=$e(e,a);return y.useEffect(()=>{i.onAnchorChange((n==null?void 0:n.current)||a.current)}),n?null:o.jsx(Ne.div,{...s,ref:l})});QC.displayName=GC;var Gy="PopperContent",[s5,i5]=qC(Gy),YC=y.forwardRef((t,e)=>{var ie,Ae,Ue,Ie,De,Le;const{__scopePopper:r,side:n="bottom",sideOffset:s=0,align:i="center",alignOffset:a=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:f="partial",hideWhenDetached:h=!1,updatePositionStrategy:v="optimized",onPlaced:p,...g}=t,b=HC(Gy,r),[w,m]=y.useState(null),x=$e(e,Jt=>m(Jt)),[_,S]=y.useState(null),j=r5(_),k=(j==null?void 0:j.width)??0,N=(j==null?void 0:j.height)??0,A=n+(i!=="center"?"-"+i:""),I=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},M=Array.isArray(u)?u:[u],F=M.length>0,O={padding:I,boundary:M.filter(o5),altBoundary:F},{refs:z,floatingStyles:R,placement:V,isPositioned:U,middlewareData:P}=q$({strategy:"fixed",placement:A,whileElementsMounted:(...Jt)=>L$(...Jt,{animationFrame:v==="always"}),elements:{reference:b.anchor},middleware:[K$({mainAxis:s+N,alignmentAxis:a}),c&&G$({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?Q$():void 0,...O}),c&&Y$({...O}),J$({...O,apply:({elements:Jt,rects:Er,availableWidth:Pi,availableHeight:Ps})=>{const{width:Ts,height:yh}=Er.reference,ja=Jt.floating.style;ja.setProperty("--radix-popper-available-width",`${Pi}px`),ja.setProperty("--radix-popper-available-height",`${Ps}px`),ja.setProperty("--radix-popper-anchor-width",`${Ts}px`),ja.setProperty("--radix-popper-anchor-height",`${yh}px`)}}),_&&X$({element:_,padding:l}),l5({arrowWidth:k,arrowHeight:N}),h&&Z$({strategy:"referenceHidden",...O})]}),[L,K]=XC(V),re=en(p);ur(()=>{U&&(re==null||re())},[U,re]);const G=(ie=P.arrow)==null?void 0:ie.x,je=(Ae=P.arrow)==null?void 0:Ae.y,le=((Ue=P.arrow)==null?void 0:Ue.centerOffset)!==0,[Ke,We]=y.useState();return ur(()=>{w&&We(window.getComputedStyle(w).zIndex)},[w]),o.jsx("div",{ref:z.setFloating,"data-radix-popper-content-wrapper":"",style:{...R,transform:U?R.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Ke,"--radix-popper-transform-origin":[(Ie=P.transformOrigin)==null?void 0:Ie.x,(De=P.transformOrigin)==null?void 0:De.y].join(" "),...((Le=P.hide)==null?void 0:Le.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:o.jsx(s5,{scope:r,placedSide:L,onArrowChange:S,arrowX:G,arrowY:je,shouldHideArrow:le,children:o.jsx(Ne.div,{"data-side":L,"data-align":K,...g,ref:x,style:{...g.style,animation:U?void 0:"none"}})})})});YC.displayName=Gy;var JC="PopperArrow",a5={top:"bottom",right:"left",bottom:"top",left:"right"},ZC=y.forwardRef(function(e,r){const{__scopePopper:n,...s}=e,i=i5(JC,n),a=a5[i.placedSide];return o.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:o.jsx(t5,{...s,ref:r,style:{...s.style,display:"block"}})})});ZC.displayName=JC;function o5(t){return t!==null}var l5=t=>({name:"transformOrigin",options:t,fn(e){var b,w,m;const{placement:r,rects:n,middlewareData:s}=e,a=((b=s.arrow)==null?void 0:b.centerOffset)!==0,l=a?0:t.arrowWidth,c=a?0:t.arrowHeight,[u,d]=XC(r),f={start:"0%",center:"50%",end:"100%"}[d],h=(((w=s.arrow)==null?void 0:w.x)??0)+l/2,v=(((m=s.arrow)==null?void 0:m.y)??0)+c/2;let p="",g="";return u==="bottom"?(p=a?f:`${h}px`,g=`${-c}px`):u==="top"?(p=a?f:`${h}px`,g=`${n.floating.height+c}px`):u==="right"?(p=`${-c}px`,g=a?f:`${v}px`):u==="left"&&(p=`${n.floating.width+c}px`,g=a?f:`${v}px`),{data:{x:p,y:g}}}});function XC(t){const[e,r="center"]=t.split("-");return[e,r]}var Qy=KC,rh=QC,Yy=YC,Jy=ZC,c5="Portal",iu=y.forwardRef((t,e)=>{var l;const{container:r,...n}=t,[s,i]=y.useState(!1);ur(()=>i(!0),[]);const a=r||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return a?dD.createPortal(o.jsx(Ne.div,{...n,ref:e}),a):null});iu.displayName=c5;function u5(t,e){return y.useReducer((r,n)=>e[r][n]??r,t)}var ts=t=>{const{present:e,children:r}=t,n=d5(e),s=typeof r=="function"?r({present:n.isPresent}):y.Children.only(r),i=$e(n.ref,f5(s));return typeof r=="function"||n.isPresent?y.cloneElement(s,{ref:i}):null};ts.displayName="Presence";function d5(t){const[e,r]=y.useState(),n=y.useRef({}),s=y.useRef(t),i=y.useRef("none"),a=t?"mounted":"unmounted",[l,c]=u5(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return y.useEffect(()=>{const u=Vu(n.current);i.current=l==="mounted"?u:"none"},[l]),ur(()=>{const u=n.current,d=s.current;if(d!==t){const h=i.current,v=Vu(u);t?c("MOUNT"):v==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(d&&h!==v?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,c]),ur(()=>{if(e){let u;const d=e.ownerDocument.defaultView??window,f=v=>{const g=Vu(n.current).includes(v.animationName);if(v.target===e&&g&&(c("ANIMATION_END"),!s.current)){const b=e.style.animationFillMode;e.style.animationFillMode="forwards",u=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=b)})}},h=v=>{v.target===e&&(i.current=Vu(n.current))};return e.addEventListener("animationstart",h),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{d.clearTimeout(u),e.removeEventListener("animationstart",h),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:y.useCallback(u=>{u&&(n.current=getComputedStyle(u)),r(u)},[])}}function Vu(t){return(t==null?void 0:t.animationName)||"none"}function f5(t){var n,s;let e=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}var mm="rovingFocusGroup.onEntryFocus",h5={bubbles:!1,cancelable:!0},nh="RovingFocusGroup",[sg,eE,m5]=Fy(nh),[p5,tE]=Xn(nh,[m5]),[g5,y5]=p5(nh),rE=y.forwardRef((t,e)=>o.jsx(sg.Provider,{scope:t.__scopeRovingFocusGroup,children:o.jsx(sg.Slot,{scope:t.__scopeRovingFocusGroup,children:o.jsx(v5,{...t,ref:e})})}));rE.displayName=nh;var v5=y.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:s=!1,dir:i,currentTabStopId:a,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...f}=t,h=y.useRef(null),v=$e(e,h),p=$y(i),[g=null,b]=Wo({prop:a,defaultProp:l,onChange:c}),[w,m]=y.useState(!1),x=en(u),_=eE(r),S=y.useRef(!1),[j,k]=y.useState(0);return y.useEffect(()=>{const N=h.current;if(N)return N.addEventListener(mm,x),()=>N.removeEventListener(mm,x)},[x]),o.jsx(g5,{scope:r,orientation:n,dir:p,loop:s,currentTabStopId:g,onItemFocus:y.useCallback(N=>b(N),[b]),onItemShiftTab:y.useCallback(()=>m(!0),[]),onFocusableItemAdd:y.useCallback(()=>k(N=>N+1),[]),onFocusableItemRemove:y.useCallback(()=>k(N=>N-1),[]),children:o.jsx(Ne.div,{tabIndex:w||j===0?-1:0,"data-orientation":n,...f,ref:v,style:{outline:"none",...t.style},onMouseDown:se(t.onMouseDown,()=>{S.current=!0}),onFocus:se(t.onFocus,N=>{const A=!S.current;if(N.target===N.currentTarget&&A&&!w){const I=new CustomEvent(mm,h5);if(N.currentTarget.dispatchEvent(I),!I.defaultPrevented){const M=_().filter(V=>V.focusable),F=M.find(V=>V.active),O=M.find(V=>V.id===g),R=[F,O,...M].filter(Boolean).map(V=>V.ref.current);iE(R,d)}}S.current=!1}),onBlur:se(t.onBlur,()=>m(!1))})})}),nE="RovingFocusGroupItem",sE=y.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:s=!1,tabStopId:i,...a}=t,l=qn(),c=i||l,u=y5(nE,r),d=u.currentTabStopId===c,f=eE(r),{onFocusableItemAdd:h,onFocusableItemRemove:v}=u;return y.useEffect(()=>{if(n)return h(),()=>v()},[n,h,v]),o.jsx(sg.ItemSlot,{scope:r,id:c,focusable:n,active:s,children:o.jsx(Ne.span,{tabIndex:d?0:-1,"data-orientation":u.orientation,...a,ref:e,onMouseDown:se(t.onMouseDown,p=>{n?u.onItemFocus(c):p.preventDefault()}),onFocus:se(t.onFocus,()=>u.onItemFocus(c)),onKeyDown:se(t.onKeyDown,p=>{if(p.key==="Tab"&&p.shiftKey){u.onItemShiftTab();return}if(p.target!==p.currentTarget)return;const g=b5(p,u.orientation,u.dir);if(g!==void 0){if(p.metaKey||p.ctrlKey||p.altKey||p.shiftKey)return;p.preventDefault();let w=f().filter(m=>m.focusable).map(m=>m.ref.current);if(g==="last")w.reverse();else if(g==="prev"||g==="next"){g==="prev"&&w.reverse();const m=w.indexOf(p.currentTarget);w=u.loop?_5(w,m+1):w.slice(m+1)}setTimeout(()=>iE(w))}})})})});sE.displayName=nE;var x5={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function w5(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function b5(t,e,r){const n=w5(t.key,r);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return x5[n]}function iE(t,e=!1){const r=document.activeElement;for(const n of t)if(n===r||(n.focus({preventScroll:e}),document.activeElement!==r))return}function _5(t,e){return t.map((r,n)=>t[(e+n)%t.length])}var S5=rE,j5=sE,k5=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Oa=new WeakMap,Wu=new WeakMap,qu={},pm=0,aE=function(t){return t&&(t.host||aE(t.parentNode))},N5=function(t,e){return e.map(function(r){if(t.contains(r))return r;var n=aE(r);return n&&t.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",t,". Doing nothing"),null)}).filter(function(r){return!!r})},C5=function(t,e,r,n){var s=N5(e,Array.isArray(t)?t:[t]);qu[r]||(qu[r]=new WeakMap);var i=qu[r],a=[],l=new Set,c=new Set(s),u=function(f){!f||l.has(f)||(l.add(f),u(f.parentNode))};s.forEach(u);var d=function(f){!f||c.has(f)||Array.prototype.forEach.call(f.children,function(h){if(l.has(h))d(h);else try{var v=h.getAttribute(n),p=v!==null&&v!=="false",g=(Oa.get(h)||0)+1,b=(i.get(h)||0)+1;Oa.set(h,g),i.set(h,b),a.push(h),g===1&&p&&Wu.set(h,!0),b===1&&h.setAttribute(r,"true"),p||h.setAttribute(n,"true")}catch(w){console.error("aria-hidden: cannot operate on ",h,w)}})};return d(e),l.clear(),pm++,function(){a.forEach(function(f){var h=Oa.get(f)-1,v=i.get(f)-1;Oa.set(f,h),i.set(f,v),h||(Wu.has(f)||f.removeAttribute(n),Wu.delete(f)),v||f.removeAttribute(r)}),pm--,pm||(Oa=new WeakMap,Oa=new WeakMap,Wu=new WeakMap,qu={})}},sh=function(t,e,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(t)?t:[t]),s=k5(t);return s?(n.push.apply(n,Array.from(s.querySelectorAll("[aria-live]"))),C5(n,s,r,"aria-hidden")):function(){return null}},Un=function(){return Un=Object.assign||function(e){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Un.apply(this,arguments)};function oE(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function E5(t,e,r){if(r||arguments.length===2)for(var n=0,s=e.length,i;n<s;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))}var fd="right-scroll-bar-position",hd="width-before-scroll-bar",P5="with-scroll-bars-hidden",T5="--removed-body-scroll-bar-size";function gm(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function A5(t,e){var r=y.useState(function(){return{value:t,callback:e,facade:{get current(){return r.value},set current(n){var s=r.value;s!==n&&(r.value=n,r.callback(n,s))}}}})[0];return r.callback=e,r.facade}var O5=typeof window<"u"?y.useLayoutEffect:y.useEffect,uw=new WeakMap;function R5(t,e){var r=A5(null,function(n){return t.forEach(function(s){return gm(s,n)})});return O5(function(){var n=uw.get(r);if(n){var s=new Set(n),i=new Set(t),a=r.current;s.forEach(function(l){i.has(l)||gm(l,null)}),i.forEach(function(l){s.has(l)||gm(l,a)})}uw.set(r,t)},[t]),r}function I5(t){return t}function D5(t,e){e===void 0&&(e=I5);var r=[],n=!1,s={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:t},useMedium:function(i){var a=e(i,n);return r.push(a),function(){r=r.filter(function(l){return l!==a})}},assignSyncMedium:function(i){for(n=!0;r.length;){var a=r;r=[],a.forEach(i)}r={push:function(l){return i(l)},filter:function(){return r}}},assignMedium:function(i){n=!0;var a=[];if(r.length){var l=r;r=[],l.forEach(i),a=r}var c=function(){var d=a;a=[],d.forEach(i)},u=function(){return Promise.resolve().then(c)};u(),r={push:function(d){a.push(d),u()},filter:function(d){return a=a.filter(d),r}}}};return s}function M5(t){t===void 0&&(t={});var e=D5(null);return e.options=Un({async:!0,ssr:!1},t),e}var lE=function(t){var e=t.sideCar,r=oE(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=e.read();if(!n)throw new Error("Sidecar medium not found");return y.createElement(n,Un({},r))};lE.isSideCarExport=!0;function L5(t,e){return t.useMedium(e),lE}var cE=M5(),ym=function(){},ih=y.forwardRef(function(t,e){var r=y.useRef(null),n=y.useState({onScrollCapture:ym,onWheelCapture:ym,onTouchMoveCapture:ym}),s=n[0],i=n[1],a=t.forwardProps,l=t.children,c=t.className,u=t.removeScrollBar,d=t.enabled,f=t.shards,h=t.sideCar,v=t.noIsolation,p=t.inert,g=t.allowPinchZoom,b=t.as,w=b===void 0?"div":b,m=t.gapMode,x=oE(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),_=h,S=R5([r,e]),j=Un(Un({},x),s);return y.createElement(y.Fragment,null,d&&y.createElement(_,{sideCar:cE,removeScrollBar:u,shards:f,noIsolation:v,inert:p,setCallbacks:i,allowPinchZoom:!!g,lockRef:r,gapMode:m}),a?y.cloneElement(y.Children.only(l),Un(Un({},j),{ref:S})):y.createElement(w,Un({},j,{className:c,ref:S}),l))});ih.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};ih.classNames={fullWidth:hd,zeroRight:fd};var F5=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function $5(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=F5();return e&&t.setAttribute("nonce",e),t}function U5(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function B5(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var z5=function(){var t=0,e=null;return{add:function(r){t==0&&(e=$5())&&(U5(e,r),B5(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},V5=function(){var t=z5();return function(e,r){y.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&r])}},uE=function(){var t=V5(),e=function(r){var n=r.styles,s=r.dynamic;return t(n,s),null};return e},W5={left:0,top:0,right:0,gap:0},vm=function(t){return parseInt(t||"",10)||0},q5=function(t){var e=window.getComputedStyle(document.body),r=e[t==="padding"?"paddingLeft":"marginLeft"],n=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[vm(r),vm(n),vm(s)]},H5=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return W5;var e=q5(t),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,n-r+e[2]-e[0])}},K5=uE(),go="data-scroll-locked",G5=function(t,e,r,n){var s=t.left,i=t.top,a=t.right,l=t.gap;return r===void 0&&(r="margin"),`
  .`.concat(P5,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(l,"px ").concat(n,`;
  }
  body[`).concat(go,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(l,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(fd,` {
    right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(hd,` {
    margin-right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(fd," .").concat(fd,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(hd," .").concat(hd,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(go,`] {
    `).concat(T5,": ").concat(l,`px;
  }
`)},dw=function(){var t=parseInt(document.body.getAttribute(go)||"0",10);return isFinite(t)?t:0},Q5=function(){y.useEffect(function(){return document.body.setAttribute(go,(dw()+1).toString()),function(){var t=dw()-1;t<=0?document.body.removeAttribute(go):document.body.setAttribute(go,t.toString())}},[])},Y5=function(t){var e=t.noRelative,r=t.noImportant,n=t.gapMode,s=n===void 0?"margin":n;Q5();var i=y.useMemo(function(){return H5(s)},[s]);return y.createElement(K5,{styles:G5(i,!e,s,r?"":"!important")})},ig=!1;if(typeof window<"u")try{var Hu=Object.defineProperty({},"passive",{get:function(){return ig=!0,!0}});window.addEventListener("test",Hu,Hu),window.removeEventListener("test",Hu,Hu)}catch{ig=!1}var Ra=ig?{passive:!1}:!1,J5=function(t){return t.tagName==="TEXTAREA"},dE=function(t,e){if(!(t instanceof Element))return!1;var r=window.getComputedStyle(t);return r[e]!=="hidden"&&!(r.overflowY===r.overflowX&&!J5(t)&&r[e]==="visible")},Z5=function(t){return dE(t,"overflowY")},X5=function(t){return dE(t,"overflowX")},fw=function(t,e){var r=e.ownerDocument,n=e;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var s=fE(t,n);if(s){var i=hE(t,n),a=i[1],l=i[2];if(a>l)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},e6=function(t){var e=t.scrollTop,r=t.scrollHeight,n=t.clientHeight;return[e,r,n]},t6=function(t){var e=t.scrollLeft,r=t.scrollWidth,n=t.clientWidth;return[e,r,n]},fE=function(t,e){return t==="v"?Z5(e):X5(e)},hE=function(t,e){return t==="v"?e6(e):t6(e)},r6=function(t,e){return t==="h"&&e==="rtl"?-1:1},n6=function(t,e,r,n,s){var i=r6(t,window.getComputedStyle(e).direction),a=i*n,l=r.target,c=e.contains(l),u=!1,d=a>0,f=0,h=0;do{var v=hE(t,l),p=v[0],g=v[1],b=v[2],w=g-b-i*p;(p||w)&&fE(t,l)&&(f+=w,h+=p),l instanceof ShadowRoot?l=l.host:l=l.parentNode}while(!c&&l!==document.body||c&&(e.contains(l)||e===l));return(d&&(Math.abs(f)<1||!s)||!d&&(Math.abs(h)<1||!s))&&(u=!0),u},Ku=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},hw=function(t){return[t.deltaX,t.deltaY]},mw=function(t){return t&&"current"in t?t.current:t},s6=function(t,e){return t[0]===e[0]&&t[1]===e[1]},i6=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},a6=0,Ia=[];function o6(t){var e=y.useRef([]),r=y.useRef([0,0]),n=y.useRef(),s=y.useState(a6++)[0],i=y.useState(uE)[0],a=y.useRef(t);y.useEffect(function(){a.current=t},[t]),y.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var g=E5([t.lockRef.current],(t.shards||[]).map(mw),!0).filter(Boolean);return g.forEach(function(b){return b.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),g.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var l=y.useCallback(function(g,b){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!a.current.allowPinchZoom;var w=Ku(g),m=r.current,x="deltaX"in g?g.deltaX:m[0]-w[0],_="deltaY"in g?g.deltaY:m[1]-w[1],S,j=g.target,k=Math.abs(x)>Math.abs(_)?"h":"v";if("touches"in g&&k==="h"&&j.type==="range")return!1;var N=fw(k,j);if(!N)return!0;if(N?S=k:(S=k==="v"?"h":"v",N=fw(k,j)),!N)return!1;if(!n.current&&"changedTouches"in g&&(x||_)&&(n.current=S),!S)return!0;var A=n.current||S;return n6(A,b,g,A==="h"?x:_,!0)},[]),c=y.useCallback(function(g){var b=g;if(!(!Ia.length||Ia[Ia.length-1]!==i)){var w="deltaY"in b?hw(b):Ku(b),m=e.current.filter(function(S){return S.name===b.type&&(S.target===b.target||b.target===S.shadowParent)&&s6(S.delta,w)})[0];if(m&&m.should){b.cancelable&&b.preventDefault();return}if(!m){var x=(a.current.shards||[]).map(mw).filter(Boolean).filter(function(S){return S.contains(b.target)}),_=x.length>0?l(b,x[0]):!a.current.noIsolation;_&&b.cancelable&&b.preventDefault()}}},[]),u=y.useCallback(function(g,b,w,m){var x={name:g,delta:b,target:w,should:m,shadowParent:l6(w)};e.current.push(x),setTimeout(function(){e.current=e.current.filter(function(_){return _!==x})},1)},[]),d=y.useCallback(function(g){r.current=Ku(g),n.current=void 0},[]),f=y.useCallback(function(g){u(g.type,hw(g),g.target,l(g,t.lockRef.current))},[]),h=y.useCallback(function(g){u(g.type,Ku(g),g.target,l(g,t.lockRef.current))},[]);y.useEffect(function(){return Ia.push(i),t.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:h}),document.addEventListener("wheel",c,Ra),document.addEventListener("touchmove",c,Ra),document.addEventListener("touchstart",d,Ra),function(){Ia=Ia.filter(function(g){return g!==i}),document.removeEventListener("wheel",c,Ra),document.removeEventListener("touchmove",c,Ra),document.removeEventListener("touchstart",d,Ra)}},[]);var v=t.removeScrollBar,p=t.inert;return y.createElement(y.Fragment,null,p?y.createElement(i,{styles:i6(s)}):null,v?y.createElement(Y5,{gapMode:t.gapMode}):null)}function l6(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const c6=L5(cE,o6);var au=y.forwardRef(function(t,e){return y.createElement(ih,Un({},t,{ref:e,sideCar:c6}))});au.classNames=ih.classNames;var ag=["Enter"," "],u6=["ArrowDown","PageUp","Home"],mE=["ArrowUp","PageDown","End"],d6=[...u6,...mE],f6={ltr:[...ag,"ArrowRight"],rtl:[...ag,"ArrowLeft"]},h6={ltr:["ArrowLeft"],rtl:["ArrowRight"]},ou="Menu",[Cc,m6,p6]=Fy(ou),[_a,pE]=Xn(ou,[p6,ul,tE]),ah=ul(),gE=tE(),[g6,Sa]=_a(ou),[y6,lu]=_a(ou),yE=t=>{const{__scopeMenu:e,open:r=!1,children:n,dir:s,onOpenChange:i,modal:a=!0}=t,l=ah(e),[c,u]=y.useState(null),d=y.useRef(!1),f=en(i),h=$y(s);return y.useEffect(()=>{const v=()=>{d.current=!0,document.addEventListener("pointerdown",p,{capture:!0,once:!0}),document.addEventListener("pointermove",p,{capture:!0,once:!0})},p=()=>d.current=!1;return document.addEventListener("keydown",v,{capture:!0}),()=>{document.removeEventListener("keydown",v,{capture:!0}),document.removeEventListener("pointerdown",p,{capture:!0}),document.removeEventListener("pointermove",p,{capture:!0})}},[]),o.jsx(Qy,{...l,children:o.jsx(g6,{scope:e,open:r,onOpenChange:f,content:c,onContentChange:u,children:o.jsx(y6,{scope:e,onClose:y.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:d,dir:h,modal:a,children:n})})})};yE.displayName=ou;var v6="MenuAnchor",Zy=y.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t,s=ah(r);return o.jsx(rh,{...s,...n,ref:e})});Zy.displayName=v6;var Xy="MenuPortal",[x6,vE]=_a(Xy,{forceMount:void 0}),xE=t=>{const{__scopeMenu:e,forceMount:r,children:n,container:s}=t,i=Sa(Xy,e);return o.jsx(x6,{scope:e,forceMount:r,children:o.jsx(ts,{present:r||i.open,children:o.jsx(iu,{asChild:!0,container:s,children:n})})})};xE.displayName=Xy;var Yr="MenuContent",[w6,ev]=_a(Yr),wE=y.forwardRef((t,e)=>{const r=vE(Yr,t.__scopeMenu),{forceMount:n=r.forceMount,...s}=t,i=Sa(Yr,t.__scopeMenu),a=lu(Yr,t.__scopeMenu);return o.jsx(Cc.Provider,{scope:t.__scopeMenu,children:o.jsx(ts,{present:n||i.open,children:o.jsx(Cc.Slot,{scope:t.__scopeMenu,children:a.modal?o.jsx(b6,{...s,ref:e}):o.jsx(_6,{...s,ref:e})})})})}),b6=y.forwardRef((t,e)=>{const r=Sa(Yr,t.__scopeMenu),n=y.useRef(null),s=$e(e,n);return y.useEffect(()=>{const i=n.current;if(i)return sh(i)},[]),o.jsx(tv,{...t,ref:s,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:se(t.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),_6=y.forwardRef((t,e)=>{const r=Sa(Yr,t.__scopeMenu);return o.jsx(tv,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),S6=hi("MenuContent.ScrollLock"),tv=y.forwardRef((t,e)=>{const{__scopeMenu:r,loop:n=!1,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:a,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:h,onDismiss:v,disableOutsideScroll:p,...g}=t,b=Sa(Yr,r),w=lu(Yr,r),m=ah(r),x=gE(r),_=m6(r),[S,j]=y.useState(null),k=y.useRef(null),N=$e(e,k,b.onContentChange),A=y.useRef(0),I=y.useRef(""),M=y.useRef(0),F=y.useRef(null),O=y.useRef("right"),z=y.useRef(0),R=p?au:y.Fragment,V=p?{as:S6,allowPinchZoom:!0}:void 0,U=L=>{var ie,Ae;const K=I.current+L,re=_().filter(Ue=>!Ue.disabled),G=document.activeElement,je=(ie=re.find(Ue=>Ue.ref.current===G))==null?void 0:ie.textValue,le=re.map(Ue=>Ue.textValue),Ke=D6(le,K,je),We=(Ae=re.find(Ue=>Ue.textValue===Ke))==null?void 0:Ae.ref.current;(function Ue(Ie){I.current=Ie,window.clearTimeout(A.current),Ie!==""&&(A.current=window.setTimeout(()=>Ue(""),1e3))})(K),We&&setTimeout(()=>We.focus())};y.useEffect(()=>()=>window.clearTimeout(A.current),[]),Zf();const P=y.useCallback(L=>{var re,G;return O.current===((re=F.current)==null?void 0:re.side)&&L6(L,(G=F.current)==null?void 0:G.area)},[]);return o.jsx(w6,{scope:r,searchRef:I,onItemEnter:y.useCallback(L=>{P(L)&&L.preventDefault()},[P]),onItemLeave:y.useCallback(L=>{var K;P(L)||((K=k.current)==null||K.focus(),j(null))},[P]),onTriggerLeave:y.useCallback(L=>{P(L)&&L.preventDefault()},[P]),pointerGraceTimerRef:M,onPointerGraceIntentChange:y.useCallback(L=>{F.current=L},[]),children:o.jsx(R,{...V,children:o.jsx(nu,{asChild:!0,trapped:s,onMountAutoFocus:se(i,L=>{var K;L.preventDefault(),(K=k.current)==null||K.focus({preventScroll:!0})}),onUnmountAutoFocus:a,children:o.jsx(ru,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:h,onDismiss:v,children:o.jsx(S5,{asChild:!0,...x,dir:w.dir,orientation:"vertical",loop:n,currentTabStopId:S,onCurrentTabStopIdChange:j,onEntryFocus:se(c,L=>{w.isUsingKeyboardRef.current||L.preventDefault()}),preventScrollOnEntryFocus:!0,children:o.jsx(Yy,{role:"menu","aria-orientation":"vertical","data-state":ME(b.open),"data-radix-menu-content":"",dir:w.dir,...m,...g,ref:N,style:{outline:"none",...g.style},onKeyDown:se(g.onKeyDown,L=>{const re=L.target.closest("[data-radix-menu-content]")===L.currentTarget,G=L.ctrlKey||L.altKey||L.metaKey,je=L.key.length===1;re&&(L.key==="Tab"&&L.preventDefault(),!G&&je&&U(L.key));const le=k.current;if(L.target!==le||!d6.includes(L.key))return;L.preventDefault();const We=_().filter(ie=>!ie.disabled).map(ie=>ie.ref.current);mE.includes(L.key)&&We.reverse(),R6(We)}),onBlur:se(t.onBlur,L=>{L.currentTarget.contains(L.target)||(window.clearTimeout(A.current),I.current="")}),onPointerMove:se(t.onPointerMove,Ec(L=>{const K=L.target,re=z.current!==L.clientX;if(L.currentTarget.contains(K)&&re){const G=L.clientX>z.current?"right":"left";O.current=G,z.current=L.clientX}}))})})})})})})});wE.displayName=Yr;var j6="MenuGroup",rv=y.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t;return o.jsx(Ne.div,{role:"group",...n,ref:e})});rv.displayName=j6;var k6="MenuLabel",bE=y.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t;return o.jsx(Ne.div,{...n,ref:e})});bE.displayName=k6;var rf="MenuItem",pw="menu.itemSelect",oh=y.forwardRef((t,e)=>{const{disabled:r=!1,onSelect:n,...s}=t,i=y.useRef(null),a=lu(rf,t.__scopeMenu),l=ev(rf,t.__scopeMenu),c=$e(e,i),u=y.useRef(!1),d=()=>{const f=i.current;if(!r&&f){const h=new CustomEvent(pw,{bubbles:!0,cancelable:!0});f.addEventListener(pw,v=>n==null?void 0:n(v),{once:!0}),TC(f,h),h.defaultPrevented?u.current=!1:a.onClose()}};return o.jsx(_E,{...s,ref:c,disabled:r,onClick:se(t.onClick,d),onPointerDown:f=>{var h;(h=t.onPointerDown)==null||h.call(t,f),u.current=!0},onPointerUp:se(t.onPointerUp,f=>{var h;u.current||(h=f.currentTarget)==null||h.click()}),onKeyDown:se(t.onKeyDown,f=>{const h=l.searchRef.current!=="";r||h&&f.key===" "||ag.includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})})});oh.displayName=rf;var _E=y.forwardRef((t,e)=>{const{__scopeMenu:r,disabled:n=!1,textValue:s,...i}=t,a=ev(rf,r),l=gE(r),c=y.useRef(null),u=$e(e,c),[d,f]=y.useState(!1),[h,v]=y.useState("");return y.useEffect(()=>{const p=c.current;p&&v((p.textContent??"").trim())},[i.children]),o.jsx(Cc.ItemSlot,{scope:r,disabled:n,textValue:s??h,children:o.jsx(j5,{asChild:!0,...l,focusable:!n,children:o.jsx(Ne.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...i,ref:u,onPointerMove:se(t.onPointerMove,Ec(p=>{n?a.onItemLeave(p):(a.onItemEnter(p),p.defaultPrevented||p.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:se(t.onPointerLeave,Ec(p=>a.onItemLeave(p))),onFocus:se(t.onFocus,()=>f(!0)),onBlur:se(t.onBlur,()=>f(!1))})})})}),N6="MenuCheckboxItem",SE=y.forwardRef((t,e)=>{const{checked:r=!1,onCheckedChange:n,...s}=t;return o.jsx(EE,{scope:t.__scopeMenu,checked:r,children:o.jsx(oh,{role:"menuitemcheckbox","aria-checked":nf(r)?"mixed":r,...s,ref:e,"data-state":sv(r),onSelect:se(s.onSelect,()=>n==null?void 0:n(nf(r)?!0:!r),{checkForDefaultPrevented:!1})})})});SE.displayName=N6;var jE="MenuRadioGroup",[C6,E6]=_a(jE,{value:void 0,onValueChange:()=>{}}),kE=y.forwardRef((t,e)=>{const{value:r,onValueChange:n,...s}=t,i=en(n);return o.jsx(C6,{scope:t.__scopeMenu,value:r,onValueChange:i,children:o.jsx(rv,{...s,ref:e})})});kE.displayName=jE;var NE="MenuRadioItem",CE=y.forwardRef((t,e)=>{const{value:r,...n}=t,s=E6(NE,t.__scopeMenu),i=r===s.value;return o.jsx(EE,{scope:t.__scopeMenu,checked:i,children:o.jsx(oh,{role:"menuitemradio","aria-checked":i,...n,ref:e,"data-state":sv(i),onSelect:se(n.onSelect,()=>{var a;return(a=s.onValueChange)==null?void 0:a.call(s,r)},{checkForDefaultPrevented:!1})})})});CE.displayName=NE;var nv="MenuItemIndicator",[EE,P6]=_a(nv,{checked:!1}),PE=y.forwardRef((t,e)=>{const{__scopeMenu:r,forceMount:n,...s}=t,i=P6(nv,r);return o.jsx(ts,{present:n||nf(i.checked)||i.checked===!0,children:o.jsx(Ne.span,{...s,ref:e,"data-state":sv(i.checked)})})});PE.displayName=nv;var T6="MenuSeparator",TE=y.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t;return o.jsx(Ne.div,{role:"separator","aria-orientation":"horizontal",...n,ref:e})});TE.displayName=T6;var A6="MenuArrow",AE=y.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t,s=ah(r);return o.jsx(Jy,{...s,...n,ref:e})});AE.displayName=A6;var O6="MenuSub",[uq,OE]=_a(O6),Dl="MenuSubTrigger",RE=y.forwardRef((t,e)=>{const r=Sa(Dl,t.__scopeMenu),n=lu(Dl,t.__scopeMenu),s=OE(Dl,t.__scopeMenu),i=ev(Dl,t.__scopeMenu),a=y.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=i,u={__scopeMenu:t.__scopeMenu},d=y.useCallback(()=>{a.current&&window.clearTimeout(a.current),a.current=null},[]);return y.useEffect(()=>d,[d]),y.useEffect(()=>{const f=l.current;return()=>{window.clearTimeout(f),c(null)}},[l,c]),o.jsx(Zy,{asChild:!0,...u,children:o.jsx(_E,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":s.contentId,"data-state":ME(r.open),...t,ref:Jf(e,s.onTriggerChange),onClick:f=>{var h;(h=t.onClick)==null||h.call(t,f),!(t.disabled||f.defaultPrevented)&&(f.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:se(t.onPointerMove,Ec(f=>{i.onItemEnter(f),!f.defaultPrevented&&!t.disabled&&!r.open&&!a.current&&(i.onPointerGraceIntentChange(null),a.current=window.setTimeout(()=>{r.onOpenChange(!0),d()},100))})),onPointerLeave:se(t.onPointerLeave,Ec(f=>{var v,p;d();const h=(v=r.content)==null?void 0:v.getBoundingClientRect();if(h){const g=(p=r.content)==null?void 0:p.dataset.side,b=g==="right",w=b?-5:5,m=h[b?"left":"right"],x=h[b?"right":"left"];i.onPointerGraceIntentChange({area:[{x:f.clientX+w,y:f.clientY},{x:m,y:h.top},{x,y:h.top},{x,y:h.bottom},{x:m,y:h.bottom}],side:g}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(f),f.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:se(t.onKeyDown,f=>{var v;const h=i.searchRef.current!=="";t.disabled||h&&f.key===" "||f6[n.dir].includes(f.key)&&(r.onOpenChange(!0),(v=r.content)==null||v.focus(),f.preventDefault())})})})});RE.displayName=Dl;var IE="MenuSubContent",DE=y.forwardRef((t,e)=>{const r=vE(Yr,t.__scopeMenu),{forceMount:n=r.forceMount,...s}=t,i=Sa(Yr,t.__scopeMenu),a=lu(Yr,t.__scopeMenu),l=OE(IE,t.__scopeMenu),c=y.useRef(null),u=$e(e,c);return o.jsx(Cc.Provider,{scope:t.__scopeMenu,children:o.jsx(ts,{present:n||i.open,children:o.jsx(Cc.Slot,{scope:t.__scopeMenu,children:o.jsx(tv,{id:l.contentId,"aria-labelledby":l.triggerId,...s,ref:u,align:"start",side:a.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{var f;a.isUsingKeyboardRef.current&&((f=c.current)==null||f.focus()),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:se(t.onFocusOutside,d=>{d.target!==l.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:se(t.onEscapeKeyDown,d=>{a.onClose(),d.preventDefault()}),onKeyDown:se(t.onKeyDown,d=>{var v;const f=d.currentTarget.contains(d.target),h=h6[a.dir].includes(d.key);f&&h&&(i.onOpenChange(!1),(v=l.trigger)==null||v.focus(),d.preventDefault())})})})})})});DE.displayName=IE;function ME(t){return t?"open":"closed"}function nf(t){return t==="indeterminate"}function sv(t){return nf(t)?"indeterminate":t?"checked":"unchecked"}function R6(t){const e=document.activeElement;for(const r of t)if(r===e||(r.focus(),document.activeElement!==e))return}function I6(t,e){return t.map((r,n)=>t[(e+n)%t.length])}function D6(t,e,r){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,i=r?t.indexOf(r):-1;let a=I6(t,Math.max(i,0));s.length===1&&(a=a.filter(u=>u!==r));const c=a.find(u=>u.toLowerCase().startsWith(s.toLowerCase()));return c!==r?c:void 0}function M6(t,e){const{x:r,y:n}=t;let s=!1;for(let i=0,a=e.length-1;i<e.length;a=i++){const l=e[i].x,c=e[i].y,u=e[a].x,d=e[a].y;c>n!=d>n&&r<(u-l)*(n-c)/(d-c)+l&&(s=!s)}return s}function L6(t,e){if(!e)return!1;const r={x:t.clientX,y:t.clientY};return M6(r,e)}function Ec(t){return e=>e.pointerType==="mouse"?t(e):void 0}var F6=yE,$6=Zy,U6=xE,B6=wE,z6=rv,V6=bE,W6=oh,q6=SE,H6=kE,K6=CE,G6=PE,Q6=TE,Y6=AE,J6=RE,Z6=DE,iv="DropdownMenu",[X6,dq]=Xn(iv,[pE]),mr=pE(),[eU,LE]=X6(iv),FE=t=>{const{__scopeDropdownMenu:e,children:r,dir:n,open:s,defaultOpen:i,onOpenChange:a,modal:l=!0}=t,c=mr(e),u=y.useRef(null),[d=!1,f]=Wo({prop:s,defaultProp:i,onChange:a});return o.jsx(eU,{scope:e,triggerId:qn(),triggerRef:u,contentId:qn(),open:d,onOpenChange:f,onOpenToggle:y.useCallback(()=>f(h=>!h),[f]),modal:l,children:o.jsx(F6,{...c,open:d,onOpenChange:f,dir:n,modal:l,children:r})})};FE.displayName=iv;var $E="DropdownMenuTrigger",UE=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,disabled:n=!1,...s}=t,i=LE($E,r),a=mr(r);return o.jsx($6,{asChild:!0,...a,children:o.jsx(Ne.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":n?"":void 0,disabled:n,...s,ref:Jf(e,i.triggerRef),onPointerDown:se(t.onPointerDown,l=>{!n&&l.button===0&&l.ctrlKey===!1&&(i.onOpenToggle(),i.open||l.preventDefault())}),onKeyDown:se(t.onKeyDown,l=>{n||(["Enter"," "].includes(l.key)&&i.onOpenToggle(),l.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});UE.displayName=$E;var tU="DropdownMenuPortal",BE=t=>{const{__scopeDropdownMenu:e,...r}=t,n=mr(e);return o.jsx(U6,{...n,...r})};BE.displayName=tU;var zE="DropdownMenuContent",VE=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=LE(zE,r),i=mr(r),a=y.useRef(!1);return o.jsx(B6,{id:s.contentId,"aria-labelledby":s.triggerId,...i,...n,ref:e,onCloseAutoFocus:se(t.onCloseAutoFocus,l=>{var c;a.current||(c=s.triggerRef.current)==null||c.focus(),a.current=!1,l.preventDefault()}),onInteractOutside:se(t.onInteractOutside,l=>{const c=l.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,d=c.button===2||u;(!s.modal||d)&&(a.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});VE.displayName=zE;var rU="DropdownMenuGroup",nU=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=mr(r);return o.jsx(z6,{...s,...n,ref:e})});nU.displayName=rU;var sU="DropdownMenuLabel",WE=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=mr(r);return o.jsx(V6,{...s,...n,ref:e})});WE.displayName=sU;var iU="DropdownMenuItem",qE=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=mr(r);return o.jsx(W6,{...s,...n,ref:e})});qE.displayName=iU;var aU="DropdownMenuCheckboxItem",HE=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=mr(r);return o.jsx(q6,{...s,...n,ref:e})});HE.displayName=aU;var oU="DropdownMenuRadioGroup",lU=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=mr(r);return o.jsx(H6,{...s,...n,ref:e})});lU.displayName=oU;var cU="DropdownMenuRadioItem",KE=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=mr(r);return o.jsx(K6,{...s,...n,ref:e})});KE.displayName=cU;var uU="DropdownMenuItemIndicator",GE=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=mr(r);return o.jsx(G6,{...s,...n,ref:e})});GE.displayName=uU;var dU="DropdownMenuSeparator",QE=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=mr(r);return o.jsx(Q6,{...s,...n,ref:e})});QE.displayName=dU;var fU="DropdownMenuArrow",hU=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=mr(r);return o.jsx(Y6,{...s,...n,ref:e})});hU.displayName=fU;var mU="DropdownMenuSubTrigger",YE=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=mr(r);return o.jsx(J6,{...s,...n,ref:e})});YE.displayName=mU;var pU="DropdownMenuSubContent",JE=y.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=mr(r);return o.jsx(Z6,{...s,...n,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});JE.displayName=pU;var gU=FE,yU=UE,vU=BE,ZE=VE,XE=WE,eP=qE,tP=HE,rP=KE,nP=GE,sP=QE,iP=YE,aP=JE;const oP=gU,lP=yU,xU=y.forwardRef(({className:t,inset:e,children:r,...n},s)=>o.jsxs(iP,{ref:s,className:fe("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e&&"pl-8",t),...n,children:[r,o.jsx(Dy,{className:"ml-auto"})]}));xU.displayName=iP.displayName;const wU=y.forwardRef(({className:t,...e},r)=>o.jsx(aP,{ref:r,className:fe("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",t),...e}));wU.displayName=aP.displayName;const av=y.forwardRef(({className:t,sideOffset:e=4,...r},n)=>o.jsx(vU,{children:o.jsx(ZE,{ref:n,sideOffset:e,className:fe("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",t),...r})}));av.displayName=ZE.displayName;const ra=y.forwardRef(({className:t,inset:e,...r},n)=>o.jsx(eP,{ref:n,className:fe("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e&&"pl-8",t),...r}));ra.displayName=eP.displayName;const bU=y.forwardRef(({className:t,children:e,checked:r,...n},s)=>o.jsxs(tP,{ref:s,className:fe("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:r,...n,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(nP,{children:o.jsx(dn,{className:"h-4 w-4"})})}),e]}));bU.displayName=tP.displayName;const _U=y.forwardRef(({className:t,children:e,...r},n)=>o.jsxs(rP,{ref:n,className:fe("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...r,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(nP,{children:o.jsx(kF,{className:"h-2 w-2 fill-current"})})}),e]}));_U.displayName=rP.displayName;const SU=y.forwardRef(({className:t,inset:e,...r},n)=>o.jsx(XE,{ref:n,className:fe("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...r}));SU.displayName=XE.displayName;const jU=y.forwardRef(({className:t,...e},r)=>o.jsx(sP,{ref:r,className:fe("-mx-1 my-1 h-px bg-muted",t),...e}));jU.displayName=sP.displayName;function kU({note:t,userBelt:e,userStripes:r}){const n=y.useRef(null),{toast:s}=Ot(),[i,a]=y.useState(!1);y.useEffect(()=>{a(!!navigator.share)},[]);const l=async()=>new Promise(h=>{const v=n.current;if(!v)return;const p=v.getContext("2d");if(!p)return;v.width=1080,v.height=1080;const g=p.createLinearGradient(0,0,0,1080);g.addColorStop(0,"#1e3a8a"),g.addColorStop(1,"#0f172a"),p.fillStyle=g,p.fillRect(0,0,1080,1080),p.globalAlpha=.05;for(let A=0;A<1080;A+=30)p.strokeStyle="#ffffff",p.lineWidth=1,p.beginPath(),p.moveTo(0,A),p.lineTo(1080,A),p.stroke();if(p.globalAlpha=1,p.fillStyle="rgba(220, 38, 38, 0.9)",p.fillRect(0,0,1080,180),p.fillStyle="#ffffff",p.font="bold 56px Arial, sans-serif",p.textAlign="center",p.fillText("BJJ JITS JOURNAL",540,70),p.font="32px Arial, sans-serif",p.fillStyle="#fecaca",p.fillText("Training Notes & Progress",540,130),e){const I={white:"#f8fafc",blue:"#3b82f6",purple:"#a855f7",brown:"#92400e",black:"#0f172a"};if(p.fillStyle=I[e.toLowerCase()]||"#6b7280",p.fillRect(80,250,180,60),p.fillStyle="#ffffff",p.font="bold 28px Arial",p.textAlign="left",p.fillText(e.toUpperCase(),100,290),r&&r>0){p.fillStyle="#fbbf24";for(let M=0;M<Math.min(r,4);M++)p.fillRect(280+M*25,265,15,30)}}p.fillStyle="#ffffff",p.font="bold 48px Arial, sans-serif",p.textAlign="center";const b=950,w=t.title.split(" ");let m="",x=e?400:300;for(const A of w){const I=m+A+" ";p.measureText(I).width>b&&m!==""?(p.fillText(m,540,x),m=A+" ",x+=60):m=I}p.fillText(m,540,x);const _=t.content.substring(0,150)+(t.content.length>150?"...":"");p.font="32px Arial, sans-serif",p.fillStyle="#cbd5e1";const S=_.split(" ");m="",x+=100;let j=0;const k=4;for(const A of S){if(j>=k)break;const I=m+A+" ";p.measureText(I).width>b&&m!==""?(p.fillText(m,540,x),m=A+" ",x+=45,j++):m=I}j<k&&m!==""&&p.fillText(m,540,x);const N=new Date(t.createdAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});p.fillStyle="#94a3b8",p.font="28px Arial, sans-serif",p.textAlign="center",p.fillText(N,540,980),p.fillStyle="#dc2626",p.fillRect(0,1020,1080,60),p.fillStyle="#ffffff",p.font="bold 32px Arial",p.fillText("Track Your Journey  Share Your Progress",540,1060),v.toBlob(A=>{A&&h(A)},"image/png")}),c=async()=>{try{const h=await l(),v=new File([h],"bjj-journal-note.png",{type:"image/png"});navigator.canShare&&navigator.canShare({files:[v]})?(await navigator.share({files:[v],title:`BJJ Training Note: ${t.title}`,text:`${t.title}

${t.content.substring(0,100)}...`}),s({title:"Shared!",description:"Your note has been shared successfully."})):u()}catch(h){h.name!=="AbortError"&&(console.error("Share failed:",h),s({title:"Share cancelled",description:"You can download the image instead."}))}},u=async()=>{const h=await l(),v=URL.createObjectURL(h),p=document.createElement("a");p.href=v,p.download=`bjj-journal-${t.title.replace(/\s+/g,"-").toLowerCase()}.png`,p.click(),URL.revokeObjectURL(v),s({title:"Downloaded!",description:"Image saved to your device."})},d=()=>{const h=`${t.title}

Tracking my BJJ journey with Jits Journal! `,p=`https://twitter.com/intent/tweet?text=${encodeURIComponent(h)}&url=${encodeURIComponent("https://jitsjournal-backend.onrender.com")}`;window.open(p,"_blank","width=600,height=400")},f=()=>{const v=`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent("https://jitsjournal-backend.onrender.com")}`;window.open(v,"_blank","width=600,height=400")};return o.jsxs(o.Fragment,{children:[o.jsx("canvas",{ref:n,style:{display:"none"}}),i?o.jsxs(ze,{onClick:c,variant:"outline",size:"sm",className:"gap-2","data-testid":"button-share-note",children:[o.jsx(Zp,{className:"w-4 h-4"}),"Share to Social Media"]}):o.jsxs(oP,{children:[o.jsx(lP,{asChild:!0,children:o.jsxs(ze,{variant:"outline",size:"sm",className:"gap-2","data-testid":"button-share-note",children:[o.jsx(Zp,{className:"w-4 h-4"}),"Share to Social Media"]})}),o.jsxs(av,{align:"end",children:[o.jsxs(ra,{onClick:d,"data-testid":"button-share-twitter",children:[o.jsx(FF,{className:"w-4 h-4 mr-2"}),"Share on Twitter"]}),o.jsxs(ra,{onClick:f,"data-testid":"button-share-facebook",children:[o.jsx(PF,{className:"w-4 h-4 mr-2"}),"Share on Facebook"]}),o.jsxs(ra,{onClick:u,"data-testid":"button-download-image",children:[o.jsx(EF,{className:"w-4 h-4 mr-2"}),"Download Image"]})]})]})]})}function NU(){y.useEffect(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]);const[t,e]=y.useState(!1),[r,n]=y.useState(null),[s,i]=y.useState(""),[a,l]=y.useState({title:"",content:"",tags:""}),{toast:c}=Ot(),u=Zn(),{user:d}=Gt(),[,f]=rl(),h=Yf(d==null?void 0:d.email,d==null?void 0:d.subscriptionStatus),v=Qe({queryKey:["/api/notes"],enabled:!!(d!=null&&d.id),staleTime:6e4}),p=v.data||[],g=v.isLoading,{data:b}=Qe({queryKey:["belts","current",d==null?void 0:d.id],queryFn:()=>Ws.getCurrent(d.id),enabled:!!(d!=null&&d.id),staleTime:6e4}),{data:w}=Qe({queryKey:["/api/my-gym"],staleTime:6e4}),m=Fe({mutationFn:async({noteId:R})=>await dt("POST",`/api/notes/${R}/toggle-sharing`,{}),onSuccess:()=>{u.invalidateQueries({queryKey:["/api/notes"]}),c({title:"Success",description:"Note sharing updated successfully"})},onError:R=>{c({title:"Error",description:"Failed to update note sharing",variant:"destructive"})}}),x=Fe({mutationFn:async R=>await dt("POST",`/api/notes/${R}/share-to-gym`,{}),onSuccess:()=>{u.invalidateQueries({queryKey:["/api/notes"]}),u.invalidateQueries({queryKey:["/api/gym-notes"]}),c({title:"Success",description:"Note shared to your gym!"})},onError:R=>{c({title:"Error",description:R.message||"Failed to share note to gym",variant:"destructive"})}}),_=Fe({mutationFn:async R=>await dt("POST",`/api/notes/${R}/unshare-from-gym`,{}),onSuccess:()=>{u.invalidateQueries({queryKey:["/api/notes"]}),u.invalidateQueries({queryKey:["/api/gym-notes"]}),c({title:"Success",description:"Note removed from gym"})},onError:R=>{c({title:"Error",description:R.message||"Failed to remove note from gym",variant:"destructive"})}}),S=p.filter(R=>{if(!s.trim())return!0;const V=s.toLowerCase(),U=(R.title||"").toLowerCase(),P=(R.content||"").toLowerCase(),L=Array.isArray(R.tags)?R.tags.join(" ").toLowerCase():"";return U.includes(V)||P.includes(V)||L.includes(V)}),j=Fe({mutationFn:async R=>{if(!(d!=null&&d.id))throw new Error("User not authenticated");console.log(" Creating note with data:",R);const V=new Promise((L,K)=>setTimeout(()=>K(new Error("Network timeout after 30 seconds")),3e4)),U=dt("POST","/api/notes",R),P=await Promise.race([U,V]);return console.log(" Note created successfully"),P},onSuccess:()=>{u.invalidateQueries({queryKey:["/api/notes"]}),v.refetch(),c({title:"Note Saved!",description:"Your technique note has been saved."}),e(!1),n(null),l({title:"",content:"",tags:""})},onError:R=>{console.error(" Note creation failed:",R),c({title:"Error",description:R.message||"Failed to save note. Please try again.",variant:"destructive"})}}),k=Fe({mutationFn:async({noteId:R,noteData:V})=>{if(!(d!=null&&d.id))throw new Error("User not authenticated");console.log(" Updating note:",R,"with data:",V);const U=new Promise((K,re)=>setTimeout(()=>re(new Error("Network timeout after 30 seconds")),3e4)),P=dt("PUT",`/api/notes/${R}`,V),L=await Promise.race([P,U]);return console.log(" Note updated successfully"),L},onSuccess:()=>{u.invalidateQueries({queryKey:["/api/notes"]}),v.refetch(),c({title:"Note Updated!",description:"Your note has been updated successfully."}),e(!1),n(null),l({title:"",content:"",tags:""})},onError:R=>{console.error(" Note update failed:",R),c({title:"Error",description:R.message||"Failed to update note. Please try again.",variant:"destructive"})}}),N=Fe({mutationFn:async R=>{if(!(d!=null&&d.id))throw new Error("User not authenticated");console.log(" Deleting note:",R);const V=new Promise((L,K)=>setTimeout(()=>K(new Error("Network timeout after 30 seconds")),3e4)),U=dt("DELETE",`/api/notes/${R}`,{}),P=await Promise.race([U,V]);return console.log(" Note deleted successfully"),P},onSuccess:()=>{u.invalidateQueries({queryKey:["/api/notes"]}),v.refetch(),c({title:"Note Deleted!",description:"Your note has been deleted successfully."})},onError:R=>{console.error(" Note deletion failed:",R),c({title:"Error",description:R.message||"Failed to delete note. Please try again.",variant:"destructive"})}}),A=R=>{if(R.preventDefault(),j.isPending||k.isPending||!a.title.trim())return;if(!r&&!h&&Array.isArray(p)&&p.length>=ta.notes){c({title:"Note Limit Reached",description:`Free tier is limited to ${ta.notes} notes. Upgrade to Premium for unlimited notes!`,variant:"destructive"});return}const V={title:a.title,content:a.content||"",tags:a.tags?a.tags.split(",").map(U=>U.trim()).filter(U=>U.length>0):[]};r?k.mutate({noteId:r.id,noteData:V}):j.mutate(V)},I=R=>{const{name:V,value:U}=R.target;l(P=>({...P,[V]:U}))},M=async R=>{try{await m.mutateAsync({noteId:R})}catch{}},F=R=>{n(R),l({title:R.title||"",content:R.content||"",tags:Array.isArray(R.tags)?R.tags.join(", "):""}),e(!0)},O=R=>{window.confirm("Are you sure you want to delete this note? This action cannot be undone.")&&N.mutate(R)},z=()=>{e(!1),n(null),l({title:"",content:"",tags:""})};return t?o.jsxs("div",{className:"p-6 max-w-md mx-auto",style:{paddingTop:"max(1.5rem, env(safe-area-inset-top))"},children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:r?"Edit Note":"New Note"}),o.jsx("button",{onClick:z,className:"text-gray-500 hover:text-gray-700",children:""})]}),o.jsxs("form",{onSubmit:A,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-900 dark:text-white mb-1",children:"Title"}),o.jsx("input",{type:"text",name:"title",value:a.title,onChange:I,placeholder:"Enter note title",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 text-gray-900",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-900 dark:text-white mb-1",children:"Content"}),o.jsx("textarea",{name:"content",value:a.content,onChange:I,rows:6,placeholder:"Describe the technique, key points, setup, etc. (optional)",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 text-gray-900"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-900 dark:text-white mb-1",children:"Tags (separated by commas)"}),o.jsx("input",{type:"text",name:"tags",value:a.tags,onChange:I,placeholder:"e.g., guard, armbar, fundamentals",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 text-gray-900"})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{type:"button",onClick:z,className:"flex-1 bg-gray-300 text-gray-700 py-3 px-4 rounded-lg font-medium hover:bg-gray-400 transition-colors",children:"Cancel"}),o.jsx("button",{type:"submit",disabled:j.isPending||k.isPending,className:"flex-1 bg-green-600 text-white py-3 px-4 rounded-lg font-medium hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:j.isPending||k.isPending?"Saving...":r?"Update Note":"Save Note"})]})]})]}):o.jsxs("div",{className:"p-6 max-w-md mx-auto",style:{paddingTop:"max(1.5rem, env(safe-area-inset-top))"},children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Notes"}),o.jsx("button",{onClick:()=>e(!0),className:"bg-green-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-green-700 transition-colors",children:"+ New Note"})]}),!h&&o.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx("span",{className:"text-yellow-600",children:""}),o.jsx("span",{className:"font-medium text-yellow-800",children:"Free Tier Limit"})]}),o.jsxs("p",{className:"text-sm text-yellow-700",children:["You have ",Array.isArray(p)?p.length:0," out of ",ta.notes," free notes. Upgrade to Premium for unlimited notes and sharing!"]}),o.jsx("button",{onClick:()=>f("/subscribe"),className:"mt-2 text-sm text-yellow-800 font-medium hover:text-yellow-900",children:"Upgrade Now "})]}),h&&o.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx("span",{className:"text-green-600",children:""}),o.jsx("span",{className:"font-medium text-green-800",children:"Premium Access"})]}),o.jsx("p",{className:"text-sm text-green-700",children:"You have unlimited notes with sharing capabilities. Keep adding your knowledge!"})]}),o.jsxs("div",{className:"mb-6",children:[o.jsx("input",{type:"text",value:s,onChange:R=>i(R.target.value),placeholder:"Search notes by title, content, or tags...",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 text-black"}),s&&o.jsxs("div",{className:"mt-2 text-sm text-black",children:["Found ",S.length," note",S.length!==1?"s":"",' matching "',s,'"']})]}),g?o.jsx("div",{className:"space-y-4",children:[1,2,3].map(R=>o.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-md animate-pulse",children:[o.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2"}),o.jsx("div",{className:"h-3 bg-gray-200 rounded mb-3"}),o.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]},R))}):Array.isArray(p)&&p.length>0?S.length>0?o.jsx("div",{className:"space-y-4",children:S.map(R=>o.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-md",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("h3",{className:"font-semibold text-black",children:R.title}),o.jsxs("div",{className:"flex items-center gap-2",children:[R.isShared===1&&o.jsxs("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded flex items-center gap-1",children:[o.jsx(om,{className:"w-3 h-3"}),"Community"]}),R.gymId&&o.jsxs("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded flex items-center gap-1",children:[o.jsx($n,{className:"w-3 h-3"}),"Gym"]}),o.jsx("button",{onClick:()=>F(R),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",title:"Edit note",children:"Edit"}),o.jsx("button",{onClick:()=>O(R.id),className:"text-red-600 hover:text-red-800 text-sm font-medium",title:"Delete note",children:"Delete"}),o.jsxs(oP,{children:[o.jsx(lP,{asChild:!0,children:o.jsxs("button",{className:"text-green-600 hover:text-green-800 text-sm font-medium flex items-center gap-1","data-testid":`button-share-menu-${R.id}`,children:[o.jsx(Zp,{className:"w-4 h-4"}),"Share"]})}),o.jsxs(av,{align:"end",children:[h?o.jsxs(ra,{onClick:()=>M(R.id),"data-testid":`button-share-community-${R.id}`,children:[o.jsx(om,{className:"w-4 h-4 mr-2"}),R.isShared===1?"Remove from Community":"Share to Community"]}):o.jsxs(ra,{onClick:()=>c({title:"Premium Feature",description:"Community sharing is available with Premium. Upgrade to share with the community!",variant:"destructive"}),className:"opacity-50","data-testid":`button-share-community-locked-${R.id}`,children:[o.jsx(om,{className:"w-4 h-4 mr-2"}),"Share to Community "]}),w&&w.role==="admin"&&o.jsxs(ra,{onClick:()=>R.gymId?_.mutate(R.id):x.mutate(R.id),"data-testid":`button-share-gym-${R.id}`,children:[o.jsx($n,{className:"w-4 h-4 mr-2"}),R.gymId?"Remove from Gym":"Share to My Gym"]})]})]})]})]}),o.jsx("div",{className:"mb-3",children:o.jsx(kU,{note:{id:R.id,title:R.title,content:R.content||"",createdAt:R.createdAt||R.date},userBelt:b==null?void 0:b.belt,userStripes:b==null?void 0:b.stripes})}),o.jsx("p",{className:"text-black text-sm mb-3",children:R.content}),o.jsx(P3,{noteId:R.id,existingVideo:R.videoUrl?{videoUrl:R.videoUrl,videoFileName:R.videoFileName,videoThumbnail:R.videoThumbnail}:null,onVideoUploaded:()=>{u.invalidateQueries({queryKey:["/api/notes"]}),v.refetch()}}),o.jsxs("div",{className:"flex items-center justify-between mt-4",children:[o.jsx("div",{className:"flex flex-wrap gap-1",children:Array.isArray(R.tags)&&R.tags.map((V,U)=>o.jsx("span",{className:"text-xs bg-gray-100 text-black px-2 py-1 rounded",children:V},U))}),o.jsx("span",{className:"text-xs text-black",children:new Date(R.createdAt||R.date).toLocaleDateString()})]})]},R.id))}):o.jsxs("div",{className:"text-center py-8 text-black",children:[o.jsxs("p",{children:['No notes found matching "',s,'"']}),o.jsx("p",{className:"text-sm",children:"Try a different search term or clear the search."}),o.jsx("button",{onClick:()=>i(""),className:"mt-2 text-blue-600 hover:text-blue-800 text-sm",children:"Clear search"})]}):o.jsxs("div",{className:"text-center py-8 text-black",children:[o.jsx("p",{children:"No notes yet."}),o.jsx("p",{className:"text-sm",children:"Create your first technique note!"})]})]})}function CU(){y.useEffect(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]);const[t,e]=y.useState(""),[r,n]=y.useState(!1),s=[{name:"Guard",query:"BJJ guard techniques"},{name:"Submissions",query:"BJJ submissions armbars chokes"},{name:"Sweeps",query:"BJJ sweeps from guard"},{name:"Escapes",query:"BJJ escapes defense"},{name:"Takedowns",query:"BJJ takedowns wrestling"},{name:"Passing",query:"BJJ guard passing"},{name:"Mount",query:"BJJ mount position attacks"},{name:"Side Control",query:"BJJ side control techniques"},{name:"Back Control",query:"BJJ back control rear naked choke"},{name:"Leg Locks",query:"BJJ leg locks heel hooks"},{name:"Gi Techniques",query:"BJJ gi techniques grips"},{name:"No-Gi",query:"BJJ no gi techniques"}],i=l=>{n(!0);const u=`https://www.youtube.com/results?search_query=${encodeURIComponent((l||t)+" BJJ brazilian jiu jitsu")}`;window.open(u,"_blank"),n(!1)},a=l=>{i(l)};return o.jsxs("div",{className:"p-6 max-w-md mx-auto",style:{paddingTop:"max(1.5rem, env(safe-area-inset-top))"},children:[o.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[o.jsx(RF,{className:"text-red-600",size:28}),o.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"BJJ Videos"})]}),o.jsxs("div",{className:"relative mb-6",children:[o.jsxs("div",{className:"relative",children:[o.jsx(Bx,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),o.jsx("input",{type:"text",placeholder:"Search BJJ techniques...",value:t,onChange:l=>e(l.target.value),onKeyPress:l=>l.key==="Enter"&&i(t),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent text-black dark:text-white bg-white dark:bg-gray-800"})]}),o.jsxs("button",{onClick:()=>i(t),disabled:r||!t.trim(),className:"w-full mt-3 bg-red-600 text-white py-3 px-4 rounded-lg font-medium hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center gap-2",children:[o.jsx(Bx,{size:20}),r?"Searching...":"Search on YouTube"]})]}),o.jsxs("div",{className:"mb-6",children:[o.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Quick Categories"}),o.jsx("div",{className:"grid grid-cols-2 gap-3",children:s.map(l=>o.jsx("button",{onClick:()=>a(l.query),className:"bg-white border border-gray-200 rounded-lg p-4 text-left hover:bg-gray-50 hover:border-red-300 transition-colors shadow-sm",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"font-medium text-black",children:l.name}),o.jsx(xC,{size:16,className:"text-gray-400"})]})},l.name))})]}),o.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),o.jsx("span",{className:"font-medium text-black",children:"YouTube Search"})]}),o.jsx("p",{className:"text-sm text-black",children:"Search results will open in YouTube where you can find the best BJJ instructional videos from top practitioners and academies."})]})]})}var ov="Dialog",[cP,uP]=Xn(ov),[EU,En]=cP(ov),dP=t=>{const{__scopeDialog:e,children:r,open:n,defaultOpen:s,onOpenChange:i,modal:a=!0}=t,l=y.useRef(null),c=y.useRef(null),[u=!1,d]=Wo({prop:n,defaultProp:s,onChange:i});return o.jsx(EU,{scope:e,triggerRef:l,contentRef:c,contentId:qn(),titleId:qn(),descriptionId:qn(),open:u,onOpenChange:d,onOpenToggle:y.useCallback(()=>d(f=>!f),[d]),modal:a,children:r})};dP.displayName=ov;var fP="DialogTrigger",hP=y.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,s=En(fP,r),i=$e(e,s.triggerRef);return o.jsx(Ne.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":uv(s.open),...n,ref:i,onClick:se(t.onClick,s.onOpenToggle)})});hP.displayName=fP;var lv="DialogPortal",[PU,mP]=cP(lv,{forceMount:void 0}),pP=t=>{const{__scopeDialog:e,forceMount:r,children:n,container:s}=t,i=En(lv,e);return o.jsx(PU,{scope:e,forceMount:r,children:y.Children.map(n,a=>o.jsx(ts,{present:r||i.open,children:o.jsx(iu,{asChild:!0,container:s,children:a})}))})};pP.displayName=lv;var sf="DialogOverlay",gP=y.forwardRef((t,e)=>{const r=mP(sf,t.__scopeDialog),{forceMount:n=r.forceMount,...s}=t,i=En(sf,t.__scopeDialog);return i.modal?o.jsx(ts,{present:n||i.open,children:o.jsx(AU,{...s,ref:e})}):null});gP.displayName=sf;var TU=hi("DialogOverlay.RemoveScroll"),AU=y.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,s=En(sf,r);return o.jsx(au,{as:TU,allowPinchZoom:!0,shards:[s.contentRef],children:o.jsx(Ne.div,{"data-state":uv(s.open),...n,ref:e,style:{pointerEvents:"auto",...n.style}})})}),fa="DialogContent",yP=y.forwardRef((t,e)=>{const r=mP(fa,t.__scopeDialog),{forceMount:n=r.forceMount,...s}=t,i=En(fa,t.__scopeDialog);return o.jsx(ts,{present:n||i.open,children:i.modal?o.jsx(OU,{...s,ref:e}):o.jsx(RU,{...s,ref:e})})});yP.displayName=fa;var OU=y.forwardRef((t,e)=>{const r=En(fa,t.__scopeDialog),n=y.useRef(null),s=$e(e,r.contentRef,n);return y.useEffect(()=>{const i=n.current;if(i)return sh(i)},[]),o.jsx(vP,{...t,ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:se(t.onCloseAutoFocus,i=>{var a;i.preventDefault(),(a=r.triggerRef.current)==null||a.focus()}),onPointerDownOutside:se(t.onPointerDownOutside,i=>{const a=i.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0;(a.button===2||l)&&i.preventDefault()}),onFocusOutside:se(t.onFocusOutside,i=>i.preventDefault())})}),RU=y.forwardRef((t,e)=>{const r=En(fa,t.__scopeDialog),n=y.useRef(!1),s=y.useRef(!1);return o.jsx(vP,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var a,l;(a=t.onCloseAutoFocus)==null||a.call(t,i),i.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),i.preventDefault()),n.current=!1,s.current=!1},onInteractOutside:i=>{var c,u;(c=t.onInteractOutside)==null||c.call(t,i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const a=i.target;((u=r.triggerRef.current)==null?void 0:u.contains(a))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),vP=y.forwardRef((t,e)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:s,onCloseAutoFocus:i,...a}=t,l=En(fa,r),c=y.useRef(null),u=$e(e,c);return Zf(),o.jsxs(o.Fragment,{children:[o.jsx(nu,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:s,onUnmountAutoFocus:i,children:o.jsx(ru,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":uv(l.open),...a,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),o.jsxs(o.Fragment,{children:[o.jsx(DU,{titleId:l.titleId}),o.jsx(LU,{contentRef:c,descriptionId:l.descriptionId})]})]})}),cv="DialogTitle",xP=y.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,s=En(cv,r);return o.jsx(Ne.h2,{id:s.titleId,...n,ref:e})});xP.displayName=cv;var wP="DialogDescription",bP=y.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,s=En(wP,r);return o.jsx(Ne.p,{id:s.descriptionId,...n,ref:e})});bP.displayName=wP;var _P="DialogClose",SP=y.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,s=En(_P,r);return o.jsx(Ne.button,{type:"button",...n,ref:e,onClick:se(t.onClick,()=>s.onOpenChange(!1))})});SP.displayName=_P;function uv(t){return t?"open":"closed"}var jP="DialogTitleWarning",[IU,kP]=D3(jP,{contentName:fa,titleName:cv,docsSlug:"dialog"}),DU=({titleId:t})=>{const e=kP(jP),r=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return y.useEffect(()=>{t&&(document.getElementById(t)||console.error(r))},[r,t]),null},MU="DialogDescriptionWarning",LU=({contentRef:t,descriptionId:e})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${kP(MU).contentName}}.`;return y.useEffect(()=>{var i;const s=(i=t.current)==null?void 0:i.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(n))},[n,t,e]),null},FU=dP,$U=hP,UU=pP,BU=gP,zU=yP,VU=xP,WU=bP,NP=SP,CP="AlertDialog",[qU,fq]=Xn(CP,[uP]),Es=uP(),EP=t=>{const{__scopeAlertDialog:e,...r}=t,n=Es(e);return o.jsx(FU,{...n,...r,modal:!0})};EP.displayName=CP;var HU="AlertDialogTrigger",PP=y.forwardRef((t,e)=>{const{__scopeAlertDialog:r,...n}=t,s=Es(r);return o.jsx($U,{...s,...n,ref:e})});PP.displayName=HU;var KU="AlertDialogPortal",TP=t=>{const{__scopeAlertDialog:e,...r}=t,n=Es(e);return o.jsx(UU,{...n,...r})};TP.displayName=KU;var GU="AlertDialogOverlay",AP=y.forwardRef((t,e)=>{const{__scopeAlertDialog:r,...n}=t,s=Es(r);return o.jsx(BU,{...s,...n,ref:e})});AP.displayName=GU;var yo="AlertDialogContent",[QU,YU]=qU(yo),JU=A3("AlertDialogContent"),OP=y.forwardRef((t,e)=>{const{__scopeAlertDialog:r,children:n,...s}=t,i=Es(r),a=y.useRef(null),l=$e(e,a),c=y.useRef(null);return o.jsx(IU,{contentName:yo,titleName:RP,docsSlug:"alert-dialog",children:o.jsx(QU,{scope:r,cancelRef:c,children:o.jsxs(zU,{role:"alertdialog",...i,...s,ref:l,onOpenAutoFocus:se(s.onOpenAutoFocus,u=>{var d;u.preventDefault(),(d=c.current)==null||d.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[o.jsx(JU,{children:n}),o.jsx(XU,{contentRef:a})]})})})});OP.displayName=yo;var RP="AlertDialogTitle",IP=y.forwardRef((t,e)=>{const{__scopeAlertDialog:r,...n}=t,s=Es(r);return o.jsx(VU,{...s,...n,ref:e})});IP.displayName=RP;var DP="AlertDialogDescription",MP=y.forwardRef((t,e)=>{const{__scopeAlertDialog:r,...n}=t,s=Es(r);return o.jsx(WU,{...s,...n,ref:e})});MP.displayName=DP;var ZU="AlertDialogAction",LP=y.forwardRef((t,e)=>{const{__scopeAlertDialog:r,...n}=t,s=Es(r);return o.jsx(NP,{...s,...n,ref:e})});LP.displayName=ZU;var FP="AlertDialogCancel",$P=y.forwardRef((t,e)=>{const{__scopeAlertDialog:r,...n}=t,{cancelRef:s}=YU(FP,r),i=Es(r),a=$e(e,s);return o.jsx(NP,{...i,...n,ref:a})});$P.displayName=FP;var XU=({contentRef:t})=>{const e=`\`${yo}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${yo}\` by passing a \`${DP}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${yo}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return y.useEffect(()=>{var n;document.getElementById((n=t.current)==null?void 0:n.getAttribute("aria-describedby"))||console.warn(e)},[e,t]),null},e8=EP,t8=PP,r8=TP,UP=AP,BP=OP,zP=LP,VP=$P,WP=IP,qP=MP;const gw=e8,yw=t8,n8=r8,HP=y.forwardRef(({className:t,...e},r)=>o.jsx(UP,{className:fe("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:r}));HP.displayName=UP.displayName;const og=y.forwardRef(({className:t,...e},r)=>o.jsxs(n8,{children:[o.jsx(HP,{}),o.jsx(BP,{ref:r,className:fe("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...e})]}));og.displayName=BP.displayName;const lg=({className:t,...e})=>o.jsx("div",{className:fe("flex flex-col space-y-2 text-center sm:text-left",t),...e});lg.displayName="AlertDialogHeader";const cg=({className:t,...e})=>o.jsx("div",{className:fe("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});cg.displayName="AlertDialogFooter";const ug=y.forwardRef(({className:t,...e},r)=>o.jsx(WP,{ref:r,className:fe("text-lg font-semibold",t),...e}));ug.displayName=WP.displayName;const dg=y.forwardRef(({className:t,...e},r)=>o.jsx(qP,{ref:r,className:fe("text-sm text-muted-foreground",t),...e}));dg.displayName=qP.displayName;const fg=y.forwardRef(({className:t,...e},r)=>o.jsx(zP,{ref:r,className:fe(jc(),t),...e}));fg.displayName=zP.displayName;const hg=y.forwardRef(({className:t,...e},r)=>o.jsx(VP,{ref:r,className:fe(jc({variant:"outline"}),"mt-2 sm:mt-0",t),...e}));hg.displayName=VP.displayName;var dv="Progress",fv=100,[s8,hq]=Xn(dv),[i8,a8]=s8(dv),KP=y.forwardRef((t,e)=>{const{__scopeProgress:r,value:n=null,max:s,getValueLabel:i=o8,...a}=t;(s||s===0)&&!vw(s)&&console.error(l8(`${s}`,"Progress"));const l=vw(s)?s:fv;n!==null&&!xw(n,l)&&console.error(c8(`${n}`,"Progress"));const c=xw(n,l)?n:null,u=af(c)?i(c,l):void 0;return o.jsx(i8,{scope:r,value:c,max:l,children:o.jsx(Ne.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":af(c)?c:void 0,"aria-valuetext":u,role:"progressbar","data-state":YP(c,l),"data-value":c??void 0,"data-max":l,...a,ref:e})})});KP.displayName=dv;var GP="ProgressIndicator",QP=y.forwardRef((t,e)=>{const{__scopeProgress:r,...n}=t,s=a8(GP,r);return o.jsx(Ne.div,{"data-state":YP(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...n,ref:e})});QP.displayName=GP;function o8(t,e){return`${Math.round(t/e*100)}%`}function YP(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function af(t){return typeof t=="number"}function vw(t){return af(t)&&!isNaN(t)&&t>0}function xw(t,e){return af(t)&&!isNaN(t)&&t<=e&&t>=0}function l8(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${fv}\`.`}function c8(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${fv} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var JP=KP,u8=QP;const ZP=y.forwardRef(({className:t,value:e,...r},n)=>o.jsx(JP,{ref:n,className:fe("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...r,children:o.jsx(u8,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));ZP.displayName=JP.displayName;const St=y.forwardRef(({className:t,...e},r)=>o.jsx("div",{ref:r,className:fe("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));St.displayName="Card";const or=y.forwardRef(({className:t,...e},r)=>o.jsx("div",{ref:r,className:fe("flex flex-col space-y-1.5 p-6",t),...e}));or.displayName="CardHeader";const lr=y.forwardRef(({className:t,...e},r)=>o.jsx("div",{ref:r,className:fe("text-2xl font-semibold leading-none tracking-tight",t),...e}));lr.displayName="CardTitle";const yi=y.forwardRef(({className:t,...e},r)=>o.jsx("div",{ref:r,className:fe("text-sm text-muted-foreground",t),...e}));yi.displayName="CardDescription";const Mt=y.forwardRef(({className:t,...e},r)=>o.jsx("div",{ref:r,className:fe("p-6 pt-0",t),...e}));Mt.displayName="CardContent";const d8=y.forwardRef(({className:t,...e},r)=>o.jsx("div",{ref:r,className:fe("flex items-center p-6 pt-0",t),...e}));d8.displayName="CardFooter";function f8(){const{data:t,isLoading:e}=Qe({queryKey:["/api/storage/usage"]});if(e)return o.jsxs(St,{children:[o.jsx(or,{children:o.jsxs(lr,{className:"flex items-center gap-2",children:[o.jsx(Ux,{className:"h-5 w-5"}),"Video Storage"]})}),o.jsx(Mt,{children:o.jsx("div",{className:"h-20 flex items-center justify-center text-muted-foreground",children:"Loading..."})})]});if(!t)return null;const{percentage:r,storageUsedFormatted:n,quotaFormatted:s,tierName:i,tier:a}=t,l=r>=80,c=r>=100;return o.jsxs(St,{children:[o.jsxs(or,{children:[o.jsxs(lr,{className:"flex items-center gap-2",children:[o.jsx(Ux,{className:"h-5 w-5"}),"Video Storage"]}),o.jsxs(yi,{children:[i," Plan"]})]}),o.jsxs(Mt,{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{className:"text-muted-foreground",children:"Used"}),o.jsxs("span",{className:"font-medium",children:[n," / ",s]})]}),o.jsx(ZP,{value:Math.min(r,100),className:"h-2","data-testid":"storage-progress-bar"}),o.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[o.jsxs("span",{children:[r.toFixed(1),"% used"]}),!c&&o.jsxs("span",{children:[t.remainingFormatted," remaining"]})]})]}),c&&o.jsxs(_c,{variant:"destructive","data-testid":"alert-storage-full",children:[o.jsx(Yd,{className:"h-4 w-4"}),o.jsx(Sc,{children:"Storage limit reached. Delete videos or upgrade to continue uploading."})]}),!c&&l&&o.jsxs(_c,{"data-testid":"alert-storage-warning",children:[o.jsx(Yd,{className:"h-4 w-4"}),o.jsx(Sc,{children:"You're running low on storage. Consider upgrading for more space."})]}),!l&&o.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground","data-testid":"storage-ok",children:[o.jsx(jF,{className:"h-4 w-4 text-green-500"}),o.jsx("span",{children:"Storage space available"})]}),a==="free"&&o.jsx("div",{className:"pt-2",children:o.jsx(Ft,{href:"/settings?tab=subscription",children:o.jsx(ze,{variant:"outline",className:"w-full","data-testid":"button-upgrade-storage",children:"Upgrade for More Storage"})})}),a!=="free"&&a!=="gym_pro"&&o.jsx("div",{className:"pt-2",children:o.jsx(Ft,{href:"/settings?tab=subscription",children:o.jsx(ze,{variant:"outline",className:"w-full","data-testid":"button-upgrade-storage",children:"Upgrade to Gym Pro"})})})]})]})}function h8(){const[t,e]=y.useState(!1),[r,n]=y.useState(!0),[s,i]=y.useState(!0),[a,l]=y.useState(""),c="1.0.107",{darkMode:u,setDarkMode:d}=fF(),{user:f}=Gt(),{toast:h}=Ot(),[,v]=rl(),p=Yf(f==null?void 0:f.email,f==null?void 0:f.subscriptionStatus,f==null?void 0:f.subscriptionExpiresAt),g=HF(f==null?void 0:f.email,f==null?void 0:f.subscriptionStatus,f==null?void 0:f.subscriptionExpiresAt);y.useEffect(()=>{const M=localStorage.getItem("bjj_autosync")!=="false",F=localStorage.getItem("bjj_notifications")!=="false";localStorage.getItem("bjj_autosync")||localStorage.setItem("bjj_autosync","true"),n(M),i(F)},[]);const b=()=>{const M=!r;n(M),localStorage.setItem("bjj_autosync",M.toString())},w=()=>{d(!u)},m=()=>{const M=!s;i(M),localStorage.setItem("bjj_notifications",M.toString())};Qe({queryKey:["/api/user-stats"]});const{data:x}=Qe({queryKey:["/api/classes"]}),{data:_}=Qe({queryKey:["/api/notes"]}),{data:S}=Qe({queryKey:["/api/my-gym"]}),{data:j}=Qe({queryKey:[`/api/gyms/${S==null?void 0:S.id}/members`],enabled:!!S&&(S.role==="admin"||(f==null?void 0:f.email)==="bjjjitsjournal@gmail.com")}),k=Fe({mutationFn:async M=>await dt("POST","/api/gyms/join",{code:M}),onSuccess:()=>{sr.invalidateQueries({queryKey:["/api/my-gym"]}),h({title:"Success!",description:"You've joined the gym!"}),l("")},onError:M=>{h({title:"Error",description:M.message||"Failed to join gym",variant:"destructive"})}}),N=Fe({mutationFn:async({userId:M})=>await dt("DELETE",`/api/gyms/${S==null?void 0:S.id}/members/${M}`),onSuccess:()=>{sr.invalidateQueries({queryKey:["/api/gyms",S==null?void 0:S.id,"members"]}),h({title:"Success!",description:"Member removed from gym"})},onError:M=>{h({title:"Error",description:M.message||"Failed to remove member",variant:"destructive"})}}),A=()=>{if(!a.trim()){h({title:"Error",description:"Please enter a gym code",variant:"destructive"});return}k.mutate(a.trim().toUpperCase())},I=Fe({mutationFn:async()=>await dt("DELETE","/api/user/delete-account"),onSuccess:()=>{h({title:"Account Deleted",description:"Your account and all data have been permanently deleted."}),localStorage.clear(),sessionStorage.clear(),setTimeout(()=>{window.location.href="/"},2e3)},onError:M=>{h({title:"Error",description:M.message||"Failed to delete account",variant:"destructive"})}});return o.jsxs("div",{className:"p-6 max-w-md mx-auto dark:bg-gray-900 min-h-screen",children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-6",children:"Settings"}),t&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 max-w-md w-full max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h3",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"Upgrade to Premium"}),o.jsx("button",{onClick:()=>e(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:""})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"text-center",children:o.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg p-4 mb-4",children:[o.jsx("h4",{className:"text-lg font-bold",children:"Premium Plan"}),o.jsx("p",{className:"text-sm opacity-90",children:"Unlock unlimited potential"})]})}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"text-green-500",children:""}),o.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Unlimited class logging"})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"text-green-500",children:""}),o.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Unlimited notes with sharing"})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"text-green-500",children:""}),o.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Advanced video library"})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"text-green-500",children:""}),o.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Cloud backup & sync"})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"text-green-500",children:""}),o.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Priority support"})]})]}),o.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4",children:[o.jsx("h5",{className:"font-semibold text-gray-800 dark:text-white mb-2",children:"How to Subscribe:"}),o.jsxs("ol",{className:"text-sm text-gray-600 dark:text-gray-400 space-y-1",children:[o.jsx("li",{children:"1. Visit your device's app store"}),o.jsx("li",{children:'2. Search for "Jits Journal"'}),o.jsx("li",{children:"3. Select premium subscription"}),o.jsx("li",{children:"4. Complete purchase through app store"})]})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("button",{onClick:()=>e(!1),className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white py-3 px-6 rounded-lg hover:from-blue-700 hover:to-purple-700 transition-colors font-medium",children:"Got it!"}),o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"Subscriptions are managed through your app store"})]})]})]})}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-md mb-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Account"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Plan"}),o.jsx("span",{className:`text-sm px-2 py-1 rounded ${p?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:g})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Classes Logged"}),o.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[Array.isArray(x)?x.length:0," classes"]})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Notes Created"}),o.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[Array.isArray(_)?_.length:0," notes"]})]}),!p&&o.jsx("button",{onClick:()=>v("/subscribe"),className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors",children:"Upgrade to Premium"})]})]}),o.jsx("div",{className:"mb-6",children:o.jsx(f8,{})}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-md mb-6",children:[o.jsxs("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4 flex items-center gap-2",children:[o.jsx(Gd,{className:"w-5 h-5"}),"Gym Community"]}),o.jsxs("div",{className:"space-y-4",children:[S&&o.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx($n,{className:"w-5 h-5 text-blue-600"}),o.jsx("span",{className:"font-semibold text-gray-800 dark:text-white",children:S.name})]}),o.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Code: ",o.jsx("span",{className:"font-mono font-bold",children:S.code})]}),o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-2",children:"You're a member of this gym community"})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:S?"Join another gym community":"Join a gym community to share notes with your training partners"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{type:"text",placeholder:"Enter gym code...",value:a,onChange:M=>l(M.target.value.toUpperCase()),onKeyPress:M=>M.key==="Enter"&&A(),className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent","data-testid":"input-gym-code"}),o.jsx("button",{onClick:A,disabled:k.isPending||!a.trim(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed","data-testid":"button-join-gym",children:k.isPending?"Joining...":"Join"})]})]}),S&&(S.role==="admin"||(f==null?void 0:f.email)==="bjjjitsjournal@gmail.com")&&o.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4",children:[o.jsxs("h4",{className:"font-semibold text-gray-800 dark:text-white mb-3 flex items-center gap-2",children:[o.jsx($n,{className:"w-4 h-4"}),"Gym Members ",j&&`(${j.length})`]}),j?j.length===0?o.jsx("div",{className:"text-center py-4",children:o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No members yet"})}):o.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:j.map(M=>o.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:M.firstName&&M.lastName?`${M.firstName} ${M.lastName}`:M.email}),o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:M.email}),o.jsxs("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:["Joined ",new Date(M.joinedAt).toLocaleDateString()]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[M.role==="admin"&&o.jsx("span",{className:"text-xs bg-purple-100 dark:bg-purple-900 text-purple-700 dark:text-purple-300 px-2 py-1 rounded",children:"Admin"}),M.userId!==Number(f==null?void 0:f.id)&&o.jsxs(gw,{children:[o.jsx(yw,{asChild:!0,children:o.jsx("button",{disabled:N.isPending,className:"text-red-600 hover:text-red-700 p-2 disabled:opacity-50 disabled:cursor-not-allowed","data-testid":`button-remove-member-${M.userId}`,children:o.jsx(ws,{className:"w-4 h-4"})})}),o.jsxs(og,{className:"bg-white dark:bg-gray-800",children:[o.jsxs(lg,{children:[o.jsx(ug,{className:"text-gray-800 dark:text-white",children:"Remove Member?"}),o.jsxs(dg,{className:"text-gray-600 dark:text-gray-400",children:["Are you sure you want to remove ",M.firstName||M.email," from the gym?"]})]}),o.jsxs(cg,{children:[o.jsx(hg,{className:"bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-white",children:"Cancel"}),o.jsx(fg,{onClick:()=>N.mutate({userId:M.userId}),className:"bg-red-600 hover:bg-red-700 text-white",children:"Remove"})]})]})]})]})]},M.userId))}):o.jsx("div",{className:"text-center py-4",children:o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Loading members..."})})]}),(f==null?void 0:f.role)==="admin"&&o.jsxs("button",{onClick:()=>v("/admin"),className:"w-full bg-purple-600 text-white py-2 px-4 rounded-lg hover:bg-purple-700 transition-colors flex items-center justify-center gap-2","data-testid":"button-admin-panel",children:[o.jsx(Gd,{className:"w-4 h-4"}),"Manage Gyms (Admin)"]})]})]}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-md mb-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"App Settings"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Notifications"}),o.jsx("button",{onClick:m,className:`w-12 h-6 rounded-full relative transition-colors ${s?"bg-green-500":"bg-gray-300 dark:bg-gray-600"}`,children:o.jsx("div",{className:`w-5 h-5 bg-white rounded-full absolute top-0.5 transition-transform ${s?"right-0.5":"left-0.5"}`})})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Auto-sync"}),o.jsx("button",{onClick:b,className:`w-12 h-6 rounded-full relative transition-colors ${r?"bg-green-500":"bg-gray-300 dark:bg-gray-600"}`,children:o.jsx("div",{className:`w-5 h-5 bg-white rounded-full absolute top-0.5 transition-transform ${r?"right-0.5":"left-0.5"}`})})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Dark Mode"}),o.jsx("button",{onClick:w,className:`w-12 h-6 rounded-full relative transition-colors ${u?"bg-green-500":"bg-gray-300 dark:bg-gray-600"}`,children:o.jsx("div",{className:`w-5 h-5 bg-white rounded-full absolute top-0.5 transition-transform ${u?"right-0.5":"left-0.5"}`})})]})]})]}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-md mb-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Subscription"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-gray-700",children:"Current Plan"}),o.jsx("span",{className:`text-sm px-2 py-1 rounded ${p?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:g})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Classes Limit"}),o.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[Array.isArray(x)?x.length:0," / ",p?"Unlimited":ta.classes]})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Notes Limit"}),o.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[Array.isArray(_)?_.length:0," / ",p?"Unlimited":ta.notes]})]}),!p&&o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>v("/subscribe"),className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white py-2 px-4 rounded-lg hover:from-blue-700 hover:to-purple-700 transition-colors",children:"View Plans & Subscribe"}),o.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 text-center",children:"Secure payments via Stripe"})]}),p&&o.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(dn,{className:"w-4 h-4 text-green-600"}),o.jsx("span",{className:"text-sm font-medium text-green-800",children:"Premium Active"})]}),o.jsx("p",{className:"text-xs text-green-700 mt-1",children:"You have unlimited access to all features"})]})]})]}),o.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl p-6 shadow-md mb-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Premium Features"}),o.jsxs("div",{className:"space-y-2 text-sm",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(dn,{className:"w-4 h-4 text-green-600"}),o.jsx("span",{className:"text-gray-700",children:"Unlimited class logging"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(dn,{className:"w-4 h-4 text-green-600"}),o.jsx("span",{className:"text-gray-700",children:"Unlimited notes with sharing"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(dn,{className:"w-4 h-4 text-green-600"}),o.jsx("span",{className:"text-gray-700",children:"Advanced video library"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(dn,{className:"w-4 h-4 text-green-600"}),o.jsx("span",{className:"text-gray-700",children:"Cloud backup & sync"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(dn,{className:"w-4 h-4 text-green-600"}),o.jsx("span",{className:"text-gray-700",children:"Advanced progress analytics"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(dn,{className:"w-4 h-4 text-green-600"}),o.jsx("span",{className:"text-gray-700",children:"Priority support"})]})]})]}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-md mb-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Legal & Privacy"}),o.jsxs("div",{className:"space-y-3",children:[o.jsx(Ft,{href:"/privacy",children:o.jsxs("button",{"data-testid":"button-privacy-policy",className:"w-full text-left text-gray-600 dark:text-gray-300 hover:text-gray-800 dark:hover:text-white py-2 flex items-center justify-between",children:[o.jsx("span",{children:"Privacy Policy"}),o.jsx("span",{className:"text-gray-400",children:""})]})}),o.jsx(Ft,{href:"/terms",children:o.jsxs("button",{"data-testid":"button-terms-of-service",className:"w-full text-left text-gray-600 dark:text-gray-300 hover:text-gray-800 dark:hover:text-white py-2 flex items-center justify-between",children:[o.jsx("span",{children:"Terms of Service"}),o.jsx("span",{className:"text-gray-400",children:""})]})})]})]}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-md mb-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Danger Zone"}),o.jsxs(gw,{children:[o.jsx(yw,{asChild:!0,children:o.jsxs("button",{"data-testid":"button-delete-account",className:"w-full bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 hover:bg-red-100 dark:hover:bg-red-900/30 py-3 px-4 rounded-lg flex items-center justify-center gap-2 font-medium transition-colors",children:[o.jsx(ws,{className:"w-4 h-4"}),"Delete Account & All Data"]})}),o.jsxs(og,{className:"bg-white dark:bg-gray-800",children:[o.jsxs(lg,{children:[o.jsx(ug,{className:"text-gray-900 dark:text-white",children:"Are you absolutely sure?"}),o.jsxs(dg,{className:"text-gray-600 dark:text-gray-400",children:["This action cannot be undone. This will permanently delete your account and remove all your data from our servers, including:",o.jsxs("ul",{className:"mt-2 list-disc list-inside space-y-1",children:[o.jsx("li",{children:"All training classes and sessions"}),o.jsx("li",{children:"All notes and technique breakdowns"}),o.jsx("li",{children:"Belt progression history"}),o.jsx("li",{children:"Competition game plans"}),o.jsx("li",{children:"Gym memberships"})]})]})]}),o.jsxs(cg,{children:[o.jsx(hg,{className:"bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-white",children:"Cancel"}),o.jsx(fg,{onClick:()=>I.mutate(),disabled:I.isPending,className:"bg-red-600 hover:bg-red-700 text-white",children:I.isPending?"Deleting...":"Yes, delete everything"})]})]})]})]}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-md mb-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Support & Feedback"}),o.jsx("div",{className:"space-y-3",children:o.jsxs("button",{onClick:()=>window.location.href="/contact",className:"w-full text-left text-gray-600 dark:text-gray-300 hover:text-gray-800 dark:hover:text-white py-2 flex items-center justify-between",children:[o.jsx("span",{children:"Contact Support"}),o.jsx("span",{className:"text-gray-400",children:""})]})})]}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-md",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"App Info"}),o.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Version"}),o.jsx("span",{children:c})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Build"}),o.jsx("span",{children:"2025.01.05"})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Developer"}),o.jsx("span",{children:"Jits Journal Team"})]})]})]})]})}const ir=y.forwardRef(({className:t,type:e,...r},n)=>o.jsx("input",{type:e,className:fe("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...r}));ir.displayName="Input";const hv=y.forwardRef(({className:t,...e},r)=>o.jsx("textarea",{className:fe("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...e}));hv.displayName="Textarea";function ww(t,[e,r]){return Math.min(r,Math.max(e,t))}function m8(t){const e=y.useRef({value:t,previous:t});return y.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var p8="VisuallyHidden",XP=y.forwardRef((t,e)=>o.jsx(Ne.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));XP.displayName=p8;var g8=[" ","Enter","ArrowUp","ArrowDown"],y8=[" ","Enter"],cu="Select",[lh,ch,v8]=Fy(cu),[dl,mq]=Xn(cu,[v8,ul]),uh=ul(),[x8,Ni]=dl(cu),[w8,b8]=dl(cu),eT=t=>{const{__scopeSelect:e,children:r,open:n,defaultOpen:s,onOpenChange:i,value:a,defaultValue:l,onValueChange:c,dir:u,name:d,autoComplete:f,disabled:h,required:v,form:p}=t,g=uh(e),[b,w]=y.useState(null),[m,x]=y.useState(null),[_,S]=y.useState(!1),j=$y(u),[k=!1,N]=Wo({prop:n,defaultProp:s,onChange:i}),[A,I]=Wo({prop:a,defaultProp:l,onChange:c}),M=y.useRef(null),F=b?p||!!b.closest("form"):!0,[O,z]=y.useState(new Set),R=Array.from(O).map(V=>V.props.value).join(";");return o.jsx(Qy,{...g,children:o.jsxs(x8,{required:v,scope:e,trigger:b,onTriggerChange:w,valueNode:m,onValueNodeChange:x,valueNodeHasChildren:_,onValueNodeHasChildrenChange:S,contentId:qn(),value:A,onValueChange:I,open:k,onOpenChange:N,dir:j,triggerPointerDownPosRef:M,disabled:h,children:[o.jsx(lh.Provider,{scope:e,children:o.jsx(w8,{scope:t.__scopeSelect,onNativeOptionAdd:y.useCallback(V=>{z(U=>new Set(U).add(V))},[]),onNativeOptionRemove:y.useCallback(V=>{z(U=>{const P=new Set(U);return P.delete(V),P})},[]),children:r})}),F?o.jsxs(kT,{"aria-hidden":!0,required:v,tabIndex:-1,name:d,autoComplete:f,value:A,onChange:V=>I(V.target.value),disabled:h,form:p,children:[A===void 0?o.jsx("option",{value:""}):null,Array.from(O)]},R):null]})})};eT.displayName=cu;var tT="SelectTrigger",rT=y.forwardRef((t,e)=>{const{__scopeSelect:r,disabled:n=!1,...s}=t,i=uh(r),a=Ni(tT,r),l=a.disabled||n,c=$e(e,a.onTriggerChange),u=ch(r),d=y.useRef("touch"),[f,h,v]=NT(g=>{const b=u().filter(x=>!x.disabled),w=b.find(x=>x.value===a.value),m=CT(b,g,w);m!==void 0&&a.onValueChange(m.value)}),p=g=>{l||(a.onOpenChange(!0),v()),g&&(a.triggerPointerDownPosRef.current={x:Math.round(g.pageX),y:Math.round(g.pageY)})};return o.jsx(rh,{asChild:!0,...i,children:o.jsx(Ne.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":jT(a.value)?"":void 0,...s,ref:c,onClick:se(s.onClick,g=>{g.currentTarget.focus(),d.current!=="mouse"&&p(g)}),onPointerDown:se(s.onPointerDown,g=>{d.current=g.pointerType;const b=g.target;b.hasPointerCapture(g.pointerId)&&b.releasePointerCapture(g.pointerId),g.button===0&&g.ctrlKey===!1&&g.pointerType==="mouse"&&(p(g),g.preventDefault())}),onKeyDown:se(s.onKeyDown,g=>{const b=f.current!=="";!(g.ctrlKey||g.altKey||g.metaKey)&&g.key.length===1&&h(g.key),!(b&&g.key===" ")&&g8.includes(g.key)&&(p(),g.preventDefault())})})})});rT.displayName=tT;var nT="SelectValue",sT=y.forwardRef((t,e)=>{const{__scopeSelect:r,className:n,style:s,children:i,placeholder:a="",...l}=t,c=Ni(nT,r),{onValueNodeHasChildrenChange:u}=c,d=i!==void 0,f=$e(e,c.onValueNodeChange);return ur(()=>{u(d)},[u,d]),o.jsx(Ne.span,{...l,ref:f,style:{pointerEvents:"none"},children:jT(c.value)?o.jsx(o.Fragment,{children:a}):i})});sT.displayName=nT;var _8="SelectIcon",iT=y.forwardRef((t,e)=>{const{__scopeSelect:r,children:n,...s}=t;return o.jsx(Ne.span,{"aria-hidden":!0,...s,ref:e,children:n||""})});iT.displayName=_8;var S8="SelectPortal",aT=t=>o.jsx(iu,{asChild:!0,...t});aT.displayName=S8;var ha="SelectContent",oT=y.forwardRef((t,e)=>{const r=Ni(ha,t.__scopeSelect),[n,s]=y.useState();if(ur(()=>{s(new DocumentFragment)},[]),!r.open){const i=n;return i?tl.createPortal(o.jsx(lT,{scope:t.__scopeSelect,children:o.jsx(lh.Slot,{scope:t.__scopeSelect,children:o.jsx("div",{children:t.children})})}),i):null}return o.jsx(cT,{...t,ref:e})});oT.displayName=ha;var an=10,[lT,Ci]=dl(ha),j8="SelectContentImpl",k8=hi("SelectContent.RemoveScroll"),cT=y.forwardRef((t,e)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:a,side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:f,collisionBoundary:h,collisionPadding:v,sticky:p,hideWhenDetached:g,avoidCollisions:b,...w}=t,m=Ni(ha,r),[x,_]=y.useState(null),[S,j]=y.useState(null),k=$e(e,ie=>_(ie)),[N,A]=y.useState(null),[I,M]=y.useState(null),F=ch(r),[O,z]=y.useState(!1),R=y.useRef(!1);y.useEffect(()=>{if(x)return sh(x)},[x]),Zf();const V=y.useCallback(ie=>{const[Ae,...Ue]=F().map(Le=>Le.ref.current),[Ie]=Ue.slice(-1),De=document.activeElement;for(const Le of ie)if(Le===De||(Le==null||Le.scrollIntoView({block:"nearest"}),Le===Ae&&S&&(S.scrollTop=0),Le===Ie&&S&&(S.scrollTop=S.scrollHeight),Le==null||Le.focus(),document.activeElement!==De))return},[F,S]),U=y.useCallback(()=>V([N,x]),[V,N,x]);y.useEffect(()=>{O&&U()},[O,U]);const{onOpenChange:P,triggerPointerDownPosRef:L}=m;y.useEffect(()=>{if(x){let ie={x:0,y:0};const Ae=Ie=>{var De,Le;ie={x:Math.abs(Math.round(Ie.pageX)-(((De=L.current)==null?void 0:De.x)??0)),y:Math.abs(Math.round(Ie.pageY)-(((Le=L.current)==null?void 0:Le.y)??0))}},Ue=Ie=>{ie.x<=10&&ie.y<=10?Ie.preventDefault():x.contains(Ie.target)||P(!1),document.removeEventListener("pointermove",Ae),L.current=null};return L.current!==null&&(document.addEventListener("pointermove",Ae),document.addEventListener("pointerup",Ue,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Ae),document.removeEventListener("pointerup",Ue,{capture:!0})}}},[x,P,L]),y.useEffect(()=>{const ie=()=>P(!1);return window.addEventListener("blur",ie),window.addEventListener("resize",ie),()=>{window.removeEventListener("blur",ie),window.removeEventListener("resize",ie)}},[P]);const[K,re]=NT(ie=>{const Ae=F().filter(De=>!De.disabled),Ue=Ae.find(De=>De.ref.current===document.activeElement),Ie=CT(Ae,ie,Ue);Ie&&setTimeout(()=>Ie.ref.current.focus())}),G=y.useCallback((ie,Ae,Ue)=>{const Ie=!R.current&&!Ue;(m.value!==void 0&&m.value===Ae||Ie)&&(A(ie),Ie&&(R.current=!0))},[m.value]),je=y.useCallback(()=>x==null?void 0:x.focus(),[x]),le=y.useCallback((ie,Ae,Ue)=>{const Ie=!R.current&&!Ue;(m.value!==void 0&&m.value===Ae||Ie)&&M(ie)},[m.value]),Ke=n==="popper"?mg:uT,We=Ke===mg?{side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:f,collisionBoundary:h,collisionPadding:v,sticky:p,hideWhenDetached:g,avoidCollisions:b}:{};return o.jsx(lT,{scope:r,content:x,viewport:S,onViewportChange:j,itemRefCallback:G,selectedItem:N,onItemLeave:je,itemTextRefCallback:le,focusSelectedItem:U,selectedItemText:I,position:n,isPositioned:O,searchRef:K,children:o.jsx(au,{as:k8,allowPinchZoom:!0,children:o.jsx(nu,{asChild:!0,trapped:m.open,onMountAutoFocus:ie=>{ie.preventDefault()},onUnmountAutoFocus:se(s,ie=>{var Ae;(Ae=m.trigger)==null||Ae.focus({preventScroll:!0}),ie.preventDefault()}),children:o.jsx(ru,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:ie=>ie.preventDefault(),onDismiss:()=>m.onOpenChange(!1),children:o.jsx(Ke,{role:"listbox",id:m.contentId,"data-state":m.open?"open":"closed",dir:m.dir,onContextMenu:ie=>ie.preventDefault(),...w,...We,onPlaced:()=>z(!0),ref:k,style:{display:"flex",flexDirection:"column",outline:"none",...w.style},onKeyDown:se(w.onKeyDown,ie=>{const Ae=ie.ctrlKey||ie.altKey||ie.metaKey;if(ie.key==="Tab"&&ie.preventDefault(),!Ae&&ie.key.length===1&&re(ie.key),["ArrowUp","ArrowDown","Home","End"].includes(ie.key)){let Ie=F().filter(De=>!De.disabled).map(De=>De.ref.current);if(["ArrowUp","End"].includes(ie.key)&&(Ie=Ie.slice().reverse()),["ArrowUp","ArrowDown"].includes(ie.key)){const De=ie.target,Le=Ie.indexOf(De);Ie=Ie.slice(Le+1)}setTimeout(()=>V(Ie)),ie.preventDefault()}})})})})})})});cT.displayName=j8;var N8="SelectItemAlignedPosition",uT=y.forwardRef((t,e)=>{const{__scopeSelect:r,onPlaced:n,...s}=t,i=Ni(ha,r),a=Ci(ha,r),[l,c]=y.useState(null),[u,d]=y.useState(null),f=$e(e,k=>d(k)),h=ch(r),v=y.useRef(!1),p=y.useRef(!0),{viewport:g,selectedItem:b,selectedItemText:w,focusSelectedItem:m}=a,x=y.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&u&&g&&b&&w){const k=i.trigger.getBoundingClientRect(),N=u.getBoundingClientRect(),A=i.valueNode.getBoundingClientRect(),I=w.getBoundingClientRect();if(i.dir!=="rtl"){const De=I.left-N.left,Le=A.left-De,Jt=k.left-Le,Er=k.width+Jt,Pi=Math.max(Er,N.width),Ps=window.innerWidth-an,Ts=ww(Le,[an,Math.max(an,Ps-Pi)]);l.style.minWidth=Er+"px",l.style.left=Ts+"px"}else{const De=N.right-I.right,Le=window.innerWidth-A.right-De,Jt=window.innerWidth-k.right-Le,Er=k.width+Jt,Pi=Math.max(Er,N.width),Ps=window.innerWidth-an,Ts=ww(Le,[an,Math.max(an,Ps-Pi)]);l.style.minWidth=Er+"px",l.style.right=Ts+"px"}const M=h(),F=window.innerHeight-an*2,O=g.scrollHeight,z=window.getComputedStyle(u),R=parseInt(z.borderTopWidth,10),V=parseInt(z.paddingTop,10),U=parseInt(z.borderBottomWidth,10),P=parseInt(z.paddingBottom,10),L=R+V+O+P+U,K=Math.min(b.offsetHeight*5,L),re=window.getComputedStyle(g),G=parseInt(re.paddingTop,10),je=parseInt(re.paddingBottom,10),le=k.top+k.height/2-an,Ke=F-le,We=b.offsetHeight/2,ie=b.offsetTop+We,Ae=R+V+ie,Ue=L-Ae;if(Ae<=le){const De=M.length>0&&b===M[M.length-1].ref.current;l.style.bottom="0px";const Le=u.clientHeight-g.offsetTop-g.offsetHeight,Jt=Math.max(Ke,We+(De?je:0)+Le+U),Er=Ae+Jt;l.style.height=Er+"px"}else{const De=M.length>0&&b===M[0].ref.current;l.style.top="0px";const Jt=Math.max(le,R+g.offsetTop+(De?G:0)+We)+Ue;l.style.height=Jt+"px",g.scrollTop=Ae-le+g.offsetTop}l.style.margin=`${an}px 0`,l.style.minHeight=K+"px",l.style.maxHeight=F+"px",n==null||n(),requestAnimationFrame(()=>v.current=!0)}},[h,i.trigger,i.valueNode,l,u,g,b,w,i.dir,n]);ur(()=>x(),[x]);const[_,S]=y.useState();ur(()=>{u&&S(window.getComputedStyle(u).zIndex)},[u]);const j=y.useCallback(k=>{k&&p.current===!0&&(x(),m==null||m(),p.current=!1)},[x,m]);return o.jsx(E8,{scope:r,contentWrapper:l,shouldExpandOnScrollRef:v,onScrollButtonChange:j,children:o.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:_},children:o.jsx(Ne.div,{...s,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});uT.displayName=N8;var C8="SelectPopperPosition",mg=y.forwardRef((t,e)=>{const{__scopeSelect:r,align:n="start",collisionPadding:s=an,...i}=t,a=uh(r);return o.jsx(Yy,{...a,...i,ref:e,align:n,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});mg.displayName=C8;var[E8,mv]=dl(ha,{}),pg="SelectViewport",dT=y.forwardRef((t,e)=>{const{__scopeSelect:r,nonce:n,...s}=t,i=Ci(pg,r),a=mv(pg,r),l=$e(e,i.onViewportChange),c=y.useRef(0);return o.jsxs(o.Fragment,{children:[o.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),o.jsx(lh.Slot,{scope:r,children:o.jsx(Ne.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:se(s.onScroll,u=>{const d=u.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:h}=a;if(h!=null&&h.current&&f){const v=Math.abs(c.current-d.scrollTop);if(v>0){const p=window.innerHeight-an*2,g=parseFloat(f.style.minHeight),b=parseFloat(f.style.height),w=Math.max(g,b);if(w<p){const m=w+v,x=Math.min(p,m),_=m-x;f.style.height=x+"px",f.style.bottom==="0px"&&(d.scrollTop=_>0?_:0,f.style.justifyContent="flex-end")}}}c.current=d.scrollTop})})})]})});dT.displayName=pg;var fT="SelectGroup",[P8,T8]=dl(fT),A8=y.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t,s=qn();return o.jsx(P8,{scope:r,id:s,children:o.jsx(Ne.div,{role:"group","aria-labelledby":s,...n,ref:e})})});A8.displayName=fT;var hT="SelectLabel",mT=y.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t,s=T8(hT,r);return o.jsx(Ne.div,{id:s.id,...n,ref:e})});mT.displayName=hT;var of="SelectItem",[O8,pT]=dl(of),gT=y.forwardRef((t,e)=>{const{__scopeSelect:r,value:n,disabled:s=!1,textValue:i,...a}=t,l=Ni(of,r),c=Ci(of,r),u=l.value===n,[d,f]=y.useState(i??""),[h,v]=y.useState(!1),p=$e(e,m=>{var x;return(x=c.itemRefCallback)==null?void 0:x.call(c,m,n,s)}),g=qn(),b=y.useRef("touch"),w=()=>{s||(l.onValueChange(n),l.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return o.jsx(O8,{scope:r,value:n,disabled:s,textId:g,isSelected:u,onItemTextChange:y.useCallback(m=>{f(x=>x||((m==null?void 0:m.textContent)??"").trim())},[]),children:o.jsx(lh.ItemSlot,{scope:r,value:n,disabled:s,textValue:d,children:o.jsx(Ne.div,{role:"option","aria-labelledby":g,"data-highlighted":h?"":void 0,"aria-selected":u&&h,"data-state":u?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...a,ref:p,onFocus:se(a.onFocus,()=>v(!0)),onBlur:se(a.onBlur,()=>v(!1)),onClick:se(a.onClick,()=>{b.current!=="mouse"&&w()}),onPointerUp:se(a.onPointerUp,()=>{b.current==="mouse"&&w()}),onPointerDown:se(a.onPointerDown,m=>{b.current=m.pointerType}),onPointerMove:se(a.onPointerMove,m=>{var x;b.current=m.pointerType,s?(x=c.onItemLeave)==null||x.call(c):b.current==="mouse"&&m.currentTarget.focus({preventScroll:!0})}),onPointerLeave:se(a.onPointerLeave,m=>{var x;m.currentTarget===document.activeElement&&((x=c.onItemLeave)==null||x.call(c))}),onKeyDown:se(a.onKeyDown,m=>{var _;((_=c.searchRef)==null?void 0:_.current)!==""&&m.key===" "||(y8.includes(m.key)&&w(),m.key===" "&&m.preventDefault())})})})})});gT.displayName=of;var Ml="SelectItemText",yT=y.forwardRef((t,e)=>{const{__scopeSelect:r,className:n,style:s,...i}=t,a=Ni(Ml,r),l=Ci(Ml,r),c=pT(Ml,r),u=b8(Ml,r),[d,f]=y.useState(null),h=$e(e,w=>f(w),c.onItemTextChange,w=>{var m;return(m=l.itemTextRefCallback)==null?void 0:m.call(l,w,c.value,c.disabled)}),v=d==null?void 0:d.textContent,p=y.useMemo(()=>o.jsx("option",{value:c.value,disabled:c.disabled,children:v},c.value),[c.disabled,c.value,v]),{onNativeOptionAdd:g,onNativeOptionRemove:b}=u;return ur(()=>(g(p),()=>b(p)),[g,b,p]),o.jsxs(o.Fragment,{children:[o.jsx(Ne.span,{id:c.textId,...i,ref:h}),c.isSelected&&a.valueNode&&!a.valueNodeHasChildren?tl.createPortal(i.children,a.valueNode):null]})});yT.displayName=Ml;var vT="SelectItemIndicator",xT=y.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t;return pT(vT,r).isSelected?o.jsx(Ne.span,{"aria-hidden":!0,...n,ref:e}):null});xT.displayName=vT;var gg="SelectScrollUpButton",wT=y.forwardRef((t,e)=>{const r=Ci(gg,t.__scopeSelect),n=mv(gg,t.__scopeSelect),[s,i]=y.useState(!1),a=$e(e,n.onScrollButtonChange);return ur(()=>{if(r.viewport&&r.isPositioned){let l=function(){const u=c.scrollTop>0;i(u)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),s?o.jsx(_T,{...t,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});wT.displayName=gg;var yg="SelectScrollDownButton",bT=y.forwardRef((t,e)=>{const r=Ci(yg,t.__scopeSelect),n=mv(yg,t.__scopeSelect),[s,i]=y.useState(!1),a=$e(e,n.onScrollButtonChange);return ur(()=>{if(r.viewport&&r.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,d=Math.ceil(c.scrollTop)<u;i(d)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),s?o.jsx(_T,{...t,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});bT.displayName=yg;var _T=y.forwardRef((t,e)=>{const{__scopeSelect:r,onAutoScroll:n,...s}=t,i=Ci("SelectScrollButton",r),a=y.useRef(null),l=ch(r),c=y.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return y.useEffect(()=>()=>c(),[c]),ur(()=>{var d;const u=l().find(f=>f.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[l]),o.jsx(Ne.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:se(s.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(n,50))}),onPointerMove:se(s.onPointerMove,()=>{var u;(u=i.onItemLeave)==null||u.call(i),a.current===null&&(a.current=window.setInterval(n,50))}),onPointerLeave:se(s.onPointerLeave,()=>{c()})})}),R8="SelectSeparator",ST=y.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t;return o.jsx(Ne.div,{"aria-hidden":!0,...n,ref:e})});ST.displayName=R8;var vg="SelectArrow",I8=y.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t,s=uh(r),i=Ni(vg,r),a=Ci(vg,r);return i.open&&a.position==="popper"?o.jsx(Jy,{...s,...n,ref:e}):null});I8.displayName=vg;function jT(t){return t===""||t===void 0}var kT=y.forwardRef((t,e)=>{const{value:r,...n}=t,s=y.useRef(null),i=$e(e,s),a=m8(r);return y.useEffect(()=>{const l=s.current,c=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(a!==r&&d){const f=new Event("change",{bubbles:!0});d.call(l,r),l.dispatchEvent(f)}},[a,r]),o.jsx(XP,{asChild:!0,children:o.jsx("select",{...n,ref:i,defaultValue:r})})});kT.displayName="BubbleSelect";function NT(t){const e=en(t),r=y.useRef(""),n=y.useRef(0),s=y.useCallback(a=>{const l=r.current+a;e(l),function c(u){r.current=u,window.clearTimeout(n.current),u!==""&&(n.current=window.setTimeout(()=>c(""),1e3))}(l)},[e]),i=y.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return y.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,s,i]}function CT(t,e,r){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,i=r?t.indexOf(r):-1;let a=D8(t,Math.max(i,0));s.length===1&&(a=a.filter(u=>u!==r));const c=a.find(u=>u.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==r?c:void 0}function D8(t,e){return t.map((r,n)=>t[(e+n)%t.length])}var M8=eT,ET=rT,L8=sT,F8=iT,$8=aT,PT=oT,U8=dT,TT=mT,AT=gT,B8=yT,z8=xT,OT=wT,RT=bT,IT=ST;const bw=M8,_w=L8,xg=y.forwardRef(({className:t,children:e,...r},n)=>o.jsxs(ET,{ref:n,className:fe("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...r,children:[e,o.jsx(F8,{asChild:!0,children:o.jsx(tu,{className:"h-4 w-4 opacity-50"})})]}));xg.displayName=ET.displayName;const DT=y.forwardRef(({className:t,...e},r)=>o.jsx(OT,{ref:r,className:fe("flex cursor-default items-center justify-center py-1",t),...e,children:o.jsx(yC,{className:"h-4 w-4"})}));DT.displayName=OT.displayName;const MT=y.forwardRef(({className:t,...e},r)=>o.jsx(RT,{ref:r,className:fe("flex cursor-default items-center justify-center py-1",t),...e,children:o.jsx(tu,{className:"h-4 w-4"})}));MT.displayName=RT.displayName;const wg=y.forwardRef(({className:t,children:e,position:r="popper",...n},s)=>o.jsx($8,{children:o.jsxs(PT,{ref:s,className:fe("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:r,...n,children:[o.jsx(DT,{}),o.jsx(U8,{className:fe("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),o.jsx(MT,{})]})}));wg.displayName=PT.displayName;const V8=y.forwardRef(({className:t,...e},r)=>o.jsx(TT,{ref:r,className:fe("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));V8.displayName=TT.displayName;const sn=y.forwardRef(({className:t,children:e,...r},n)=>o.jsxs(AT,{ref:n,className:fe("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...r,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(z8,{children:o.jsx(dn,{className:"h-4 w-4"})})}),o.jsx(B8,{children:e})]}));sn.displayName=AT.displayName;const W8=y.forwardRef(({className:t,...e},r)=>o.jsx(IT,{ref:r,className:fe("-mx-1 my-1 h-px bg-muted",t),...e}));W8.displayName=IT.displayName;var uu=t=>t.type==="checkbox",qi=t=>t instanceof Date,rr=t=>t==null;const LT=t=>typeof t=="object";var yt=t=>!rr(t)&&!Array.isArray(t)&&LT(t)&&!qi(t),FT=t=>yt(t)&&t.target?uu(t.target)?t.target.checked:t.target.value:t,q8=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,$T=(t,e)=>t.has(q8(e)),H8=t=>{const e=t.constructor&&t.constructor.prototype;return yt(e)&&e.hasOwnProperty("isPrototypeOf")},pv=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function It(t){let e;const r=Array.isArray(t),n=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(t instanceof Set)e=new Set(t);else if(!(pv&&(t instanceof Blob||n))&&(r||yt(t)))if(e=r?[]:{},!r&&!H8(t))e=t;else for(const s in t)t.hasOwnProperty(s)&&(e[s]=It(t[s]));else return t;return e}var dh=t=>Array.isArray(t)?t.filter(Boolean):[],mt=t=>t===void 0,Y=(t,e,r)=>{if(!e||!yt(t))return r;const n=dh(e.split(/[,[\].]+?/)).reduce((s,i)=>rr(s)?s:s[i],t);return mt(n)||n===t?mt(t[e])?r:t[e]:n},Or=t=>typeof t=="boolean",gv=t=>/^\w*$/.test(t),UT=t=>dh(t.replace(/["|']|\]/g,"").split(/\.|\[/)),Be=(t,e,r)=>{let n=-1;const s=gv(e)?[e]:UT(e),i=s.length,a=i-1;for(;++n<i;){const l=s[n];let c=r;if(n!==a){const u=t[l];c=yt(u)||Array.isArray(u)?u:isNaN(+s[n+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;t[l]=c,t=t[l]}};const lf={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},mn={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},ns={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},BT=ge.createContext(null),fh=()=>ge.useContext(BT),K8=t=>{const{children:e,...r}=t;return ge.createElement(BT.Provider,{value:r},e)};var zT=(t,e,r,n=!0)=>{const s={defaultValues:e._defaultValues};for(const i in t)Object.defineProperty(s,i,{get:()=>{const a=i;return e._proxyFormState[a]!==mn.all&&(e._proxyFormState[a]=!n||mn.all),r&&(r[a]=!0),t[a]}});return s};function G8(t){const e=fh(),{control:r=e.control,disabled:n,name:s,exact:i}=t||{},[a,l]=ge.useState(r._formState),c=ge.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),u=ge.useRef(s);return u.current=s,ge.useEffect(()=>r._subscribe({name:u.current,formState:c.current,exact:i,callback:d=>{!n&&l({...r._formState,...d})}}),[r,n,i]),ge.useEffect(()=>{c.current.isValid&&r._setValid(!0)},[r]),ge.useMemo(()=>zT(a,r,c.current,!1),[a,r])}var Bn=t=>typeof t=="string",VT=(t,e,r,n,s)=>Bn(t)?(n&&e.watch.add(t),Y(r,t,s)):Array.isArray(t)?t.map(i=>(n&&e.watch.add(i),Y(r,i))):(n&&(e.watchAll=!0),r);function Q8(t){const e=fh(),{control:r=e.control,name:n,defaultValue:s,disabled:i,exact:a}=t||{},l=ge.useRef(n),c=ge.useRef(s);l.current=n,ge.useEffect(()=>r._subscribe({name:l.current,formState:{values:!0},exact:a,callback:f=>!i&&d(VT(l.current,r._names,f.values||r._formValues,!1,c.current))}),[r,i,a]);const[u,d]=ge.useState(r._getWatch(n,s));return ge.useEffect(()=>r._removeUnmounted()),u}function Y8(t){const e=fh(),{name:r,disabled:n,control:s=e.control,shouldUnregister:i}=t,a=$T(s._names.array,r),l=Q8({control:s,name:r,defaultValue:Y(s._formValues,r,Y(s._defaultValues,r,t.defaultValue)),exact:!0}),c=G8({control:s,name:r,exact:!0}),u=ge.useRef(t),d=ge.useRef(s.register(r,{...t.rules,value:l,...Or(t.disabled)?{disabled:t.disabled}:{}})),f=ge.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!Y(c.errors,r)},isDirty:{enumerable:!0,get:()=>!!Y(c.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!Y(c.touchedFields,r)},isValidating:{enumerable:!0,get:()=>!!Y(c.validatingFields,r)},error:{enumerable:!0,get:()=>Y(c.errors,r)}}),[c,r]),h=ge.useCallback(b=>d.current.onChange({target:{value:FT(b),name:r},type:lf.CHANGE}),[r]),v=ge.useCallback(()=>d.current.onBlur({target:{value:Y(s._formValues,r),name:r},type:lf.BLUR}),[r,s._formValues]),p=ge.useCallback(b=>{const w=Y(s._fields,r);w&&b&&(w._f.ref={focus:()=>b.focus(),select:()=>b.select(),setCustomValidity:m=>b.setCustomValidity(m),reportValidity:()=>b.reportValidity()})},[s._fields,r]),g=ge.useMemo(()=>({name:r,value:l,...Or(n)||c.disabled?{disabled:c.disabled||n}:{},onChange:h,onBlur:v,ref:p}),[r,n,c.disabled,h,v,p,l]);return ge.useEffect(()=>{const b=s._options.shouldUnregister||i;s.register(r,{...u.current.rules,...Or(u.current.disabled)?{disabled:u.current.disabled}:{}});const w=(m,x)=>{const _=Y(s._fields,m);_&&_._f&&(_._f.mount=x)};if(w(r,!0),b){const m=It(Y(s._options.defaultValues,r));Be(s._defaultValues,r,m),mt(Y(s._formValues,r))&&Be(s._formValues,r,m)}return!a&&s.register(r),()=>{(a?b&&!s._state.action:b)?s.unregister(r):w(r,!1)}},[r,s,a,i]),ge.useEffect(()=>{s._setDisabledField({disabled:n,name:r})},[n,r,s]),ge.useMemo(()=>({field:g,formState:c,fieldState:f}),[g,c,f])}const J8=t=>t.render(Y8(t));var WT=(t,e,r,n,s)=>e?{...r[t],types:{...r[t]&&r[t].types?r[t].types:{},[n]:s||!0}}:{},Jl=t=>Array.isArray(t)?t:[t],Sw=()=>{let t=[];return{get observers(){return t},next:s=>{for(const i of t)i.next&&i.next(s)},subscribe:s=>(t.push(s),{unsubscribe:()=>{t=t.filter(i=>i!==s)}}),unsubscribe:()=>{t=[]}}},bg=t=>rr(t)||!LT(t);function qs(t,e){if(bg(t)||bg(e))return t===e;if(qi(t)&&qi(e))return t.getTime()===e.getTime();const r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(const s of r){const i=t[s];if(!n.includes(s))return!1;if(s!=="ref"){const a=e[s];if(qi(i)&&qi(a)||yt(i)&&yt(a)||Array.isArray(i)&&Array.isArray(a)?!qs(i,a):i!==a)return!1}}return!0}var er=t=>yt(t)&&!Object.keys(t).length,yv=t=>t.type==="file",pn=t=>typeof t=="function",cf=t=>{if(!pv)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},qT=t=>t.type==="select-multiple",vv=t=>t.type==="radio",Z8=t=>vv(t)||uu(t),xm=t=>cf(t)&&t.isConnected;function X8(t,e){const r=e.slice(0,-1).length;let n=0;for(;n<r;)t=mt(t)?n++:t[e[n++]];return t}function eB(t){for(const e in t)if(t.hasOwnProperty(e)&&!mt(t[e]))return!1;return!0}function Nt(t,e){const r=Array.isArray(e)?e:gv(e)?[e]:UT(e),n=r.length===1?t:X8(t,r),s=r.length-1,i=r[s];return n&&delete n[i],s!==0&&(yt(n)&&er(n)||Array.isArray(n)&&eB(n))&&Nt(t,r.slice(0,-1)),t}var HT=t=>{for(const e in t)if(pn(t[e]))return!0;return!1};function uf(t,e={}){const r=Array.isArray(t);if(yt(t)||r)for(const n in t)Array.isArray(t[n])||yt(t[n])&&!HT(t[n])?(e[n]=Array.isArray(t[n])?[]:{},uf(t[n],e[n])):rr(t[n])||(e[n]=!0);return e}function KT(t,e,r){const n=Array.isArray(t);if(yt(t)||n)for(const s in t)Array.isArray(t[s])||yt(t[s])&&!HT(t[s])?mt(e)||bg(r[s])?r[s]=Array.isArray(t[s])?uf(t[s],[]):{...uf(t[s])}:KT(t[s],rr(e)?{}:e[s],r[s]):r[s]=!qs(t[s],e[s]);return r}var jl=(t,e)=>KT(t,e,uf(e));const jw={value:!1,isValid:!1},kw={value:!0,isValid:!0};var GT=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!mt(t[0].attributes.value)?mt(t[0].value)||t[0].value===""?kw:{value:t[0].value,isValid:!0}:kw:jw}return jw},QT=(t,{valueAsNumber:e,valueAsDate:r,setValueAs:n})=>mt(t)?t:e?t===""?NaN:t&&+t:r&&Bn(t)?new Date(t):n?n(t):t;const Nw={isValid:!1,value:null};var YT=t=>Array.isArray(t)?t.reduce((e,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:e,Nw):Nw;function Cw(t){const e=t.ref;return yv(e)?e.files:vv(e)?YT(t.refs).value:qT(e)?[...e.selectedOptions].map(({value:r})=>r):uu(e)?GT(t.refs).value:QT(mt(e.value)?t.ref.value:e.value,t)}var tB=(t,e,r,n)=>{const s={};for(const i of t){const a=Y(e,i);a&&Be(s,i,a._f)}return{criteriaMode:r,names:[...t],fields:s,shouldUseNativeValidation:n}},df=t=>t instanceof RegExp,kl=t=>mt(t)?t:df(t)?t.source:yt(t)?df(t.value)?t.value.source:t.value:t,Ew=t=>({isOnSubmit:!t||t===mn.onSubmit,isOnBlur:t===mn.onBlur,isOnChange:t===mn.onChange,isOnAll:t===mn.all,isOnTouch:t===mn.onTouched});const Pw="AsyncFunction";var rB=t=>!!t&&!!t.validate&&!!(pn(t.validate)&&t.validate.constructor.name===Pw||yt(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===Pw)),nB=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),Tw=(t,e,r)=>!r&&(e.watchAll||e.watch.has(t)||[...e.watch].some(n=>t.startsWith(n)&&/^\.\w+/.test(t.slice(n.length))));const Zl=(t,e,r,n)=>{for(const s of r||Object.keys(t)){const i=Y(t,s);if(i){const{_f:a,...l}=i;if(a){if(a.refs&&a.refs[0]&&e(a.refs[0],s)&&!n)return!0;if(a.ref&&e(a.ref,a.name)&&!n)return!0;if(Zl(l,e))break}else if(yt(l)&&Zl(l,e))break}}};function Aw(t,e,r){const n=Y(t,r);if(n||gv(r))return{error:n,name:r};const s=r.split(".");for(;s.length;){const i=s.join("."),a=Y(e,i),l=Y(t,i);if(a&&!Array.isArray(a)&&r!==i)return{name:r};if(l&&l.type)return{name:i,error:l};s.pop()}return{name:r}}var sB=(t,e,r,n)=>{r(t);const{name:s,...i}=t;return er(i)||Object.keys(i).length>=Object.keys(e).length||Object.keys(i).find(a=>e[a]===(!n||mn.all))},iB=(t,e,r)=>!t||!e||t===e||Jl(t).some(n=>n&&(r?n===e:n.startsWith(e)||e.startsWith(n))),aB=(t,e,r,n,s)=>s.isOnAll?!1:!r&&s.isOnTouch?!(e||t):(r?n.isOnBlur:s.isOnBlur)?!t:(r?n.isOnChange:s.isOnChange)?t:!0,oB=(t,e)=>!dh(Y(t,e)).length&&Nt(t,e),lB=(t,e,r)=>{const n=Jl(Y(t,r));return Be(n,"root",e[r]),Be(t,r,n),t},md=t=>Bn(t);function Ow(t,e,r="validate"){if(md(t)||Array.isArray(t)&&t.every(md)||Or(t)&&!t)return{type:r,message:md(t)?t:"",ref:e}}var Da=t=>yt(t)&&!df(t)?t:{value:t,message:""},Rw=async(t,e,r,n,s,i)=>{const{ref:a,refs:l,required:c,maxLength:u,minLength:d,min:f,max:h,pattern:v,validate:p,name:g,valueAsNumber:b,mount:w}=t._f,m=Y(r,g);if(!w||e.has(g))return{};const x=l?l[0]:a,_=F=>{s&&x.reportValidity&&(x.setCustomValidity(Or(F)?"":F||""),x.reportValidity())},S={},j=vv(a),k=uu(a),N=j||k,A=(b||yv(a))&&mt(a.value)&&mt(m)||cf(a)&&a.value===""||m===""||Array.isArray(m)&&!m.length,I=WT.bind(null,g,n,S),M=(F,O,z,R=ns.maxLength,V=ns.minLength)=>{const U=F?O:z;S[g]={type:F?R:V,message:U,ref:a,...I(F?R:V,U)}};if(i?!Array.isArray(m)||!m.length:c&&(!N&&(A||rr(m))||Or(m)&&!m||k&&!GT(l).isValid||j&&!YT(l).isValid)){const{value:F,message:O}=md(c)?{value:!!c,message:c}:Da(c);if(F&&(S[g]={type:ns.required,message:O,ref:x,...I(ns.required,O)},!n))return _(O),S}if(!A&&(!rr(f)||!rr(h))){let F,O;const z=Da(h),R=Da(f);if(!rr(m)&&!isNaN(m)){const V=a.valueAsNumber||m&&+m;rr(z.value)||(F=V>z.value),rr(R.value)||(O=V<R.value)}else{const V=a.valueAsDate||new Date(m),U=K=>new Date(new Date().toDateString()+" "+K),P=a.type=="time",L=a.type=="week";Bn(z.value)&&m&&(F=P?U(m)>U(z.value):L?m>z.value:V>new Date(z.value)),Bn(R.value)&&m&&(O=P?U(m)<U(R.value):L?m<R.value:V<new Date(R.value))}if((F||O)&&(M(!!F,z.message,R.message,ns.max,ns.min),!n))return _(S[g].message),S}if((u||d)&&!A&&(Bn(m)||i&&Array.isArray(m))){const F=Da(u),O=Da(d),z=!rr(F.value)&&m.length>+F.value,R=!rr(O.value)&&m.length<+O.value;if((z||R)&&(M(z,F.message,O.message),!n))return _(S[g].message),S}if(v&&!A&&Bn(m)){const{value:F,message:O}=Da(v);if(df(F)&&!m.match(F)&&(S[g]={type:ns.pattern,message:O,ref:a,...I(ns.pattern,O)},!n))return _(O),S}if(p){if(pn(p)){const F=await p(m,r),O=Ow(F,x);if(O&&(S[g]={...O,...I(ns.validate,O.message)},!n))return _(O.message),S}else if(yt(p)){let F={};for(const O in p){if(!er(F)&&!n)break;const z=Ow(await p[O](m,r),x,O);z&&(F={...z,...I(O,z.message)},_(z.message),n&&(S[g]=F))}if(!er(F)&&(S[g]={ref:x,...F},!n))return S}}return _(!0),S};const cB={mode:mn.onSubmit,reValidateMode:mn.onChange,shouldFocusError:!0};function uB(t={}){let e={...cB,...t},r={submitCount:0,isDirty:!1,isLoading:pn(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1};const n={};let s=yt(e.defaultValues)||yt(e.values)?It(e.values||e.defaultValues)||{}:{},i=e.shouldUnregister?{}:It(s),a={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,u=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let f={...d};const h={array:Sw(),state:Sw()},v=Ew(e.mode),p=Ew(e.reValidateMode),g=e.criteriaMode===mn.all,b=C=>D=>{clearTimeout(u),u=setTimeout(C,D)},w=async C=>{if(!e.disabled&&(d.isValid||f.isValid||C)){const D=e.resolver?er((await A()).errors):await M(n,!0);D!==r.isValid&&h.state.next({isValid:D})}},m=(C,D)=>{!e.disabled&&(d.isValidating||d.validatingFields||f.isValidating||f.validatingFields)&&((C||Array.from(l.mount)).forEach($=>{$&&(D?Be(r.validatingFields,$,D):Nt(r.validatingFields,$))}),h.state.next({validatingFields:r.validatingFields,isValidating:!er(r.validatingFields)}))},x=(C,D=[],$,ee,Q=!0,H=!0)=>{if(ee&&$&&!e.disabled){if(a.action=!0,H&&Array.isArray(Y(n,C))){const ne=$(Y(n,C),ee.argA,ee.argB);Q&&Be(n,C,ne)}if(H&&Array.isArray(Y(r.errors,C))){const ne=$(Y(r.errors,C),ee.argA,ee.argB);Q&&Be(r.errors,C,ne),oB(r.errors,C)}if((d.touchedFields||f.touchedFields)&&H&&Array.isArray(Y(r.touchedFields,C))){const ne=$(Y(r.touchedFields,C),ee.argA,ee.argB);Q&&Be(r.touchedFields,C,ne)}(d.dirtyFields||f.dirtyFields)&&(r.dirtyFields=jl(s,i)),h.state.next({name:C,isDirty:O(C,D),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else Be(i,C,D)},_=(C,D)=>{Be(r.errors,C,D),h.state.next({errors:r.errors})},S=C=>{r.errors=C,h.state.next({errors:r.errors,isValid:!1})},j=(C,D,$,ee)=>{const Q=Y(n,C);if(Q){const H=Y(i,C,mt($)?Y(s,C):$);mt(H)||ee&&ee.defaultChecked||D?Be(i,C,D?H:Cw(Q._f)):V(C,H),a.mount&&w()}},k=(C,D,$,ee,Q)=>{let H=!1,ne=!1;const Me={name:C};if(!e.disabled){if(!$||ee){(d.isDirty||f.isDirty)&&(ne=r.isDirty,r.isDirty=Me.isDirty=O(),H=ne!==Me.isDirty);const vt=qs(Y(s,C),D);ne=!!Y(r.dirtyFields,C),vt?Nt(r.dirtyFields,C):Be(r.dirtyFields,C,!0),Me.dirtyFields=r.dirtyFields,H=H||(d.dirtyFields||f.dirtyFields)&&ne!==!vt}if($){const vt=Y(r.touchedFields,C);vt||(Be(r.touchedFields,C,$),Me.touchedFields=r.touchedFields,H=H||(d.touchedFields||f.touchedFields)&&vt!==$)}H&&Q&&h.state.next(Me)}return H?Me:{}},N=(C,D,$,ee)=>{const Q=Y(r.errors,C),H=(d.isValid||f.isValid)&&Or(D)&&r.isValid!==D;if(e.delayError&&$?(c=b(()=>_(C,$)),c(e.delayError)):(clearTimeout(u),c=null,$?Be(r.errors,C,$):Nt(r.errors,C)),($?!qs(Q,$):Q)||!er(ee)||H){const ne={...ee,...H&&Or(D)?{isValid:D}:{},errors:r.errors,name:C};r={...r,...ne},h.state.next(ne)}},A=async C=>{m(C,!0);const D=await e.resolver(i,e.context,tB(C||l.mount,n,e.criteriaMode,e.shouldUseNativeValidation));return m(C),D},I=async C=>{const{errors:D}=await A(C);if(C)for(const $ of C){const ee=Y(D,$);ee?Be(r.errors,$,ee):Nt(r.errors,$)}else r.errors=D;return D},M=async(C,D,$={valid:!0})=>{for(const ee in C){const Q=C[ee];if(Q){const{_f:H,...ne}=Q;if(H){const Me=l.array.has(H.name),vt=Q._f&&rB(Q._f);vt&&d.validatingFields&&m([ee],!0);const Bt=await Rw(Q,l.disabled,i,g,e.shouldUseNativeValidation&&!D,Me);if(vt&&d.validatingFields&&m([ee]),Bt[H.name]&&($.valid=!1,D))break;!D&&(Y(Bt,H.name)?Me?lB(r.errors,Bt,H.name):Be(r.errors,H.name,Bt[H.name]):Nt(r.errors,H.name))}!er(ne)&&await M(ne,D,$)}}return $.valid},F=()=>{for(const C of l.unMount){const D=Y(n,C);D&&(D._f.refs?D._f.refs.every($=>!xm($)):!xm(D._f.ref))&&Ue(C)}l.unMount=new Set},O=(C,D)=>!e.disabled&&(C&&D&&Be(i,C,D),!qs(G(),s)),z=(C,D,$)=>VT(C,l,{...a.mount?i:mt(D)?s:Bn(C)?{[C]:D}:D},$,D),R=C=>dh(Y(a.mount?i:s,C,e.shouldUnregister?Y(s,C,[]):[])),V=(C,D,$={})=>{const ee=Y(n,C);let Q=D;if(ee){const H=ee._f;H&&(!H.disabled&&Be(i,C,QT(D,H)),Q=cf(H.ref)&&rr(D)?"":D,qT(H.ref)?[...H.ref.options].forEach(ne=>ne.selected=Q.includes(ne.value)):H.refs?uu(H.ref)?H.refs.length>1?H.refs.forEach(ne=>(!ne.defaultChecked||!ne.disabled)&&(ne.checked=Array.isArray(Q)?!!Q.find(Me=>Me===ne.value):Q===ne.value)):H.refs[0]&&(H.refs[0].checked=!!Q):H.refs.forEach(ne=>ne.checked=ne.value===Q):yv(H.ref)?H.ref.value="":(H.ref.value=Q,H.ref.type||h.state.next({name:C,values:It(i)})))}($.shouldDirty||$.shouldTouch)&&k(C,Q,$.shouldTouch,$.shouldDirty,!0),$.shouldValidate&&re(C)},U=(C,D,$)=>{for(const ee in D){const Q=D[ee],H=`${C}.${ee}`,ne=Y(n,H);(l.array.has(C)||yt(Q)||ne&&!ne._f)&&!qi(Q)?U(H,Q,$):V(H,Q,$)}},P=(C,D,$={})=>{const ee=Y(n,C),Q=l.array.has(C),H=It(D);Be(i,C,H),Q?(h.array.next({name:C,values:It(i)}),(d.isDirty||d.dirtyFields||f.isDirty||f.dirtyFields)&&$.shouldDirty&&h.state.next({name:C,dirtyFields:jl(s,i),isDirty:O(C,H)})):ee&&!ee._f&&!rr(H)?U(C,H,$):V(C,H,$),Tw(C,l)&&h.state.next({...r}),h.state.next({name:a.mount?C:void 0,values:It(i)})},L=async C=>{a.mount=!0;const D=C.target;let $=D.name,ee=!0;const Q=Y(n,$),H=ne=>{ee=Number.isNaN(ne)||qi(ne)&&isNaN(ne.getTime())||qs(ne,Y(i,$,ne))};if(Q){let ne,Me;const vt=D.type?Cw(Q._f):FT(C),Bt=C.type===lf.BLUR||C.type===lf.FOCUS_OUT,RO=!nB(Q._f)&&!e.resolver&&!Y(r.errors,$)&&!Q._f.deps||aB(Bt,Y(r.touchedFields,$),r.isSubmitted,p,v),vh=Tw($,l,Bt);Be(i,$,vt),Bt?(Q._f.onBlur&&Q._f.onBlur(C),c&&c(0)):Q._f.onChange&&Q._f.onChange(C);const xh=k($,vt,Bt),IO=!er(xh)||vh;if(!Bt&&h.state.next({name:$,type:C.type,values:It(i)}),RO)return(d.isValid||f.isValid)&&(e.mode==="onBlur"?Bt&&w():Bt||w()),IO&&h.state.next({name:$,...vh?{}:xh});if(!Bt&&vh&&h.state.next({...r}),e.resolver){const{errors:zv}=await A([$]);if(H(vt),ee){const DO=Aw(r.errors,n,$),Vv=Aw(zv,n,DO.name||$);ne=Vv.error,$=Vv.name,Me=er(zv)}}else m([$],!0),ne=(await Rw(Q,l.disabled,i,g,e.shouldUseNativeValidation))[$],m([$]),H(vt),ee&&(ne?Me=!1:(d.isValid||f.isValid)&&(Me=await M(n,!0)));ee&&(Q._f.deps&&re(Q._f.deps),N($,Me,ne,xh))}},K=(C,D)=>{if(Y(r.errors,D)&&C.focus)return C.focus(),1},re=async(C,D={})=>{let $,ee;const Q=Jl(C);if(e.resolver){const H=await I(mt(C)?C:Q);$=er(H),ee=C?!Q.some(ne=>Y(H,ne)):$}else C?(ee=(await Promise.all(Q.map(async H=>{const ne=Y(n,H);return await M(ne&&ne._f?{[H]:ne}:ne)}))).every(Boolean),!(!ee&&!r.isValid)&&w()):ee=$=await M(n);return h.state.next({...!Bn(C)||(d.isValid||f.isValid)&&$!==r.isValid?{}:{name:C},...e.resolver||!C?{isValid:$}:{},errors:r.errors}),D.shouldFocus&&!ee&&Zl(n,K,C?Q:l.mount),ee},G=C=>{const D={...a.mount?i:s};return mt(C)?D:Bn(C)?Y(D,C):C.map($=>Y(D,$))},je=(C,D)=>({invalid:!!Y((D||r).errors,C),isDirty:!!Y((D||r).dirtyFields,C),error:Y((D||r).errors,C),isValidating:!!Y(r.validatingFields,C),isTouched:!!Y((D||r).touchedFields,C)}),le=C=>{C&&Jl(C).forEach(D=>Nt(r.errors,D)),h.state.next({errors:C?r.errors:{}})},Ke=(C,D,$)=>{const ee=(Y(n,C,{_f:{}})._f||{}).ref,Q=Y(r.errors,C)||{},{ref:H,message:ne,type:Me,...vt}=Q;Be(r.errors,C,{...vt,...D,ref:ee}),h.state.next({name:C,errors:r.errors,isValid:!1}),$&&$.shouldFocus&&ee&&ee.focus&&ee.focus()},We=(C,D)=>pn(C)?h.state.subscribe({next:$=>C(z(void 0,D),$)}):z(C,D,!0),ie=C=>h.state.subscribe({next:D=>{iB(C.name,D.name,C.exact)&&sB(D,C.formState||d,ja,C.reRenderRoot)&&C.callback({values:{...i},...r,...D})}}).unsubscribe,Ae=C=>(a.mount=!0,f={...f,...C.formState},ie({...C,formState:f})),Ue=(C,D={})=>{for(const $ of C?Jl(C):l.mount)l.mount.delete($),l.array.delete($),D.keepValue||(Nt(n,$),Nt(i,$)),!D.keepError&&Nt(r.errors,$),!D.keepDirty&&Nt(r.dirtyFields,$),!D.keepTouched&&Nt(r.touchedFields,$),!D.keepIsValidating&&Nt(r.validatingFields,$),!e.shouldUnregister&&!D.keepDefaultValue&&Nt(s,$);h.state.next({values:It(i)}),h.state.next({...r,...D.keepDirty?{isDirty:O()}:{}}),!D.keepIsValid&&w()},Ie=({disabled:C,name:D})=>{(Or(C)&&a.mount||C||l.disabled.has(D))&&(C?l.disabled.add(D):l.disabled.delete(D))},De=(C,D={})=>{let $=Y(n,C);const ee=Or(D.disabled)||Or(e.disabled);return Be(n,C,{...$||{},_f:{...$&&$._f?$._f:{ref:{name:C}},name:C,mount:!0,...D}}),l.mount.add(C),$?Ie({disabled:Or(D.disabled)?D.disabled:e.disabled,name:C}):j(C,!0,D.value),{...ee?{disabled:D.disabled||e.disabled}:{},...e.progressive?{required:!!D.required,min:kl(D.min),max:kl(D.max),minLength:kl(D.minLength),maxLength:kl(D.maxLength),pattern:kl(D.pattern)}:{},name:C,onChange:L,onBlur:L,ref:Q=>{if(Q){De(C,D),$=Y(n,C);const H=mt(Q.value)&&Q.querySelectorAll&&Q.querySelectorAll("input,select,textarea")[0]||Q,ne=Z8(H),Me=$._f.refs||[];if(ne?Me.find(vt=>vt===H):H===$._f.ref)return;Be(n,C,{_f:{...$._f,...ne?{refs:[...Me.filter(xm),H,...Array.isArray(Y(s,C))?[{}]:[]],ref:{type:H.type,name:C}}:{ref:H}}}),j(C,!1,void 0,H)}else $=Y(n,C,{}),$._f&&($._f.mount=!1),(e.shouldUnregister||D.shouldUnregister)&&!($T(l.array,C)&&a.action)&&l.unMount.add(C)}}},Le=()=>e.shouldFocusError&&Zl(n,K,l.mount),Jt=C=>{Or(C)&&(h.state.next({disabled:C}),Zl(n,(D,$)=>{const ee=Y(n,$);ee&&(D.disabled=ee._f.disabled||C,Array.isArray(ee._f.refs)&&ee._f.refs.forEach(Q=>{Q.disabled=ee._f.disabled||C}))},0,!1))},Er=(C,D)=>async $=>{let ee;$&&($.preventDefault&&$.preventDefault(),$.persist&&$.persist());let Q=It(i);if(h.state.next({isSubmitting:!0}),e.resolver){const{errors:H,values:ne}=await A();r.errors=H,Q=ne}else await M(n);if(l.disabled.size)for(const H of l.disabled)Be(Q,H,void 0);if(Nt(r.errors,"root"),er(r.errors)){h.state.next({errors:{}});try{await C(Q,$)}catch(H){ee=H}}else D&&await D({...r.errors},$),Le(),setTimeout(Le);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:er(r.errors)&&!ee,submitCount:r.submitCount+1,errors:r.errors}),ee)throw ee},Pi=(C,D={})=>{Y(n,C)&&(mt(D.defaultValue)?P(C,It(Y(s,C))):(P(C,D.defaultValue),Be(s,C,It(D.defaultValue))),D.keepTouched||Nt(r.touchedFields,C),D.keepDirty||(Nt(r.dirtyFields,C),r.isDirty=D.defaultValue?O(C,It(Y(s,C))):O()),D.keepError||(Nt(r.errors,C),d.isValid&&w()),h.state.next({...r}))},Ps=(C,D={})=>{const $=C?It(C):s,ee=It($),Q=er(C),H=Q?s:ee;if(D.keepDefaultValues||(s=$),!D.keepValues){if(D.keepDirtyValues){const ne=new Set([...l.mount,...Object.keys(jl(s,i))]);for(const Me of Array.from(ne))Y(r.dirtyFields,Me)?Be(H,Me,Y(i,Me)):P(Me,Y(H,Me))}else{if(pv&&mt(C))for(const ne of l.mount){const Me=Y(n,ne);if(Me&&Me._f){const vt=Array.isArray(Me._f.refs)?Me._f.refs[0]:Me._f.ref;if(cf(vt)){const Bt=vt.closest("form");if(Bt){Bt.reset();break}}}}for(const ne of l.mount)P(ne,Y(H,ne))}i=It(H),h.array.next({values:{...H}}),h.state.next({values:{...H}})}l={mount:D.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},a.mount=!d.isValid||!!D.keepIsValid||!!D.keepDirtyValues,a.watch=!!e.shouldUnregister,h.state.next({submitCount:D.keepSubmitCount?r.submitCount:0,isDirty:Q?!1:D.keepDirty?r.isDirty:!!(D.keepDefaultValues&&!qs(C,s)),isSubmitted:D.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:Q?{}:D.keepDirtyValues?D.keepDefaultValues&&i?jl(s,i):r.dirtyFields:D.keepDefaultValues&&C?jl(s,C):D.keepDirty?r.dirtyFields:{},touchedFields:D.keepTouched?r.touchedFields:{},errors:D.keepErrors?r.errors:{},isSubmitSuccessful:D.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1})},Ts=(C,D)=>Ps(pn(C)?C(i):C,D),yh=(C,D={})=>{const $=Y(n,C),ee=$&&$._f;if(ee){const Q=ee.refs?ee.refs[0]:ee.ref;Q.focus&&(Q.focus(),D.shouldSelect&&pn(Q.select)&&Q.select())}},ja=C=>{r={...r,...C}},Bv={control:{register:De,unregister:Ue,getFieldState:je,handleSubmit:Er,setError:Ke,_subscribe:ie,_runSchema:A,_getWatch:z,_getDirty:O,_setValid:w,_setFieldArray:x,_setDisabledField:Ie,_setErrors:S,_getFieldArray:R,_reset:Ps,_resetDefaultValues:()=>pn(e.defaultValues)&&e.defaultValues().then(C=>{Ts(C,e.resetOptions),h.state.next({isLoading:!1})}),_removeUnmounted:F,_disableForm:Jt,_subjects:h,_proxyFormState:d,get _fields(){return n},get _formValues(){return i},get _state(){return a},set _state(C){a=C},get _defaultValues(){return s},get _names(){return l},set _names(C){l=C},get _formState(){return r},get _options(){return e},set _options(C){e={...e,...C}}},subscribe:Ae,trigger:re,register:De,handleSubmit:Er,watch:We,setValue:P,getValues:G,reset:Ts,resetField:Pi,clearErrors:le,unregister:Ue,setError:Ke,setFocus:yh,getFieldState:je};return{...Bv,formControl:Bv}}function ff(t={}){const e=ge.useRef(void 0),r=ge.useRef(void 0),[n,s]=ge.useState({isDirty:!1,isValidating:!1,isLoading:pn(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,defaultValues:pn(t.defaultValues)?void 0:t.defaultValues});e.current||(e.current={...t.formControl?t.formControl:uB(t),formState:n},t.formControl&&t.defaultValues&&!pn(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions));const i=e.current.control;return i._options=t,ge.useLayoutEffect(()=>i._subscribe({formState:i._proxyFormState,callback:()=>s({...i._formState}),reRenderRoot:!0}),[i]),ge.useEffect(()=>i._disableForm(t.disabled),[i,t.disabled]),ge.useEffect(()=>{if(i._proxyFormState.isDirty){const a=i._getDirty();a!==n.isDirty&&i._subjects.state.next({isDirty:a})}},[i,n.isDirty]),ge.useEffect(()=>{t.values&&!qs(t.values,r.current)?(i._reset(t.values,i._options.resetOptions),r.current=t.values,s(a=>({...a}))):i._resetDefaultValues()},[t.values,i]),ge.useEffect(()=>{t.errors&&!er(t.errors)&&i._setErrors(t.errors)},[t.errors,i]),ge.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),ge.useEffect(()=>{t.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[t.shouldUnregister,i]),e.current.formState=zT(n,i),e.current}const Iw=(t,e,r)=>{if(t&&"reportValidity"in t){const n=Y(r,e);t.setCustomValidity(n&&n.message||""),t.reportValidity()}},JT=(t,e)=>{for(const r in e.fields){const n=e.fields[r];n&&n.ref&&"reportValidity"in n.ref?Iw(n.ref,r,t):n.refs&&n.refs.forEach(s=>Iw(s,r,t))}},dB=(t,e)=>{e.shouldUseNativeValidation&&JT(t,e);const r={};for(const n in t){const s=Y(e.fields,n),i=Object.assign(t[n]||{},{ref:s&&s.ref});if(fB(e.names||Object.keys(t),n)){const a=Object.assign({},Y(r,n));Be(a,"root",i),Be(r,n,a)}else Be(r,n,i)}return r},fB=(t,e)=>t.some(r=>r.startsWith(e+"."));var hB=function(t,e){for(var r={};t.length;){var n=t[0],s=n.code,i=n.message,a=n.path.join(".");if(!r[a])if("unionErrors"in n){var l=n.unionErrors[0].errors[0];r[a]={message:l.message,type:l.code}}else r[a]={message:i,type:s};if("unionErrors"in n&&n.unionErrors.forEach(function(d){return d.errors.forEach(function(f){return t.push(f)})}),e){var c=r[a].types,u=c&&c[n.code];r[a]=WT(a,e,r,s,u?[].concat(u,n.message):n.message)}t.shift()}return r},hf=function(t,e,r){return r===void 0&&(r={}),function(n,s,i){try{return Promise.resolve(function(a,l){try{var c=Promise.resolve(t[r.mode==="sync"?"parse":"parseAsync"](n,e)).then(function(u){return i.shouldUseNativeValidation&&JT({},i),{errors:{},values:r.raw?n:u}})}catch(u){return l(u)}return c&&c.then?c.then(void 0,l):c}(0,function(a){if(function(l){return Array.isArray(l==null?void 0:l.errors)}(a))return{values:{},errors:dB(hB(a.errors,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw a}))}catch(a){return Promise.reject(a)}}};const B=Symbol.for("drizzle:entityKind");function bt(t,e){if(!t||typeof t!="object")return!1;if(t instanceof e)return!0;if(!Object.prototype.hasOwnProperty.call(e,B))throw new Error(`Class "${e.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let r=Object.getPrototypeOf(t).constructor;if(r)for(;r;){if(B in r&&r[B]===e[B])return!0;r=Object.getPrototypeOf(r)}return!1}var fb;fb=B;class Ho{constructor(e,r){T(this,"name");T(this,"keyAsName");T(this,"primary");T(this,"notNull");T(this,"default");T(this,"defaultFn");T(this,"onUpdateFn");T(this,"hasDefault");T(this,"isUnique");T(this,"uniqueName");T(this,"uniqueType");T(this,"dataType");T(this,"columnType");T(this,"enumValues");T(this,"generated");T(this,"generatedIdentity");T(this,"config");this.table=e,this.config=r,this.name=r.name,this.keyAsName=r.keyAsName,this.notNull=r.notNull,this.default=r.default,this.defaultFn=r.defaultFn,this.onUpdateFn=r.onUpdateFn,this.hasDefault=r.hasDefault,this.primary=r.primaryKey,this.isUnique=r.isUnique,this.uniqueName=r.uniqueName,this.uniqueType=r.uniqueType,this.dataType=r.dataType,this.columnType=r.columnType,this.generated=r.generated,this.generatedIdentity=r.generatedIdentity}mapFromDriverValue(e){return e}mapToDriverValue(e){return e}shouldDisableInsert(){return this.config.generated!==void 0&&this.config.generated.type!=="byDefault"}}T(Ho,fb,"Column");var hb;hb=B;class ZT{constructor(e,r,n){T(this,"config");T(this,"$default",this.$defaultFn);T(this,"$onUpdate",this.$onUpdateFn);this.config={name:e,keyAsName:e==="",notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:r,columnType:n,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(e){return this.config.default=e,this.config.hasDefault=!0,this}$defaultFn(e){return this.config.defaultFn=e,this.config.hasDefault=!0,this}$onUpdateFn(e){return this.config.onUpdateFn=e,this.config.hasDefault=!0,this}primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(e){this.config.name===""&&(this.config.name=e)}}T(ZT,hb,"ColumnBuilder");const vo=Symbol.for("drizzle:Name");var mb;mb=B;class XT{constructor(e,r){T(this,"reference");T(this,"_onUpdate","no action");T(this,"_onDelete","no action");this.reference=()=>{const{name:n,columns:s,foreignColumns:i}=e();return{name:n,columns:s,foreignTable:i[0].table,foreignColumns:i}},r&&(this._onUpdate=r.onUpdate,this._onDelete=r.onDelete)}onUpdate(e){return this._onUpdate=e===void 0?"no action":e,this}onDelete(e){return this._onDelete=e===void 0?"no action":e,this}build(e){return new e2(e,this)}}T(XT,mb,"PgForeignKeyBuilder");var pb;pb=B;class e2{constructor(e,r){T(this,"reference");T(this,"onUpdate");T(this,"onDelete");this.table=e,this.reference=r.reference,this.onUpdate=r._onUpdate,this.onDelete=r._onDelete}getName(){const{name:e,columns:r,foreignColumns:n}=this.reference(),s=r.map(l=>l.name),i=n.map(l=>l.name),a=[this.table[vo],...s,n[0].table[vo],...i];return e??`${a.join("_")}_fk`}}T(e2,pb,"PgForeignKey");function mB(t,...e){return t(...e)}function pB(t,e){return`${t[vo]}_${e.join("_")}_unique`}function Dw(t,e,r){for(let n=e;n<t.length;n++){const s=t[n];if(s==="\\"){n++;continue}if(s==='"')return[t.slice(e,n).replace(/\\/g,""),n+1];if(!r&&(s===","||s==="}"))return[t.slice(e,n).replace(/\\/g,""),n]}return[t.slice(e).replace(/\\/g,""),t.length]}function t2(t,e=0){const r=[];let n=e,s=!1;for(;n<t.length;){const i=t[n];if(i===","){(s||n===e)&&r.push(""),s=!0,n++;continue}if(s=!1,i==="\\"){n+=2;continue}if(i==='"'){const[c,u]=Dw(t,n+1,!0);r.push(c),n=u;continue}if(i==="}")return[r,n+1];if(i==="{"){const[c,u]=t2(t,n+1);r.push(c),n=u;continue}const[a,l]=Dw(t,n,!1);r.push(a),n=l}return[r,n]}function gB(t){const[e]=t2(t,1);return e}function r2(t){return`{${t.map(e=>Array.isArray(e)?r2(e):typeof e=="string"?`"${e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:`${e}`).join(",")}}`}var gb,yb;class Te extends(yb=ZT,gb=B,yb){constructor(){super(...arguments);T(this,"foreignKeyConfigs",[])}array(r){return new s2(this.config.name,this,r)}references(r,n={}){return this.foreignKeyConfigs.push({ref:r,actions:n}),this}unique(r,n){return this.config.isUnique=!0,this.config.uniqueName=r,this.config.uniqueType=n==null?void 0:n.nulls,this}generatedAlwaysAs(r){return this.config.generated={as:r,type:"always",mode:"stored"},this}buildForeignKeys(r,n){return this.foreignKeyConfigs.map(({ref:s,actions:i})=>mB((a,l)=>{const c=new XT(()=>{const u=a();return{columns:[r],foreignColumns:[u]}});return l.onUpdate&&c.onUpdate(l.onUpdate),l.onDelete&&c.onDelete(l.onDelete),c.build(n)},s,i))}buildExtraConfigColumn(r){return new n2(r,this.config)}}T(Te,gb,"PgColumnBuilder");var vb,xb;class we extends(xb=Ho,vb=B,xb){constructor(e,r){r.uniqueName||(r.uniqueName=pB(e,[r.name])),super(e,r),this.table=e}}T(we,vb,"PgColumn");var wb,bb;class n2 extends(bb=we,wb=B,bb){constructor(){super(...arguments);T(this,"indexConfig",{order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass});T(this,"defaultConfig",{order:"asc",nulls:"last",opClass:void 0})}getSQLType(){return this.getSQLType()}asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(r){return this.indexConfig.opClass=r,this}}T(n2,wb,"ExtraConfigColumn");var _b;_b=B;class pd{constructor(e,r,n,s){T(this,"name");T(this,"keyAsName");T(this,"type");T(this,"indexConfig");this.name=e,this.keyAsName=r,this.type=n,this.indexConfig=s}}T(pd,_b,"IndexedColumn");var Sb,jb;class s2 extends(jb=Te,Sb=B,jb){constructor(e,r,n){super(e,"array","PgArray"),this.config.baseBuilder=r,this.config.size=n}build(e){const r=this.config.baseBuilder.build(e);return new _g(e,this.config,r)}}T(s2,Sb,"PgArrayBuilder");var kb,Nb;const Nf=class Nf extends(Nb=we,kb=B,Nb){constructor(r,n,s,i){super(r,n);T(this,"size");this.baseColumn=s,this.range=i,this.size=n.size}getSQLType(){return`${this.baseColumn.getSQLType()}[${typeof this.size=="number"?this.size:""}]`}mapFromDriverValue(r){return typeof r=="string"&&(r=gB(r)),r.map(n=>this.baseColumn.mapFromDriverValue(n))}mapToDriverValue(r,n=!1){const s=r.map(i=>i===null?null:bt(this.baseColumn,Nf)?this.baseColumn.mapToDriverValue(i,!0):this.baseColumn.mapToDriverValue(i));return n?s:r2(s)}};T(Nf,kb,"PgArray");let _g=Nf;const Mw=Symbol.for("drizzle:isPgEnum");function yB(t){return!!t&&typeof t=="function"&&Mw in t&&t[Mw]===!0}var Cb;Cb=B;class xv{constructor(e,r,n,s=!1){this._={brand:"Subquery",sql:e,selectedFields:r,alias:n,isWith:s}}}T(xv,Cb,"Subquery");const vB={startActiveSpan(t,e){return e()}},xo=Symbol.for("drizzle:ViewBaseConfig"),wm=Symbol.for("drizzle:Schema"),Lw=Symbol.for("drizzle:Columns"),Fw=Symbol.for("drizzle:ExtraConfigColumns"),bm=Symbol.for("drizzle:OriginalName"),_m=Symbol.for("drizzle:BaseName"),mf=Symbol.for("drizzle:IsAlias"),$w=Symbol.for("drizzle:ExtraConfigBuilder"),i2=Symbol.for("drizzle:IsDrizzleTable");var Eb,Pb,Tb,Ab,Ob,Rb,Ib,Db,Mb,Lb,Gu;let Ir=(Lb=B,Mb=vo,Db=bm,Ib=wm,Rb=Lw,Ob=Fw,Ab=_m,Tb=mf,Pb=i2,Eb=$w,Gu=class{constructor(e,r,n){T(this,Mb);T(this,Db);T(this,Ib);T(this,Rb);T(this,Ob);T(this,Ab);T(this,Tb,!1);T(this,Pb,!0);T(this,Eb);this[vo]=this[bm]=e,this[wm]=r,this[_m]=n}},T(Gu,Lb,"Table"),T(Gu,"Symbol",{Name:vo,Schema:wm,OriginalName:bm,Columns:Lw,ExtraConfigColumns:Fw,BaseName:_m,IsAlias:mf,ExtraConfigBuilder:$w}),Gu);function a2(t){return typeof t=="object"&&t!==null&&i2 in t}function xB(t){return t!=null&&typeof t.getSQL=="function"}function wB(t){var r;const e={sql:"",params:[]};for(const n of t)e.sql+=n.sql,e.params.push(...n.params),(r=n.typings)!=null&&r.length&&(e.typings||(e.typings=[]),e.typings.push(...n.typings));return e}var Fb;Fb=B;class qr{constructor(e){T(this,"value");this.value=Array.isArray(e)?e:[e]}getSQL(){return new ft([this])}}T(qr,Fb,"StringChunk");var $b;$b=B;const Fi=class Fi{constructor(e){T(this,"decoder",o2);T(this,"shouldInlineParams",!1);this.queryChunks=e}append(e){return this.queryChunks.push(...e.queryChunks),this}toQuery(e){return vB.startActiveSpan("drizzle.buildSQL",r=>{const n=this.buildQueryFromSourceParams(this.queryChunks,e);return r==null||r.setAttributes({"drizzle.query.text":n.sql,"drizzle.query.params":JSON.stringify(n.params)}),n})}buildQueryFromSourceParams(e,r){const n=Object.assign({},r,{inlineParams:r.inlineParams||this.shouldInlineParams,paramStartIndex:r.paramStartIndex||{value:0}}),{casing:s,escapeName:i,escapeParam:a,prepareTyping:l,inlineParams:c,paramStartIndex:u}=n;return wB(e.map(d=>{var f;if(bt(d,qr))return{sql:d.value.join(""),params:[]};if(bt(d,pf))return{sql:i(d.value),params:[]};if(d===void 0)return{sql:"",params:[]};if(Array.isArray(d)){const h=[new qr("(")];for(const[v,p]of d.entries())h.push(p),v<d.length-1&&h.push(new qr(", "));return h.push(new qr(")")),this.buildQueryFromSourceParams(h,n)}if(bt(d,Fi))return this.buildQueryFromSourceParams(d.queryChunks,{...n,inlineParams:c||d.shouldInlineParams});if(bt(d,Ir)){const h=d[Ir.Symbol.Schema],v=d[Ir.Symbol.Name];return{sql:h===void 0||d[mf]?i(v):i(h)+"."+i(v),params:[]}}if(bt(d,Ho)){const h=s.getColumnCasing(d);if(r.invokeSource==="indexes")return{sql:i(h),params:[]};const v=d.table[Ir.Symbol.Schema];return{sql:d.table[mf]||v===void 0?i(d.table[Ir.Symbol.Name])+"."+i(h):i(v)+"."+i(d.table[Ir.Symbol.Name])+"."+i(h),params:[]}}if(bt(d,u2)){const h=d[xo].schema,v=d[xo].name;return{sql:h===void 0||d[xo].isAlias?i(v):i(h)+"."+i(v),params:[]}}if(bt(d,wv)){if(bt(d.value,gf))return{sql:a(u.value++,d),params:[d],typings:["none"]};const h=d.value===null?null:d.encoder.mapToDriverValue(d.value);if(bt(h,Fi))return this.buildQueryFromSourceParams([h],n);if(c)return{sql:this.mapInlineParam(h,n),params:[]};let v=["none"];return l&&(v=[l(d.encoder)]),{sql:a(u.value++,h),params:[h],typings:v}}return bt(d,gf)?{sql:a(u.value++,d),params:[d],typings:["none"]}:bt(d,Fi.Aliased)&&d.fieldAlias!==void 0?{sql:i(d.fieldAlias),params:[]}:bt(d,xv)?d._.isWith?{sql:i(d._.alias),params:[]}:this.buildQueryFromSourceParams([new qr("("),d._.sql,new qr(") "),new pf(d._.alias)],n):yB(d)?d.schema?{sql:i(d.schema)+"."+i(d.enumName),params:[]}:{sql:i(d.enumName),params:[]}:xB(d)?(f=d.shouldOmitSQLParens)!=null&&f.call(d)?this.buildQueryFromSourceParams([d.getSQL()],n):this.buildQueryFromSourceParams([new qr("("),d.getSQL(),new qr(")")],n):c?{sql:this.mapInlineParam(d,n),params:[]}:{sql:a(u.value++,d),params:[d],typings:["none"]}}))}mapInlineParam(e,{escapeString:r}){if(e===null)return"null";if(typeof e=="number"||typeof e=="boolean")return e.toString();if(typeof e=="string")return r(e);if(typeof e=="object"){const n=e.toString();return r(n==="[object Object]"?JSON.stringify(e):n)}throw new Error("Unexpected param value: "+e)}getSQL(){return this}as(e){return e===void 0?this:new Fi.Aliased(this,e)}mapWith(e){return this.decoder=typeof e=="function"?{mapFromDriverValue:e}:e,this}inlineParams(){return this.shouldInlineParams=!0,this}if(e){return e?this:void 0}};T(Fi,$b,"SQL");let ft=Fi;var Ub;Ub=B;class pf{constructor(e){T(this,"brand");this.value=e}getSQL(){return new ft([this])}}T(pf,Ub,"Name");const o2={mapFromDriverValue:t=>t},l2={mapToDriverValue:t=>t};({...o2,...l2});var Bb;Bb=B;class wv{constructor(e,r=l2){T(this,"brand");this.value=e,this.encoder=r}getSQL(){return new ft([this])}}T(wv,Bb,"Param");function ma(t,...e){const r=[];(e.length>0||t.length>0&&t[0]!=="")&&r.push(new qr(t[0]));for(const[n,s]of e.entries())r.push(s,new qr(t[n+1]));return new ft(r)}(t=>{function e(){return new ft([])}t.empty=e;function r(c){return new ft(c)}t.fromList=r;function n(c){return new ft([new qr(c)])}t.raw=n;function s(c,u){const d=[];for(const[f,h]of c.entries())f>0&&u!==void 0&&d.push(u),d.push(h);return new ft(d)}t.join=s;function i(c){return new pf(c)}t.identifier=i;function a(c){return new gf(c)}t.placeholder=a;function l(c,u){return new wv(c,u)}t.param=l})(ma||(ma={}));(t=>{var r;r=B;const n=class n{constructor(i,a){T(this,"isSelectionField",!1);this.sql=i,this.fieldAlias=a}getSQL(){return this.sql}clone(){return new n(this.sql,this.fieldAlias)}};T(n,r,"SQL.Aliased");let e=n;t.Aliased=e})(ft||(ft={}));var zb;zb=B;class gf{constructor(e){this.name=e}getSQL(){return new ft([this])}}T(gf,zb,"Placeholder");const c2=Symbol.for("drizzle:IsDrizzleView");var Vb,Wb,qb;qb=B,Wb=xo,Vb=c2;class u2{constructor({name:e,schema:r,selectedFields:n,query:s}){T(this,Wb);T(this,Vb,!0);this[xo]={name:e,originalName:e,schema:r,selectedFields:n,query:s,isExisting:!s,isAlias:!1}}getSQL(){return new ft([this])}}T(u2,qb,"View");function bB(t){return typeof t=="object"&&t!==null&&c2 in t}Ho.prototype.getSQL=function(){return new ft([this])};Ir.prototype.getSQL=function(){return new ft([this])};xv.prototype.getSQL=function(){return new ft([this])};function _B(t){return t[Ir.Symbol.Columns]}function SB(t){return t[xo].selectedFields}function Rt(t,e){return{name:typeof t=="string"&&t.length>0?t:"",config:typeof t=="object"?t:e}}var Hb,Kb;class du extends(Kb=Te,Hb=B,Kb){generatedAlwaysAsIdentity(e){if(e){const{name:r,...n}=e;this.config.generatedIdentity={type:"always",sequenceName:r,sequenceOptions:n}}else this.config.generatedIdentity={type:"always"};return this.config.hasDefault=!0,this.config.notNull=!0,this}generatedByDefaultAsIdentity(e){if(e){const{name:r,...n}=e;this.config.generatedIdentity={type:"byDefault",sequenceName:r,sequenceOptions:n}}else this.config.generatedIdentity={type:"byDefault"};return this.config.hasDefault=!0,this.config.notNull=!0,this}}T(du,Hb,"PgIntColumnBaseBuilder");var Gb,Qb;class d2 extends(Qb=du,Gb=B,Qb){constructor(e){super(e,"number","PgBigInt53")}build(e){return new f2(e,this.config)}}T(d2,Gb,"PgBigInt53Builder");var Yb,Jb;class f2 extends(Jb=we,Yb=B,Jb){getSQLType(){return"bigint"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}}T(f2,Yb,"PgBigInt53");var Zb,Xb;class h2 extends(Xb=du,Zb=B,Xb){constructor(e){super(e,"bigint","PgBigInt64")}build(e){return new m2(e,this.config)}}T(h2,Zb,"PgBigInt64Builder");var e_,t_;class m2 extends(t_=we,e_=B,t_){getSQLType(){return"bigint"}mapFromDriverValue(e){return BigInt(e)}}T(m2,e_,"PgBigInt64");function jB(t,e){const{name:r,config:n}=Rt(t,e);return n.mode==="number"?new d2(r):new h2(r)}var r_,n_;class p2 extends(n_=Te,r_=B,n_){constructor(e){super(e,"number","PgBigSerial53"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new g2(e,this.config)}}T(p2,r_,"PgBigSerial53Builder");var s_,i_;class g2 extends(i_=we,s_=B,i_){getSQLType(){return"bigserial"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}}T(g2,s_,"PgBigSerial53");var a_,o_;class y2 extends(o_=Te,a_=B,o_){constructor(e){super(e,"bigint","PgBigSerial64"),this.config.hasDefault=!0}build(e){return new v2(e,this.config)}}T(y2,a_,"PgBigSerial64Builder");var l_,c_;class v2 extends(c_=we,l_=B,c_){getSQLType(){return"bigserial"}mapFromDriverValue(e){return BigInt(e)}}T(v2,l_,"PgBigSerial64");function kB(t,e){const{name:r,config:n}=Rt(t,e);return n.mode==="number"?new p2(r):new y2(r)}var u_,d_;class x2 extends(d_=Te,u_=B,d_){constructor(e){super(e,"boolean","PgBoolean")}build(e){return new w2(e,this.config)}}T(x2,u_,"PgBooleanBuilder");var f_,h_;class w2 extends(h_=we,f_=B,h_){getSQLType(){return"boolean"}}T(w2,f_,"PgBoolean");function NB(t){return new x2(t??"")}var m_,p_;class b2 extends(p_=Te,m_=B,p_){constructor(e,r){super(e,"string","PgChar"),this.config.length=r.length,this.config.enumValues=r.enum}build(e){return new _2(e,this.config)}}T(b2,m_,"PgCharBuilder");var g_,y_;class _2 extends(y_=we,g_=B,y_){constructor(){super(...arguments);T(this,"length",this.config.length);T(this,"enumValues",this.config.enumValues)}getSQLType(){return this.length===void 0?"char":`char(${this.length})`}}T(_2,g_,"PgChar");function CB(t,e={}){const{name:r,config:n}=Rt(t,e);return new b2(r,n)}var v_,x_;class S2 extends(x_=Te,v_=B,x_){constructor(e){super(e,"string","PgCidr")}build(e){return new j2(e,this.config)}}T(S2,v_,"PgCidrBuilder");var w_,b_;class j2 extends(b_=we,w_=B,b_){getSQLType(){return"cidr"}}T(j2,w_,"PgCidr");function EB(t){return new S2(t??"")}var __,S_;class k2 extends(S_=Te,__=B,S_){constructor(e,r,n){super(e,"custom","PgCustomColumn"),this.config.fieldConfig=r,this.config.customTypeParams=n}build(e){return new N2(e,this.config)}}T(k2,__,"PgCustomColumnBuilder");var j_,k_;class N2 extends(k_=we,j_=B,k_){constructor(r,n){super(r,n);T(this,"sqlName");T(this,"mapTo");T(this,"mapFrom");this.sqlName=n.customTypeParams.dataType(n.fieldConfig),this.mapTo=n.customTypeParams.toDriver,this.mapFrom=n.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(r){return typeof this.mapFrom=="function"?this.mapFrom(r):r}mapToDriverValue(r){return typeof this.mapTo=="function"?this.mapTo(r):r}}T(N2,j_,"PgCustomColumn");function PB(t){return(e,r)=>{const{name:n,config:s}=Rt(e,r);return new k2(n,s,t)}}var N_,C_;class fl extends(C_=Te,N_=B,C_){defaultNow(){return this.default(ma`now()`)}}T(fl,N_,"PgDateColumnBaseBuilder");var E_,P_;class C2 extends(P_=fl,E_=B,P_){constructor(e){super(e,"date","PgDate")}build(e){return new E2(e,this.config)}}T(C2,E_,"PgDateBuilder");var T_,A_;class E2 extends(A_=we,T_=B,A_){getSQLType(){return"date"}mapFromDriverValue(e){return new Date(e)}mapToDriverValue(e){return e.toISOString()}}T(E2,T_,"PgDate");var O_,R_;class P2 extends(R_=fl,O_=B,R_){constructor(e){super(e,"string","PgDateString")}build(e){return new T2(e,this.config)}}T(P2,O_,"PgDateStringBuilder");var I_,D_;class T2 extends(D_=we,I_=B,D_){getSQLType(){return"date"}}T(T2,I_,"PgDateString");function TB(t,e){const{name:r,config:n}=Rt(t,e);return(n==null?void 0:n.mode)==="date"?new C2(r):new P2(r)}var M_,L_;class A2 extends(L_=Te,M_=B,L_){constructor(e){super(e,"number","PgDoublePrecision")}build(e){return new O2(e,this.config)}}T(A2,M_,"PgDoublePrecisionBuilder");var F_,$_;class O2 extends($_=we,F_=B,$_){getSQLType(){return"double precision"}mapFromDriverValue(e){return typeof e=="string"?Number.parseFloat(e):e}}T(O2,F_,"PgDoublePrecision");function AB(t){return new A2(t??"")}var U_,B_;class R2 extends(B_=Te,U_=B,B_){constructor(e){super(e,"string","PgInet")}build(e){return new I2(e,this.config)}}T(R2,U_,"PgInetBuilder");var z_,V_;class I2 extends(V_=we,z_=B,V_){getSQLType(){return"inet"}}T(I2,z_,"PgInet");function OB(t){return new R2(t??"")}var W_,q_;class D2 extends(q_=du,W_=B,q_){constructor(e){super(e,"number","PgInteger")}build(e){return new M2(e,this.config)}}T(D2,W_,"PgIntegerBuilder");var H_,K_;class M2 extends(K_=we,H_=B,K_){getSQLType(){return"integer"}mapFromDriverValue(e){return typeof e=="string"?Number.parseInt(e):e}}T(M2,H_,"PgInteger");function ye(t){return new D2(t??"")}var G_,Q_;class L2 extends(Q_=Te,G_=B,Q_){constructor(e,r){super(e,"string","PgInterval"),this.config.intervalConfig=r}build(e){return new F2(e,this.config)}}T(L2,G_,"PgIntervalBuilder");var Y_,J_;class F2 extends(J_=we,Y_=B,J_){constructor(){super(...arguments);T(this,"fields",this.config.intervalConfig.fields);T(this,"precision",this.config.intervalConfig.precision)}getSQLType(){const r=this.fields?` ${this.fields}`:"",n=this.precision?`(${this.precision})`:"";return`interval${r}${n}`}}T(F2,Y_,"PgInterval");function RB(t,e={}){const{name:r,config:n}=Rt(t,e);return new L2(r,n)}var Z_,X_;class $2 extends(X_=Te,Z_=B,X_){constructor(e){super(e,"json","PgJson")}build(e){return new U2(e,this.config)}}T($2,Z_,"PgJsonBuilder");var eS,tS;class U2 extends(tS=we,eS=B,tS){constructor(e,r){super(e,r)}getSQLType(){return"json"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}}T(U2,eS,"PgJson");function IB(t){return new $2(t??"")}var rS,nS;class B2 extends(nS=Te,rS=B,nS){constructor(e){super(e,"json","PgJsonb")}build(e){return new z2(e,this.config)}}T(B2,rS,"PgJsonbBuilder");var sS,iS;class z2 extends(iS=we,sS=B,iS){constructor(e,r){super(e,r)}getSQLType(){return"jsonb"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}}T(z2,sS,"PgJsonb");function DB(t){return new B2(t??"")}var aS,oS;class V2 extends(oS=Te,aS=B,oS){constructor(e){super(e,"array","PgLine")}build(e){return new W2(e,this.config)}}T(V2,aS,"PgLineBuilder");var lS,cS;class W2 extends(cS=we,lS=B,cS){getSQLType(){return"line"}mapFromDriverValue(e){const[r,n,s]=e.slice(1,-1).split(",");return[Number.parseFloat(r),Number.parseFloat(n),Number.parseFloat(s)]}mapToDriverValue(e){return`{${e[0]},${e[1]},${e[2]}}`}}T(W2,lS,"PgLine");var uS,dS;class q2 extends(dS=Te,uS=B,dS){constructor(e){super(e,"json","PgLineABC")}build(e){return new H2(e,this.config)}}T(q2,uS,"PgLineABCBuilder");var fS,hS;class H2 extends(hS=we,fS=B,hS){getSQLType(){return"line"}mapFromDriverValue(e){const[r,n,s]=e.slice(1,-1).split(",");return{a:Number.parseFloat(r),b:Number.parseFloat(n),c:Number.parseFloat(s)}}mapToDriverValue(e){return`{${e.a},${e.b},${e.c}}`}}T(H2,fS,"PgLineABC");function MB(t,e){const{name:r,config:n}=Rt(t,e);return!(n!=null&&n.mode)||n.mode==="tuple"?new V2(r):new q2(r)}var mS,pS;class K2 extends(pS=Te,mS=B,pS){constructor(e){super(e,"string","PgMacaddr")}build(e){return new G2(e,this.config)}}T(K2,mS,"PgMacaddrBuilder");var gS,yS;class G2 extends(yS=we,gS=B,yS){getSQLType(){return"macaddr"}}T(G2,gS,"PgMacaddr");function LB(t){return new K2(t??"")}var vS,xS;class Q2 extends(xS=Te,vS=B,xS){constructor(e){super(e,"string","PgMacaddr8")}build(e){return new Y2(e,this.config)}}T(Q2,vS,"PgMacaddr8Builder");var wS,bS;class Y2 extends(bS=we,wS=B,bS){getSQLType(){return"macaddr8"}}T(Y2,wS,"PgMacaddr8");function FB(t){return new Q2(t??"")}var _S,SS;class J2 extends(SS=Te,_S=B,SS){constructor(e,r,n){super(e,"string","PgNumeric"),this.config.precision=r,this.config.scale=n}build(e){return new Z2(e,this.config)}}T(J2,_S,"PgNumericBuilder");var jS,kS;class Z2 extends(kS=we,jS=B,kS){constructor(r,n){super(r,n);T(this,"precision");T(this,"scale");this.precision=n.precision,this.scale=n.scale}getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}}T(Z2,jS,"PgNumeric");function $B(t,e){const{name:r,config:n}=Rt(t,e);return new J2(r,n==null?void 0:n.precision,n==null?void 0:n.scale)}var NS,CS;class X2 extends(CS=Te,NS=B,CS){constructor(e){super(e,"array","PgPointTuple")}build(e){return new eA(e,this.config)}}T(X2,NS,"PgPointTupleBuilder");var ES,PS;class eA extends(PS=we,ES=B,PS){getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){const[r,n]=e.slice(1,-1).split(",");return[Number.parseFloat(r),Number.parseFloat(n)]}return[e.x,e.y]}mapToDriverValue(e){return`(${e[0]},${e[1]})`}}T(eA,ES,"PgPointTuple");var TS,AS;class tA extends(AS=Te,TS=B,AS){constructor(e){super(e,"json","PgPointObject")}build(e){return new rA(e,this.config)}}T(tA,TS,"PgPointObjectBuilder");var OS,RS;class rA extends(RS=we,OS=B,RS){getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){const[r,n]=e.slice(1,-1).split(",");return{x:Number.parseFloat(r),y:Number.parseFloat(n)}}return e}mapToDriverValue(e){return`(${e.x},${e.y})`}}T(rA,OS,"PgPointObject");function UB(t,e){const{name:r,config:n}=Rt(t,e);return!(n!=null&&n.mode)||n.mode==="tuple"?new X2(r):new tA(r)}function BB(t){const e=[];for(let r=0;r<t.length;r+=2)e.push(Number.parseInt(t.slice(r,r+2),16));return new Uint8Array(e)}function Uw(t,e){const r=new ArrayBuffer(8),n=new DataView(r);for(let s=0;s<8;s++)n.setUint8(s,t[e+s]);return n.getFloat64(0,!0)}function nA(t){const e=BB(t);let r=0;const n=e[r];r+=1;const s=new DataView(e.buffer),i=s.getUint32(r,n===1);if(r+=4,i&536870912&&(s.getUint32(r,n===1),r+=4),(i&65535)===1){const a=Uw(e,r);r+=8;const l=Uw(e,r);return r+=8,[a,l]}throw new Error("Unsupported geometry type")}var IS,DS;class sA extends(DS=Te,IS=B,DS){constructor(e){super(e,"array","PgGeometry")}build(e){return new iA(e,this.config)}}T(sA,IS,"PgGeometryBuilder");var MS,LS;class iA extends(LS=we,MS=B,LS){getSQLType(){return"geometry(point)"}mapFromDriverValue(e){return nA(e)}mapToDriverValue(e){return`point(${e[0]} ${e[1]})`}}T(iA,MS,"PgGeometry");var FS,$S;class aA extends($S=Te,FS=B,$S){constructor(e){super(e,"json","PgGeometryObject")}build(e){return new oA(e,this.config)}}T(aA,FS,"PgGeometryObjectBuilder");var US,BS;class oA extends(BS=we,US=B,BS){getSQLType(){return"geometry(point)"}mapFromDriverValue(e){const r=nA(e);return{x:r[0],y:r[1]}}mapToDriverValue(e){return`point(${e.x} ${e.y})`}}T(oA,US,"PgGeometryObject");function zB(t,e){const{name:r,config:n}=Rt(t,e);return!(n!=null&&n.mode)||n.mode==="tuple"?new sA(r):new aA(r)}var zS,VS;class lA extends(VS=Te,zS=B,VS){constructor(e,r){super(e,"number","PgReal"),this.config.length=r}build(e){return new cA(e,this.config)}}T(lA,zS,"PgRealBuilder");var WS,qS;class cA extends(qS=we,WS=B,qS){constructor(r,n){super(r,n);T(this,"mapFromDriverValue",r=>typeof r=="string"?Number.parseFloat(r):r)}getSQLType(){return"real"}}T(cA,WS,"PgReal");function VB(t){return new lA(t??"")}var HS,KS;class uA extends(KS=Te,HS=B,KS){constructor(e){super(e,"number","PgSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new dA(e,this.config)}}T(uA,HS,"PgSerialBuilder");var GS,QS;class dA extends(QS=we,GS=B,QS){getSQLType(){return"serial"}}T(dA,GS,"PgSerial");function tn(t){return new uA(t??"")}var YS,JS;class fA extends(JS=du,YS=B,JS){constructor(e){super(e,"number","PgSmallInt")}build(e){return new hA(e,this.config)}}T(fA,YS,"PgSmallIntBuilder");var ZS,XS;class hA extends(XS=we,ZS=B,XS){constructor(){super(...arguments);T(this,"mapFromDriverValue",r=>typeof r=="string"?Number(r):r)}getSQLType(){return"smallint"}}T(hA,ZS,"PgSmallInt");function WB(t){return new fA(t??"")}var ej,tj;class mA extends(tj=Te,ej=B,tj){constructor(e){super(e,"number","PgSmallSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new pA(e,this.config)}}T(mA,ej,"PgSmallSerialBuilder");var rj,nj;class pA extends(nj=we,rj=B,nj){getSQLType(){return"smallserial"}}T(pA,rj,"PgSmallSerial");function qB(t){return new mA(t??"")}var sj,ij;class gA extends(ij=Te,sj=B,ij){constructor(e,r){super(e,"string","PgText"),this.config.enumValues=r.enum}build(e){return new yA(e,this.config)}}T(gA,sj,"PgTextBuilder");var aj,oj;class yA extends(oj=we,aj=B,oj){constructor(){super(...arguments);T(this,"enumValues",this.config.enumValues)}getSQLType(){return"text"}}T(yA,aj,"PgText");function oe(t,e={}){const{name:r,config:n}=Rt(t,e);return new gA(r,n)}var lj,cj;class vA extends(cj=fl,lj=B,cj){constructor(e,r,n){super(e,"string","PgTime"),this.withTimezone=r,this.precision=n,this.config.withTimezone=r,this.config.precision=n}build(e){return new xA(e,this.config)}}T(vA,lj,"PgTimeBuilder");var uj,dj;class xA extends(dj=we,uj=B,dj){constructor(r,n){super(r,n);T(this,"withTimezone");T(this,"precision");this.withTimezone=n.withTimezone,this.precision=n.precision}getSQLType(){return`time${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}T(xA,uj,"PgTime");function HB(t,e={}){const{name:r,config:n}=Rt(t,e);return new vA(r,n.withTimezone??!1,n.precision)}var fj,hj;class wA extends(hj=fl,fj=B,hj){constructor(e,r,n){super(e,"date","PgTimestamp"),this.config.withTimezone=r,this.config.precision=n}build(e){return new bA(e,this.config)}}T(wA,fj,"PgTimestampBuilder");var mj,pj;class bA extends(pj=we,mj=B,pj){constructor(r,n){super(r,n);T(this,"withTimezone");T(this,"precision");T(this,"mapFromDriverValue",r=>new Date(this.withTimezone?r:r+"+0000"));T(this,"mapToDriverValue",r=>r.toISOString());this.withTimezone=n.withTimezone,this.precision=n.precision}getSQLType(){return`timestamp${this.precision===void 0?"":` (${this.precision})`}${this.withTimezone?" with time zone":""}`}}T(bA,mj,"PgTimestamp");var gj,yj;class _A extends(yj=fl,gj=B,yj){constructor(e,r,n){super(e,"string","PgTimestampString"),this.config.withTimezone=r,this.config.precision=n}build(e){return new SA(e,this.config)}}T(_A,gj,"PgTimestampStringBuilder");var vj,xj;class SA extends(xj=we,vj=B,xj){constructor(r,n){super(r,n);T(this,"withTimezone");T(this,"precision");this.withTimezone=n.withTimezone,this.precision=n.precision}getSQLType(){return`timestamp${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}T(SA,vj,"PgTimestampString");function rt(t,e={}){const{name:r,config:n}=Rt(t,e);return(n==null?void 0:n.mode)==="string"?new _A(r,n.withTimezone??!1,n.precision):new wA(r,(n==null?void 0:n.withTimezone)??!1,n==null?void 0:n.precision)}var wj,bj;class jA extends(bj=Te,wj=B,bj){constructor(e){super(e,"string","PgUUID")}defaultRandom(){return this.default(ma`gen_random_uuid()`)}build(e){return new kA(e,this.config)}}T(jA,wj,"PgUUIDBuilder");var _j,Sj;class kA extends(Sj=we,_j=B,Sj){getSQLType(){return"uuid"}}T(kA,_j,"PgUUID");function KB(t){return new jA(t??"")}var jj,kj;class NA extends(kj=Te,jj=B,kj){constructor(e,r){super(e,"string","PgVarchar"),this.config.length=r.length,this.config.enumValues=r.enum}build(e){return new CA(e,this.config)}}T(NA,jj,"PgVarcharBuilder");var Nj,Cj;class CA extends(Cj=we,Nj=B,Cj){constructor(){super(...arguments);T(this,"length",this.config.length);T(this,"enumValues",this.config.enumValues)}getSQLType(){return this.length===void 0?"varchar":`varchar(${this.length})`}}T(CA,Nj,"PgVarchar");function Ss(t,e={}){const{name:r,config:n}=Rt(t,e);return new NA(r,n)}var Ej,Pj;class EA extends(Pj=Te,Ej=B,Pj){constructor(e,r){super(e,"string","PgBinaryVector"),this.config.dimensions=r.dimensions}build(e){return new PA(e,this.config)}}T(EA,Ej,"PgBinaryVectorBuilder");var Tj,Aj;class PA extends(Aj=we,Tj=B,Aj){constructor(){super(...arguments);T(this,"dimensions",this.config.dimensions)}getSQLType(){return`bit(${this.dimensions})`}}T(PA,Tj,"PgBinaryVector");function GB(t,e){const{name:r,config:n}=Rt(t,e);return new EA(r,n)}var Oj,Rj;class TA extends(Rj=Te,Oj=B,Rj){constructor(e,r){super(e,"array","PgHalfVector"),this.config.dimensions=r.dimensions}build(e){return new AA(e,this.config)}}T(TA,Oj,"PgHalfVectorBuilder");var Ij,Dj;class AA extends(Dj=we,Ij=B,Dj){constructor(){super(...arguments);T(this,"dimensions",this.config.dimensions)}getSQLType(){return`halfvec(${this.dimensions})`}mapToDriverValue(r){return JSON.stringify(r)}mapFromDriverValue(r){return r.slice(1,-1).split(",").map(n=>Number.parseFloat(n))}}T(AA,Ij,"PgHalfVector");function QB(t,e){const{name:r,config:n}=Rt(t,e);return new TA(r,n)}var Mj,Lj;class OA extends(Lj=Te,Mj=B,Lj){constructor(e,r){super(e,"string","PgSparseVector"),this.config.dimensions=r.dimensions}build(e){return new RA(e,this.config)}}T(OA,Mj,"PgSparseVectorBuilder");var Fj,$j;class RA extends($j=we,Fj=B,$j){constructor(){super(...arguments);T(this,"dimensions",this.config.dimensions)}getSQLType(){return`sparsevec(${this.dimensions})`}}T(RA,Fj,"PgSparseVector");function YB(t,e){const{name:r,config:n}=Rt(t,e);return new OA(r,n)}var Uj,Bj;class IA extends(Bj=Te,Uj=B,Bj){constructor(e,r){super(e,"array","PgVector"),this.config.dimensions=r.dimensions}build(e){return new DA(e,this.config)}}T(IA,Uj,"PgVectorBuilder");var zj,Vj;class DA extends(Vj=we,zj=B,Vj){constructor(){super(...arguments);T(this,"dimensions",this.config.dimensions)}getSQLType(){return`vector(${this.dimensions})`}mapToDriverValue(r){return JSON.stringify(r)}mapFromDriverValue(r){return r.slice(1,-1).split(",").map(n=>Number.parseFloat(n))}}T(DA,zj,"PgVector");function JB(t,e){const{name:r,config:n}=Rt(t,e);return new IA(r,n)}function ZB(){return{bigint:jB,bigserial:kB,boolean:NB,char:CB,cidr:EB,customType:PB,date:TB,doublePrecision:AB,inet:OB,integer:ye,interval:RB,json:IB,jsonb:DB,line:MB,macaddr:LB,macaddr8:FB,numeric:$B,point:UB,geometry:zB,real:VB,serial:tn,smallint:WB,smallserial:qB,text:oe,time:HB,timestamp:rt,uuid:KB,varchar:Ss,bit:GB,halfvec:QB,sparsevec:YB,vector:JB}}const Sg=Symbol.for("drizzle:PgInlineForeignKeys"),Bw=Symbol.for("drizzle:EnableRLS");var Wj,qj,Hj,Kj,Gj;class Xl extends(Gj=Ir,Kj=B,Hj=Sg,qj=Bw,Wj=Ir.Symbol.ExtraConfigBuilder,Gj){constructor(){super(...arguments);T(this,Hj,[]);T(this,qj,!1);T(this,Wj)}}T(Xl,Kj,"PgTable"),T(Xl,"Symbol",Object.assign({},Ir.Symbol,{InlineForeignKeys:Sg,EnableRLS:Bw}));function XB(t,e,r,n,s=t){const i=new Xl(t,n,s),a=typeof e=="function"?e(ZB()):e,l=Object.fromEntries(Object.entries(a).map(([d,f])=>{const h=f;h.setName(d);const v=h.build(i);return i[Sg].push(...h.buildForeignKeys(v,i)),[d,v]})),c=Object.fromEntries(Object.entries(a).map(([d,f])=>{const h=f;h.setName(d);const v=h.buildExtraConfigColumn(i);return[d,v]})),u=Object.assign(i,l);return u[Ir.Symbol.Columns]=l,u[Ir.Symbol.ExtraConfigColumns]=c,r&&(u[Xl.Symbol.ExtraConfigBuilder]=r),Object.assign(u,{enableRLS:()=>(u[Xl.Symbol.EnableRLS]=!0,u)})}const Qt=(t,e,r)=>XB(t,e,r,void 0);var Qj;Qj=B;class MA{constructor(e,r){this.unique=e,this.name=r}on(...e){return new gd(e.map(r=>{if(bt(r,ft))return r;r=r;const n=new pd(r.name,!!r.keyAsName,r.columnType,r.indexConfig);return r.indexConfig=JSON.parse(JSON.stringify(r.defaultConfig)),n}),this.unique,!1,this.name)}onOnly(...e){return new gd(e.map(r=>{if(bt(r,ft))return r;r=r;const n=new pd(r.name,!!r.keyAsName,r.columnType,r.indexConfig);return r.indexConfig=r.defaultConfig,n}),this.unique,!0,this.name)}using(e,...r){return new gd(r.map(n=>{if(bt(n,ft))return n;n=n;const s=new pd(n.name,!!n.keyAsName,n.columnType,n.indexConfig);return n.indexConfig=JSON.parse(JSON.stringify(n.defaultConfig)),s}),this.unique,!0,this.name,e)}}T(MA,Qj,"PgIndexBuilderOn");var Yj;Yj=B;class gd{constructor(e,r,n,s,i="btree"){T(this,"config");this.config={name:s,columns:e,unique:r,only:n,method:i}}concurrently(){return this.config.concurrently=!0,this}with(e){return this.config.with=e,this}where(e){return this.config.where=e,this}build(e){return new LA(this.config,e)}}T(gd,Yj,"PgIndexBuilder");var Jj;Jj=B;class LA{constructor(e,r){T(this,"config");this.config={...e,table:r}}}T(LA,Jj,"PgIndex");function ec(t){return new MA(!1,t)}var Pe;(function(t){t.assertEqual=s=>{};function e(s){}t.assertIs=e;function r(s){throw new Error}t.assertNever=r,t.arrayToEnum=s=>{const i={};for(const a of s)i[a]=a;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(l=>typeof s[s[l]]!="number"),a={};for(const l of i)a[l]=s[l];return t.objectValues(a)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const a in s)Object.prototype.hasOwnProperty.call(s,a)&&i.push(a);return i},t.find=(s,i)=>{for(const a of s)if(i(a))return a},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&Number.isFinite(s)&&Math.floor(s)===s;function n(s,i=" | "){return s.map(a=>typeof a=="string"?`'${a}'`:a).join(i)}t.joinValues=n,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(Pe||(Pe={}));var jg;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(jg||(jg={}));const X=Pe.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),us=t=>{switch(typeof t){case"undefined":return X.undefined;case"string":return X.string;case"number":return Number.isNaN(t)?X.nan:X.number;case"boolean":return X.boolean;case"function":return X.function;case"bigint":return X.bigint;case"symbol":return X.symbol;case"object":return Array.isArray(t)?X.array:t===null?X.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?X.promise:typeof Map<"u"&&t instanceof Map?X.map:typeof Set<"u"&&t instanceof Set?X.set:typeof Date<"u"&&t instanceof Date?X.date:X.object;default:return X.unknown}},W=Pe.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),ez=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class Fr extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}format(e){const r=e||function(i){return i.message},n={_errors:[]},s=i=>{for(const a of i.issues)if(a.code==="invalid_union")a.unionErrors.map(s);else if(a.code==="invalid_return_type")s(a.returnTypeError);else if(a.code==="invalid_arguments")s(a.argumentsError);else if(a.path.length===0)n._errors.push(r(a));else{let l=n,c=0;for(;c<a.path.length;){const u=a.path[c];c===a.path.length-1?(l[u]=l[u]||{_errors:[]},l[u]._errors.push(r(a))):l[u]=l[u]||{_errors:[]},l=l[u],c++}}};return s(this),n}static assert(e){if(!(e instanceof Fr))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Pe.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){const r={},n=[];for(const s of this.issues)if(s.path.length>0){const i=s.path[0];r[i]=r[i]||[],r[i].push(e(s))}else n.push(e(s));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}}Fr.create=t=>new Fr(t);const Ko=(t,e)=>{let r;switch(t.code){case W.invalid_type:t.received===X.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case W.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,Pe.jsonStringifyReplacer)}`;break;case W.unrecognized_keys:r=`Unrecognized key(s) in object: ${Pe.joinValues(t.keys,", ")}`;break;case W.invalid_union:r="Invalid input";break;case W.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${Pe.joinValues(t.options)}`;break;case W.invalid_enum_value:r=`Invalid enum value. Expected ${Pe.joinValues(t.options)}, received '${t.received}'`;break;case W.invalid_arguments:r="Invalid function arguments";break;case W.invalid_return_type:r="Invalid function return type";break;case W.invalid_date:r="Invalid date";break;case W.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:Pe.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case W.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case W.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case W.custom:r="Invalid input";break;case W.invalid_intersection_types:r="Intersection results could not be merged";break;case W.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case W.not_finite:r="Number must be finite";break;default:r=e.defaultError,Pe.assertNever(t)}return{message:r}};let FA=Ko;function tz(t){FA=t}function yf(){return FA}const vf=t=>{const{data:e,path:r,errorMaps:n,issueData:s}=t,i=[...r,...s.path||[]],a={...s,path:i};if(s.message!==void 0)return{...s,path:i,message:s.message};let l="";const c=n.filter(u=>!!u).slice().reverse();for(const u of c)l=u(a,{data:e,defaultError:l}).message;return{...s,path:i,message:l}},rz=[];function J(t,e){const r=yf(),n=vf({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,r,r===Ko?void 0:Ko].filter(s=>!!s)});t.common.issues.push(n)}class Kt{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){const n=[];for(const s of r){if(s.status==="aborted")return de;s.status==="dirty"&&e.dirty(),n.push(s.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){const n=[];for(const s of r){const i=await s.key,a=await s.value;n.push({key:i,value:a})}return Kt.mergeObjectSync(e,n)}static mergeObjectSync(e,r){const n={};for(const s of r){const{key:i,value:a}=s;if(i.status==="aborted"||a.status==="aborted")return de;i.status==="dirty"&&e.dirty(),a.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof a.value<"u"||s.alwaysSet)&&(n[i.value]=a.value)}return{status:e.value,value:n}}}const de=Object.freeze({status:"aborted"}),no=t=>({status:"dirty",value:t}),dr=t=>({status:"valid",value:t}),kg=t=>t.status==="aborted",Ng=t=>t.status==="dirty",pa=t=>t.status==="valid",Pc=t=>typeof Promise<"u"&&t instanceof Promise;var ae;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(ae||(ae={}));class Qn{constructor(e,r,n,s){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=s}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const zw=(t,e)=>{if(pa(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const r=new Fr(t.common.issues);return this._error=r,this._error}}};function xe(t){if(!t)return{};const{errorMap:e,invalid_type_error:r,required_error:n,description:s}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(a,l)=>{const{message:c}=t;return a.code==="invalid_enum_value"?{message:c??l.defaultError}:typeof l.data>"u"?{message:c??n??l.defaultError}:a.code!=="invalid_type"?{message:l.defaultError}:{message:c??r??l.defaultError}},description:s}}class Se{get description(){return this._def.description}_getType(e){return us(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:us(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Kt,ctx:{common:e.parent.common,data:e.data,parsedType:us(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const r=this._parse(e);if(Pc(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){const r=this._parse(e);return Promise.resolve(r)}parse(e,r){const n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){const n={common:{issues:[],async:(r==null?void 0:r.async)??!1,contextualErrorMap:r==null?void 0:r.errorMap},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:us(e)},s=this._parseSync({data:e,path:n.path,parent:n});return zw(n,s)}"~validate"(e){var n,s;const r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:us(e)};if(!this["~standard"].async)try{const i=this._parseSync({data:e,path:[],parent:r});return pa(i)?{value:i.value}:{issues:r.common.issues}}catch(i){(s=(n=i==null?void 0:i.message)==null?void 0:n.toLowerCase())!=null&&s.includes("encountered")&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:r}).then(i=>pa(i)?{value:i.value}:{issues:r.common.issues})}async parseAsync(e,r){const n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){const n={common:{issues:[],contextualErrorMap:r==null?void 0:r.errorMap,async:!0},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:us(e)},s=this._parse({data:e,path:n.path,parent:n}),i=await(Pc(s)?s:Promise.resolve(s));return zw(n,i)}refine(e,r){const n=s=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(s):r;return this._refinement((s,i)=>{const a=e(s),l=()=>i.addIssue({code:W.custom,...n(s)});return typeof Promise<"u"&&a instanceof Promise?a.then(c=>c?!0:(l(),!1)):a?!0:(l(),!1)})}refinement(e,r){return this._refinement((n,s)=>e(n)?!0:(s.addIssue(typeof r=="function"?r(n,s):r),!1))}_refinement(e){return new kn({schema:this,typeName:he.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return Kn.create(this,this._def)}nullable(){return bi.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return bn.create(this)}promise(){return Qo.create(this,this._def)}or(e){return Rc.create([this,e],this._def)}and(e){return Ic.create(this,e,this._def)}transform(e){return new kn({...xe(this._def),schema:this,typeName:he.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const r=typeof e=="function"?e:()=>e;return new $c({...xe(this._def),innerType:this,defaultValue:r,typeName:he.ZodDefault})}brand(){return new bv({typeName:he.ZodBranded,type:this,...xe(this._def)})}catch(e){const r=typeof e=="function"?e:()=>e;return new Uc({...xe(this._def),innerType:this,catchValue:r,typeName:he.ZodCatch})}describe(e){const r=this.constructor;return new r({...this._def,description:e})}pipe(e){return fu.create(this,e)}readonly(){return Bc.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const nz=/^c[^\s-]{8,}$/i,sz=/^[0-9a-z]+$/,iz=/^[0-9A-HJKMNP-TV-Z]{26}$/i,az=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,oz=/^[a-z0-9_-]{21}$/i,lz=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,cz=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,uz=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,dz="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Sm;const fz=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,hz=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,mz=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,pz=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,gz=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,yz=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,$A="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",vz=new RegExp(`^${$A}$`);function UA(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const r=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${r}`}function xz(t){return new RegExp(`^${UA(t)}$`)}function BA(t){let e=`${$A}T${UA(t)}`;const r=[];return r.push(t.local?"Z?":"Z"),t.offset&&r.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${r.join("|")})`,new RegExp(`^${e}$`)}function wz(t,e){return!!((e==="v4"||!e)&&fz.test(t)||(e==="v6"||!e)&&mz.test(t))}function bz(t,e){if(!lz.test(t))return!1;try{const[r]=t.split(".");if(!r)return!1;const n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),s=JSON.parse(atob(n));return!(typeof s!="object"||s===null||"typ"in s&&(s==null?void 0:s.typ)!=="JWT"||!s.alg||e&&s.alg!==e)}catch{return!1}}function _z(t,e){return!!((e==="v4"||!e)&&hz.test(t)||(e==="v6"||!e)&&pz.test(t))}class vn extends Se{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==X.string){const i=this._getOrReturnCtx(e);return J(i,{code:W.invalid_type,expected:X.string,received:i.parsedType}),de}const n=new Kt;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),J(s,{code:W.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),J(s,{code:W.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="length"){const a=e.data.length>i.value,l=e.data.length<i.value;(a||l)&&(s=this._getOrReturnCtx(e,s),a?J(s,{code:W.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):l&&J(s,{code:W.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),n.dirty())}else if(i.kind==="email")uz.test(e.data)||(s=this._getOrReturnCtx(e,s),J(s,{validation:"email",code:W.invalid_string,message:i.message}),n.dirty());else if(i.kind==="emoji")Sm||(Sm=new RegExp(dz,"u")),Sm.test(e.data)||(s=this._getOrReturnCtx(e,s),J(s,{validation:"emoji",code:W.invalid_string,message:i.message}),n.dirty());else if(i.kind==="uuid")az.test(e.data)||(s=this._getOrReturnCtx(e,s),J(s,{validation:"uuid",code:W.invalid_string,message:i.message}),n.dirty());else if(i.kind==="nanoid")oz.test(e.data)||(s=this._getOrReturnCtx(e,s),J(s,{validation:"nanoid",code:W.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid")nz.test(e.data)||(s=this._getOrReturnCtx(e,s),J(s,{validation:"cuid",code:W.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid2")sz.test(e.data)||(s=this._getOrReturnCtx(e,s),J(s,{validation:"cuid2",code:W.invalid_string,message:i.message}),n.dirty());else if(i.kind==="ulid")iz.test(e.data)||(s=this._getOrReturnCtx(e,s),J(s,{validation:"ulid",code:W.invalid_string,message:i.message}),n.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),J(s,{validation:"url",code:W.invalid_string,message:i.message}),n.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),J(s,{validation:"regex",code:W.invalid_string,message:i.message}),n.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),J(s,{code:W.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),n.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),J(s,{code:W.invalid_string,validation:{startsWith:i.value},message:i.message}),n.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),J(s,{code:W.invalid_string,validation:{endsWith:i.value},message:i.message}),n.dirty()):i.kind==="datetime"?BA(i).test(e.data)||(s=this._getOrReturnCtx(e,s),J(s,{code:W.invalid_string,validation:"datetime",message:i.message}),n.dirty()):i.kind==="date"?vz.test(e.data)||(s=this._getOrReturnCtx(e,s),J(s,{code:W.invalid_string,validation:"date",message:i.message}),n.dirty()):i.kind==="time"?xz(i).test(e.data)||(s=this._getOrReturnCtx(e,s),J(s,{code:W.invalid_string,validation:"time",message:i.message}),n.dirty()):i.kind==="duration"?cz.test(e.data)||(s=this._getOrReturnCtx(e,s),J(s,{validation:"duration",code:W.invalid_string,message:i.message}),n.dirty()):i.kind==="ip"?wz(e.data,i.version)||(s=this._getOrReturnCtx(e,s),J(s,{validation:"ip",code:W.invalid_string,message:i.message}),n.dirty()):i.kind==="jwt"?bz(e.data,i.alg)||(s=this._getOrReturnCtx(e,s),J(s,{validation:"jwt",code:W.invalid_string,message:i.message}),n.dirty()):i.kind==="cidr"?_z(e.data,i.version)||(s=this._getOrReturnCtx(e,s),J(s,{validation:"cidr",code:W.invalid_string,message:i.message}),n.dirty()):i.kind==="base64"?gz.test(e.data)||(s=this._getOrReturnCtx(e,s),J(s,{validation:"base64",code:W.invalid_string,message:i.message}),n.dirty()):i.kind==="base64url"?yz.test(e.data)||(s=this._getOrReturnCtx(e,s),J(s,{validation:"base64url",code:W.invalid_string,message:i.message}),n.dirty()):Pe.assertNever(i);return{status:n.value,value:e.data}}_regex(e,r,n){return this.refinement(s=>e.test(s),{validation:r,code:W.invalid_string,...ae.errToObj(n)})}_addCheck(e){return new vn({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...ae.errToObj(e)})}url(e){return this._addCheck({kind:"url",...ae.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...ae.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...ae.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...ae.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...ae.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...ae.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...ae.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...ae.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...ae.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...ae.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...ae.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...ae.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...ae.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...ae.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...ae.errToObj(e)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...ae.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r==null?void 0:r.position,...ae.errToObj(r==null?void 0:r.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...ae.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...ae.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...ae.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...ae.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...ae.errToObj(r)})}nonempty(e){return this.min(1,ae.errToObj(e))}trim(){return new vn({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new vn({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new vn({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}vn.create=t=>new vn({checks:[],typeName:he.ZodString,coerce:(t==null?void 0:t.coerce)??!1,...xe(t)});function Sz(t,e){const r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,s=r>n?r:n,i=Number.parseInt(t.toFixed(s).replace(".","")),a=Number.parseInt(e.toFixed(s).replace(".",""));return i%a/10**s}class vi extends Se{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==X.number){const i=this._getOrReturnCtx(e);return J(i,{code:W.invalid_type,expected:X.number,received:i.parsedType}),de}let n;const s=new Kt;for(const i of this._def.checks)i.kind==="int"?Pe.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),J(n,{code:W.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(n=this._getOrReturnCtx(e,n),J(n,{code:W.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(n=this._getOrReturnCtx(e,n),J(n,{code:W.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?Sz(e.data,i.value)!==0&&(n=this._getOrReturnCtx(e,n),J(n,{code:W.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),J(n,{code:W.not_finite,message:i.message}),s.dirty()):Pe.assertNever(i);return{status:s.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,ae.toString(r))}gt(e,r){return this.setLimit("min",e,!1,ae.toString(r))}lte(e,r){return this.setLimit("max",e,!0,ae.toString(r))}lt(e,r){return this.setLimit("max",e,!1,ae.toString(r))}setLimit(e,r,n,s){return new vi({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:ae.toString(s)}]})}_addCheck(e){return new vi({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:ae.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ae.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ae.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ae.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ae.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:ae.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:ae.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ae.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ae.toString(e)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Pe.isInteger(e.value))}get isFinite(){let e=null,r=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}}vi.create=t=>new vi({checks:[],typeName:he.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...xe(t)});class xi extends Se{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==X.bigint)return this._getInvalidInput(e);let n;const s=new Kt;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(n=this._getOrReturnCtx(e,n),J(n,{code:W.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(n=this._getOrReturnCtx(e,n),J(n,{code:W.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),J(n,{code:W.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):Pe.assertNever(i);return{status:s.value,value:e.data}}_getInvalidInput(e){const r=this._getOrReturnCtx(e);return J(r,{code:W.invalid_type,expected:X.bigint,received:r.parsedType}),de}gte(e,r){return this.setLimit("min",e,!0,ae.toString(r))}gt(e,r){return this.setLimit("min",e,!1,ae.toString(r))}lte(e,r){return this.setLimit("max",e,!0,ae.toString(r))}lt(e,r){return this.setLimit("max",e,!1,ae.toString(r))}setLimit(e,r,n,s){return new xi({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:ae.toString(s)}]})}_addCheck(e){return new xi({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ae.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ae.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ae.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ae.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:ae.toString(r)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}xi.create=t=>new xi({checks:[],typeName:he.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,...xe(t)});class Tc extends Se{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==X.boolean){const n=this._getOrReturnCtx(e);return J(n,{code:W.invalid_type,expected:X.boolean,received:n.parsedType}),de}return dr(e.data)}}Tc.create=t=>new Tc({typeName:he.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...xe(t)});class ga extends Se{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==X.date){const i=this._getOrReturnCtx(e);return J(i,{code:W.invalid_type,expected:X.date,received:i.parsedType}),de}if(Number.isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return J(i,{code:W.invalid_date}),de}const n=new Kt;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),J(s,{code:W.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),n.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),J(s,{code:W.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),n.dirty()):Pe.assertNever(i);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new ga({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:ae.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:ae.toString(r)})}get minDate(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}}ga.create=t=>new ga({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:he.ZodDate,...xe(t)});class xf extends Se{_parse(e){if(this._getType(e)!==X.symbol){const n=this._getOrReturnCtx(e);return J(n,{code:W.invalid_type,expected:X.symbol,received:n.parsedType}),de}return dr(e.data)}}xf.create=t=>new xf({typeName:he.ZodSymbol,...xe(t)});class Ac extends Se{_parse(e){if(this._getType(e)!==X.undefined){const n=this._getOrReturnCtx(e);return J(n,{code:W.invalid_type,expected:X.undefined,received:n.parsedType}),de}return dr(e.data)}}Ac.create=t=>new Ac({typeName:he.ZodUndefined,...xe(t)});class Oc extends Se{_parse(e){if(this._getType(e)!==X.null){const n=this._getOrReturnCtx(e);return J(n,{code:W.invalid_type,expected:X.null,received:n.parsedType}),de}return dr(e.data)}}Oc.create=t=>new Oc({typeName:he.ZodNull,...xe(t)});class Go extends Se{constructor(){super(...arguments),this._any=!0}_parse(e){return dr(e.data)}}Go.create=t=>new Go({typeName:he.ZodAny,...xe(t)});class na extends Se{constructor(){super(...arguments),this._unknown=!0}_parse(e){return dr(e.data)}}na.create=t=>new na({typeName:he.ZodUnknown,...xe(t)});class js extends Se{_parse(e){const r=this._getOrReturnCtx(e);return J(r,{code:W.invalid_type,expected:X.never,received:r.parsedType}),de}}js.create=t=>new js({typeName:he.ZodNever,...xe(t)});class wf extends Se{_parse(e){if(this._getType(e)!==X.undefined){const n=this._getOrReturnCtx(e);return J(n,{code:W.invalid_type,expected:X.void,received:n.parsedType}),de}return dr(e.data)}}wf.create=t=>new wf({typeName:he.ZodVoid,...xe(t)});class bn extends Se{_parse(e){const{ctx:r,status:n}=this._processInputParams(e),s=this._def;if(r.parsedType!==X.array)return J(r,{code:W.invalid_type,expected:X.array,received:r.parsedType}),de;if(s.exactLength!==null){const a=r.data.length>s.exactLength.value,l=r.data.length<s.exactLength.value;(a||l)&&(J(r,{code:a?W.too_big:W.too_small,minimum:l?s.exactLength.value:void 0,maximum:a?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),n.dirty())}if(s.minLength!==null&&r.data.length<s.minLength.value&&(J(r,{code:W.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),n.dirty()),s.maxLength!==null&&r.data.length>s.maxLength.value&&(J(r,{code:W.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((a,l)=>s.type._parseAsync(new Qn(r,a,r.path,l)))).then(a=>Kt.mergeArray(n,a));const i=[...r.data].map((a,l)=>s.type._parseSync(new Qn(r,a,r.path,l)));return Kt.mergeArray(n,i)}get element(){return this._def.type}min(e,r){return new bn({...this._def,minLength:{value:e,message:ae.toString(r)}})}max(e,r){return new bn({...this._def,maxLength:{value:e,message:ae.toString(r)}})}length(e,r){return new bn({...this._def,exactLength:{value:e,message:ae.toString(r)}})}nonempty(e){return this.min(1,e)}}bn.create=(t,e)=>new bn({type:t,minLength:null,maxLength:null,exactLength:null,typeName:he.ZodArray,...xe(e)});function $a(t){if(t instanceof it){const e={};for(const r in t.shape){const n=t.shape[r];e[r]=Kn.create($a(n))}return new it({...t._def,shape:()=>e})}else return t instanceof bn?new bn({...t._def,type:$a(t.element)}):t instanceof Kn?Kn.create($a(t.unwrap())):t instanceof bi?bi.create($a(t.unwrap())):t instanceof Yn?Yn.create(t.items.map(e=>$a(e))):t}class it extends Se{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),r=Pe.objectKeys(e);return this._cached={shape:e,keys:r},this._cached}_parse(e){if(this._getType(e)!==X.object){const u=this._getOrReturnCtx(e);return J(u,{code:W.invalid_type,expected:X.object,received:u.parsedType}),de}const{status:n,ctx:s}=this._processInputParams(e),{shape:i,keys:a}=this._getCached(),l=[];if(!(this._def.catchall instanceof js&&this._def.unknownKeys==="strip"))for(const u in s.data)a.includes(u)||l.push(u);const c=[];for(const u of a){const d=i[u],f=s.data[u];c.push({key:{status:"valid",value:u},value:d._parse(new Qn(s,f,s.path,u)),alwaysSet:u in s.data})}if(this._def.catchall instanceof js){const u=this._def.unknownKeys;if(u==="passthrough")for(const d of l)c.push({key:{status:"valid",value:d},value:{status:"valid",value:s.data[d]}});else if(u==="strict")l.length>0&&(J(s,{code:W.unrecognized_keys,keys:l}),n.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const d of l){const f=s.data[d];c.push({key:{status:"valid",value:d},value:u._parse(new Qn(s,f,s.path,d)),alwaysSet:d in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const u=[];for(const d of c){const f=await d.key,h=await d.value;u.push({key:f,value:h,alwaysSet:d.alwaysSet})}return u}).then(u=>Kt.mergeObjectSync(n,u)):Kt.mergeObjectSync(n,c)}get shape(){return this._def.shape()}strict(e){return ae.errToObj,new it({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,n)=>{var i,a;const s=((a=(i=this._def).errorMap)==null?void 0:a.call(i,r,n).message)??n.defaultError;return r.code==="unrecognized_keys"?{message:ae.errToObj(e).message??s}:{message:s}}}:{}})}strip(){return new it({...this._def,unknownKeys:"strip"})}passthrough(){return new it({...this._def,unknownKeys:"passthrough"})}extend(e){return new it({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new it({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:he.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new it({...this._def,catchall:e})}pick(e){const r={};for(const n of Pe.objectKeys(e))e[n]&&this.shape[n]&&(r[n]=this.shape[n]);return new it({...this._def,shape:()=>r})}omit(e){const r={};for(const n of Pe.objectKeys(this.shape))e[n]||(r[n]=this.shape[n]);return new it({...this._def,shape:()=>r})}deepPartial(){return $a(this)}partial(e){const r={};for(const n of Pe.objectKeys(this.shape)){const s=this.shape[n];e&&!e[n]?r[n]=s:r[n]=s.optional()}return new it({...this._def,shape:()=>r})}required(e){const r={};for(const n of Pe.objectKeys(this.shape))if(e&&!e[n])r[n]=this.shape[n];else{let i=this.shape[n];for(;i instanceof Kn;)i=i._def.innerType;r[n]=i}return new it({...this._def,shape:()=>r})}keyof(){return zA(Pe.objectKeys(this.shape))}}it.create=(t,e)=>new it({shape:()=>t,unknownKeys:"strip",catchall:js.create(),typeName:he.ZodObject,...xe(e)});it.strictCreate=(t,e)=>new it({shape:()=>t,unknownKeys:"strict",catchall:js.create(),typeName:he.ZodObject,...xe(e)});it.lazycreate=(t,e)=>new it({shape:t,unknownKeys:"strip",catchall:js.create(),typeName:he.ZodObject,...xe(e)});class Rc extends Se{_parse(e){const{ctx:r}=this._processInputParams(e),n=this._def.options;function s(i){for(const l of i)if(l.result.status==="valid")return l.result;for(const l of i)if(l.result.status==="dirty")return r.common.issues.push(...l.ctx.common.issues),l.result;const a=i.map(l=>new Fr(l.ctx.common.issues));return J(r,{code:W.invalid_union,unionErrors:a}),de}if(r.common.async)return Promise.all(n.map(async i=>{const a={...r,common:{...r.common,issues:[]},parent:null};return{result:await i._parseAsync({data:r.data,path:r.path,parent:a}),ctx:a}})).then(s);{let i;const a=[];for(const c of n){const u={...r,common:{...r.common,issues:[]},parent:null},d=c._parseSync({data:r.data,path:r.path,parent:u});if(d.status==="valid")return d;d.status==="dirty"&&!i&&(i={result:d,ctx:u}),u.common.issues.length&&a.push(u.common.issues)}if(i)return r.common.issues.push(...i.ctx.common.issues),i.result;const l=a.map(c=>new Fr(c));return J(r,{code:W.invalid_union,unionErrors:l}),de}}get options(){return this._def.options}}Rc.create=(t,e)=>new Rc({options:t,typeName:he.ZodUnion,...xe(e)});const as=t=>t instanceof Mc?as(t.schema):t instanceof kn?as(t.innerType()):t instanceof Lc?[t.value]:t instanceof wi?t.options:t instanceof Fc?Pe.objectValues(t.enum):t instanceof $c?as(t._def.innerType):t instanceof Ac?[void 0]:t instanceof Oc?[null]:t instanceof Kn?[void 0,...as(t.unwrap())]:t instanceof bi?[null,...as(t.unwrap())]:t instanceof bv||t instanceof Bc?as(t.unwrap()):t instanceof Uc?as(t._def.innerType):[];class hh extends Se{_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==X.object)return J(r,{code:W.invalid_type,expected:X.object,received:r.parsedType}),de;const n=this.discriminator,s=r.data[n],i=this.optionsMap.get(s);return i?r.common.async?i._parseAsync({data:r.data,path:r.path,parent:r}):i._parseSync({data:r.data,path:r.path,parent:r}):(J(r,{code:W.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),de)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){const s=new Map;for(const i of r){const a=as(i.shape[e]);if(!a.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const l of a){if(s.has(l))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(l)}`);s.set(l,i)}}return new hh({typeName:he.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:s,...xe(n)})}}function Cg(t,e){const r=us(t),n=us(e);if(t===e)return{valid:!0,data:t};if(r===X.object&&n===X.object){const s=Pe.objectKeys(e),i=Pe.objectKeys(t).filter(l=>s.indexOf(l)!==-1),a={...t,...e};for(const l of i){const c=Cg(t[l],e[l]);if(!c.valid)return{valid:!1};a[l]=c.data}return{valid:!0,data:a}}else if(r===X.array&&n===X.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const a=t[i],l=e[i],c=Cg(a,l);if(!c.valid)return{valid:!1};s.push(c.data)}return{valid:!0,data:s}}else return r===X.date&&n===X.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Ic extends Se{_parse(e){const{status:r,ctx:n}=this._processInputParams(e),s=(i,a)=>{if(kg(i)||kg(a))return de;const l=Cg(i.value,a.value);return l.valid?((Ng(i)||Ng(a))&&r.dirty(),{status:r.value,value:l.data}):(J(n,{code:W.invalid_intersection_types}),de)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([i,a])=>s(i,a)):s(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}Ic.create=(t,e,r)=>new Ic({left:t,right:e,typeName:he.ZodIntersection,...xe(r)});class Yn extends Se{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==X.array)return J(n,{code:W.invalid_type,expected:X.array,received:n.parsedType}),de;if(n.data.length<this._def.items.length)return J(n,{code:W.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),de;!this._def.rest&&n.data.length>this._def.items.length&&(J(n,{code:W.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const i=[...n.data].map((a,l)=>{const c=this._def.items[l]||this._def.rest;return c?c._parse(new Qn(n,a,n.path,l)):null}).filter(a=>!!a);return n.common.async?Promise.all(i).then(a=>Kt.mergeArray(r,a)):Kt.mergeArray(r,i)}get items(){return this._def.items}rest(e){return new Yn({...this._def,rest:e})}}Yn.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Yn({items:t,typeName:he.ZodTuple,rest:null,...xe(e)})};class Dc extends Se{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==X.object)return J(n,{code:W.invalid_type,expected:X.object,received:n.parsedType}),de;const s=[],i=this._def.keyType,a=this._def.valueType;for(const l in n.data)s.push({key:i._parse(new Qn(n,l,n.path,l)),value:a._parse(new Qn(n,n.data[l],n.path,l)),alwaysSet:l in n.data});return n.common.async?Kt.mergeObjectAsync(r,s):Kt.mergeObjectSync(r,s)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof Se?new Dc({keyType:e,valueType:r,typeName:he.ZodRecord,...xe(n)}):new Dc({keyType:vn.create(),valueType:e,typeName:he.ZodRecord,...xe(r)})}}class bf extends Se{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==X.map)return J(n,{code:W.invalid_type,expected:X.map,received:n.parsedType}),de;const s=this._def.keyType,i=this._def.valueType,a=[...n.data.entries()].map(([l,c],u)=>({key:s._parse(new Qn(n,l,n.path,[u,"key"])),value:i._parse(new Qn(n,c,n.path,[u,"value"]))}));if(n.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const c of a){const u=await c.key,d=await c.value;if(u.status==="aborted"||d.status==="aborted")return de;(u.status==="dirty"||d.status==="dirty")&&r.dirty(),l.set(u.value,d.value)}return{status:r.value,value:l}})}else{const l=new Map;for(const c of a){const u=c.key,d=c.value;if(u.status==="aborted"||d.status==="aborted")return de;(u.status==="dirty"||d.status==="dirty")&&r.dirty(),l.set(u.value,d.value)}return{status:r.value,value:l}}}}bf.create=(t,e,r)=>new bf({valueType:e,keyType:t,typeName:he.ZodMap,...xe(r)});class ya extends Se{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==X.set)return J(n,{code:W.invalid_type,expected:X.set,received:n.parsedType}),de;const s=this._def;s.minSize!==null&&n.data.size<s.minSize.value&&(J(n,{code:W.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),r.dirty()),s.maxSize!==null&&n.data.size>s.maxSize.value&&(J(n,{code:W.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),r.dirty());const i=this._def.valueType;function a(c){const u=new Set;for(const d of c){if(d.status==="aborted")return de;d.status==="dirty"&&r.dirty(),u.add(d.value)}return{status:r.value,value:u}}const l=[...n.data.values()].map((c,u)=>i._parse(new Qn(n,c,n.path,u)));return n.common.async?Promise.all(l).then(c=>a(c)):a(l)}min(e,r){return new ya({...this._def,minSize:{value:e,message:ae.toString(r)}})}max(e,r){return new ya({...this._def,maxSize:{value:e,message:ae.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}}ya.create=(t,e)=>new ya({valueType:t,minSize:null,maxSize:null,typeName:he.ZodSet,...xe(e)});class wo extends Se{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==X.function)return J(r,{code:W.invalid_type,expected:X.function,received:r.parsedType}),de;function n(l,c){return vf({data:l,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,yf(),Ko].filter(u=>!!u),issueData:{code:W.invalid_arguments,argumentsError:c}})}function s(l,c){return vf({data:l,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,yf(),Ko].filter(u=>!!u),issueData:{code:W.invalid_return_type,returnTypeError:c}})}const i={errorMap:r.common.contextualErrorMap},a=r.data;if(this._def.returns instanceof Qo){const l=this;return dr(async function(...c){const u=new Fr([]),d=await l._def.args.parseAsync(c,i).catch(v=>{throw u.addIssue(n(c,v)),u}),f=await Reflect.apply(a,this,d);return await l._def.returns._def.type.parseAsync(f,i).catch(v=>{throw u.addIssue(s(f,v)),u})})}else{const l=this;return dr(function(...c){const u=l._def.args.safeParse(c,i);if(!u.success)throw new Fr([n(c,u.error)]);const d=Reflect.apply(a,this,u.data),f=l._def.returns.safeParse(d,i);if(!f.success)throw new Fr([s(d,f.error)]);return f.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new wo({...this._def,args:Yn.create(e).rest(na.create())})}returns(e){return new wo({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new wo({args:e||Yn.create([]).rest(na.create()),returns:r||na.create(),typeName:he.ZodFunction,...xe(n)})}}class Mc extends Se{get schema(){return this._def.getter()}_parse(e){const{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}}Mc.create=(t,e)=>new Mc({getter:t,typeName:he.ZodLazy,...xe(e)});class Lc extends Se{_parse(e){if(e.data!==this._def.value){const r=this._getOrReturnCtx(e);return J(r,{received:r.data,code:W.invalid_literal,expected:this._def.value}),de}return{status:"valid",value:e.data}}get value(){return this._def.value}}Lc.create=(t,e)=>new Lc({value:t,typeName:he.ZodLiteral,...xe(e)});function zA(t,e){return new wi({values:t,typeName:he.ZodEnum,...xe(e)})}class wi extends Se{_parse(e){if(typeof e.data!="string"){const r=this._getOrReturnCtx(e),n=this._def.values;return J(r,{expected:Pe.joinValues(n),received:r.parsedType,code:W.invalid_type}),de}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const r=this._getOrReturnCtx(e),n=this._def.values;return J(r,{received:r.data,code:W.invalid_enum_value,options:n}),de}return dr(e.data)}get options(){return this._def.values}get enum(){const e={};for(const r of this._def.values)e[r]=r;return e}get Values(){const e={};for(const r of this._def.values)e[r]=r;return e}get Enum(){const e={};for(const r of this._def.values)e[r]=r;return e}extract(e,r=this._def){return wi.create(e,{...this._def,...r})}exclude(e,r=this._def){return wi.create(this.options.filter(n=>!e.includes(n)),{...this._def,...r})}}wi.create=zA;class Fc extends Se{_parse(e){const r=Pe.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==X.string&&n.parsedType!==X.number){const s=Pe.objectValues(r);return J(n,{expected:Pe.joinValues(s),received:n.parsedType,code:W.invalid_type}),de}if(this._cache||(this._cache=new Set(Pe.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const s=Pe.objectValues(r);return J(n,{received:n.data,code:W.invalid_enum_value,options:s}),de}return dr(e.data)}get enum(){return this._def.values}}Fc.create=(t,e)=>new Fc({values:t,typeName:he.ZodNativeEnum,...xe(e)});class Qo extends Se{unwrap(){return this._def.type}_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==X.promise&&r.common.async===!1)return J(r,{code:W.invalid_type,expected:X.promise,received:r.parsedType}),de;const n=r.parsedType===X.promise?r.data:Promise.resolve(r.data);return dr(n.then(s=>this._def.type.parseAsync(s,{path:r.path,errorMap:r.common.contextualErrorMap})))}}Qo.create=(t,e)=>new Qo({type:t,typeName:he.ZodPromise,...xe(e)});class kn extends Se{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===he.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:r,ctx:n}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:a=>{J(n,a),a.fatal?r.abort():r.dirty()},get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const a=s.transform(n.data,i);if(n.common.async)return Promise.resolve(a).then(async l=>{if(r.value==="aborted")return de;const c=await this._def.schema._parseAsync({data:l,path:n.path,parent:n});return c.status==="aborted"?de:c.status==="dirty"||r.value==="dirty"?no(c.value):c});{if(r.value==="aborted")return de;const l=this._def.schema._parseSync({data:a,path:n.path,parent:n});return l.status==="aborted"?de:l.status==="dirty"||r.value==="dirty"?no(l.value):l}}if(s.type==="refinement"){const a=l=>{const c=s.refinement(l,i);if(n.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(n.common.async===!1){const l=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return l.status==="aborted"?de:(l.status==="dirty"&&r.dirty(),a(l.value),{status:r.value,value:l.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(l=>l.status==="aborted"?de:(l.status==="dirty"&&r.dirty(),a(l.value).then(()=>({status:r.value,value:l.value}))))}if(s.type==="transform")if(n.common.async===!1){const a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!pa(a))return de;const l=s.transform(a.value,i);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:l}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>pa(a)?Promise.resolve(s.transform(a.value,i)).then(l=>({status:r.value,value:l})):de);Pe.assertNever(s)}}kn.create=(t,e,r)=>new kn({schema:t,typeName:he.ZodEffects,effect:e,...xe(r)});kn.createWithPreprocess=(t,e,r)=>new kn({schema:e,effect:{type:"preprocess",transform:t},typeName:he.ZodEffects,...xe(r)});class Kn extends Se{_parse(e){return this._getType(e)===X.undefined?dr(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Kn.create=(t,e)=>new Kn({innerType:t,typeName:he.ZodOptional,...xe(e)});class bi extends Se{_parse(e){return this._getType(e)===X.null?dr(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}bi.create=(t,e)=>new bi({innerType:t,typeName:he.ZodNullable,...xe(e)});class $c extends Se{_parse(e){const{ctx:r}=this._processInputParams(e);let n=r.data;return r.parsedType===X.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}}$c.create=(t,e)=>new $c({innerType:t,typeName:he.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...xe(e)});class Uc extends Se{_parse(e){const{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},s=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return Pc(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Fr(n.common.issues)},input:n.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Fr(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}Uc.create=(t,e)=>new Uc({innerType:t,typeName:he.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...xe(e)});class _f extends Se{_parse(e){if(this._getType(e)!==X.nan){const n=this._getOrReturnCtx(e);return J(n,{code:W.invalid_type,expected:X.nan,received:n.parsedType}),de}return{status:"valid",value:e.data}}}_f.create=t=>new _f({typeName:he.ZodNaN,...xe(t)});const jz=Symbol("zod_brand");class bv extends Se{_parse(e){const{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}}class fu extends Se{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?de:i.status==="dirty"?(r.dirty(),no(i.value)):this._def.out._parseAsync({data:i.value,path:n.path,parent:n})})();{const s=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?de:s.status==="dirty"?(r.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:n.path,parent:n})}}static create(e,r){return new fu({in:e,out:r,typeName:he.ZodPipeline})}}class Bc extends Se{_parse(e){const r=this._def.innerType._parse(e),n=s=>(pa(s)&&(s.value=Object.freeze(s.value)),s);return Pc(r)?r.then(s=>n(s)):n(r)}unwrap(){return this._def.innerType}}Bc.create=(t,e)=>new Bc({innerType:t,typeName:he.ZodReadonly,...xe(e)});function Vw(t,e){const r=typeof t=="function"?t(e):typeof t=="string"?{message:t}:t;return typeof r=="string"?{message:r}:r}function _v(t,e={},r){return t?Go.create().superRefine((n,s)=>{const i=t(n);if(i instanceof Promise)return i.then(a=>{if(!a){const l=Vw(e,n),c=l.fatal??r??!0;s.addIssue({code:"custom",...l,fatal:c})}});if(!i){const a=Vw(e,n),l=a.fatal??r??!0;s.addIssue({code:"custom",...a,fatal:l})}}):Go.create()}const kz={object:it.lazycreate};var he;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(he||(he={}));const Nz=(t,e={message:`Input not instance of ${t.name}`})=>_v(r=>r instanceof t,e),ke=vn.create,gt=vi.create,Cz=_f.create,Ez=xi.create,Sv=Tc.create,VA=ga.create,Pz=xf.create,Tz=Ac.create,WA=Oc.create,Sf=Go.create,Az=na.create,Oz=js.create,Rz=wf.create,ks=bn.create,hu=it.create,Iz=it.strictCreate,jv=Rc.create,Dz=hh.create,Mz=Ic.create,Lz=Yn.create,qA=Dc.create,Fz=bf.create,$z=ya.create,Uz=wo.create,Bz=Mc.create,zz=Lc.create,kv=wi.create,Vz=Fc.create,Wz=Qo.create,Ww=kn.create,qz=Kn.create,Hz=bi.create,Kz=kn.createWithPreprocess,Gz=fu.create,Qz=()=>ke().optional(),Yz=()=>gt().optional(),Jz=()=>Sv().optional(),mh={string:t=>vn.create({...t,coerce:!0}),number:t=>vi.create({...t,coerce:!0}),boolean:t=>Tc.create({...t,coerce:!0}),bigint:t=>xi.create({...t,coerce:!0}),date:t=>ga.create({...t,coerce:!0})},Zz=de,Xz=Object.freeze(Object.defineProperty({__proto__:null,BRAND:jz,DIRTY:no,EMPTY_PATH:rz,INVALID:de,NEVER:Zz,OK:dr,ParseStatus:Kt,Schema:Se,ZodAny:Go,ZodArray:bn,ZodBigInt:xi,ZodBoolean:Tc,ZodBranded:bv,ZodCatch:Uc,ZodDate:ga,ZodDefault:$c,ZodDiscriminatedUnion:hh,ZodEffects:kn,ZodEnum:wi,ZodError:Fr,get ZodFirstPartyTypeKind(){return he},ZodFunction:wo,ZodIntersection:Ic,ZodIssueCode:W,ZodLazy:Mc,ZodLiteral:Lc,ZodMap:bf,ZodNaN:_f,ZodNativeEnum:Fc,ZodNever:js,ZodNull:Oc,ZodNullable:bi,ZodNumber:vi,ZodObject:it,ZodOptional:Kn,ZodParsedType:X,ZodPipeline:fu,ZodPromise:Qo,ZodReadonly:Bc,ZodRecord:Dc,ZodSchema:Se,ZodSet:ya,ZodString:vn,ZodSymbol:xf,ZodTransformer:kn,ZodTuple:Yn,ZodType:Se,ZodUndefined:Ac,ZodUnion:Rc,ZodUnknown:na,ZodVoid:wf,addIssueToContext:J,any:Sf,array:ks,bigint:Ez,boolean:Sv,coerce:mh,custom:_v,date:VA,datetimeRegex:BA,defaultErrorMap:Ko,discriminatedUnion:Dz,effect:Ww,enum:kv,function:Uz,getErrorMap:yf,getParsedType:us,instanceof:Nz,intersection:Mz,isAborted:kg,isAsync:Pc,isDirty:Ng,isValid:pa,late:kz,lazy:Bz,literal:zz,makeIssue:vf,map:Fz,nan:Cz,nativeEnum:Vz,never:Oz,null:WA,nullable:Hz,number:gt,object:hu,get objectUtil(){return jg},oboolean:Jz,onumber:Yz,optional:qz,ostring:Qz,pipeline:Gz,preprocess:Kz,promise:Wz,quotelessJson:ez,record:qA,set:$z,setErrorMap:tz,strictObject:Iz,string:ke,symbol:Pz,transformer:Ww,tuple:Lz,undefined:Tz,union:jv,unknown:Az,get util(){return Pe},void:Rz},Symbol.toStringTag,{value:"Module"})),st={INT8_MIN:-128,INT8_MAX:127,INT8_UNSIGNED_MAX:255,INT16_MIN:-32768,INT16_MAX:32767,INT16_UNSIGNED_MAX:65535,INT24_MIN:-8388608,INT24_MAX:8388607,INT24_UNSIGNED_MAX:16777215,INT32_MIN:-2147483648,INT32_MAX:2147483647,INT32_UNSIGNED_MAX:4294967295,INT48_MIN:-0x800000000000,INT48_MAX:0x7fffffffffff,INT48_UNSIGNED_MAX:0xffffffffffff,INT64_MIN:-9223372036854775808n,INT64_MAX:9223372036854775807n,INT64_UNSIGNED_MAX:18446744073709551615n};function ht(t,e){return e.includes(t.columnType)}function eV(t){return"enumValues"in t&&Array.isArray(t.enumValues)&&t.enumValues.length>0}const tV=jv([ke(),gt(),Sv(),WA()]),rV=jv([tV,qA(Sf()),ks(Sf())]),nV=_v(t=>t instanceof Buffer);function HA(t,e){const r=(e==null?void 0:e.zodInstance)??Xz,n=(e==null?void 0:e.coerce)??{};let s;return eV(t)&&(s=t.enumValues.length?r.enum(t.enumValues):r.string()),s||(ht(t,["PgGeometry","PgPointTuple"])?s=r.tuple([r.number(),r.number()]):ht(t,["PgGeometryObject","PgPointObject"])?s=r.object({x:r.number(),y:r.number()}):ht(t,["PgHalfVector","PgVector"])?(s=r.array(r.number()),s=t.dimensions?s.length(t.dimensions):s):ht(t,["PgLine"])?s=r.tuple([r.number(),r.number(),r.number()]):ht(t,["PgLineABC"])?s=r.object({a:r.number(),b:r.number(),c:r.number()}):ht(t,["PgArray"])?(s=r.array(HA(t.baseColumn,r)),s=t.size?s.length(t.size):s):t.dataType==="array"?s=r.array(r.any()):t.dataType==="number"?s=sV(t,r,n):t.dataType==="bigint"?s=iV(t,r,n):t.dataType==="boolean"?s=n===!0||n.boolean?r.coerce.boolean():r.boolean():t.dataType==="date"?s=n===!0||n.date?r.coerce.date():r.date():t.dataType==="string"?s=aV(t,r,n):t.dataType==="json"?s=rV:t.dataType==="custom"?s=r.any():t.dataType==="buffer"&&(s=nV)),s||(s=r.any()),s}function sV(t,e,r){let n=t.getSQLType().includes("unsigned"),s,i,a=!1;ht(t,["MySqlTinyInt","SingleStoreTinyInt"])?(s=n?0:st.INT8_MIN,i=n?st.INT8_UNSIGNED_MAX:st.INT8_MAX,a=!0):ht(t,["PgSmallInt","PgSmallSerial","MySqlSmallInt","SingleStoreSmallInt"])?(s=n?0:st.INT16_MIN,i=n?st.INT16_UNSIGNED_MAX:st.INT16_MAX,a=!0):ht(t,["PgReal","MySqlFloat","MySqlMediumInt","SingleStoreMediumInt","SingleStoreFloat"])?(s=n?0:st.INT24_MIN,i=n?st.INT24_UNSIGNED_MAX:st.INT24_MAX,a=ht(t,["MySqlMediumInt","SingleStoreMediumInt"])):ht(t,["PgInteger","PgSerial","MySqlInt","SingleStoreInt"])?(s=n?0:st.INT32_MIN,i=n?st.INT32_UNSIGNED_MAX:st.INT32_MAX,a=!0):ht(t,["PgDoublePrecision","MySqlReal","MySqlDouble","SingleStoreReal","SingleStoreDouble","SQLiteReal"])?(s=n?0:st.INT48_MIN,i=n?st.INT48_UNSIGNED_MAX:st.INT48_MAX):ht(t,["PgBigInt53","PgBigSerial53","MySqlBigInt53","MySqlSerial","SingleStoreBigInt53","SingleStoreSerial","SQLiteInteger"])?(n=n||ht(t,["MySqlSerial","SingleStoreSerial"]),s=n?0:Number.MIN_SAFE_INTEGER,i=Number.MAX_SAFE_INTEGER,a=!0):ht(t,["MySqlYear","SingleStoreYear"])?(s=1901,i=2155,a=!0):(s=Number.MIN_SAFE_INTEGER,i=Number.MAX_SAFE_INTEGER);let l=r===!0||r!=null&&r.number?e.coerce.number():e.number();return l=l.min(s).max(i),a?l.int():l}function iV(t,e,r){const n=t.getSQLType().includes("unsigned"),s=n?0n:st.INT64_MIN,i=n?st.INT64_UNSIGNED_MAX:st.INT64_MAX;return(r===!0||r!=null&&r.bigint?e.coerce.bigint():e.bigint()).min(s).max(i)}function aV(t,e,r){if(ht(t,["PgUUID"]))return e.string().uuid();let n,s,i=!1;ht(t,["PgVarchar","SQLiteText"])?n=t.length:ht(t,["MySqlVarChar","SingleStoreVarChar"])?n=t.length??st.INT16_UNSIGNED_MAX:ht(t,["MySqlText","SingleStoreText"])&&(t.textType==="longtext"?n=st.INT32_UNSIGNED_MAX:t.textType==="mediumtext"?n=st.INT24_UNSIGNED_MAX:t.textType==="text"?n=st.INT16_UNSIGNED_MAX:n=st.INT8_UNSIGNED_MAX),ht(t,["PgChar","MySqlChar","SingleStoreChar"])&&(n=t.length,i=!0),ht(t,["PgBinaryVector"])&&(s=/^[01]+$/,n=t.dimensions);let a=r===!0||r!=null&&r.string?e.coerce.string():e.string();return a=s?a.regex(s):a,n&&i?a.length(n):n?a.max(n):a}function KA(t){return a2(t)?_B(t):SB(t)}function GA(t,e,r,n){const s={};for(const[i,a]of Object.entries(t)){if(!bt(a,Ho)&&!bt(a,ft)&&!bt(a,ft.Aliased)&&typeof a=="object"){const f=a2(a)||bB(a)?KA(a):a;s[i]=GA(f,e[i]??{},r,n);continue}const l=e[i];if(l!==void 0&&typeof l!="function"){s[i]=l;continue}const c=bt(a,Ho)?a:void 0,u=c?HA(c,n):Sf(),d=typeof l=="function"?l(u):u;r.never(c)||(s[i]=d,c&&(r.nullable(c)&&(s[i]=s[i].nullable()),r.optional(c)&&(s[i]=s[i].optional())))}return hu(s)}const oV={never:t=>{var e,r;return((e=t==null?void 0:t.generated)==null?void 0:e.type)==="always"||((r=t==null?void 0:t.generatedIdentity)==null?void 0:r.type)==="always"},optional:t=>!t.notNull||t.notNull&&t.hasDefault,nullable:t=>!t.notNull},Yt=(t,e)=>{const r=KA(t);return GA(r,{},oV)},lV=Qt("classes",{id:tn("id").primaryKey(),date:rt("date").notNull(),time:oe("time").notNull(),duration:ye("duration").notNull(),classType:oe("class_type").notNull(),instructor:oe("instructor").notNull(),trainingPartners:oe("training_partners").array(),techniquesFocused:oe("techniques_focused"),rollingPartners:oe("rolling_partners").array(),yourSubmissions:ye("your_submissions").default(0),partnerSubmissions:ye("partner_submissions").default(0),cardioRating:ye("cardio_rating"),userId:ye("user_id").references(()=>Cr.id),createdAt:rt("created_at").defaultNow()}),cV=Qt("videos",{id:tn("id").primaryKey(),title:oe("title").notNull(),description:oe("description"),url:oe("url").notNull(),category:oe("category").notNull(),tags:oe("tags").array(),isFavorite:ye("is_favorite").default(0),duration:oe("duration"),thumbnailUrl:oe("thumbnail_url"),createdAt:rt("created_at").defaultNow()}),QA=Qt("notes",{id:Ss("id").primaryKey().default(ma`gen_random_uuid()`),title:oe("title").notNull(),content:oe("content").notNull(),tags:oe("tags").array(),linkedClassId:ye("linked_class_id"),linkedVideoId:ye("linked_video_id"),userId:ye("user_id").notNull().references(()=>Cr.id),isShared:ye("is_shared").default(0),gymId:ye("gym_id").references(()=>Nv.id),sharedWithUsers:oe("shared_with_users").array(),videoUrl:oe("video_url"),videoFileName:oe("video_file_name"),videoFileSize:ye("video_file_size"),videoThumbnail:oe("video_thumbnail"),createdAt:rt("created_at").defaultNow(),updatedAt:rt("updated_at").defaultNow()},t=>({isSharedIdx:ec("notes_is_shared_idx").on(t.isShared),userIdIdx:ec("notes_user_id_idx").on(t.userId),gymIdIdx:ec("notes_gym_id_idx").on(t.gymId)})),uV=Qt("drawings",{id:tn("id").primaryKey(),title:oe("title").notNull(),canvasData:oe("canvas_data").notNull(),linkedNoteId:ye("linked_note_id"),linkedClassId:ye("linked_class_id"),userId:ye("user_id").references(()=>Cr.id),createdAt:rt("created_at").defaultNow()}),dV=Qt("belts",{id:tn("id").primaryKey(),belt:oe("belt").notNull(),stripes:ye("stripes").notNull().default(0),promotionDate:rt("promotion_date").notNull(),instructor:oe("instructor"),notes:oe("notes"),userId:ye("user_id").references(()=>Cr.id),createdAt:rt("created_at").defaultNow()}),Cr=Qt("users",{id:tn("id").primaryKey(),email:oe("email").unique().notNull(),password:oe("password"),firstName:oe("first_name"),lastName:oe("last_name"),subscriptionTier:oe("subscription_tier").default("free"),stripeCustomerId:oe("stripe_customer_id"),stripeSubscriptionId:oe("stripe_subscription_id"),subscriptionStatus:oe("subscription_status").default("free"),subscriptionPlan:oe("subscription_plan"),revenuecatCustomerId:oe("revenuecat_customer_id"),subscriptionExpiresAt:rt("subscription_expires_at"),gymApprovalStatus:oe("gym_approval_status").default("none"),classCount:ye("class_count").default(0),noteCount:ye("note_count").default(0),weeklyShareCount:ye("weekly_share_count").default(0),shareResetDate:rt("share_reset_date"),storageUsed:ye("storage_used").default(0),role:oe("role").default("user"),createdAt:rt("created_at").defaultNow(),supabaseUid:Ss("supabase_uid").unique()}),fV=Qt("profiles",{id:Ss("id").primaryKey()}),hV=Qt("auth_identities",{userId:ye("user_id").primaryKey().references(()=>Cr.id,{onDelete:"cascade"}),supabaseUid:Ss("supabase_uid").unique().notNull()}),mV=Qt("app_notes",{id:Ss("id").primaryKey().default(ma`gen_random_uuid()`),title:oe("title").notNull(),content:oe("content").notNull(),tags:oe("tags").array(),linkedClassId:ye("linked_class_id"),linkedVideoId:ye("linked_video_id"),userId:ye("user_id").notNull().references(()=>Cr.id,{onDelete:"cascade"}),isShared:ye("is_shared").default(0),sharedWithUsers:oe("shared_with_users").array(),videoUrl:oe("video_url"),videoFileName:oe("video_file_name"),videoFileSize:ye("video_file_size"),videoThumbnail:oe("video_thumbnail"),createdAt:rt("created_at").defaultNow(),updatedAt:rt("updated_at").defaultNow()}),pV=Qt("weekly_commitments",{id:tn("id").primaryKey(),weekStartDate:rt("week_start_date").notNull(),targetClasses:ye("target_classes").notNull(),completedClasses:ye("completed_classes").default(0),isCompleted:ye("is_completed").default(0),userId:ye("user_id").references(()=>Cr.id),createdAt:rt("created_at").defaultNow(),updatedAt:rt("updated_at").defaultNow()}),gV=Qt("training_videos",{id:tn("id").primaryKey(),title:oe("title").notNull(),description:oe("description"),videoUrl:oe("video_url").notNull(),thumbnailUrl:oe("thumbnail_url"),uploadedBy:ye("uploaded_by").references(()=>Cr.id).notNull(),isPublic:ye("is_public").default(1),tags:oe("tags").array(),category:oe("category"),duration:ye("duration"),views:ye("views").default(0),likes:ye("likes").default(0),createdAt:rt("created_at").defaultNow()}),yV=Qt("password_reset_tokens",{id:tn("id").primaryKey(),token:oe("token").notNull().unique(),userId:ye("user_id").references(()=>Cr.id).notNull(),expiresAt:rt("expires_at").notNull(),used:ye("used").default(0),createdAt:rt("created_at").defaultNow()}),vV=Qt("note_likes",{id:tn("id").primaryKey(),noteId:Ss("note_id").references(()=>QA.id).notNull(),userId:ye("user_id").references(()=>Cr.id).notNull(),createdAt:rt("created_at").defaultNow()},t=>({noteIdUserIdIdx:ec("note_likes_note_id_user_id_idx").on(t.noteId,t.userId),noteIdIdx:ec("note_likes_note_id_idx").on(t.noteId)})),xV=Qt("game_plans",{id:Ss("id").primaryKey().default(ma`gen_random_uuid()`),userId:ye("user_id").references(()=>Cr.id).notNull(),planName:oe("plan_name").notNull(),moveName:oe("move_name").notNull(),description:oe("description"),parentId:Ss("parent_id"),moveOrder:ye("move_order").default(0),createdAt:rt("created_at").defaultNow(),updatedAt:rt("updated_at").defaultNow()}),Nv=Qt("gyms",{id:tn("id").primaryKey(),name:oe("name").notNull(),code:oe("code").notNull().unique(),ownerId:ye("owner_id").references(()=>Cr.id).notNull(),createdAt:rt("created_at").defaultNow()}),wV=Qt("gym_memberships",{id:tn("id").primaryKey(),userId:ye("user_id").references(()=>Cr.id).notNull(),gymId:ye("gym_id").references(()=>Nv.id).notNull(),role:oe("role").notNull().default("member"),createdAt:rt("created_at").defaultNow()});Yt(lV).omit({id:!0,createdAt:!0}).extend({date:mh.date(),trainingPartners:ks(ke()).optional(),techniquesFocused:ke().optional()});Yt(cV).omit({id:!0,createdAt:!0}).extend({description:ke().optional(),tags:ks(ke()).optional(),isFavorite:gt().optional(),duration:ke().optional(),thumbnailUrl:ke().optional()});Yt(QA).omit({id:!0,createdAt:!0,updatedAt:!0}).extend({tags:ks(ke()).optional(),linkedClassId:gt().optional(),linkedVideoId:gt().optional(),userId:ke().optional(),isShared:gt().optional(),gymId:gt().optional(),sharedWithUsers:ks(ke()).optional()});Yt(uV).omit({id:!0,createdAt:!0}).extend({linkedNoteId:gt().optional(),linkedClassId:gt().optional()});const bV=Yt(dV).omit({id:!0,createdAt:!0}).extend({promotionDate:mh.date(),instructor:ke().optional(),notes:ke().optional()});Yt(Cr).omit({id:!0,createdAt:!0}).extend({email:ke().email(),password:ke().min(8),firstName:ke().optional(),lastName:ke().optional(),subscriptionStatus:kv(["free","premium","active","paused"]).optional(),subscriptionExpiresAt:VA().optional(),supabaseId:ke().optional()});Yt(fV);Yt(hV);Yt(mV).omit({id:!0,createdAt:!0,updatedAt:!0}).extend({tags:ks(ke()).optional(),linkedClassId:gt().optional(),linkedVideoId:gt().optional(),isShared:gt().optional(),sharedWithUsers:ks(ke()).optional()});Yt(pV).omit({id:!0,createdAt:!0}).extend({weekStartDate:mh.date(),targetClasses:gt().min(1).max(10),completedClasses:gt().default(0),isCompleted:gt().default(0)});Yt(gV).omit({id:!0,createdAt:!0}).extend({description:ke().optional(),thumbnailUrl:ke().optional(),tags:ks(ke()).optional(),category:ke().optional(),duration:gt().optional(),views:gt().default(0),likes:gt().default(0)});Yt(yV).omit({id:!0,createdAt:!0});Yt(vV).omit({id:!0,createdAt:!0});Yt(xV).omit({id:!0,userId:!0,createdAt:!0,updatedAt:!0}).extend({description:ke().optional(),parentId:ke().nullable().optional(),moveOrder:gt().optional()});Yt(Nv).omit({id:!0,createdAt:!0}).extend({code:ke().optional(),ownerId:gt().optional()});Yt(wV).omit({id:!0,createdAt:!0}).extend({role:kv(["admin","member"]).default("member")});var _V="Label",YA=y.forwardRef((t,e)=>o.jsx(Ne.label,{...t,ref:e,onMouseDown:r=>{var s;r.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));YA.displayName=_V;var JA=YA;const SV=My("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),ar=y.forwardRef(({className:t,...e},r)=>o.jsx(JA,{ref:r,className:fe(SV(),t),...e}));ar.displayName=JA.displayName;const jV=K8,ZA=y.createContext({}),Nl=({...t})=>o.jsx(ZA.Provider,{value:{name:t.name},children:o.jsx(J8,{...t})}),ph=()=>{const t=y.useContext(ZA),e=y.useContext(XA),{getFieldState:r,formState:n}=fh(),s=r(t.name,n);if(!t)throw new Error("useFormField should be used within <FormField>");const{id:i}=e;return{id:i,name:t.name,formItemId:`${i}-form-item`,formDescriptionId:`${i}-form-item-description`,formMessageId:`${i}-form-item-message`,...s}},XA=y.createContext({}),Ua=y.forwardRef(({className:t,...e},r)=>{const n=y.useId();return o.jsx(XA.Provider,{value:{id:n},children:o.jsx("div",{ref:r,className:fe("space-y-2",t),...e})})});Ua.displayName="FormItem";const Ba=y.forwardRef(({className:t,...e},r)=>{const{error:n,formItemId:s}=ph();return o.jsx(ar,{ref:r,className:fe(n&&"text-destructive",t),htmlFor:s,...e})});Ba.displayName="FormLabel";const za=y.forwardRef(({...t},e)=>{const{error:r,formItemId:n,formDescriptionId:s,formMessageId:i}=ph();return o.jsx(EC,{ref:e,id:n,"aria-describedby":r?`${s} ${i}`:`${s}`,"aria-invalid":!!r,...t})});za.displayName="FormControl";const kV=y.forwardRef(({className:t,...e},r)=>{const{formDescriptionId:n}=ph();return o.jsx("p",{ref:r,id:n,className:fe("text-sm text-muted-foreground",t),...e})});kV.displayName="FormDescription";const Va=y.forwardRef(({className:t,children:e,...r},n)=>{const{error:s,formMessageId:i}=ph(),a=s?String((s==null?void 0:s.message)??""):e;return a?o.jsx("p",{ref:n,id:i,className:fe("text-sm font-medium text-destructive",t),...r,children:a}):null});Va.displayName="FormMessage";function Re(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function Ur(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function nr(t,e){const r=Re(t);return isNaN(e)?Ur(t,NaN):(e&&r.setDate(r.getDate()+e),r)}function Nn(t,e){const r=Re(t);if(isNaN(e))return Ur(t,NaN);if(!e)return r;const n=r.getDate(),s=Ur(t,r.getTime());s.setMonth(r.getMonth()+e+1,0);const i=s.getDate();return n>=i?s:(r.setFullYear(s.getFullYear(),s.getMonth(),n),r)}const Cv=6048e5,NV=864e5;let CV={};function mu(){return CV}function Jn(t,e){var l,c,u,d;const r=mu(),n=(e==null?void 0:e.weekStartsOn)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,s=Re(t),i=s.getDay(),a=(i<n?7:0)+i-n;return s.setDate(s.getDate()-a),s.setHours(0,0,0,0),s}function va(t){return Jn(t,{weekStartsOn:1})}function eO(t){const e=Re(t),r=e.getFullYear(),n=Ur(t,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const s=va(n),i=Ur(t,0);i.setFullYear(r,0,4),i.setHours(0,0,0,0);const a=va(i);return e.getTime()>=s.getTime()?r+1:e.getTime()>=a.getTime()?r:r-1}function Yo(t){const e=Re(t);return e.setHours(0,0,0,0),e}function jf(t){const e=Re(t),r=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return r.setUTCFullYear(e.getFullYear()),+t-+r}function zn(t,e){const r=Yo(t),n=Yo(e),s=+r-jf(r),i=+n-jf(n);return Math.round((s-i)/NV)}function EV(t){const e=eO(t),r=Ur(t,0);return r.setFullYear(e,0,4),r.setHours(0,0,0,0),va(r)}function Eg(t,e){const r=e*7;return nr(t,r)}function PV(t,e){return Nn(t,e*12)}function TV(t){let e;return t.forEach(function(r){const n=Re(r);(e===void 0||e<n||isNaN(Number(n)))&&(e=n)}),e||new Date(NaN)}function AV(t){let e;return t.forEach(r=>{const n=Re(r);(!e||e>n||isNaN(+n))&&(e=n)}),e||new Date(NaN)}function _r(t,e){const r=Yo(t),n=Yo(e);return+r==+n}function Ev(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function OV(t){if(!Ev(t)&&typeof t!="number")return!1;const e=Re(t);return!isNaN(Number(e))}function zc(t,e){const r=Re(t),n=Re(e),s=r.getFullYear()-n.getFullYear(),i=r.getMonth()-n.getMonth();return s*12+i}function RV(t,e,r){const n=Jn(t,r),s=Jn(e,r),i=+n-jf(n),a=+s-jf(s);return Math.round((i-a)/Cv)}function Pv(t){const e=Re(t),r=e.getMonth();return e.setFullYear(e.getFullYear(),r+1,0),e.setHours(23,59,59,999),e}function Nr(t){const e=Re(t);return e.setDate(1),e.setHours(0,0,0,0),e}function tO(t){const e=Re(t),r=Ur(t,0);return r.setFullYear(e.getFullYear(),0,1),r.setHours(0,0,0,0),r}function Tv(t,e){var l,c,u,d;const r=mu(),n=(e==null?void 0:e.weekStartsOn)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,s=Re(t),i=s.getDay(),a=(i<n?-7:0)+6-(i-n);return s.setDate(s.getDate()+a),s.setHours(23,59,59,999),s}function rO(t){return Tv(t,{weekStartsOn:1})}const IV={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},DV=(t,e,r)=>{let n;const s=IV[t];return typeof s=="string"?n=s:e===1?n=s.one:n=s.other.replace("{{count}}",e.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function jm(t){return(e={})=>{const r=e.width?String(e.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}const MV={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},LV={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},FV={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},$V={date:jm({formats:MV,defaultWidth:"full"}),time:jm({formats:LV,defaultWidth:"full"}),dateTime:jm({formats:FV,defaultWidth:"full"})},UV={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},BV=(t,e,r,n)=>UV[t];function Cl(t){return(e,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let s;if(n==="formatting"&&t.formattingValues){const a=t.defaultFormattingWidth||t.defaultWidth,l=r!=null&&r.width?String(r.width):a;s=t.formattingValues[l]||t.formattingValues[a]}else{const a=t.defaultWidth,l=r!=null&&r.width?String(r.width):t.defaultWidth;s=t.values[l]||t.values[a]}const i=t.argumentCallback?t.argumentCallback(e):e;return s[i]}}const zV={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},VV={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},WV={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},qV={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},HV={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},KV={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},GV=(t,e)=>{const r=Number(t),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},QV={ordinalNumber:GV,era:Cl({values:zV,defaultWidth:"wide"}),quarter:Cl({values:VV,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Cl({values:WV,defaultWidth:"wide"}),day:Cl({values:qV,defaultWidth:"wide"}),dayPeriod:Cl({values:HV,defaultWidth:"wide",formattingValues:KV,defaultFormattingWidth:"wide"})};function El(t){return(e,r={})=>{const n=r.width,s=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],i=e.match(s);if(!i)return null;const a=i[0],l=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(l)?JV(l,f=>f.test(a)):YV(l,f=>f.test(a));let u;u=t.valueCallback?t.valueCallback(c):c,u=r.valueCallback?r.valueCallback(u):u;const d=e.slice(a.length);return{value:u,rest:d}}}function YV(t,e){for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&e(t[r]))return r}function JV(t,e){for(let r=0;r<t.length;r++)if(e(t[r]))return r}function ZV(t){return(e,r={})=>{const n=e.match(t.matchPattern);if(!n)return null;const s=n[0],i=e.match(t.parsePattern);if(!i)return null;let a=t.valueCallback?t.valueCallback(i[0]):i[0];a=r.valueCallback?r.valueCallback(a):a;const l=e.slice(s.length);return{value:a,rest:l}}}const XV=/^(\d+)(th|st|nd|rd)?/i,e9=/\d+/i,t9={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},r9={any:[/^b/i,/^(a|c)/i]},n9={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},s9={any:[/1/i,/2/i,/3/i,/4/i]},i9={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},a9={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},o9={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},l9={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},c9={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},u9={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},d9={ordinalNumber:ZV({matchPattern:XV,parsePattern:e9,valueCallback:t=>parseInt(t,10)}),era:El({matchPatterns:t9,defaultMatchWidth:"wide",parsePatterns:r9,defaultParseWidth:"any"}),quarter:El({matchPatterns:n9,defaultMatchWidth:"wide",parsePatterns:s9,defaultParseWidth:"any",valueCallback:t=>t+1}),month:El({matchPatterns:i9,defaultMatchWidth:"wide",parsePatterns:a9,defaultParseWidth:"any"}),day:El({matchPatterns:o9,defaultMatchWidth:"wide",parsePatterns:l9,defaultParseWidth:"any"}),dayPeriod:El({matchPatterns:c9,defaultMatchWidth:"any",parsePatterns:u9,defaultParseWidth:"any"})},nO={code:"en-US",formatDistance:DV,formatLong:$V,formatRelative:BV,localize:QV,match:d9,options:{weekStartsOn:0,firstWeekContainsDate:1}};function f9(t){const e=Re(t);return zn(e,tO(e))+1}function sO(t){const e=Re(t),r=+va(e)-+EV(e);return Math.round(r/Cv)+1}function iO(t,e){var d,f,h,v;const r=Re(t),n=r.getFullYear(),s=mu(),i=(e==null?void 0:e.firstWeekContainsDate)??((f=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??s.firstWeekContainsDate??((v=(h=s.locale)==null?void 0:h.options)==null?void 0:v.firstWeekContainsDate)??1,a=Ur(t,0);a.setFullYear(n+1,0,i),a.setHours(0,0,0,0);const l=Jn(a,e),c=Ur(t,0);c.setFullYear(n,0,i),c.setHours(0,0,0,0);const u=Jn(c,e);return r.getTime()>=l.getTime()?n+1:r.getTime()>=u.getTime()?n:n-1}function h9(t,e){var l,c,u,d;const r=mu(),n=(e==null?void 0:e.firstWeekContainsDate)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??r.firstWeekContainsDate??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,s=iO(t,e),i=Ur(t,0);return i.setFullYear(s,0,n),i.setHours(0,0,0,0),Jn(i,e)}function aO(t,e){const r=Re(t),n=+Jn(r,e)-+h9(r,e);return Math.round(n/Cv)+1}function qe(t,e){const r=t<0?"-":"",n=Math.abs(t).toString().padStart(e,"0");return r+n}const Ds={y(t,e){const r=t.getFullYear(),n=r>0?r:1-r;return qe(e==="yy"?n%100:n,e.length)},M(t,e){const r=t.getMonth();return e==="M"?String(r+1):qe(r+1,2)},d(t,e){return qe(t.getDate(),e.length)},a(t,e){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(t,e){return qe(t.getHours()%12||12,e.length)},H(t,e){return qe(t.getHours(),e.length)},m(t,e){return qe(t.getMinutes(),e.length)},s(t,e){return qe(t.getSeconds(),e.length)},S(t,e){const r=e.length,n=t.getMilliseconds(),s=Math.trunc(n*Math.pow(10,r-3));return qe(s,e.length)}},Ma={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},qw={G:function(t,e,r){const n=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(t,e,r){if(e==="yo"){const n=t.getFullYear(),s=n>0?n:1-n;return r.ordinalNumber(s,{unit:"year"})}return Ds.y(t,e)},Y:function(t,e,r,n){const s=iO(t,n),i=s>0?s:1-s;if(e==="YY"){const a=i%100;return qe(a,2)}return e==="Yo"?r.ordinalNumber(i,{unit:"year"}):qe(i,e.length)},R:function(t,e){const r=eO(t);return qe(r,e.length)},u:function(t,e){const r=t.getFullYear();return qe(r,e.length)},Q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return qe(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return qe(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(t,e,r){const n=t.getMonth();switch(e){case"M":case"MM":return Ds.M(t,e);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(t,e,r){const n=t.getMonth();switch(e){case"L":return String(n+1);case"LL":return qe(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(t,e,r,n){const s=aO(t,n);return e==="wo"?r.ordinalNumber(s,{unit:"week"}):qe(s,e.length)},I:function(t,e,r){const n=sO(t);return e==="Io"?r.ordinalNumber(n,{unit:"week"}):qe(n,e.length)},d:function(t,e,r){return e==="do"?r.ordinalNumber(t.getDate(),{unit:"date"}):Ds.d(t,e)},D:function(t,e,r){const n=f9(t);return e==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):qe(n,e.length)},E:function(t,e,r){const n=t.getDay();switch(e){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(t,e,r,n){const s=t.getDay(),i=(s-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return qe(i,2);case"eo":return r.ordinalNumber(i,{unit:"day"});case"eee":return r.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(s,{width:"short",context:"formatting"});case"eeee":default:return r.day(s,{width:"wide",context:"formatting"})}},c:function(t,e,r,n){const s=t.getDay(),i=(s-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return qe(i,e.length);case"co":return r.ordinalNumber(i,{unit:"day"});case"ccc":return r.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(s,{width:"narrow",context:"standalone"});case"cccccc":return r.day(s,{width:"short",context:"standalone"});case"cccc":default:return r.day(s,{width:"wide",context:"standalone"})}},i:function(t,e,r){const n=t.getDay(),s=n===0?7:n;switch(e){case"i":return String(s);case"ii":return qe(s,e.length);case"io":return r.ordinalNumber(s,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(t,e,r){const s=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,e,r){const n=t.getHours();let s;switch(n===12?s=Ma.noon:n===0?s=Ma.midnight:s=n/12>=1?"pm":"am",e){case"b":case"bb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,e,r){const n=t.getHours();let s;switch(n>=17?s=Ma.evening:n>=12?s=Ma.afternoon:n>=4?s=Ma.morning:s=Ma.night,e){case"B":case"BB":case"BBB":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,e,r){if(e==="ho"){let n=t.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return Ds.h(t,e)},H:function(t,e,r){return e==="Ho"?r.ordinalNumber(t.getHours(),{unit:"hour"}):Ds.H(t,e)},K:function(t,e,r){const n=t.getHours()%12;return e==="Ko"?r.ordinalNumber(n,{unit:"hour"}):qe(n,e.length)},k:function(t,e,r){let n=t.getHours();return n===0&&(n=24),e==="ko"?r.ordinalNumber(n,{unit:"hour"}):qe(n,e.length)},m:function(t,e,r){return e==="mo"?r.ordinalNumber(t.getMinutes(),{unit:"minute"}):Ds.m(t,e)},s:function(t,e,r){return e==="so"?r.ordinalNumber(t.getSeconds(),{unit:"second"}):Ds.s(t,e)},S:function(t,e){return Ds.S(t,e)},X:function(t,e,r){const n=t.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return Kw(n);case"XXXX":case"XX":return Di(n);case"XXXXX":case"XXX":default:return Di(n,":")}},x:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"x":return Kw(n);case"xxxx":case"xx":return Di(n);case"xxxxx":case"xxx":default:return Di(n,":")}},O:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Hw(n,":");case"OOOO":default:return"GMT"+Di(n,":")}},z:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Hw(n,":");case"zzzz":default:return"GMT"+Di(n,":")}},t:function(t,e,r){const n=Math.trunc(t.getTime()/1e3);return qe(n,e.length)},T:function(t,e,r){const n=t.getTime();return qe(n,e.length)}};function Hw(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),s=Math.trunc(n/60),i=n%60;return i===0?r+String(s):r+String(s)+e+qe(i,2)}function Kw(t,e){return t%60===0?(t>0?"-":"+")+qe(Math.abs(t)/60,2):Di(t,e)}function Di(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),s=qe(Math.trunc(n/60),2),i=qe(n%60,2);return r+s+e+i}const Gw=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},oO=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},m9=(t,e)=>{const r=t.match(/(P+)(p+)?/)||[],n=r[1],s=r[2];if(!s)return Gw(t,e);let i;switch(n){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",Gw(n,e)).replace("{{time}}",oO(s,e))},p9={p:oO,P:m9},g9=/^D+$/,y9=/^Y+$/,v9=["D","DD","YY","YYYY"];function x9(t){return g9.test(t)}function w9(t){return y9.test(t)}function b9(t,e,r){const n=_9(t,e,r);if(console.warn(n),v9.includes(t))throw new RangeError(n)}function _9(t,e,r){const n=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const S9=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,j9=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,k9=/^'([^]*?)'?$/,N9=/''/g,C9=/[a-zA-Z]/;function Ns(t,e,r){var d,f,h,v,p,g,b,w;const n=mu(),s=(r==null?void 0:r.locale)??n.locale??nO,i=(r==null?void 0:r.firstWeekContainsDate)??((f=(d=r==null?void 0:r.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??n.firstWeekContainsDate??((v=(h=n.locale)==null?void 0:h.options)==null?void 0:v.firstWeekContainsDate)??1,a=(r==null?void 0:r.weekStartsOn)??((g=(p=r==null?void 0:r.locale)==null?void 0:p.options)==null?void 0:g.weekStartsOn)??n.weekStartsOn??((w=(b=n.locale)==null?void 0:b.options)==null?void 0:w.weekStartsOn)??0,l=Re(t);if(!OV(l))throw new RangeError("Invalid time value");let c=e.match(j9).map(m=>{const x=m[0];if(x==="p"||x==="P"){const _=p9[x];return _(m,s.formatLong)}return m}).join("").match(S9).map(m=>{if(m==="''")return{isToken:!1,value:"'"};const x=m[0];if(x==="'")return{isToken:!1,value:E9(m)};if(qw[x])return{isToken:!0,value:m};if(x.match(C9))throw new RangeError("Format string contains an unescaped latin alphabet character `"+x+"`");return{isToken:!1,value:m}});s.localize.preprocessor&&(c=s.localize.preprocessor(l,c));const u={firstWeekContainsDate:i,weekStartsOn:a,locale:s};return c.map(m=>{if(!m.isToken)return m.value;const x=m.value;(!(r!=null&&r.useAdditionalWeekYearTokens)&&w9(x)||!(r!=null&&r.useAdditionalDayOfYearTokens)&&x9(x))&&b9(x,e,String(t));const _=qw[x[0]];return _(l,x,s.localize,u)}).join("")}function E9(t){const e=t.match(k9);return e?e[1].replace(N9,"'"):t}function P9(t){const e=Re(t),r=e.getFullYear(),n=e.getMonth(),s=Ur(t,0);return s.setFullYear(r,n+1,0),s.setHours(0,0,0,0),s.getDate()}function T9(t){return Math.trunc(+Re(t)/1e3)}function A9(t){const e=Re(t),r=e.getMonth();return e.setFullYear(e.getFullYear(),r+1,0),e.setHours(0,0,0,0),e}function O9(t,e){return RV(A9(t),Nr(t),e)+1}function Pg(t,e){const r=Re(t),n=Re(e);return r.getTime()>n.getTime()}function lO(t,e){const r=Re(t),n=Re(e);return+r<+n}function Av(t,e){const r=Re(t),n=Re(e);return r.getFullYear()===n.getFullYear()&&r.getMonth()===n.getMonth()}function R9(t,e){const r=Re(t),n=Re(e);return r.getFullYear()===n.getFullYear()}function km(t,e){return nr(t,-e)}function Nm(t,e){const r=Re(t),n=r.getFullYear(),s=r.getDate(),i=Ur(t,0);i.setFullYear(n,e,15),i.setHours(0,0,0,0);const a=P9(i);return r.setMonth(e,Math.min(s,a)),r}function Qw(t,e){const r=Re(t);return isNaN(+r)?Ur(t,NaN):(r.setFullYear(e),r)}var me=function(){return me=Object.assign||function(e){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},me.apply(this,arguments)};function I9(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function cO(t,e,r){for(var n=0,s=e.length,i;n<s;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))}function pu(t){return t.mode==="multiple"}function gu(t){return t.mode==="range"}function gh(t){return t.mode==="single"}var D9={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function M9(t,e){return Ns(t,"LLLL y",e)}function L9(t,e){return Ns(t,"d",e)}function F9(t,e){return Ns(t,"LLLL",e)}function $9(t){return"".concat(t)}function U9(t,e){return Ns(t,"cccccc",e)}function B9(t,e){return Ns(t,"yyyy",e)}var z9=Object.freeze({__proto__:null,formatCaption:M9,formatDay:L9,formatMonthCaption:F9,formatWeekNumber:$9,formatWeekdayName:U9,formatYearCaption:B9}),V9=function(t,e,r){return Ns(t,"do MMMM (EEEE)",r)},W9=function(){return"Month: "},q9=function(){return"Go to next month"},H9=function(){return"Go to previous month"},K9=function(t,e){return Ns(t,"cccc",e)},G9=function(t){return"Week n. ".concat(t)},Q9=function(){return"Year: "},Y9=Object.freeze({__proto__:null,labelDay:V9,labelMonthDropdown:W9,labelNext:q9,labelPrevious:H9,labelWeekNumber:G9,labelWeekday:K9,labelYearDropdown:Q9});function J9(){var t="buttons",e=D9,r=nO,n={},s={},i=1,a={},l=new Date;return{captionLayout:t,classNames:e,formatters:z9,labels:Y9,locale:r,modifiersClassNames:n,modifiers:s,numberOfMonths:i,styles:a,today:l,mode:"default"}}function Z9(t){var e=t.fromYear,r=t.toYear,n=t.fromMonth,s=t.toMonth,i=t.fromDate,a=t.toDate;return n?i=Nr(n):e&&(i=new Date(e,0,1)),s?a=Pv(s):r&&(a=new Date(r,11,31)),{fromDate:i?Yo(i):void 0,toDate:a?Yo(a):void 0}}var uO=y.createContext(void 0);function X9(t){var e,r=t.initialProps,n=J9(),s=Z9(r),i=s.fromDate,a=s.toDate,l=(e=r.captionLayout)!==null&&e!==void 0?e:n.captionLayout;l!=="buttons"&&(!i||!a)&&(l="buttons");var c;(gh(r)||pu(r)||gu(r))&&(c=r.onSelect);var u=me(me(me({},n),r),{captionLayout:l,classNames:me(me({},n.classNames),r.classNames),components:me({},r.components),formatters:me(me({},n.formatters),r.formatters),fromDate:i,labels:me(me({},n.labels),r.labels),mode:r.mode||n.mode,modifiers:me(me({},n.modifiers),r.modifiers),modifiersClassNames:me(me({},n.modifiersClassNames),r.modifiersClassNames),onSelect:c,styles:me(me({},n.styles),r.styles),toDate:a});return o.jsx(uO.Provider,{value:u,children:t.children})}function Ze(){var t=y.useContext(uO);if(!t)throw new Error("useDayPicker must be used within a DayPickerProvider.");return t}function dO(t){var e=Ze(),r=e.locale,n=e.classNames,s=e.styles,i=e.formatters.formatCaption;return o.jsx("div",{className:n.caption_label,style:s.caption_label,"aria-live":"polite",role:"presentation",id:t.id,children:i(t.displayMonth,{locale:r})})}function eW(t){return o.jsx("svg",me({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},t,{children:o.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function fO(t){var e,r,n=t.onChange,s=t.value,i=t.children,a=t.caption,l=t.className,c=t.style,u=Ze(),d=(r=(e=u.components)===null||e===void 0?void 0:e.IconDropdown)!==null&&r!==void 0?r:eW;return o.jsxs("div",{className:l,style:c,children:[o.jsx("span",{className:u.classNames.vhidden,children:t["aria-label"]}),o.jsx("select",{name:t.name,"aria-label":t["aria-label"],className:u.classNames.dropdown,style:u.styles.dropdown,value:s,onChange:n,children:i}),o.jsxs("div",{className:u.classNames.caption_label,style:u.styles.caption_label,"aria-hidden":"true",children:[a,o.jsx(d,{className:u.classNames.dropdown_icon,style:u.styles.dropdown_icon})]})]})}function tW(t){var e,r=Ze(),n=r.fromDate,s=r.toDate,i=r.styles,a=r.locale,l=r.formatters.formatMonthCaption,c=r.classNames,u=r.components,d=r.labels.labelMonthDropdown;if(!n)return o.jsx(o.Fragment,{});if(!s)return o.jsx(o.Fragment,{});var f=[];if(R9(n,s))for(var h=Nr(n),v=n.getMonth();v<=s.getMonth();v++)f.push(Nm(h,v));else for(var h=Nr(new Date),v=0;v<=11;v++)f.push(Nm(h,v));var p=function(b){var w=Number(b.target.value),m=Nm(Nr(t.displayMonth),w);t.onChange(m)},g=(e=u==null?void 0:u.Dropdown)!==null&&e!==void 0?e:fO;return o.jsx(g,{name:"months","aria-label":d(),className:c.dropdown_month,style:i.dropdown_month,onChange:p,value:t.displayMonth.getMonth(),caption:l(t.displayMonth,{locale:a}),children:f.map(function(b){return o.jsx("option",{value:b.getMonth(),children:l(b,{locale:a})},b.getMonth())})})}function rW(t){var e,r=t.displayMonth,n=Ze(),s=n.fromDate,i=n.toDate,a=n.locale,l=n.styles,c=n.classNames,u=n.components,d=n.formatters.formatYearCaption,f=n.labels.labelYearDropdown,h=[];if(!s)return o.jsx(o.Fragment,{});if(!i)return o.jsx(o.Fragment,{});for(var v=s.getFullYear(),p=i.getFullYear(),g=v;g<=p;g++)h.push(Qw(tO(new Date),g));var b=function(m){var x=Qw(Nr(r),Number(m.target.value));t.onChange(x)},w=(e=u==null?void 0:u.Dropdown)!==null&&e!==void 0?e:fO;return o.jsx(w,{name:"years","aria-label":f(),className:c.dropdown_year,style:l.dropdown_year,onChange:b,value:r.getFullYear(),caption:d(r,{locale:a}),children:h.map(function(m){return o.jsx("option",{value:m.getFullYear(),children:d(m,{locale:a})},m.getFullYear())})})}function nW(t,e){var r=y.useState(t),n=r[0],s=r[1],i=e===void 0?n:e;return[i,s]}function sW(t){var e=t.month,r=t.defaultMonth,n=t.today,s=e||r||n||new Date,i=t.toDate,a=t.fromDate,l=t.numberOfMonths,c=l===void 0?1:l;if(i&&zc(i,s)<0){var u=-1*(c-1);s=Nn(i,u)}return a&&zc(s,a)<0&&(s=a),Nr(s)}function iW(){var t=Ze(),e=sW(t),r=nW(e,t.month),n=r[0],s=r[1],i=function(a){var l;if(!t.disableNavigation){var c=Nr(a);s(c),(l=t.onMonthChange)===null||l===void 0||l.call(t,c)}};return[n,i]}function aW(t,e){for(var r=e.reverseMonths,n=e.numberOfMonths,s=Nr(t),i=Nr(Nn(s,n)),a=zc(i,s),l=[],c=0;c<a;c++){var u=Nn(s,c);l.push(u)}return r&&(l=l.reverse()),l}function oW(t,e){if(!e.disableNavigation){var r=e.toDate,n=e.pagedNavigation,s=e.numberOfMonths,i=s===void 0?1:s,a=n?i:1,l=Nr(t);if(!r)return Nn(l,a);var c=zc(r,t);if(!(c<i))return Nn(l,a)}}function lW(t,e){if(!e.disableNavigation){var r=e.fromDate,n=e.pagedNavigation,s=e.numberOfMonths,i=s===void 0?1:s,a=n?i:1,l=Nr(t);if(!r)return Nn(l,-a);var c=zc(l,r);if(!(c<=0))return Nn(l,-a)}}var hO=y.createContext(void 0);function cW(t){var e=Ze(),r=iW(),n=r[0],s=r[1],i=aW(n,e),a=oW(n,e),l=lW(n,e),c=function(f){return i.some(function(h){return Av(f,h)})},u=function(f,h){c(f)||(h&&lO(f,h)?s(Nn(f,1+e.numberOfMonths*-1)):s(f))},d={currentMonth:n,displayMonths:i,goToMonth:s,goToDate:u,previousMonth:l,nextMonth:a,isDateDisplayed:c};return o.jsx(hO.Provider,{value:d,children:t.children})}function yu(){var t=y.useContext(hO);if(!t)throw new Error("useNavigation must be used within a NavigationProvider");return t}function Yw(t){var e,r=Ze(),n=r.classNames,s=r.styles,i=r.components,a=yu().goToMonth,l=function(d){a(Nn(d,t.displayIndex?-t.displayIndex:0))},c=(e=i==null?void 0:i.CaptionLabel)!==null&&e!==void 0?e:dO,u=o.jsx(c,{id:t.id,displayMonth:t.displayMonth});return o.jsxs("div",{className:n.caption_dropdowns,style:s.caption_dropdowns,children:[o.jsx("div",{className:n.vhidden,children:u}),o.jsx(tW,{onChange:l,displayMonth:t.displayMonth}),o.jsx(rW,{onChange:l,displayMonth:t.displayMonth})]})}function uW(t){return o.jsx("svg",me({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:o.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function dW(t){return o.jsx("svg",me({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:o.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var kf=y.forwardRef(function(t,e){var r=Ze(),n=r.classNames,s=r.styles,i=[n.button_reset,n.button];t.className&&i.push(t.className);var a=i.join(" "),l=me(me({},s.button_reset),s.button);return t.style&&Object.assign(l,t.style),o.jsx("button",me({},t,{ref:e,type:"button",className:a,style:l}))});function fW(t){var e,r,n=Ze(),s=n.dir,i=n.locale,a=n.classNames,l=n.styles,c=n.labels,u=c.labelPrevious,d=c.labelNext,f=n.components;if(!t.nextMonth&&!t.previousMonth)return o.jsx(o.Fragment,{});var h=u(t.previousMonth,{locale:i}),v=[a.nav_button,a.nav_button_previous].join(" "),p=d(t.nextMonth,{locale:i}),g=[a.nav_button,a.nav_button_next].join(" "),b=(e=f==null?void 0:f.IconRight)!==null&&e!==void 0?e:dW,w=(r=f==null?void 0:f.IconLeft)!==null&&r!==void 0?r:uW;return o.jsxs("div",{className:a.nav,style:l.nav,children:[!t.hidePrevious&&o.jsx(kf,{name:"previous-month","aria-label":h,className:v,style:l.nav_button_previous,disabled:!t.previousMonth,onClick:t.onPreviousClick,children:s==="rtl"?o.jsx(b,{className:a.nav_icon,style:l.nav_icon}):o.jsx(w,{className:a.nav_icon,style:l.nav_icon})}),!t.hideNext&&o.jsx(kf,{name:"next-month","aria-label":p,className:g,style:l.nav_button_next,disabled:!t.nextMonth,onClick:t.onNextClick,children:s==="rtl"?o.jsx(w,{className:a.nav_icon,style:l.nav_icon}):o.jsx(b,{className:a.nav_icon,style:l.nav_icon})})]})}function Jw(t){var e=Ze().numberOfMonths,r=yu(),n=r.previousMonth,s=r.nextMonth,i=r.goToMonth,a=r.displayMonths,l=a.findIndex(function(p){return Av(t.displayMonth,p)}),c=l===0,u=l===a.length-1,d=e>1&&(c||!u),f=e>1&&(u||!c),h=function(){n&&i(n)},v=function(){s&&i(s)};return o.jsx(fW,{displayMonth:t.displayMonth,hideNext:d,hidePrevious:f,nextMonth:s,previousMonth:n,onPreviousClick:h,onNextClick:v})}function hW(t){var e,r=Ze(),n=r.classNames,s=r.disableNavigation,i=r.styles,a=r.captionLayout,l=r.components,c=(e=l==null?void 0:l.CaptionLabel)!==null&&e!==void 0?e:dO,u;return s?u=o.jsx(c,{id:t.id,displayMonth:t.displayMonth}):a==="dropdown"?u=o.jsx(Yw,{displayMonth:t.displayMonth,id:t.id}):a==="dropdown-buttons"?u=o.jsxs(o.Fragment,{children:[o.jsx(Yw,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id}),o.jsx(Jw,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id})]}):u=o.jsxs(o.Fragment,{children:[o.jsx(c,{id:t.id,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),o.jsx(Jw,{displayMonth:t.displayMonth,id:t.id})]}),o.jsx("div",{className:n.caption,style:i.caption,children:u})}function mW(t){var e=Ze(),r=e.footer,n=e.styles,s=e.classNames.tfoot;return r?o.jsx("tfoot",{className:s,style:n.tfoot,children:o.jsx("tr",{children:o.jsx("td",{colSpan:8,children:r})})}):o.jsx(o.Fragment,{})}function pW(t,e,r){for(var n=r?va(new Date):Jn(new Date,{locale:t,weekStartsOn:e}),s=[],i=0;i<7;i++){var a=nr(n,i);s.push(a)}return s}function gW(){var t=Ze(),e=t.classNames,r=t.styles,n=t.showWeekNumber,s=t.locale,i=t.weekStartsOn,a=t.ISOWeek,l=t.formatters.formatWeekdayName,c=t.labels.labelWeekday,u=pW(s,i,a);return o.jsxs("tr",{style:r.head_row,className:e.head_row,children:[n&&o.jsx("td",{style:r.head_cell,className:e.head_cell}),u.map(function(d,f){return o.jsx("th",{scope:"col",className:e.head_cell,style:r.head_cell,"aria-label":c(d,{locale:s}),children:l(d,{locale:s})},f)})]})}function yW(){var t,e=Ze(),r=e.classNames,n=e.styles,s=e.components,i=(t=s==null?void 0:s.HeadRow)!==null&&t!==void 0?t:gW;return o.jsx("thead",{style:n.head,className:r.head,children:o.jsx(i,{})})}function vW(t){var e=Ze(),r=e.locale,n=e.formatters.formatDay;return o.jsx(o.Fragment,{children:n(t.date,{locale:r})})}var Ov=y.createContext(void 0);function xW(t){if(!pu(t.initialProps)){var e={selected:void 0,modifiers:{disabled:[]}};return o.jsx(Ov.Provider,{value:e,children:t.children})}return o.jsx(wW,{initialProps:t.initialProps,children:t.children})}function wW(t){var e=t.initialProps,r=t.children,n=e.selected,s=e.min,i=e.max,a=function(u,d,f){var h,v;(h=e.onDayClick)===null||h===void 0||h.call(e,u,d,f);var p=!!(d.selected&&s&&(n==null?void 0:n.length)===s);if(!p){var g=!!(!d.selected&&i&&(n==null?void 0:n.length)===i);if(!g){var b=n?cO([],n):[];if(d.selected){var w=b.findIndex(function(m){return _r(u,m)});b.splice(w,1)}else b.push(u);(v=e.onSelect)===null||v===void 0||v.call(e,b,u,d,f)}}},l={disabled:[]};n&&l.disabled.push(function(u){var d=i&&n.length>i-1,f=n.some(function(h){return _r(h,u)});return!!(d&&!f)});var c={selected:n,onDayClick:a,modifiers:l};return o.jsx(Ov.Provider,{value:c,children:r})}function Rv(){var t=y.useContext(Ov);if(!t)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return t}function bW(t,e){var r=e||{},n=r.from,s=r.to;return n&&s?_r(s,t)&&_r(n,t)?void 0:_r(s,t)?{from:s,to:void 0}:_r(n,t)?void 0:Pg(n,t)?{from:t,to:s}:{from:n,to:t}:s?Pg(t,s)?{from:s,to:t}:{from:t,to:s}:n?lO(t,n)?{from:t,to:n}:{from:n,to:t}:{from:t,to:void 0}}var Iv=y.createContext(void 0);function _W(t){if(!gu(t.initialProps)){var e={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return o.jsx(Iv.Provider,{value:e,children:t.children})}return o.jsx(SW,{initialProps:t.initialProps,children:t.children})}function SW(t){var e=t.initialProps,r=t.children,n=e.selected,s=n||{},i=s.from,a=s.to,l=e.min,c=e.max,u=function(v,p,g){var b,w;(b=e.onDayClick)===null||b===void 0||b.call(e,v,p,g);var m=bW(v,n);(w=e.onSelect)===null||w===void 0||w.call(e,m,v,p,g)},d={range_start:[],range_end:[],range_middle:[],disabled:[]};if(i?(d.range_start=[i],a?(d.range_end=[a],_r(i,a)||(d.range_middle=[{after:i,before:a}])):d.range_end=[i]):a&&(d.range_start=[a],d.range_end=[a]),l&&(i&&!a&&d.disabled.push({after:km(i,l-1),before:nr(i,l-1)}),i&&a&&d.disabled.push({after:i,before:nr(i,l-1)}),!i&&a&&d.disabled.push({after:km(a,l-1),before:nr(a,l-1)})),c){if(i&&!a&&(d.disabled.push({before:nr(i,-c+1)}),d.disabled.push({after:nr(i,c-1)})),i&&a){var f=zn(a,i)+1,h=c-f;d.disabled.push({before:km(i,h)}),d.disabled.push({after:nr(a,h)})}!i&&a&&(d.disabled.push({before:nr(a,-c+1)}),d.disabled.push({after:nr(a,c-1)}))}return o.jsx(Iv.Provider,{value:{selected:n,onDayClick:u,modifiers:d},children:r})}function Dv(){var t=y.useContext(Iv);if(!t)throw new Error("useSelectRange must be used within a SelectRangeProvider");return t}function yd(t){return Array.isArray(t)?cO([],t):t!==void 0?[t]:[]}function jW(t){var e={};return Object.entries(t).forEach(function(r){var n=r[0],s=r[1];e[n]=yd(s)}),e}var Cn;(function(t){t.Outside="outside",t.Disabled="disabled",t.Selected="selected",t.Hidden="hidden",t.Today="today",t.RangeStart="range_start",t.RangeEnd="range_end",t.RangeMiddle="range_middle"})(Cn||(Cn={}));var kW=Cn.Selected,ss=Cn.Disabled,NW=Cn.Hidden,CW=Cn.Today,Cm=Cn.RangeEnd,Em=Cn.RangeMiddle,Pm=Cn.RangeStart,EW=Cn.Outside;function PW(t,e,r){var n,s=(n={},n[kW]=yd(t.selected),n[ss]=yd(t.disabled),n[NW]=yd(t.hidden),n[CW]=[t.today],n[Cm]=[],n[Em]=[],n[Pm]=[],n[EW]=[],n);return t.fromDate&&s[ss].push({before:t.fromDate}),t.toDate&&s[ss].push({after:t.toDate}),pu(t)?s[ss]=s[ss].concat(e.modifiers[ss]):gu(t)&&(s[ss]=s[ss].concat(r.modifiers[ss]),s[Pm]=r.modifiers[Pm],s[Em]=r.modifiers[Em],s[Cm]=r.modifiers[Cm]),s}var mO=y.createContext(void 0);function TW(t){var e=Ze(),r=Rv(),n=Dv(),s=PW(e,r,n),i=jW(e.modifiers),a=me(me({},s),i);return o.jsx(mO.Provider,{value:a,children:t.children})}function pO(){var t=y.useContext(mO);if(!t)throw new Error("useModifiers must be used within a ModifiersProvider");return t}function AW(t){return!!(t&&typeof t=="object"&&"before"in t&&"after"in t)}function OW(t){return!!(t&&typeof t=="object"&&"from"in t)}function RW(t){return!!(t&&typeof t=="object"&&"after"in t)}function IW(t){return!!(t&&typeof t=="object"&&"before"in t)}function DW(t){return!!(t&&typeof t=="object"&&"dayOfWeek"in t)}function MW(t,e){var r,n=e.from,s=e.to;if(n&&s){var i=zn(s,n)<0;i&&(r=[s,n],n=r[0],s=r[1]);var a=zn(t,n)>=0&&zn(s,t)>=0;return a}return s?_r(s,t):n?_r(n,t):!1}function LW(t){return Ev(t)}function FW(t){return Array.isArray(t)&&t.every(Ev)}function $W(t,e){return e.some(function(r){if(typeof r=="boolean")return r;if(LW(r))return _r(t,r);if(FW(r))return r.includes(t);if(OW(r))return MW(t,r);if(DW(r))return r.dayOfWeek.includes(t.getDay());if(AW(r)){var n=zn(r.before,t),s=zn(r.after,t),i=n>0,a=s<0,l=Pg(r.before,r.after);return l?a&&i:i||a}return RW(r)?zn(t,r.after)>0:IW(r)?zn(r.before,t)>0:typeof r=="function"?r(t):!1})}function Mv(t,e,r){var n=Object.keys(e).reduce(function(i,a){var l=e[a];return $W(t,l)&&i.push(a),i},[]),s={};return n.forEach(function(i){return s[i]=!0}),r&&!Av(t,r)&&(s.outside=!0),s}function UW(t,e){for(var r=Nr(t[0]),n=Pv(t[t.length-1]),s,i,a=r;a<=n;){var l=Mv(a,e),c=!l.disabled&&!l.hidden;if(!c){a=nr(a,1);continue}if(l.selected)return a;l.today&&!i&&(i=a),s||(s=a),a=nr(a,1)}return i||s}var BW=365;function gO(t,e){var r=e.moveBy,n=e.direction,s=e.context,i=e.modifiers,a=e.retry,l=a===void 0?{count:0,lastFocused:t}:a,c=s.weekStartsOn,u=s.fromDate,d=s.toDate,f=s.locale,h={day:nr,week:Eg,month:Nn,year:PV,startOfWeek:function(b){return s.ISOWeek?va(b):Jn(b,{locale:f,weekStartsOn:c})},endOfWeek:function(b){return s.ISOWeek?rO(b):Tv(b,{locale:f,weekStartsOn:c})}},v=h[r](t,n==="after"?1:-1);n==="before"&&u?v=TV([u,v]):n==="after"&&d&&(v=AV([d,v]));var p=!0;if(i){var g=Mv(v,i);p=!g.disabled&&!g.hidden}return p?v:l.count>BW?l.lastFocused:gO(v,{moveBy:r,direction:n,context:s,modifiers:i,retry:me(me({},l),{count:l.count+1})})}var yO=y.createContext(void 0);function zW(t){var e=yu(),r=pO(),n=y.useState(),s=n[0],i=n[1],a=y.useState(),l=a[0],c=a[1],u=UW(e.displayMonths,r),d=s??(l&&e.isDateDisplayed(l))?l:u,f=function(){c(s),i(void 0)},h=function(b){i(b)},v=Ze(),p=function(b,w){if(s){var m=gO(s,{moveBy:b,direction:w,context:v,modifiers:r});_r(s,m)||(e.goToDate(m,s),h(m))}},g={focusedDay:s,focusTarget:d,blur:f,focus:h,focusDayAfter:function(){return p("day","after")},focusDayBefore:function(){return p("day","before")},focusWeekAfter:function(){return p("week","after")},focusWeekBefore:function(){return p("week","before")},focusMonthBefore:function(){return p("month","before")},focusMonthAfter:function(){return p("month","after")},focusYearBefore:function(){return p("year","before")},focusYearAfter:function(){return p("year","after")},focusStartOfWeek:function(){return p("startOfWeek","before")},focusEndOfWeek:function(){return p("endOfWeek","after")}};return o.jsx(yO.Provider,{value:g,children:t.children})}function Lv(){var t=y.useContext(yO);if(!t)throw new Error("useFocusContext must be used within a FocusProvider");return t}function VW(t,e){var r=pO(),n=Mv(t,r,e);return n}var Fv=y.createContext(void 0);function WW(t){if(!gh(t.initialProps)){var e={selected:void 0};return o.jsx(Fv.Provider,{value:e,children:t.children})}return o.jsx(qW,{initialProps:t.initialProps,children:t.children})}function qW(t){var e=t.initialProps,r=t.children,n=function(i,a,l){var c,u,d;if((c=e.onDayClick)===null||c===void 0||c.call(e,i,a,l),a.selected&&!e.required){(u=e.onSelect)===null||u===void 0||u.call(e,void 0,i,a,l);return}(d=e.onSelect)===null||d===void 0||d.call(e,i,i,a,l)},s={selected:e.selected,onDayClick:n};return o.jsx(Fv.Provider,{value:s,children:r})}function vO(){var t=y.useContext(Fv);if(!t)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return t}function HW(t,e){var r=Ze(),n=vO(),s=Rv(),i=Dv(),a=Lv(),l=a.focusDayAfter,c=a.focusDayBefore,u=a.focusWeekAfter,d=a.focusWeekBefore,f=a.blur,h=a.focus,v=a.focusMonthBefore,p=a.focusMonthAfter,g=a.focusYearBefore,b=a.focusYearAfter,w=a.focusStartOfWeek,m=a.focusEndOfWeek,x=function(U){var P,L,K,re;gh(r)?(P=n.onDayClick)===null||P===void 0||P.call(n,t,e,U):pu(r)?(L=s.onDayClick)===null||L===void 0||L.call(s,t,e,U):gu(r)?(K=i.onDayClick)===null||K===void 0||K.call(i,t,e,U):(re=r.onDayClick)===null||re===void 0||re.call(r,t,e,U)},_=function(U){var P;h(t),(P=r.onDayFocus)===null||P===void 0||P.call(r,t,e,U)},S=function(U){var P;f(),(P=r.onDayBlur)===null||P===void 0||P.call(r,t,e,U)},j=function(U){var P;(P=r.onDayMouseEnter)===null||P===void 0||P.call(r,t,e,U)},k=function(U){var P;(P=r.onDayMouseLeave)===null||P===void 0||P.call(r,t,e,U)},N=function(U){var P;(P=r.onDayPointerEnter)===null||P===void 0||P.call(r,t,e,U)},A=function(U){var P;(P=r.onDayPointerLeave)===null||P===void 0||P.call(r,t,e,U)},I=function(U){var P;(P=r.onDayTouchCancel)===null||P===void 0||P.call(r,t,e,U)},M=function(U){var P;(P=r.onDayTouchEnd)===null||P===void 0||P.call(r,t,e,U)},F=function(U){var P;(P=r.onDayTouchMove)===null||P===void 0||P.call(r,t,e,U)},O=function(U){var P;(P=r.onDayTouchStart)===null||P===void 0||P.call(r,t,e,U)},z=function(U){var P;(P=r.onDayKeyUp)===null||P===void 0||P.call(r,t,e,U)},R=function(U){var P;switch(U.key){case"ArrowLeft":U.preventDefault(),U.stopPropagation(),r.dir==="rtl"?l():c();break;case"ArrowRight":U.preventDefault(),U.stopPropagation(),r.dir==="rtl"?c():l();break;case"ArrowDown":U.preventDefault(),U.stopPropagation(),u();break;case"ArrowUp":U.preventDefault(),U.stopPropagation(),d();break;case"PageUp":U.preventDefault(),U.stopPropagation(),U.shiftKey?g():v();break;case"PageDown":U.preventDefault(),U.stopPropagation(),U.shiftKey?b():p();break;case"Home":U.preventDefault(),U.stopPropagation(),w();break;case"End":U.preventDefault(),U.stopPropagation(),m();break}(P=r.onDayKeyDown)===null||P===void 0||P.call(r,t,e,U)},V={onClick:x,onFocus:_,onBlur:S,onKeyDown:R,onKeyUp:z,onMouseEnter:j,onMouseLeave:k,onPointerEnter:N,onPointerLeave:A,onTouchCancel:I,onTouchEnd:M,onTouchMove:F,onTouchStart:O};return V}function KW(){var t=Ze(),e=vO(),r=Rv(),n=Dv(),s=gh(t)?e.selected:pu(t)?r.selected:gu(t)?n.selected:void 0;return s}function GW(t){return Object.values(Cn).includes(t)}function QW(t,e){var r=[t.classNames.day];return Object.keys(e).forEach(function(n){var s=t.modifiersClassNames[n];if(s)r.push(s);else if(GW(n)){var i=t.classNames["day_".concat(n)];i&&r.push(i)}}),r}function YW(t,e){var r=me({},t.styles.day);return Object.keys(e).forEach(function(n){var s;r=me(me({},r),(s=t.modifiersStyles)===null||s===void 0?void 0:s[n])}),r}function JW(t,e,r){var n,s,i,a=Ze(),l=Lv(),c=VW(t,e),u=HW(t,c),d=KW(),f=!!(a.onDayClick||a.mode!=="default");y.useEffect(function(){var j;c.outside||l.focusedDay&&f&&_r(l.focusedDay,t)&&((j=r.current)===null||j===void 0||j.focus())},[l.focusedDay,t,r,f,c.outside]);var h=QW(a,c).join(" "),v=YW(a,c),p=!!(c.outside&&!a.showOutsideDays||c.hidden),g=(i=(s=a.components)===null||s===void 0?void 0:s.DayContent)!==null&&i!==void 0?i:vW,b=o.jsx(g,{date:t,displayMonth:e,activeModifiers:c}),w={style:v,className:h,children:b,role:"gridcell"},m=l.focusTarget&&_r(l.focusTarget,t)&&!c.outside,x=l.focusedDay&&_r(l.focusedDay,t),_=me(me(me({},w),(n={disabled:c.disabled,role:"gridcell"},n["aria-selected"]=c.selected,n.tabIndex=x||m?0:-1,n)),u),S={isButton:f,isHidden:p,activeModifiers:c,selectedDays:d,buttonProps:_,divProps:w};return S}function ZW(t){var e=y.useRef(null),r=JW(t.date,t.displayMonth,e);return r.isHidden?o.jsx("div",{role:"gridcell"}):r.isButton?o.jsx(kf,me({name:"day",ref:e},r.buttonProps)):o.jsx("div",me({},r.divProps))}function XW(t){var e=t.number,r=t.dates,n=Ze(),s=n.onWeekNumberClick,i=n.styles,a=n.classNames,l=n.locale,c=n.labels.labelWeekNumber,u=n.formatters.formatWeekNumber,d=u(Number(e),{locale:l});if(!s)return o.jsx("span",{className:a.weeknumber,style:i.weeknumber,children:d});var f=c(Number(e),{locale:l}),h=function(v){s(e,r,v)};return o.jsx(kf,{name:"week-number","aria-label":f,className:a.weeknumber,style:i.weeknumber,onClick:h,children:d})}function e7(t){var e,r,n=Ze(),s=n.styles,i=n.classNames,a=n.showWeekNumber,l=n.components,c=(e=l==null?void 0:l.Day)!==null&&e!==void 0?e:ZW,u=(r=l==null?void 0:l.WeekNumber)!==null&&r!==void 0?r:XW,d;return a&&(d=o.jsx("td",{className:i.cell,style:s.cell,children:o.jsx(u,{number:t.weekNumber,dates:t.dates})})),o.jsxs("tr",{className:i.row,style:s.row,children:[d,t.dates.map(function(f){return o.jsx("td",{className:i.cell,style:s.cell,role:"presentation",children:o.jsx(c,{displayMonth:t.displayMonth,date:f})},T9(f))})]})}function Zw(t,e,r){for(var n=r!=null&&r.ISOWeek?rO(e):Tv(e,r),s=r!=null&&r.ISOWeek?va(t):Jn(t,r),i=zn(n,s),a=[],l=0;l<=i;l++)a.push(nr(s,l));var c=a.reduce(function(u,d){var f=r!=null&&r.ISOWeek?sO(d):aO(d,r),h=u.find(function(v){return v.weekNumber===f});return h?(h.dates.push(d),u):(u.push({weekNumber:f,dates:[d]}),u)},[]);return c}function t7(t,e){var r=Zw(Nr(t),Pv(t),e);if(e!=null&&e.useFixedWeeks){var n=O9(t,e);if(n<6){var s=r[r.length-1],i=s.dates[s.dates.length-1],a=Eg(i,6-n),l=Zw(Eg(i,1),a,e);r.push.apply(r,l)}}return r}function r7(t){var e,r,n,s=Ze(),i=s.locale,a=s.classNames,l=s.styles,c=s.hideHead,u=s.fixedWeeks,d=s.components,f=s.weekStartsOn,h=s.firstWeekContainsDate,v=s.ISOWeek,p=t7(t.displayMonth,{useFixedWeeks:!!u,ISOWeek:v,locale:i,weekStartsOn:f,firstWeekContainsDate:h}),g=(e=d==null?void 0:d.Head)!==null&&e!==void 0?e:yW,b=(r=d==null?void 0:d.Row)!==null&&r!==void 0?r:e7,w=(n=d==null?void 0:d.Footer)!==null&&n!==void 0?n:mW;return o.jsxs("table",{id:t.id,className:a.table,style:l.table,role:"grid","aria-labelledby":t["aria-labelledby"],children:[!c&&o.jsx(g,{}),o.jsx("tbody",{className:a.tbody,style:l.tbody,children:p.map(function(m){return o.jsx(b,{displayMonth:t.displayMonth,dates:m.dates,weekNumber:m.weekNumber},m.weekNumber)})}),o.jsx(w,{displayMonth:t.displayMonth})]})}function n7(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var s7=n7()?y.useLayoutEffect:y.useEffect,Tm=!1,i7=0;function Xw(){return"react-day-picker-".concat(++i7)}function a7(t){var e,r=t??(Tm?Xw():null),n=y.useState(r),s=n[0],i=n[1];return s7(function(){s===null&&i(Xw())},[]),y.useEffect(function(){Tm===!1&&(Tm=!0)},[]),(e=t??s)!==null&&e!==void 0?e:void 0}function o7(t){var e,r,n=Ze(),s=n.dir,i=n.classNames,a=n.styles,l=n.components,c=yu().displayMonths,u=a7(n.id?"".concat(n.id,"-").concat(t.displayIndex):void 0),d=n.id?"".concat(n.id,"-grid-").concat(t.displayIndex):void 0,f=[i.month],h=a.month,v=t.displayIndex===0,p=t.displayIndex===c.length-1,g=!v&&!p;s==="rtl"&&(e=[v,p],p=e[0],v=e[1]),v&&(f.push(i.caption_start),h=me(me({},h),a.caption_start)),p&&(f.push(i.caption_end),h=me(me({},h),a.caption_end)),g&&(f.push(i.caption_between),h=me(me({},h),a.caption_between));var b=(r=l==null?void 0:l.Caption)!==null&&r!==void 0?r:hW;return o.jsxs("div",{className:f.join(" "),style:h,children:[o.jsx(b,{id:u,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),o.jsx(r7,{id:d,"aria-labelledby":u,displayMonth:t.displayMonth})]},t.displayIndex)}function l7(t){var e=Ze(),r=e.classNames,n=e.styles;return o.jsx("div",{className:r.months,style:n.months,children:t.children})}function c7(t){var e,r,n=t.initialProps,s=Ze(),i=Lv(),a=yu(),l=y.useState(!1),c=l[0],u=l[1];y.useEffect(function(){s.initialFocus&&i.focusTarget&&(c||(i.focus(i.focusTarget),u(!0)))},[s.initialFocus,c,i.focus,i.focusTarget,i]);var d=[s.classNames.root,s.className];s.numberOfMonths>1&&d.push(s.classNames.multiple_months),s.showWeekNumber&&d.push(s.classNames.with_weeknumber);var f=me(me({},s.styles.root),s.style),h=Object.keys(n).filter(function(p){return p.startsWith("data-")}).reduce(function(p,g){var b;return me(me({},p),(b={},b[g]=n[g],b))},{}),v=(r=(e=n.components)===null||e===void 0?void 0:e.Months)!==null&&r!==void 0?r:l7;return o.jsx("div",me({className:d.join(" "),style:f,dir:s.dir,id:s.id,nonce:n.nonce,title:n.title,lang:n.lang},h,{children:o.jsx(v,{children:a.displayMonths.map(function(p,g){return o.jsx(o7,{displayIndex:g,displayMonth:p},g)})})}))}function u7(t){var e=t.children,r=I9(t,["children"]);return o.jsx(X9,{initialProps:r,children:o.jsx(cW,{children:o.jsx(WW,{initialProps:r,children:o.jsx(xW,{initialProps:r,children:o.jsx(_W,{initialProps:r,children:o.jsx(TW,{children:o.jsx(zW,{children:e})})})})})})})}function d7(t){return o.jsx(u7,me({},t,{children:o.jsx(c7,{initialProps:t})}))}function xO({className:t,classNames:e,showOutsideDays:r=!0,...n}){return o.jsx(d7,{showOutsideDays:r,className:fe("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:fe(jc({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:fe(jc({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...e},components:{IconLeft:({className:s,...i})=>o.jsx(SF,{className:fe("h-4 w-4",s),...i}),IconRight:({className:s,...i})=>o.jsx(Dy,{className:fe("h-4 w-4",s),...i})},...n})}xO.displayName="Calendar";var $v="Popover",[wO,gq]=Xn($v,[ul]),vu=ul(),[f7,Ei]=wO($v),bO=t=>{const{__scopePopover:e,children:r,open:n,defaultOpen:s,onOpenChange:i,modal:a=!1}=t,l=vu(e),c=y.useRef(null),[u,d]=y.useState(!1),[f=!1,h]=Wo({prop:n,defaultProp:s,onChange:i});return o.jsx(Qy,{...l,children:o.jsx(f7,{scope:e,contentId:qn(),triggerRef:c,open:f,onOpenChange:h,onOpenToggle:y.useCallback(()=>h(v=>!v),[h]),hasCustomAnchor:u,onCustomAnchorAdd:y.useCallback(()=>d(!0),[]),onCustomAnchorRemove:y.useCallback(()=>d(!1),[]),modal:a,children:r})})};bO.displayName=$v;var _O="PopoverAnchor",h7=y.forwardRef((t,e)=>{const{__scopePopover:r,...n}=t,s=Ei(_O,r),i=vu(r),{onCustomAnchorAdd:a,onCustomAnchorRemove:l}=s;return y.useEffect(()=>(a(),()=>l()),[a,l]),o.jsx(rh,{...i,...n,ref:e})});h7.displayName=_O;var SO="PopoverTrigger",jO=y.forwardRef((t,e)=>{const{__scopePopover:r,...n}=t,s=Ei(SO,r),i=vu(r),a=$e(e,s.triggerRef),l=o.jsx(Ne.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":PO(s.open),...n,ref:a,onClick:se(t.onClick,s.onOpenToggle)});return s.hasCustomAnchor?l:o.jsx(rh,{asChild:!0,...i,children:l})});jO.displayName=SO;var Uv="PopoverPortal",[m7,p7]=wO(Uv,{forceMount:void 0}),kO=t=>{const{__scopePopover:e,forceMount:r,children:n,container:s}=t,i=Ei(Uv,e);return o.jsx(m7,{scope:e,forceMount:r,children:o.jsx(ts,{present:r||i.open,children:o.jsx(iu,{asChild:!0,container:s,children:n})})})};kO.displayName=Uv;var Jo="PopoverContent",NO=y.forwardRef((t,e)=>{const r=p7(Jo,t.__scopePopover),{forceMount:n=r.forceMount,...s}=t,i=Ei(Jo,t.__scopePopover);return o.jsx(ts,{present:n||i.open,children:i.modal?o.jsx(y7,{...s,ref:e}):o.jsx(v7,{...s,ref:e})})});NO.displayName=Jo;var g7=hi("PopoverContent.RemoveScroll"),y7=y.forwardRef((t,e)=>{const r=Ei(Jo,t.__scopePopover),n=y.useRef(null),s=$e(e,n),i=y.useRef(!1);return y.useEffect(()=>{const a=n.current;if(a)return sh(a)},[]),o.jsx(au,{as:g7,allowPinchZoom:!0,children:o.jsx(CO,{...t,ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:se(t.onCloseAutoFocus,a=>{var l;a.preventDefault(),i.current||(l=r.triggerRef.current)==null||l.focus()}),onPointerDownOutside:se(t.onPointerDownOutside,a=>{const l=a.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;i.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:se(t.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1})})})}),v7=y.forwardRef((t,e)=>{const r=Ei(Jo,t.__scopePopover),n=y.useRef(!1),s=y.useRef(!1);return o.jsx(CO,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var a,l;(a=t.onCloseAutoFocus)==null||a.call(t,i),i.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),i.preventDefault()),n.current=!1,s.current=!1},onInteractOutside:i=>{var c,u;(c=t.onInteractOutside)==null||c.call(t,i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const a=i.target;((u=r.triggerRef.current)==null?void 0:u.contains(a))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),CO=y.forwardRef((t,e)=>{const{__scopePopover:r,trapFocus:n,onOpenAutoFocus:s,onCloseAutoFocus:i,disableOutsidePointerEvents:a,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onInteractOutside:d,...f}=t,h=Ei(Jo,r),v=vu(r);return Zf(),o.jsx(nu,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:s,onUnmountAutoFocus:i,children:o.jsx(ru,{asChild:!0,disableOutsidePointerEvents:a,onInteractOutside:d,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onDismiss:()=>h.onOpenChange(!1),children:o.jsx(Yy,{"data-state":PO(h.open),role:"dialog",id:h.contentId,...v,...f,ref:e,style:{...f.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),EO="PopoverClose",x7=y.forwardRef((t,e)=>{const{__scopePopover:r,...n}=t,s=Ei(EO,r);return o.jsx(Ne.button,{type:"button",...n,ref:e,onClick:se(t.onClick,()=>s.onOpenChange(!1))})});x7.displayName=EO;var w7="PopoverArrow",b7=y.forwardRef((t,e)=>{const{__scopePopover:r,...n}=t,s=vu(r);return o.jsx(Jy,{...s,...n,ref:e})});b7.displayName=w7;function PO(t){return t?"open":"closed"}var _7=bO,S7=jO,j7=kO,TO=NO;const k7=_7,N7=S7,AO=y.forwardRef(({className:t,align:e="center",sideOffset:r=4,...n},s)=>o.jsx(j7,{children:o.jsx(TO,{ref:s,align:e,sideOffset:r,className:fe("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]",t),...n})}));AO.displayName=TO.displayName;function C7(){const{toast:t}=Ot(),{user:e}=Gt(),[r,n]=y.useState(null),[s,i]=y.useState(!1),{data:a=[],isLoading:l}=Qe({queryKey:["belts",e==null?void 0:e.id],queryFn:()=>Ws.getAll(e.id),enabled:!!(e!=null&&e.id)}),{data:c}=Qe({queryKey:["belts","current",e==null?void 0:e.id],queryFn:()=>Ws.getCurrent(e.id),enabled:!!(e!=null&&e.id)}),u=ff({resolver:hf(bV),defaultValues:{belt:"white",stripes:0,promotionDate:new Date,instructor:"",notes:""}}),d=Fe({mutationFn:async m=>{if(!(e!=null&&e.id))throw new Error("User not authenticated");const x={belt:m.belt,stripes:m.stripes||0,promotionDate:m.promotionDate.toISOString().split("T")[0],instructor:m.instructor||"",notes:m.notes||""};return await Ws.create(e.id,x)},onSuccess:()=>{sr.invalidateQueries({queryKey:["belts",e==null?void 0:e.id]}),sr.invalidateQueries({queryKey:["belts","current",e==null?void 0:e.id]}),u.reset(),i(!1),t({title:"Belt promotion added!",description:"Your belt progression has been recorded."})},onError:m=>{console.error("Create belt mutation error:",m),t({title:"Error",description:"Failed to add belt promotion. Please try again.",variant:"destructive"})}}),f=Fe({mutationFn:async({id:m,data:x})=>{if(!(e!=null&&e.id))throw new Error("User not authenticated");const _={belt:x.belt,stripes:x.stripes||0,promotionDate:x.promotionDate.toISOString().split("T")[0],instructor:x.instructor||"",notes:x.notes||""};return await Ws.update(m,e.id,_)},onSuccess:()=>{sr.invalidateQueries({queryKey:["belts",e==null?void 0:e.id]}),sr.invalidateQueries({queryKey:["belts","current",e==null?void 0:e.id]}),u.reset(),i(!1),n(null),t({title:"Belt updated!",description:"Your belt progression has been updated."})},onError:m=>{console.error("Update belt mutation error:",m),t({title:"Error",description:"Failed to update belt. Please try again.",variant:"destructive"})}}),h=Fe({mutationFn:async m=>{if(!(e!=null&&e.id))throw new Error("User not authenticated");return await Ws.delete(m,e.id)},onSuccess:()=>{sr.invalidateQueries({queryKey:["belts",e==null?void 0:e.id]}),sr.invalidateQueries({queryKey:["belts","current",e==null?void 0:e.id]}),t({title:"Belt promotion deleted",description:"The belt promotion has been removed."})},onError:m=>{console.error("Delete belt mutation error:",m),t({title:"Error",description:"Failed to delete belt promotion. Please try again.",variant:"destructive"})}}),v=m=>{r?f.mutate({id:r.id,data:m}):d.mutate(m)},p=m=>{n(m),i(!0),u.setValue("belt",m.belt),u.setValue("stripes",m.stripes);const x=m.promotion_date||m.promotionDate;u.setValue("promotionDate",new Date(x)),u.setValue("instructor",m.instructor||""),u.setValue("notes",m.notes||"")},g=()=>{n(null),i(!1),u.reset()},b=m=>{const x=(m==null?void 0:m.promotion_date)||(m==null?void 0:m.promotionDate)||m;return x?Ns(new Date(x),"MMM d, yyyy"):"N/A"},w=({belt:m,stripes:x,size:_="md"})=>{const S={sm:"w-16 h-4",md:"w-24 h-6",lg:"w-32 h-8"},j={sm:"w-1 h-3",md:"w-1.5 h-4",lg:"w-2 h-5"},k=A=>({white:"bg-white border-2 border-gray-400",blue:"bg-blue-600",purple:"bg-purple-600",brown:"bg-amber-800",black:"bg-black"})[A]||"bg-gray-400",N=A=>({white:"bg-gray-800",blue:"bg-blue-800",purple:"bg-purple-800",brown:"bg-amber-900",black:"bg-gray-900"})[A]||"bg-gray-600";return o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("div",{className:`${k(m)} ${S[_]} rounded-sm shadow-md relative flex items-center justify-center`,children:[o.jsx("div",{className:`${N(m)} absolute left-0 top-0 bottom-0 w-2 rounded-l-sm`}),o.jsx("span",{className:`${m==="white"?"text-black":"text-white"} font-bold text-xs`,children:"BJJ"}),o.jsx("div",{className:"absolute right-1 top-1/2 transform -translate-y-1/2 flex gap-0.5",children:Array.from({length:x}).map((A,I)=>o.jsx("div",{className:`${j[_]} bg-gray-300 rounded-sm`},I))})]}),o.jsxs("div",{className:"text-sm font-medium capitalize text-black",children:[m," Belt ",x>0&&`(${x} stripe${x!==1?"s":""})`]})]})};return l?o.jsx("div",{className:"p-6 max-w-4xl mx-auto",children:o.jsxs("div",{className:"animate-pulse space-y-4",children:[o.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3"}),o.jsx("div",{className:"h-32 bg-gray-200 rounded"}),o.jsx("div",{className:"h-32 bg-gray-200 rounded"})]})}):o.jsxs("div",{className:"p-6 max-w-4xl mx-auto space-y-6",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white mb-2",children:"Belt Progression"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Track your BJJ belt promotions and achievements"})]}),o.jsxs(St,{className:"bg-gradient-to-r from-bjj-navy to-blue-800 text-white",children:[o.jsx(or,{children:o.jsxs(lr,{className:"flex items-center gap-2",children:[o.jsx(Yl,{className:"h-6 w-6"}),"Current Belt Status"]})}),o.jsx(Mt,{children:c?o.jsx("div",{className:"flex items-center justify-center",children:o.jsx(w,{belt:c.belt,stripes:c.stripes,size:"lg"})}):o.jsxs("div",{className:"text-center py-4",children:[o.jsx("p",{className:"text-gray-300",children:"No current belt recorded"}),o.jsx("p",{className:"text-sm text-gray-400",children:"Add your first belt promotion below"})]})})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white flex items-center gap-2",children:[o.jsx(Yl,{className:"h-6 w-6"}),"Promotion History"]}),a.length===0?o.jsxs(St,{className:"p-8 text-center",children:[o.jsx(Yl,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-semibold text-gray-600 mb-2",children:"No promotions recorded yet"}),o.jsx("p",{className:"text-gray-500",children:"Add your first belt promotion below!"})]}):o.jsx("div",{className:"space-y-3",children:a.map(m=>o.jsx(St,{className:"bg-gradient-to-r from-white to-gray-50 border border-gray-200 hover:shadow-md transition-shadow",children:o.jsx(Mt,{className:"p-6",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx(w,{belt:m.belt,stripes:m.stripes,size:"md"}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 mt-1",children:[o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx($x,{className:"w-4 h-4"}),b(m.promotionDate)]}),m.instructor&&o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(Jd,{className:"w-4 h-4"}),m.instructor]})]}),m.notes&&o.jsx("p",{className:"text-sm text-gray-600 mt-2 max-w-md",children:m.notes})]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(ze,{variant:"outline",size:"sm",onClick:()=>p(m),className:"text-blue-600 hover:text-blue-700 bg-white border-2 border-blue-200 hover:bg-blue-50",style:{position:"relative",zIndex:100,backgroundColor:"white",border:"2px solid #dbeafe"},children:o.jsx(Yp,{className:"w-4 h-4"})}),o.jsx(ze,{variant:"outline",size:"sm",onClick:()=>{confirm("Are you sure you want to delete this belt promotion?")&&h.mutate(m.id)},className:"text-red-600 hover:text-red-700 bg-white border-2 border-red-200 hover:bg-red-50",style:{position:"relative",zIndex:100,backgroundColor:"white",border:"2px solid #fecaca"},children:o.jsx(ws,{className:"w-4 h-4"})})]})]})})},m.id))})]}),o.jsx("div",{className:"flex justify-center mt-8",children:o.jsx(ze,{onClick:()=>i(!0),className:"bg-bjj-red hover:bg-red-600 text-white px-8 py-3 text-lg border-2 border-bjj-red",size:"lg",style:{position:"relative",zIndex:100,backgroundColor:"#dc2626",borderColor:"#dc2626"},children:c?"Update Belt Status":"Add First Belt"})}),s&&o.jsxs(St,{className:"bg-gradient-to-br from-white to-gray-50 border border-gray-200 shadow-lg mt-6",children:[o.jsxs(or,{children:[o.jsxs(lr,{className:"flex items-center gap-2 text-gray-800 dark:text-white",children:[r?o.jsx(Yp,{className:"h-5 w-5"}):o.jsx(Jp,{className:"h-5 w-5"}),r?"Edit Belt Promotion":"Add Belt Promotion"]}),o.jsx(yi,{children:r?"Update your belt promotion details":"Record your belt or stripe promotion"})]}),o.jsx(Mt,{className:"bg-white relative",children:o.jsx(jV,{...u,children:o.jsxs("form",{onSubmit:u.handleSubmit(v),className:"space-y-4 bg-white relative",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsx(Nl,{control:u.control,name:"belt",render:({field:m})=>o.jsxs(Ua,{children:[o.jsx(Ba,{className:"text-black",children:"Belt Color"}),o.jsxs(bw,{onValueChange:m.onChange,value:m.value,children:[o.jsx(za,{children:o.jsx(xg,{className:"bg-white text-black",children:o.jsx(_w,{placeholder:"Select belt color"})})}),o.jsxs(wg,{className:"bg-white text-black",children:[o.jsx(sn,{value:"white",className:"text-black",children:"White Belt"}),o.jsx(sn,{value:"blue",className:"text-black",children:"Blue Belt"}),o.jsx(sn,{value:"purple",className:"text-black",children:"Purple Belt"}),o.jsx(sn,{value:"brown",className:"text-black",children:"Brown Belt"}),o.jsx(sn,{value:"black",className:"text-black",children:"Black Belt"})]})]}),o.jsx(Va,{})]})}),o.jsx(Nl,{control:u.control,name:"stripes",render:({field:m})=>{var x;return o.jsxs(Ua,{children:[o.jsx(Ba,{className:"text-black",children:"Stripes"}),o.jsxs(bw,{onValueChange:_=>m.onChange(parseInt(_)),value:(x=m.value)==null?void 0:x.toString(),children:[o.jsx(za,{children:o.jsx(xg,{className:"bg-white text-black",children:o.jsx(_w,{placeholder:"Number of stripes"})})}),o.jsxs(wg,{className:"bg-white text-black",children:[o.jsx(sn,{value:"0",className:"text-black",children:"No Stripes"}),o.jsx(sn,{value:"1",className:"text-black",children:"1 Stripe"}),o.jsx(sn,{value:"2",className:"text-black",children:"2 Stripes"}),o.jsx(sn,{value:"3",className:"text-black",children:"3 Stripes"}),o.jsx(sn,{value:"4",className:"text-black",children:"4 Stripes"})]})]}),o.jsx(Va,{})]})}}),o.jsx(Nl,{control:u.control,name:"promotionDate",render:({field:m})=>o.jsxs(Ua,{className:"flex flex-col",children:[o.jsx(Ba,{className:"text-black",children:"Promotion Date"}),o.jsxs(k7,{modal:!0,children:[o.jsx(N7,{asChild:!0,children:o.jsx(za,{children:o.jsxs(ze,{variant:"outline",className:fe("w-full pl-3 text-left font-normal bg-white text-black",!m.value&&"text-gray-500"),children:[m.value?Ns(m.value,"PPP"):o.jsx("span",{children:"Pick a date"}),o.jsx($x,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),o.jsx(AO,{className:"w-auto p-0",align:"start",side:"top",sideOffset:5,children:o.jsx(xO,{mode:"single",selected:m.value,onSelect:m.onChange,disabled:x=>x>new Date||x<new Date("1900-01-01"),initialFocus:!0})})]}),o.jsx(Va,{})]})}),o.jsx(Nl,{control:u.control,name:"instructor",render:({field:m})=>o.jsxs(Ua,{children:[o.jsx(Ba,{className:"text-black",children:"Instructor (Optional)"}),o.jsx(za,{children:o.jsx(ir,{placeholder:"Professor who promoted you",className:"bg-white text-black",...m})}),o.jsx(Va,{})]})})]}),o.jsx(Nl,{control:u.control,name:"notes",render:({field:m})=>o.jsxs(Ua,{children:[o.jsx(Ba,{className:"text-black",children:"Notes (Optional)"}),o.jsx(za,{children:o.jsx(hv,{placeholder:"Add any notes about this promotion...",className:"resize-none bg-white text-black",...m})}),o.jsx(Va,{})]})})]})})}),o.jsx("div",{className:"px-6 pb-6 bg-white",children:o.jsxs("div",{className:"flex gap-3 justify-end pt-4 border-t border-gray-200",children:[o.jsx(ze,{type:"button",variant:"outline",onClick:g,className:"px-6 bg-white border-gray-300 text-gray-700 hover:bg-gray-50",style:{position:"relative",zIndex:1e3,backgroundColor:"white",border:"2px solid #d1d5db"},children:"Cancel"}),o.jsx(ze,{type:"button",onClick:()=>{const m=u.getValues();r?f.mutate({id:r.id,data:m}):d.mutate(m)},disabled:d.isPending||f.isPending,className:"px-8 text-white border-2",style:{position:"relative",zIndex:1e3,backgroundColor:"#dc2626",borderColor:"#dc2626"},children:r?f.isPending?"Updating...":"Update Promotion":d.isPending?"Adding...":"Add Promotion"})]})})]})]})}function E7(){y.useEffect(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]);const[t,e]=y.useState("community"),{toast:r}=Ot(),n=Zn(),{user:s}=Gt(),{data:i}=Qe({queryKey:["/api/my-gym"],staleTime:6e4}),{data:a=[],isLoading:l}=Qe({queryKey:["/api/notes/shared"],staleTime:3e4}),{data:c=[],isLoading:u}=Qe({queryKey:["/api/gym-notes"],enabled:!!i,staleTime:3e4}),d=Fe({mutationFn:async({noteId:p,isLiked:g})=>g?await dt("DELETE",`/api/notes/${p}/like`):await dt("POST",`/api/notes/${p}/like`),onSuccess:()=>{n.invalidateQueries({queryKey:["/api/notes/shared"]})},onError:p=>{r({title:"Error",description:"Failed to update like status",variant:"destructive"})}}),f=Fe({mutationFn:async p=>await dt("DELETE",`/api/notes/${p}/admin`),onSuccess:()=>{n.invalidateQueries({queryKey:["/api/notes/shared"]}),r({title:"Note Removed",description:"The inappropriate note has been removed from the community."})},onError:p=>{r({title:"Error",description:"Failed to remove note",variant:"destructive"})}}),h=Fe({mutationFn:async p=>await dt("DELETE",`/api/gym-notes/${p}`),onSuccess:()=>{n.invalidateQueries({queryKey:["/api/gym-notes"]}),r({title:"Note Deleted",description:"The gym note has been deleted successfully."})},onError:p=>{r({title:"Error",description:p.message||"Failed to delete gym note",variant:"destructive"})}}),v=(s==null?void 0:s.role)==="admin";return o.jsxs("div",{className:"p-6 max-w-4xl mx-auto",style:{paddingTop:"max(1.5rem, env(safe-area-inset-top))"},children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Social"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx($n,{className:"w-6 h-6 text-blue-600"}),o.jsx("span",{className:"text-sm text-gray-600",children:"Connect with training partners"})]})]}),o.jsxs("div",{className:"flex space-x-1 bg-gray-100 p-1 rounded-lg mb-6",children:[o.jsx("button",{onClick:()=>e("community"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${t==="community"?"bg-white text-black shadow-sm":"text-gray-600 hover:text-gray-900"}`,"data-testid":"tab-community",children:"Community"}),i&&o.jsx("button",{onClick:()=>e("my-gym"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${t==="my-gym"?"bg-white text-black shadow-sm":"text-gray-600 hover:text-gray-900"}`,"data-testid":"tab-my-gym",children:"My Gym"}),o.jsx("button",{onClick:()=>e("friends"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${t==="friends"?"bg-white text-black shadow-sm":"text-gray-600 hover:text-gray-900"}`,"data-testid":"tab-friends",children:"Friends"})]}),t==="community"&&o.jsx("div",{className:"space-y-6",children:o.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md",children:[o.jsxs("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[o.jsx(Qp,{className:"w-5 h-5 text-blue-600"}),"Community Shared Notes"]}),l?o.jsxs("div",{className:"text-center py-8",children:[o.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full mx-auto"}),o.jsx("p",{className:"text-gray-600 mt-2",children:"Loading community notes..."})]}):a.length>0?o.jsx("div",{className:"space-y-4",children:a.map(p=>o.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50 transition-colors",children:o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h3",{className:"font-semibold text-black",children:p.title}),o.jsxs("div",{className:"text-xs text-gray-500",children:["by ",p.author?`${p.author.firstName} ${p.author.lastName}`:"Unknown User"]})]}),o.jsx("div",{className:"w-full",children:o.jsx("p",{className:"text-gray-600 text-sm leading-relaxed whitespace-pre-wrap break-words",children:p.content})}),p.videoUrl&&o.jsxs("div",{className:"mt-3",children:[o.jsxs("video",{controls:!0,className:"w-full max-w-md rounded-lg shadow-sm",style:{maxHeight:"300px"},children:[o.jsx("source",{src:p.videoUrl,type:"video/mp4"}),"Your browser does not support the video tag."]}),p.videoFileName&&o.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[" ",p.videoFileName]})]}),p.tags&&p.tags.length>0&&o.jsx("div",{className:"flex flex-wrap gap-1",children:p.tags.map((g,b)=>o.jsx("span",{className:"bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded",children:g},b))}),o.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-gray-100",children:[o.jsxs("div",{className:"text-xs text-gray-400",children:["Shared ",new Date(p.createdAt).toLocaleDateString()]}),o.jsxs("div",{className:"flex items-center gap-3 text-gray-500 text-sm",children:[o.jsxs("button",{onClick:()=>d.mutate({noteId:p.id,isLiked:p.isLikedByUser||!1}),disabled:d.isPending,className:`flex items-center gap-1 transition-colors ${p.isLikedByUser?"text-red-500 hover:text-red-600":"hover:text-red-500"}`,children:[o.jsx(TF,{className:`w-4 h-4 ${p.isLikedByUser?"fill-current":""}`}),o.jsx("span",{children:p.likeCount||0})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(bc,{className:"w-4 h-4"}),o.jsx("span",{children:"0"})]}),v&&o.jsxs("button",{onClick:()=>{confirm("Are you sure you want to delete this note? This action cannot be undone.")&&f.mutate(p.id)},disabled:f.isPending,className:"flex items-center gap-1 text-red-500 hover:text-red-600 transition-colors",title:"Remove inappropriate content",children:[o.jsx(ws,{className:"w-4 h-4"}),o.jsx("span",{className:"text-xs",children:"Remove"})]})]})]})]})},p.id))}):o.jsxs("div",{className:"text-center py-8 text-gray-500",children:[o.jsx(Qp,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),o.jsx("p",{children:"No shared notes yet."}),o.jsx("p",{className:"text-sm",children:"Be the first to share your knowledge with the community!"})]})]})}),t==="my-gym"&&o.jsx("div",{className:"space-y-6",children:o.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md",children:[o.jsxs("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[o.jsx($n,{className:"w-5 h-5 text-blue-600"}),(i==null?void 0:i.name)||"My Gym"," - Shared Notes"]}),u?o.jsxs("div",{className:"text-center py-8",children:[o.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full mx-auto"}),o.jsx("p",{className:"text-gray-600 mt-2",children:"Loading gym notes..."})]}):c.length>0?o.jsx("div",{className:"space-y-4",children:c.map(p=>o.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50 transition-colors",children:o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h3",{className:"font-semibold text-black",children:p.title}),o.jsxs("div",{className:"text-xs text-gray-500",children:["by ",p.author?`${p.author.firstName} ${p.author.lastName}`:"Unknown User"]})]}),o.jsx("div",{className:"w-full",children:o.jsx("p",{className:"text-gray-600 text-sm leading-relaxed whitespace-pre-wrap break-words",children:p.content})}),p.videoUrl&&o.jsxs("div",{className:"mt-3",children:[o.jsxs("video",{controls:!0,className:"w-full max-w-md rounded-lg shadow-sm",style:{maxHeight:"300px"},children:[o.jsx("source",{src:p.videoUrl,type:"video/mp4"}),"Your browser does not support the video tag."]}),p.videoFileName&&o.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[" ",p.videoFileName]})]}),p.tags&&p.tags.length>0&&o.jsx("div",{className:"flex flex-wrap gap-1",children:p.tags.map((g,b)=>o.jsx("span",{className:"bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded",children:g},b))}),o.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-gray-100",children:[o.jsxs("div",{className:"text-xs text-gray-400",children:["Shared ",new Date(p.createdAt).toLocaleDateString()]}),(v||(i==null?void 0:i.role)==="admin")&&o.jsxs("button",{onClick:()=>{confirm("Are you sure you want to delete this gym note? This action cannot be undone.")&&h.mutate(p.id)},disabled:h.isPending,className:"flex items-center gap-1 text-red-500 hover:text-red-600 transition-colors",title:"Delete gym note","data-testid":`button-delete-gym-note-${p.id}`,children:[o.jsx(ws,{className:"w-4 h-4"}),o.jsx("span",{className:"text-xs",children:"Delete"})]})]})]})},p.id))}):o.jsxs("div",{className:"text-center py-8 text-gray-500",children:[o.jsx($n,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),o.jsx("p",{children:"No gym notes yet."}),o.jsx("p",{className:"text-sm",children:"Share your first note with your gym community!"})]})]})}),t==="friends"&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md",children:[o.jsxs("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[o.jsx($n,{className:"w-5 h-5 text-blue-600"}),"Training Partners"]}),o.jsxs("div",{className:"text-center py-8 text-gray-500",children:[o.jsx($n,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),o.jsx("p",{children:"No training partners connected yet."}),o.jsx("p",{className:"text-sm",children:"Invite your training partners to start sharing notes and progress!"})]})]}),o.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Find Training Partners"}),o.jsxs("div",{className:"text-center py-6 text-gray-500",children:[o.jsx("p",{children:"Feature coming soon!"}),o.jsx("p",{className:"text-sm",children:"Soon you'll be able to find training partners near you."})]})]})]})]})}function P7(){const[t,e]=y.useState(!1),[r,n]=y.useState({title:"",description:"",category:"technique",tags:"",videoUrl:""}),{toast:s}=Ot(),i=Zn(),a=Fe({mutationFn:async u=>await dt("POST","/api/training-videos",u),onSuccess:()=>{i.invalidateQueries({queryKey:["/api/training-videos"]}),e(!1),n({title:"",description:"",category:"technique",tags:"",videoUrl:""}),s({title:"Success",description:"Video added successfully!"})},onError:u=>{s({title:"Error",description:"Failed to add video",variant:"destructive"})}}),l=u=>{if(u.preventDefault(),!r.title.trim()||!r.videoUrl.trim()){s({title:"Error",description:"Please provide both title and video URL",variant:"destructive"});return}const d={title:r.title,description:r.description||"",videoUrl:r.videoUrl,category:r.category,tags:r.tags?r.tags.split(",").map(f=>f.trim()).filter(f=>f.length>0):[],uploadedBy:1,isPublic:1};a.mutate(d)},c=u=>{const{name:d,value:f}=u.target;n(h=>({...h,[d]:f}))};return o.jsxs("div",{className:"p-6 max-w-4xl mx-auto",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h1",{className:"text-3xl font-bold text-black",children:"My Videos"}),o.jsx("button",{onClick:()=>e(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg",children:"Add Video"})]}),t&&o.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md mb-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h2",{className:"text-xl font-bold text-black",children:"Add Training Video"}),o.jsx("button",{onClick:()=>e(!1),className:"text-gray-500 hover:text-gray-700",children:""})]}),o.jsxs("form",{onSubmit:l,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-black mb-1",children:"Title *"}),o.jsx("input",{type:"text",name:"title",value:r.title,onChange:c,placeholder:"Enter video title",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-black",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-black mb-1",children:"Video URL *"}),o.jsx("input",{type:"url",name:"videoUrl",value:r.videoUrl,onChange:c,placeholder:"https://youtube.com/watch?v=... or other video URL",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-black",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-black mb-1",children:"Category"}),o.jsxs("select",{name:"category",value:r.category,onChange:c,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-black",children:[o.jsx("option",{value:"technique",children:"Technique"}),o.jsx("option",{value:"drilling",children:"Drilling"}),o.jsx("option",{value:"sparring",children:"Sparring"}),o.jsx("option",{value:"competition",children:"Competition"}),o.jsx("option",{value:"tutorial",children:"Tutorial"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-black mb-1",children:"Description"}),o.jsx("textarea",{name:"description",value:r.description,onChange:c,placeholder:"Describe the video content...",rows:3,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-black"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-black mb-1",children:"Tags (comma-separated)"}),o.jsx("input",{type:"text",name:"tags",value:r.tags,onChange:c,placeholder:"guard, submission, bjj",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-black"})]}),o.jsxs("div",{className:"flex gap-3 pt-4",children:[o.jsx("button",{type:"submit",disabled:a.isPending,className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg disabled:opacity-50",children:a.isPending?"Adding...":"Add Video"}),o.jsx("button",{type:"button",onClick:()=>e(!1),className:"bg-gray-300 hover:bg-gray-400 text-gray-700 px-6 py-2 rounded-lg",children:"Cancel"})]})]})]}),o.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md",children:[o.jsx("h3",{className:"text-lg font-semibold text-black mb-4",children:"Your Training Videos"}),o.jsxs("div",{className:"text-center py-8 text-gray-500",children:[o.jsx("p",{children:"No videos uploaded yet."}),o.jsx("p",{className:"text-sm",children:'Click "Add Video" to share your training footage!'})]})]})]})}function T7(){const t=y.useRef(null),[e,r]=y.useState(!1),[n,s]=y.useState("#000000"),[i,a]=y.useState(3),{toast:l}=Ot(),{user:c}=Gt(),u=Zn(),{data:d=[]}=Qe({queryKey:["drawings",c==null?void 0:c.id],queryFn:()=>Fx.getAll(c.id),enabled:!!(c!=null&&c.id)}),f=Fe({mutationFn:async m=>{if(!(c!=null&&c.id))throw new Error("User not authenticated");return await Fx.create(c.id,m)},onSuccess:()=>{u.invalidateQueries({queryKey:["drawings",c==null?void 0:c.id]}),l({title:"Drawing Saved!",description:"Your technique diagram has been saved."}),g()},onError:m=>{l({title:"Error",description:"Failed to save drawing. Please try again.",variant:"destructive"})}});y.useEffect(()=>{const m=t.current;if(!m)return;const x=m.getContext("2d");x&&(m.width=m.offsetWidth,m.height=400,x.lineCap="round",x.lineJoin="round",x.strokeStyle=n,x.lineWidth=i,x.fillStyle="white",x.fillRect(0,0,m.width,m.height))},[]),y.useEffect(()=>{const m=t.current;if(!m)return;const x=m.getContext("2d");x&&(x.strokeStyle=n,x.lineWidth=i)},[n,i]);const h=m=>{r(!0);const x=t.current;if(!x)return;const _=x.getBoundingClientRect(),S=m.clientX-_.left,j=m.clientY-_.top,k=x.getContext("2d");k&&(k.beginPath(),k.moveTo(S,j))},v=m=>{if(!e)return;const x=t.current;if(!x)return;const _=x.getBoundingClientRect(),S=m.clientX-_.left,j=m.clientY-_.top,k=x.getContext("2d");k&&(k.lineTo(S,j),k.stroke())},p=()=>{r(!1)},g=()=>{const m=t.current;if(!m)return;const x=m.getContext("2d");x&&(x.fillStyle="white",x.fillRect(0,0,m.width,m.height))},b=()=>{const m=t.current;if(!m)return;const x=m.toDataURL();f.mutate({imageData:x})},w=["#000000","#FF0000","#00FF00","#0000FF","#FFFF00","#FF00FF","#00FFFF","#FFA500"];return o.jsxs("div",{className:"p-6 max-w-md mx-auto",children:[o.jsxs("div",{className:"mb-6",children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Drawing"}),o.jsx("p",{className:"text-gray-600",children:"Draw technique diagrams and positions"})]}),o.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-md mb-4",children:[o.jsxs("div",{className:"mb-4",children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Brush Size: ",i,"px"]}),o.jsx("input",{type:"range",min:"1",max:"20",value:i,onChange:m=>a(parseInt(m.target.value)),className:"w-full"})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Colors"}),o.jsx("div",{className:"flex gap-2 flex-wrap",children:w.map(m=>o.jsx("button",{onClick:()=>s(m),className:`w-8 h-8 rounded-full border-2 ${n===m?"border-gray-800":"border-gray-300"}`,style:{backgroundColor:m}},m))})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:g,className:"flex-1 bg-gray-500 text-white py-2 px-4 rounded-lg hover:bg-gray-600 transition-colors",children:"Clear"}),o.jsx("button",{onClick:b,className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors",children:"Save"})]})]}),o.jsx("div",{className:"bg-white p-4 rounded-xl shadow-md mb-6",children:o.jsx("canvas",{ref:t,onMouseDown:h,onMouseMove:v,onMouseUp:p,onMouseLeave:p,className:"w-full border border-gray-300 rounded-lg cursor-crosshair",style:{touchAction:"none"}})}),o.jsxs("div",{children:[o.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:["Saved Drawings (",d.length,")"]}),d.length>0?o.jsx("div",{className:"grid grid-cols-2 gap-3",children:d.map((m,x)=>o.jsxs("div",{className:"bg-white p-2 rounded-lg shadow-md",children:[o.jsx("img",{src:m.imageData,alt:`Drawing ${x+1}`,className:"w-full rounded border"}),o.jsx("div",{className:"mt-2 text-center",children:o.jsx("span",{className:"text-xs text-gray-500",children:new Date(m.createdAt).toLocaleDateString()})})]},m.id))}):o.jsxs("div",{className:"text-center py-8 text-gray-500",children:[o.jsx("p",{children:"No drawings saved yet."}),o.jsx("p",{className:"text-sm",children:"Create your first technique diagram!"})]})]})]})}const A7=hu({name:ke().min(1,"Name is required"),email:ke().email("Please enter a valid email address"),subject:ke().min(1,"Subject is required"),message:ke().min(10,"Message must be at least 10 characters long")});function O7(){const{user:t}=Gt(),{toast:e}=Ot(),r=ff({resolver:hf(A7),defaultValues:{name:t?`${t.firstName||""} ${t.lastName||""}`.trim():"",email:(t==null?void 0:t.email)||"",subject:"",message:""}}),n=Fe({mutationFn:async i=>(await dt("POST","/api/contact",i)).json(),onSuccess:()=>{e({title:"Message sent!",description:"Thank you for reaching out. I'll get back to you soon."}),r.reset({name:t?`${t.firstName||""} ${t.lastName||""}`.trim():"",email:(t==null?void 0:t.email)||"",subject:"",message:""})},onError:i=>{e({title:"Failed to send message",description:i.message||"Please try again later.",variant:"destructive"})}}),s=i=>{n.mutate(i)};return o.jsx("div",{className:"min-h-screen bg-gray-50 p-4",children:o.jsxs("div",{className:"max-w-2xl mx-auto",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-600 to-red-600 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(Qp,{className:"text-white",size:32})}),o.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Get in Touch"}),o.jsx("p",{className:"text-gray-600",children:"Have questions, feedback, or suggestions? I'd love to hear from you!"})]}),o.jsxs(St,{className:"shadow-lg",children:[o.jsxs(or,{children:[o.jsxs(lr,{className:"flex items-center gap-2",children:[o.jsx(Gp,{size:20}),"Contact Form"]}),o.jsx(yi,{children:"Send me a message and I'll get back to you as soon as possible."})]}),o.jsx(Mt,{children:o.jsxs("form",{onSubmit:r.handleSubmit(s),className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsxs(ar,{htmlFor:"name",className:"flex items-center gap-2",children:[o.jsx(Jd,{size:16}),"Name *"]}),o.jsx(ir,{id:"name",placeholder:"Your full name",...r.register("name")}),r.formState.errors.name&&o.jsx("p",{className:"text-red-500 text-sm",children:r.formState.errors.name.message})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs(ar,{htmlFor:"email",className:"flex items-center gap-2",children:[o.jsx(Gp,{size:16}),"Email *"]}),o.jsx(ir,{id:"email",type:"email",placeholder:"your.email@example.com",...r.register("email")}),r.formState.errors.email&&o.jsx("p",{className:"text-red-500 text-sm",children:r.formState.errors.email.message})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(ar,{htmlFor:"subject",children:"Subject *"}),o.jsx(ir,{id:"subject",placeholder:"What's this about?",...r.register("subject")}),r.formState.errors.subject&&o.jsx("p",{className:"text-red-500 text-sm",children:r.formState.errors.subject.message})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(ar,{htmlFor:"message",children:"Message *"}),o.jsx(hv,{id:"message",placeholder:"Tell me about your question, feedback, or suggestion...",rows:6,...r.register("message")}),r.formState.errors.message&&o.jsx("p",{className:"text-red-500 text-sm",children:r.formState.errors.message.message})]}),o.jsx(ze,{type:"submit",className:"w-full bg-gradient-to-r from-blue-600 to-red-600 hover:from-blue-700 hover:to-red-700 text-white font-medium",disabled:n.isPending,children:n.isPending?o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Sending message..."]}):o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(IF,{size:16}),"Send Message"]})})]})})]}),o.jsxs("div",{className:"mt-8 text-center",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Other Ways to Connect"}),o.jsxs("div",{className:"space-y-2 text-gray-600",children:[o.jsxs("p",{children:[" ",o.jsx("strong",{children:"Feature Requests:"})," Share your ideas for new features"]}),o.jsxs("p",{children:[" ",o.jsx("strong",{children:"Bug Reports:"})," Let me know if something isn't working"]}),o.jsxs("p",{children:[" ",o.jsx("strong",{children:"BJJ Community:"})," Connect with other practitioners"]}),o.jsxs("p",{children:[" ",o.jsx("strong",{children:"Feedback:"})," Help me make Jits Journal better"]})]})]})]})})}function R7(){const[t,e]=y.useState(""),[r,n]=y.useState(!1),[s,i]=y.useState(!1),{toast:a}=Ot(),l=async c=>{c.preventDefault(),n(!0);try{const u=await fetch("/api/auth/forgot-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t})});if(u.ok)i(!0),a({title:"Reset link sent",description:"If the email exists, a reset link has been sent to your inbox."});else{const d=await u.json();a({title:"Error",description:d.message||"Failed to send reset email",variant:"destructive"})}}catch{a({title:"Error",description:"An error occurred. Please try again.",variant:"destructive"})}finally{n(!1)}};return o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-red-50 p-4",children:o.jsxs(St,{className:"w-full max-w-md",children:[o.jsxs(or,{className:"text-center",children:[o.jsx(lr,{className:"text-2xl font-bold text-gray-800",children:"Forgot Password"}),o.jsx("p",{className:"text-gray-600 mt-2",children:"Enter your email address and we'll send you a link to reset your password."})]}),o.jsxs(Mt,{children:[s?o.jsxs("div",{className:"text-center space-y-4",children:[o.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-blue-100 rounded-full mx-auto",children:o.jsx(Gp,{className:"w-6 h-6 text-blue-600"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Check your email"}),o.jsx("p",{className:"text-gray-600 mt-1",children:"If the email address exists in our system, we've sent a password reset link to:"}),o.jsx("p",{className:"font-medium text-gray-900 mt-2",children:t})]}),o.jsx("div",{className:"text-sm text-gray-500",children:o.jsx("p",{children:"Didn't receive the email? Check your spam folder or try again."})})]}):o.jsxs("form",{onSubmit:l,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(ar,{htmlFor:"email",children:"Email"}),o.jsx(ir,{id:"email",type:"email",placeholder:"Enter your email",value:t,onChange:c=>e(c.target.value),required:!0,className:"mt-1"})]}),o.jsx(ze,{type:"submit",className:"w-full",disabled:r,children:r?"Sending...":"Send Reset Link"})]}),o.jsx("div",{className:"mt-6 text-center",children:o.jsx(Ft,{href:"/login",children:o.jsxs(ze,{variant:"ghost",className:"text-sm",children:[o.jsx(Qf,{className:"w-4 h-4 mr-2"}),"Back to Login"]})})})]})]})})}function I7(){const[t,e]=y.useState(""),[r,n]=y.useState(""),[s,i]=y.useState(!1),[a,l]=y.useState(!1),[c,u]=y.useState(!1),[d,f]=y.useState(!1),{toast:h}=Ot(),[v]=rl(),p=new URLSearchParams(v.split("?")[1]||"").get("token");y.useEffect(()=>{p||h({title:"Invalid Reset Link",description:"The reset link is invalid or has expired.",variant:"destructive"})},[p,h]);const g=async b=>{if(b.preventDefault(),t!==r){h({title:"Passwords don't match",description:"Please make sure both passwords are the same.",variant:"destructive"});return}if(t.length<8){h({title:"Password too short",description:"Password must be at least 8 characters long.",variant:"destructive"});return}i(!0);try{const w=await fetch("/api/auth/reset-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:p,newPassword:t})});if(w.ok)f(!0),h({title:"Password reset successful",description:"Your password has been successfully updated."});else{const m=await w.json();h({title:"Error",description:m.message||"Failed to reset password",variant:"destructive"})}}catch{h({title:"Error",description:"An error occurred. Please try again.",variant:"destructive"})}finally{i(!1)}};return p?o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-red-50 p-4",children:o.jsxs(St,{className:"w-full max-w-md",children:[o.jsxs(or,{className:"text-center",children:[o.jsx(lr,{className:"text-2xl font-bold text-gray-800",children:"Reset Password"}),o.jsx("p",{className:"text-gray-600 mt-2",children:"Enter your new password below."})]}),o.jsxs(Mt,{children:[d?o.jsxs("div",{className:"text-center space-y-4",children:[o.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-green-100 rounded-full mx-auto",children:o.jsx(vC,{className:"w-6 h-6 text-green-600"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Password Reset Successful"}),o.jsx("p",{className:"text-gray-600 mt-1",children:"Your password has been successfully updated. You can now log in with your new password."})]}),o.jsx(Ft,{href:"/login",children:o.jsx(ze,{className:"w-full",children:"Go to Login"})})]}):o.jsxs("form",{onSubmit:g,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(ar,{htmlFor:"password",children:"New Password"}),o.jsxs("div",{className:"relative",children:[o.jsx(ir,{id:"password",type:a?"text":"password",placeholder:"Enter new password",value:t,onChange:b=>e(b.target.value),required:!0,className:"mt-1 pr-10"}),o.jsx(ze,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>l(!a),children:a?o.jsx(Qd,{className:"h-4 w-4"}):o.jsx(bc,{className:"h-4 w-4"})})]})]}),o.jsxs("div",{children:[o.jsx(ar,{htmlFor:"confirmPassword",children:"Confirm New Password"}),o.jsxs("div",{className:"relative",children:[o.jsx(ir,{id:"confirmPassword",type:c?"text":"password",placeholder:"Confirm new password",value:r,onChange:b=>n(b.target.value),required:!0,className:"mt-1 pr-10"}),o.jsx(ze,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>u(!c),children:c?o.jsx(Qd,{className:"h-4 w-4"}):o.jsx(bc,{className:"h-4 w-4"})})]})]}),o.jsx("div",{className:"text-sm text-gray-500",children:o.jsx("p",{children:"Password must be at least 8 characters long."})}),o.jsx(ze,{type:"submit",className:"w-full",disabled:s,children:s?"Resetting...":"Reset Password"})]}),o.jsx("div",{className:"mt-6 text-center",children:o.jsx(Ft,{href:"/login",children:o.jsxs(ze,{variant:"ghost",className:"text-sm",children:[o.jsx(Qf,{className:"w-4 h-4 mr-2"}),"Back to Login"]})})})]})]})}):o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-red-50 p-4",children:o.jsx(St,{className:"w-full max-w-md",children:o.jsx(Mt,{className:"pt-6",children:o.jsxs("div",{className:"text-center",children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Invalid Reset Link"}),o.jsx("p",{className:"text-gray-600 mb-4",children:"The reset link is invalid or has expired."}),o.jsx(Ft,{href:"/forgot-password",children:o.jsx(ze,{children:"Request New Reset Link"})})]})})})})}function OO(){if(!Ut.isNativePlatform())return"web";const t=Ut.getPlatform();return t==="android"?"android":t==="ios"?"ios":"web"}function D7(){return OO()==="web"}function M7(){const{user:t}=Gt(),{toast:e}=Ot(),[r,n]=y.useState(null),s=OO(),i=D7(),{data:a}=Qe({queryKey:["/api/stripe/subscription-status"],enabled:!!t&&i}),l=(a==null?void 0:a.tier)||"free",c=()=>{const f="com.jitsjournal.app";s==="android"?(window.location.href=`market://details?id=${f}`,setTimeout(()=>{window.location.href=`https://play.google.com/store/apps/details?id=${f}`},500)):s==="ios"&&e({title:"Coming Soon",description:"iOS App Store version coming soon!"})},u=f=>{if(i){e({title:"Subscribe via App Store",description:"Download the app from Google Play Store or Apple App Store to unlock premium features.",duration:5e3});return}n(f),e({title:"Opening Store...",description:`Subscribe to ${f==="enthusiast"?"BJJ Enthusiast":"Gym Pro"} in the ${s==="android"?"Play":"App"} Store`}),setTimeout(()=>{c(),n(null)},500)},d=[{name:"Free",price:"$0",tier:"free",description:"Get started with BJJ tracking",features:["View community notes","View gym notes (with code)","Log up to 3 classes","Create up to 3 notes","No note sharing"],icon:MF,color:"text-gray-600",bgColor:"bg-gray-50",borderColor:"border-gray-200",isCurrent:l==="free"},{name:"BJJ Enthusiast",price:"$9.99",tier:"enthusiast",description:"For dedicated practitioners",priceId:void 0,features:["Unlimited class logs","Unlimited notes","Share to community: 1x/week","View all gym notes","Priority support"],icon:BF,color:"text-blue-600",bgColor:"bg-blue-50",borderColor:"border-blue-200",isCurrent:l==="enthusiast",popular:!0},{name:"Gym Pro",price:"Contact Us",tier:"gym_pro",description:"For gym owners & coaches",contactEmail:"bjjjitsjournal@gmail.com",features:["Everything in Enthusiast","Share to community: 10x/week","Share to gym: Unlimited","Admin approval required","Premium support"],icon:CF,color:"text-purple-600",bgColor:"bg-purple-50",borderColor:"border-purple-200",isCurrent:l==="gym_pro"}];return o.jsx("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-white dark:from-gray-900 dark:to-gray-800 py-12 px-4",children:o.jsxs("div",{className:"max-w-7xl mx-auto",children:[!i&&o.jsx("div",{className:"mb-8 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-6",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(xC,{className:"w-6 h-6 text-blue-600 flex-shrink-0 mt-1"}),o.jsxs("div",{children:[o.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:["Subscribe via ",s==="android"?"Google Play Store":"Apple App Store"]}),o.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:['Click "Get Started" on any plan below to open the ',s==="android"?"Play":"App"," Store where you can complete your subscription."]}),o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500 italic",children:" Your subscription will sync automatically after purchase!"})]})]})}),o.jsxs("div",{className:"text-center mb-12",children:[o.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:"Choose Your Plan"}),o.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-400",children:"Track your BJJ journey with the right plan for you"})]}),o.jsx("div",{className:"grid md:grid-cols-3 gap-8 mb-16",children:d.map(f=>{const h=f.icon;return o.jsxs(St,{className:`relative ${f.popular?"ring-2 ring-blue-500 shadow-xl":""} ${f.isCurrent?"border-green-500":f.borderColor}`,"data-testid":`tier-card-${f.tier}`,children:[f.popular&&o.jsx("div",{className:"absolute -top-4 left-1/2 -translate-x-1/2 bg-blue-500 text-white px-4 py-1 rounded-full text-sm font-semibold",children:"Most Popular"}),f.isCurrent&&o.jsx("div",{className:"absolute -top-4 right-4 bg-green-500 text-white px-4 py-1 rounded-full text-sm font-semibold",children:"Current Plan"}),o.jsxs(or,{children:[o.jsx("div",{className:`w-12 h-12 rounded-lg ${f.bgColor} flex items-center justify-center mb-4`,children:o.jsx(h,{className:`w-6 h-6 ${f.color}`})}),o.jsx(lr,{className:"text-2xl",children:f.name}),o.jsx(yi,{children:f.description}),o.jsxs("div",{className:"mt-4",children:[o.jsx("span",{className:"text-4xl font-bold text-gray-900 dark:text-white",children:f.price}),f.tier!=="free"&&f.tier!=="gym_pro"&&o.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"/month"})]}),f.tier==="gym_pro"&&o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2",children:"Email: bjjjitsjournal@gmail.com"})]}),o.jsxs(Mt,{className:"space-y-4",children:[o.jsx("ul",{className:"space-y-3",children:f.features.map((v,p)=>o.jsxs("li",{className:"flex items-start",children:[o.jsx(dn,{className:"w-5 h-5 text-green-500 mr-2 flex-shrink-0 mt-0.5"}),o.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:v})]},p))}),f.tier!=="free"&&!f.isCurrent&&o.jsx(o.Fragment,{children:f.tier==="gym_pro"?o.jsx(ze,{className:"w-full",variant:"outline",onClick:()=>window.location.href=`mailto:${f.contactEmail}?subject=Gym Pro Subscription Inquiry&body=Hi, I'm interested in the Gym Pro plan for my gym.`,"data-testid":`button-subscribe-${f.tier}`,children:"Contact Us"}):o.jsx(ze,{className:"w-full",variant:f.popular?"default":"outline",onClick:()=>u(f.tier),disabled:r===f.tier,"data-testid":`button-subscribe-${f.tier}`,children:r===f.tier?"Loading...":"Get Started"})}),f.isCurrent&&o.jsx(ze,{className:"w-full",variant:"secondary",disabled:!0,"data-testid":`button-current-${f.tier}`,children:"Current Plan"}),f.tier==="free"&&!f.isCurrent&&o.jsx(ze,{className:"w-full",variant:"outline",disabled:!0,"data-testid":"button-free-tier",children:"Free Forever"})]})]},f.tier)})}),o.jsxs(St,{className:"max-w-4xl mx-auto",children:[o.jsxs(or,{children:[o.jsx(lr,{children:"How It Works"}),o.jsx(yi,{children:"Download and subscribe in 3 easy steps"})]}),o.jsxs(Mt,{className:"space-y-4",children:[o.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"w-12 h-12 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center mx-auto mb-3",children:o.jsx("span",{className:"text-xl font-bold text-blue-600 dark:text-blue-400",children:"1"})}),o.jsx("h3",{className:"font-semibold mb-2",children:"Download the App"}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Get Jits Journal from Google Play Store or Apple App Store"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"w-12 h-12 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center mx-auto mb-3",children:o.jsx("span",{className:"text-xl font-bold text-blue-600 dark:text-blue-400",children:"2"})}),o.jsx("h3",{className:"font-semibold mb-2",children:"Choose Your Plan"}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Subscribe directly through your app store"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"w-12 h-12 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center mx-auto mb-3",children:o.jsx("span",{className:"text-xl font-bold text-blue-600 dark:text-blue-400",children:"3"})}),o.jsx("h3",{className:"font-semibold mb-2",children:"Start Training"}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Access all premium features instantly!"})]})]}),o.jsx("div",{className:"pt-4 border-t",children:o.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 text-center",children:[" ",o.jsx("strong",{children:"Coming Soon:"})," Jits Journal will be available on Google Play Store and Apple App Store!"]})})]})]}),o.jsxs("div",{className:"mt-16 max-w-4xl mx-auto",children:[o.jsx("h2",{className:"text-2xl font-bold text-center mb-8",children:"Frequently Asked Questions"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs(St,{children:[o.jsx(or,{children:o.jsx(lr,{className:"text-lg",children:"Can I cancel anytime?"})}),o.jsx(Mt,{children:o.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Yes! You can cancel your subscription at any time. You'll retain access until the end of your billing period."})})]}),o.jsxs(St,{children:[o.jsx(or,{children:o.jsx(lr,{className:"text-lg",children:"How does Gym Pro approval work?"})}),o.jsx(Mt,{children:o.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"When you subscribe to Gym Pro, you'll need to request approval from our team. This ensures quality gym content for the community. Approval typically takes 24-48 hours."})})]}),o.jsxs(St,{children:[o.jsx(or,{children:o.jsx(lr,{className:"text-lg",children:"What payment methods do you accept?"})}),o.jsx(Mt,{children:o.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"All payments are processed securely through Google Play Store or Apple App Store, using your preferred payment method on file."})})]})]})]})]})})}function L7(){const[,t]=rl();return y.useEffect(()=>{const e=setTimeout(()=>{t("/")},5e3);return()=>clearTimeout(e)},[t]),o.jsx("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-white dark:from-gray-900 dark:to-gray-800 flex items-center justify-center px-4",children:o.jsxs(St,{className:"max-w-md w-full",children:[o.jsxs(or,{className:"text-center",children:[o.jsx("div",{className:"mx-auto w-16 h-16 bg-green-100 dark:bg-green-900 rounded-full flex items-center justify-center mb-4",children:o.jsx(vC,{className:"w-10 h-10 text-green-600 dark:text-green-400"})}),o.jsx(lr,{className:"text-2xl",children:"Welcome to Premium!"}),o.jsx(yi,{children:"Your subscription is now active"})]}),o.jsxs(Mt,{className:"space-y-4 text-center",children:[o.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Thank you for subscribing! You now have access to all premium features."}),o.jsxs("div",{className:"pt-4 space-y-2",children:[o.jsx(ze,{className:"w-full",onClick:()=>t("/"),"data-testid":"button-go-to-dashboard",children:"Go to Dashboard"}),o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Redirecting automatically in 5 seconds..."})]})]})]})})}const eb=(Ut.isNativePlatform(),"https://jitsjournal-backend.onrender.com"),F7=hu({email:ke().email("Please enter a valid email address"),password:ke().min(8,"Password must be at least 8 characters")}),$7=hu({email:ke().email("Please enter a valid email address"),password:ke().min(8,"Password must be at least 8 characters"),firstName:ke().min(1,"First name is required"),lastName:ke().min(1,"Last name is required")});function U7({onAuthSuccess:t}){const[e,r]=y.useState(!0),[n,s]=y.useState(!1),[i,a]=y.useState(""),{toast:l}=Ot(),{setSignupInProgress:c}=Gt(),u=ff({resolver:hf(F7),defaultValues:{email:"",password:""}}),d=ff({resolver:hf($7),defaultValues:{email:"",password:"",firstName:"",lastName:""}}),f=Fe({mutationFn:async g=>{var m;console.log("Login attempt with:",{email:g.email,hasPassword:!!g.password}),a("");const{data:b,error:w}=await Ge.auth.signInWithPassword({email:g.email,password:g.password});if(w)throw console.error("Login error:",w),w;return console.log("Login successful:",(m=b.user)==null?void 0:m.email),b},onSuccess:g=>{a(""),l({title:"Welcome back!",description:"You have successfully logged in."})},onError:g=>{var w,m;console.error("Login mutation error:",g);let b="Please check your credentials and try again.";(w=g.message)!=null&&w.includes("Invalid login credentials")?b="Invalid email or password. If you haven't signed up yet, please create an account.":(m=g.message)!=null&&m.includes("Email not confirmed")&&(b="Please check your email and confirm your account before logging in."),a(b),l({title:"Login failed",description:b,variant:"destructive"})}}),h=Fe({mutationFn:async g=>{c(!0);try{console.log("Signup attempt for:",g.email),console.log("Step 1: Creating Supabase auth account...");const b=Ut.isNativePlatform()?"https://jitsjournal-backend.onrender.com/":`${window.location.origin}/`,{data:w,error:m}=await Ge.auth.signUp({email:g.email,password:g.password,options:{data:{firstName:g.firstName,lastName:g.lastName},emailRedirectTo:b}});if(m||!w.user)throw console.error("Supabase signup error:",m),m||new Error("Failed to create auth account");console.log(" Supabase account created:",w.user.id),await Ge.auth.signOut(),console.log(" Signed out to prevent race condition"),console.log("Step 2: Creating user profile in PostgreSQL database..."),console.log("API URL:",`${eb}/api/auth/register`);const x=new AbortController,_=setTimeout(()=>x.abort(),3e4);let S;try{S=await fetch(`${eb}/api/auth/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:g.email,password:g.password,firstName:g.firstName,lastName:g.lastName,supabaseId:w.user.id}),signal:x.signal}),clearTimeout(_)}catch(A){throw clearTimeout(_),A.name==="AbortError"?new Error("Network timeout. Please check your internet connection and try again."):new Error(`Network error: ${A.message||"Could not connect to server"}`)}if(!S.ok){const A=await S.json();throw new Error(A.message||"Failed to create user profile")}const j=await S.json();console.log(" PostgreSQL profile created:",j.id),c(!1),console.log("Step 3: Signing in...");const{data:k,error:N}=await Ge.auth.signInWithPassword({email:g.email,password:g.password});if(N)throw console.error("Auto-login error:",N),new Error("Account created but login failed. Please try logging in manually.");return console.log(" Auto-login successful"),k}catch(b){throw c(!1),b}},onSuccess:g=>{var w;let b="Welcome to Jits Journal. Your account has been created successfully.";g.user&&!g.user.confirmed_at&&(b="Please check your email to confirm your account before logging in."),l({title:"Account created!",description:b,duration:(w=g.user)!=null&&w.confirmed_at?3e3:6e3})},onError:g=>{console.error("Registration mutation error:",g);const b=g.message||"Please try again.";a(b),l({title:"Registration failed",description:b,variant:"destructive",duration:6e3})}}),v=g=>{console.log("Login attempt with:",{email:g.email,hasPassword:!!g.password}),a(""),f.mutate(g)},p=g=>{a(""),h.mutate(g)};return o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-900 via-blue-800 to-red-600 flex items-center justify-center p-4",children:o.jsx("div",{className:"w-full max-w-md",children:o.jsxs(St,{className:"backdrop-blur-sm bg-white/10 border-white/20 shadow-xl",children:[o.jsxs(or,{className:"text-center",children:[o.jsx("div",{className:"mx-auto w-16 h-16 bg-gradient-to-br from-blue-500 to-red-500 rounded-full flex items-center justify-center mb-4",children:o.jsx("span",{className:"text-white font-bold text-xl",children:""})}),o.jsx(lr,{className:"text-2xl font-bold text-white",children:e?"Welcome Back":"Join Jits Journal"}),o.jsx(yi,{className:"text-white/80",children:e?"Sign in to continue your BJJ journey":"Start tracking your BJJ progress today"})]}),o.jsxs(Mt,{className:"space-y-6",children:[e?o.jsxs("form",{onSubmit:u.handleSubmit(v),className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(ar,{htmlFor:"email",className:"text-white",children:"Email"}),o.jsx(ir,{id:"email",type:"email",placeholder:"Enter your email",className:"bg-white/10 border-white/20 text-white placeholder:text-white/50",...u.register("email")}),u.formState.errors.email&&o.jsx("p",{className:"text-red-300 text-sm",children:u.formState.errors.email.message})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(ar,{htmlFor:"password",className:"text-white",children:"Password"}),o.jsxs("div",{className:"relative",children:[o.jsx(ir,{id:"password",type:n?"text":"password",placeholder:"Enter your password",className:"bg-white/10 border-white/20 text-white placeholder:text-white/50 pr-10",...u.register("password")}),o.jsx("button",{type:"button",onClick:()=>s(!n),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-white/60 hover:text-white",children:n?o.jsx(Qd,{size:16}):o.jsx(bc,{size:16})})]}),u.formState.errors.password&&o.jsx("p",{className:"text-red-300 text-sm",children:u.formState.errors.password.message})]}),i&&o.jsx("div",{className:"bg-red-600 border-2 border-red-400 rounded-lg p-4 shadow-lg",children:o.jsxs("p",{className:"text-white text-sm font-bold",children:[" ",i]})}),o.jsx(ze,{type:"submit",className:"w-full bg-gradient-to-r from-blue-500 to-red-500 hover:from-blue-600 hover:to-red-600 text-white font-medium",disabled:f.isPending,"data-testid":"button-login",children:f.isPending?o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Signing in..."]}):o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(AF,{size:16}),"Sign In"]})}),o.jsx("div",{className:"text-center",children:o.jsx(Ft,{href:"/forgot-password",children:o.jsx("button",{className:"text-white/80 hover:text-white text-sm underline",children:"Forgot your password?"})})})]}):o.jsxs("form",{onSubmit:d.handleSubmit(p),className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(ar,{htmlFor:"firstName",className:"text-white",children:"First Name"}),o.jsx(ir,{id:"firstName",type:"text",placeholder:"First name",className:"bg-white/10 border-white/20 text-white placeholder:text-white/50",...d.register("firstName")}),d.formState.errors.firstName&&o.jsx("p",{className:"text-red-300 text-sm",children:d.formState.errors.firstName.message})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(ar,{htmlFor:"lastName",className:"text-white",children:"Last Name"}),o.jsx(ir,{id:"lastName",type:"text",placeholder:"Last name",className:"bg-white/10 border-white/20 text-white placeholder:text-white/50",...d.register("lastName")}),d.formState.errors.lastName&&o.jsx("p",{className:"text-red-300 text-sm",children:d.formState.errors.lastName.message})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(ar,{htmlFor:"email",className:"text-white",children:"Email"}),o.jsx(ir,{id:"email",type:"email",placeholder:"Enter your email",className:"bg-white/10 border-white/20 text-white placeholder:text-white/50",...d.register("email")}),d.formState.errors.email&&o.jsx("p",{className:"text-red-300 text-sm",children:d.formState.errors.email.message})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(ar,{htmlFor:"password",className:"text-white",children:"Password"}),o.jsxs("div",{className:"relative",children:[o.jsx(ir,{id:"password",type:n?"text":"password",placeholder:"Create a password",className:"bg-white/10 border-white/20 text-white placeholder:text-white/50 pr-10",...d.register("password")}),o.jsx("button",{type:"button",onClick:()=>s(!n),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-white/60 hover:text-white",children:n?o.jsx(Qd,{size:16}):o.jsx(bc,{size:16})})]}),d.formState.errors.password&&o.jsx("p",{className:"text-red-300 text-sm",children:d.formState.errors.password.message})]}),i&&o.jsx("div",{className:"bg-red-600 border-2 border-red-400 rounded-lg p-4 shadow-lg",children:o.jsxs("p",{className:"text-white text-sm font-bold",children:[" ",i]})}),o.jsx(ze,{type:"submit",className:"w-full bg-gradient-to-r from-blue-500 to-red-500 hover:from-blue-600 hover:to-red-600 text-white font-medium",disabled:h.isPending,"data-testid":"button-register",children:h.isPending?o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Creating account..."]}):o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(UF,{size:16}),"Create Account"]})})]}),o.jsx("div",{className:"text-center",children:o.jsx("button",{onClick:()=>{r(!e),a("")},className:"text-white/80 hover:text-white text-sm underline",children:e?"Don't have an account? Sign up":"Already have an account? Sign in"})})]})]})})})}function B7(){const{user:t,supabaseUser:e}=Gt(),{toast:r}=Ot(),[n,s]=y.useState(""),[i,a]=y.useState(null),{data:l=[],isLoading:c,refetch:u}=Qe({queryKey:["/api/gyms"],enabled:(t==null?void 0:t.role)==="admin",staleTime:3e4}),d=Fe({mutationFn:async p=>await dt("POST","/api/gyms",{name:p,supabaseId:e==null?void 0:e.id}),onSuccess:p=>{console.log("Gym created response:",p),console.log("Gym code:",p.code),sr.invalidateQueries({queryKey:["/api/gyms"]}),u(),r({title:"Gym created!",description:`${p.name} has been created with code: ${p.code}`}),s(""),v(p.code)},onError:p=>{r({title:"Error",description:p.message||"Failed to create gym",variant:"destructive"})}}),f=Fe({mutationFn:async p=>await dt("DELETE",`/api/gyms/${p}`,{supabaseId:e==null?void 0:e.id}),onSuccess:()=>{sr.invalidateQueries({queryKey:["/api/gyms"]}),u(),r({title:"Gym deleted!",description:"The gym has been successfully deleted"})},onError:p=>{r({title:"Error",description:p.message||"Failed to delete gym",variant:"destructive"})}}),h=()=>{if(!n.trim()){r({title:"Error",description:"Please enter a gym name",variant:"destructive"});return}d.mutate(n)},v=p=>{navigator.clipboard.writeText(p),a(p),r({title:"Copied!",description:"Gym code copied to clipboard"}),setTimeout(()=>a(null),2e3)};return(t==null?void 0:t.role)!=="admin"?o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:o.jsxs("div",{className:"text-center",children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Access Denied"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Admin access required"})]})}):o.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 pb-20",children:o.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[o.jsx(Gd,{className:"w-8 h-8 text-blue-600"}),o.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Gym Management"})]}),o.jsxs(St,{className:"p-6 mb-8",children:[o.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[o.jsx(Gd,{className:"w-5 h-5"}),"Create New Gym"]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx(ir,{type:"text",placeholder:"Enter gym name...",value:n,onChange:p=>s(p.target.value),onKeyPress:p=>p.key==="Enter"&&h(),className:"flex-1","data-testid":"input-gym-name"}),o.jsx(ze,{onClick:h,disabled:d.isPending||!n.trim(),"data-testid":"button-create-gym",children:d.isPending?"Creating...":"Create Gym"})]}),o.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"A unique code will be auto-generated for the gym"})]}),o.jsxs("div",{children:[o.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[o.jsx($n,{className:"w-5 h-5"}),"All Gyms (",l.length,")"]}),c?o.jsx("div",{className:"text-center py-8 text-gray-500",children:"Loading gyms..."}):l.length===0?o.jsx("div",{className:"text-center py-8 text-gray-500",children:"No gyms created yet. Create your first gym above!"}):o.jsx("div",{className:"space-y-4",children:l.map(p=>o.jsx(St,{className:"p-4","data-testid":`card-gym-${p.id}`,children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-lg",children:p.name}),o.jsxs("p",{className:"text-sm text-gray-500",children:["Created ",new Date(p.createdAt).toLocaleDateString()]})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:"text-sm text-gray-500",children:"Gym Code"}),o.jsx("p",{className:"text-lg font-mono font-bold text-blue-600",children:p.code})]}),o.jsx(ze,{variant:"outline",size:"sm",onClick:()=>v(p.code),"data-testid":`button-copy-${p.code}`,children:i===p.code?o.jsx(dn,{className:"w-4 h-4 text-green-600"}):o.jsx(NF,{className:"w-4 h-4"})}),o.jsx(ze,{variant:"outline",size:"sm",onClick:()=>{confirm(`Are you sure you want to delete ${p.name}? This action cannot be undone.`)&&f.mutate(p.id)},disabled:f.isPending,"data-testid":`button-delete-${p.id}`,children:o.jsx(ws,{className:"w-4 h-4 text-red-600"})})]})]})},p.id))})]})]})})}function z7(){return o.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-12 px-4 sm:px-6 lg:px-8",children:o.jsxs("div",{className:"max-w-4xl mx-auto",children:[o.jsx(Ft,{href:"/settings",children:o.jsxs("button",{className:"flex items-center gap-2 text-blue-600 hover:text-blue-700 mb-6",children:[o.jsx(Qf,{className:"w-4 h-4"}),"Back to Settings"]})}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-8",children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Privacy Policy"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-8",children:"Last Updated: October 16, 2025"}),o.jsxs("div",{className:"prose dark:prose-invert max-w-none space-y-6",children:[o.jsxs("section",{children:[o.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-4",children:"1. Information We Collect"}),o.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Personal Information"}),o.jsxs("ul",{className:"list-disc pl-6 text-gray-700 dark:text-gray-300 space-y-2",children:[o.jsxs("li",{children:[o.jsx("strong",{children:"Account Information:"})," Name, email address, password (encrypted)"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Profile Data:"})," Belt rank, gym affiliation, training preferences"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"User IDs:"})," Internal user ID and authentication tokens"]})]}),o.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2 mt-4",children:"Training Data"}),o.jsxs("ul",{className:"list-disc pl-6 text-gray-700 dark:text-gray-300 space-y-2",children:[o.jsxs("li",{children:[o.jsx("strong",{children:"Class Records:"})," Training sessions, techniques learned, rolling partners"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Notes:"})," User-created technique notes, video links, training insights"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Progress Tracking:"})," Belt promotions, stripes, weekly goals"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Competition Data:"})," Game plans and strategy notes"]})]}),o.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2 mt-4",children:"Subscription Information"}),o.jsxs("ul",{className:"list-disc pl-6 text-gray-700 dark:text-gray-300 space-y-2",children:[o.jsxs("li",{children:[o.jsx("strong",{children:"Subscription Status:"})," Current plan, subscription dates"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Payment Processing:"})," Handled securely by Stripe, Google Play, or Apple (we do not store payment card details)"]})]})]}),o.jsxs("section",{children:[o.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-4",children:"2. How We Use Your Information"}),o.jsxs("ul",{className:"list-disc pl-6 text-gray-700 dark:text-gray-300 space-y-2",children:[o.jsx("li",{children:"Provide and maintain BJJ Jits Journal services"}),o.jsx("li",{children:"Track your training progress and achievements"}),o.jsx("li",{children:"Enable community features (shared notes, gym communities)"}),o.jsx("li",{children:"Process subscription payments and manage account access"}),o.jsx("li",{children:"Send service-related emails (welcome, password reset)"}),o.jsx("li",{children:"Improve app functionality and user experience"})]})]}),o.jsxs("section",{children:[o.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-4",children:"3. Data Sharing"}),o.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:"We DO NOT sell your personal data to third parties. We only share data with:"}),o.jsxs("ul",{className:"list-disc pl-6 text-gray-700 dark:text-gray-300 space-y-2",children:[o.jsxs("li",{children:[o.jsx("strong",{children:"Payment Processors:"})," Stripe, Google Play, Apple (for subscription processing)"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Cloud Services:"})," Supabase (database hosting), Render (application hosting)"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Community Features:"})," Notes you choose to share are visible to your gym community or public community"]})]})]}),o.jsxs("section",{children:[o.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-4",children:"4. Data Security"}),o.jsxs("ul",{className:"list-disc pl-6 text-gray-700 dark:text-gray-300 space-y-2",children:[o.jsxs("li",{children:[o.jsx("strong",{children:"Encryption in Transit:"})," All data transmitted using HTTPS/TLS encryption"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Encryption at Rest:"})," Database stored on secure Supabase infrastructure"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Password Security:"})," Passwords are hashed using bcrypt"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Access Controls:"})," Role-based permissions for admin features"]})]})]}),o.jsxs("section",{children:[o.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-4",children:"5. Your Rights"}),o.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:"You have the right to:"}),o.jsxs("ul",{className:"list-disc pl-6 text-gray-700 dark:text-gray-300 space-y-2",children:[o.jsxs("li",{children:[o.jsx("strong",{children:"Access Your Data:"})," View all personal information we have about you"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Update Your Data:"})," Modify your profile, training records, and preferences"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Delete Your Data:"})," Request complete account and data deletion (see Settings)"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Export Your Data:"})," Download your training records and notes"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Control Sharing:"})," Choose which notes to share publicly or with your gym"]})]})]}),o.jsxs("section",{children:[o.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-4",children:"6. Data Retention"}),o.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:"We retain your data for as long as your account is active. When you delete your account:"}),o.jsxs("ul",{className:"list-disc pl-6 text-gray-700 dark:text-gray-300 space-y-2",children:[o.jsx("li",{children:"All personal information is permanently deleted within 30 days"}),o.jsx("li",{children:"Training records, notes, and progress data are permanently removed"}),o.jsx("li",{children:"Shared community notes are anonymized or deleted based on your preference"}),o.jsx("li",{children:"Subscription records are retained for legal/tax compliance (7 years)"})]})]}),o.jsxs("section",{children:[o.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-4",children:"7. Children's Privacy"}),o.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:"BJJ Jits Journal is not intended for children under 13. We do not knowingly collect data from children under 13. If you believe a child has provided us with personal information, please contact us immediately."})]}),o.jsxs("section",{children:[o.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-4",children:"8. International Users"}),o.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:"Your data may be processed and stored in Australia, United States, or other countries where our service providers operate. By using BJJ Jits Journal, you consent to this transfer of data."})]}),o.jsxs("section",{children:[o.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-4",children:"9. Changes to Privacy Policy"}),o.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:"We may update this Privacy Policy from time to time. We will notify you of significant changes via email or in-app notification. Continued use of the service after changes constitutes acceptance of the updated policy."})]}),o.jsxs("section",{children:[o.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-4",children:"10. Contact Us"}),o.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:"For privacy-related questions, data deletion requests, or concerns, contact us at:"}),o.jsxs("p",{className:"text-gray-700 dark:text-gray-300 mt-2",children:[o.jsx("strong",{children:"Email:"})," bjjjitsjournal@gmail.com"]})]}),o.jsxs("section",{className:"mt-8 p-6 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[o.jsx("h3",{className:"text-xl font-semibold text-blue-900 dark:text-blue-200 mb-2",children:"Data Deletion"}),o.jsx("p",{className:"text-blue-800 dark:text-blue-300",children:"To delete your account and all associated data, go to Settings  Delete Account. This action is permanent and cannot be undone."})]})]})]})]})})}function V7(){return o.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-12 px-4 sm:px-6 lg:px-8",children:o.jsxs("div",{className:"max-w-4xl mx-auto",children:[o.jsx(Ft,{href:"/settings",children:o.jsxs("button",{className:"flex items-center gap-2 text-blue-600 hover:text-blue-700 mb-6",children:[o.jsx(Qf,{className:"w-4 h-4"}),"Back to Settings"]})}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-8",children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Terms of Service"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-8",children:"Last Updated: October 16, 2025"}),o.jsxs("div",{className:"prose dark:prose-invert max-w-none space-y-6",children:[o.jsxs("section",{children:[o.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-4",children:"1. Acceptance of Terms"}),o.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:'By accessing or using BJJ Jits Journal ("the Service"), you agree to be bound by these Terms of Service. If you do not agree to these terms, please do not use the Service.'})]}),o.jsxs("section",{children:[o.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-4",children:"2. Service Description"}),o.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:"BJJ Jits Journal is a training companion application for Brazilian Jiu-Jitsu practitioners that provides:"}),o.jsxs("ul",{className:"list-disc pl-6 text-gray-700 dark:text-gray-300 space-y-2",children:[o.jsx("li",{children:"Class and technique tracking"}),o.jsx("li",{children:"Training notes and video integration"}),o.jsx("li",{children:"Belt progression monitoring"}),o.jsx("li",{children:"Competition game plan creation"}),o.jsx("li",{children:"Community features for sharing insights"}),o.jsx("li",{children:"Gym community management"})]})]}),o.jsxs("section",{children:[o.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-4",children:"3. Account Registration"}),o.jsxs("ul",{className:"list-disc pl-6 text-gray-700 dark:text-gray-300 space-y-2",children:[o.jsx("li",{children:"You must provide accurate and complete information during registration"}),o.jsx("li",{children:"You are responsible for maintaining the confidentiality of your account credentials"}),o.jsx("li",{children:"You must be at least 13 years old to use the Service"}),o.jsx("li",{children:"One person may not maintain multiple free accounts"})]})]}),o.jsxs("section",{children:[o.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-4",children:"4. Subscription Plans"}),o.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Free Tier"}),o.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:"Basic features including class tracking, notes, and belt progression."}),o.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2 mt-4",children:"BJJ Enthusiast ($14.99 AUD/month)"}),o.jsxs("ul",{className:"list-disc pl-6 text-gray-700 dark:text-gray-300 space-y-2",children:[o.jsx("li",{children:"Advanced technique tracking and video integration"}),o.jsx("li",{children:"Unlimited notes and community sharing"}),o.jsx("li",{children:"Competition game plan tools"})]}),o.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2 mt-4",children:"Gym Pro ($29.99 AUD/month)"}),o.jsxs("ul",{className:"list-disc pl-6 text-gray-700 dark:text-gray-300 space-y-2",children:[o.jsx("li",{children:"All Enthusiast features"}),o.jsx("li",{children:"Gym community management (requires admin approval)"}),o.jsx("li",{children:"Private gym note sharing"}),o.jsx("li",{children:"Priority support"})]}),o.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2 mt-4",children:"Billing"}),o.jsxs("ul",{className:"list-disc pl-6 text-gray-700 dark:text-gray-300 space-y-2",children:[o.jsx("li",{children:"Subscriptions are billed monthly in advance"}),o.jsx("li",{children:"Prices are in Australian Dollars (AUD)"}),o.jsx("li",{children:"You can cancel anytime from your account settings"}),o.jsx("li",{children:"No refunds for partial months"}),o.jsx("li",{children:"Access continues until the end of the current billing period after cancellation"})]})]}),o.jsxs("section",{children:[o.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-4",children:"5. User Conduct"}),o.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:"You agree NOT to:"}),o.jsxs("ul",{className:"list-disc pl-6 text-gray-700 dark:text-gray-300 space-y-2",children:[o.jsx("li",{children:"Post offensive, abusive, or inappropriate content"}),o.jsx("li",{children:"Harass or bully other users"}),o.jsx("li",{children:"Share copyrighted content without permission"}),o.jsx("li",{children:"Attempt to hack, disrupt, or abuse the Service"}),o.jsx("li",{children:"Create fake accounts or impersonate others"}),o.jsx("li",{children:"Use the Service for any illegal purposes"}),o.jsx("li",{children:"Share spam or promotional content"})]})]}),o.jsxs("section",{children:[o.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-4",children:"6. Content Ownership"}),o.jsxs("ul",{className:"list-disc pl-6 text-gray-700 dark:text-gray-300 space-y-2",children:[o.jsxs("li",{children:[o.jsx("strong",{children:"Your Content:"})," You retain ownership of all training data, notes, and content you create"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"License to Us:"})," By sharing content publicly or with your gym, you grant us a license to display and distribute that content within the Service"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Our Content:"})," The Service interface, design, and features are our intellectual property"]})]})]}),o.jsxs("section",{children:[o.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-4",children:"7. Community Guidelines"}),o.jsxs("ul",{className:"list-disc pl-6 text-gray-700 dark:text-gray-300 space-y-2",children:[o.jsx("li",{children:"Be respectful and supportive of other practitioners"}),o.jsx("li",{children:"Share genuine training insights and techniques"}),o.jsx("li",{children:"Give credit when sharing others' techniques or ideas"}),o.jsx("li",{children:"Report inappropriate content to admins"}),o.jsx("li",{children:"Respect gym communities and their privacy"})]})]}),o.jsxs("section",{children:[o.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-4",children:"8. Moderation"}),o.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:"We reserve the right to remove content or suspend accounts that violate these terms. Admins may moderate community content. Decisions are final."})]}),o.jsxs("section",{children:[o.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-4",children:"9. Medical Disclaimer"}),o.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:"BJJ Jits Journal is NOT medical advice. Training in Brazilian Jiu-Jitsu carries inherent risks. Consult with qualified instructors and medical professionals before beginning or continuing training. We are not responsible for injuries sustained during training."})]}),o.jsxs("section",{children:[o.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-4",children:"10. Service Availability"}),o.jsxs("ul",{className:"list-disc pl-6 text-gray-700 dark:text-gray-300 space-y-2",children:[o.jsx("li",{children:"We strive for 99.9% uptime but cannot guarantee uninterrupted service"}),o.jsx("li",{children:"Scheduled maintenance will be announced in advance when possible"}),o.jsx("li",{children:"We are not liable for data loss due to service interruptions (though we maintain regular backups)"})]})]}),o.jsxs("section",{children:[o.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-4",children:"11. Limitation of Liability"}),o.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:'BJJ Jits Journal is provided "as is" without warranties. We are not liable for any damages arising from use of the Service, including but not limited to data loss, training injuries, or financial losses. Maximum liability is limited to the amount you paid for the Service in the past 12 months.'})]}),o.jsxs("section",{children:[o.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-4",children:"12. Termination"}),o.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:"We may terminate or suspend your account for violations of these terms. You may delete your account anytime from Settings."}),o.jsxs("ul",{className:"list-disc pl-6 text-gray-700 dark:text-gray-300 space-y-2",children:[o.jsx("li",{children:"Upon termination, your access to paid features ends immediately"}),o.jsx("li",{children:"No refunds for remaining subscription time"}),o.jsx("li",{children:"Your data will be deleted according to our Privacy Policy"})]})]}),o.jsxs("section",{children:[o.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-4",children:"13. Changes to Terms"}),o.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:"We may update these Terms of Service. Significant changes will be communicated via email or in-app notification. Continued use after changes constitutes acceptance."})]}),o.jsxs("section",{children:[o.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-4",children:"14. Governing Law"}),o.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:"These terms are governed by the laws of Australia. Disputes shall be resolved in Australian courts."})]}),o.jsxs("section",{children:[o.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-4",children:"15. Contact"}),o.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:"For questions about these Terms of Service, contact us at:"}),o.jsxs("p",{className:"text-gray-700 dark:text-gray-300 mt-2",children:[o.jsx("strong",{children:"Email:"})," bjjjitsjournal@gmail.com"]})]}),o.jsxs("section",{className:"mt-8 p-6 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[o.jsx("h3",{className:"text-xl font-semibold text-red-900 dark:text-red-200 mb-2",children:"Important Notice"}),o.jsx("p",{className:"text-red-800 dark:text-red-300",children:"By using BJJ Jits Journal, you acknowledge that Brazilian Jiu-Jitsu training involves physical contact and risk of injury. Always train under qualified instruction and follow safety protocols."})]})]})]})]})})}function W7(){const{user:t}=Gt(),{toast:e}=Ot(),r=Zn(),[n,s]=y.useState(null),[i,a]=y.useState(!1),[l,c]=y.useState(!1),[u,d]=y.useState(new Set),[f,h]=y.useState(null),[v,p]=y.useState(!1),[g,b]=y.useState([]),[w,m]=y.useState(!1),[x,_]=y.useState(""),[S,j]=y.useState({moveName:"",description:"",parentId:null}),{data:k=[]}=Qe({queryKey:["/api/game-plans/names"],enabled:!!(t!=null&&t.id)}),{data:N=[]}=Qe({queryKey:[`/api/game-plans/${n}`],enabled:!!(t!=null&&t.id)&&!!n}),I=(G=>{const je=new Map,le=[];return G.forEach(Ke=>{je.set(Ke.id,{...Ke,children:[]})}),G.forEach(Ke=>{const We=je.get(Ke.id);if(!Ke.parent_id&&!Ke.parentId)le.push(We);else{const ie=Ke.parent_id||Ke.parentId,Ae=je.get(ie);Ae?Ae.children.push(We):le.push(We)}}),le})(N);y.useEffect(()=>{if(N.length>0){const G=new Set(N.map(je=>je.id));d(G)}},[N]);const M=Fe({mutationFn:async G=>{if(!(t!=null&&t.id))throw new Error("User not authenticated");return await dt("POST","/api/game-plans",G)},onSuccess:()=>{r.invalidateQueries({queryKey:[`/api/game-plans/${n}`]}),r.invalidateQueries({queryKey:["/api/game-plans/names"]}),e({title:"Move Added!",description:"Your move has been added to the game plan.",duration:4e3}),z()},onError:()=>{e({title:"Error",description:"Failed to add move. Please try again.",variant:"destructive"})}}),F=Fe({mutationFn:async({moveId:G,data:je})=>{if(!(t!=null&&t.id))throw new Error("User not authenticated");return await dt("PUT",`/api/game-plans/${G}`,je)},onSuccess:()=>{r.invalidateQueries({queryKey:[`/api/game-plans/${n}`]}),e({title:"Move Updated!",description:"Your move has been updated.",duration:4e3}),z()},onError:()=>{e({title:"Error",description:"Failed to update move. Please try again.",variant:"destructive"})}}),O=Fe({mutationFn:async G=>{if(!(t!=null&&t.id))throw new Error("User not authenticated");return await dt("DELETE",`/api/game-plans/${G}`)},onSuccess:()=>{r.invalidateQueries({queryKey:[`/api/game-plans/${n}`]}),e({title:"Move Deleted",description:"The move and all its counter moves have been removed.",duration:4e3})},onError:()=>{e({title:"Error",description:"Failed to delete move. Please try again.",variant:"destructive"})}}),z=()=>{c(!1),h(null),j({moveName:"",description:"",parentId:null}),b([]),m(!1)},R=()=>{x.trim()&&(M.mutate({planName:x.trim(),moveName:"Starting Position",description:"Define your starting position here",parentId:null,moveOrder:0}),s(x.trim()),_(""),a(!1))},V=()=>{!S.moveName.trim()||!n||(f?F.mutate({moveId:f,data:{moveName:S.moveName,description:S.description}}):M.mutate({planName:n,moveName:S.moveName,description:S.description,parentId:S.parentId,moveOrder:0}))},U=async G=>{var je;p(!0),m(!0);try{const le=await dt("POST","/api/game-plans/ai-suggest",{currentMove:G.moveName,position:n||"General Position",context:G.description||""});b(le.counterMoves||[]),e({title:"AI Suggestions Ready!",description:`Found ${((je=le.counterMoves)==null?void 0:je.length)||0} counter move suggestions.`,duration:4e3})}catch(le){e({title:"AI Error",description:le.message||"Failed to generate suggestions. Make sure OpenAI API key is configured.",variant:"destructive"}),m(!1)}finally{p(!1)}},P=G=>{h(G.id),j({moveName:G.moveName,description:G.description||"",parentId:G.parentId||null}),c(!0)},L=G=>{confirm("Delete this move and all its counter moves?")&&O.mutate(G)},K=G=>{const je=new Set(u);je.has(G)?je.delete(G):je.add(G),d(je)},re=(G,je=0)=>G.map(le=>o.jsxs("div",{className:`${je>0?"ml-6 border-l-2 border-blue-200 dark:border-blue-800":""}`,children:[o.jsx("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-4 mb-3 shadow-sm",children:o.jsxs("div",{className:"flex items-start justify-between gap-3",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[le.children&&le.children.length>0&&o.jsx("button",{onClick:()=>K(le.id),className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors","data-testid":`button-toggle-${le.id}`,children:u.has(le.id)?o.jsx(tu,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"}):o.jsx(Dy,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"})}),o.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:le.moveName})]}),le.description&&o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 ml-9",children:le.description})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{onClick:()=>{j({moveName:"",description:"",parentId:le.id}),c(!0)},className:"p-2 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded transition-colors",title:"Add counter move","data-testid":`button-add-counter-${le.id}`,children:o.jsx(Jp,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>U(le),disabled:v,className:"p-2 text-purple-600 dark:text-purple-400 hover:bg-purple-50 dark:hover:bg-purple-900/30 rounded transition-colors disabled:opacity-50",title:"AI suggest counter moves","data-testid":`button-ai-suggest-${le.id}`,children:o.jsx(zx,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>P(le),className:"p-2 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors","data-testid":`button-edit-${le.id}`,children:o.jsx(Yp,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>L(le.id),className:"p-2 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/30 rounded transition-colors","data-testid":`button-delete-${le.id}`,children:o.jsx(ws,{className:"w-4 h-4"})})]})]})}),le.children&&le.children.length>0&&u.has(le.id)&&o.jsx("div",{className:"mt-2",children:re(le.children,je+1)})]},le.id));return o.jsxs("div",{className:"p-6 max-w-4xl mx-auto bg-background min-h-screen pb-24",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Competition Game Plans"}),o.jsxs("button",{onClick:()=>a(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2","data-testid":"button-new-plan",children:[o.jsx(Jp,{className:"w-5 h-5"}),"New Plan"]})]}),k.length>0&&o.jsxs("div",{className:"mb-6",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Select Game Plan"}),o.jsxs("select",{value:n||"",onChange:G=>s(G.target.value),className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white","data-testid":"select-plan",children:[o.jsx("option",{value:"",children:"Choose a plan..."}),k.map(G=>o.jsx("option",{value:G,children:G},G))]})]}),i&&o.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-6 mb-6",children:[o.jsx("h2",{className:"text-xl font-bold mb-4",children:"Create New Game Plan"}),o.jsx("input",{type:"text",value:x,onChange:G=>_(G.target.value),placeholder:"Game Plan Name (e.g., Closed Guard Strategy)",className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg mb-4 bg-white dark:bg-gray-800 text-gray-900 dark:text-white","data-testid":"input-plan-name"}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:R,className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors","data-testid":"button-create-plan",children:"Create Plan"}),o.jsx("button",{onClick:()=>{a(!1),_("")},className:"flex-1 border border-gray-300 dark:border-gray-600 py-2 px-4 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors","data-testid":"button-cancel-plan",children:"Cancel"})]})]}),l&&n&&o.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-6 mb-6",children:[o.jsx("h2",{className:"text-xl font-bold mb-4",children:f?"Edit Move":"Add New Move"}),o.jsx("input",{type:"text",value:S.moveName,onChange:G=>j({...S,moveName:G.target.value}),placeholder:"Move Name",className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg mb-3 bg-white dark:bg-gray-800 text-gray-900 dark:text-white","data-testid":"input-move-name"}),o.jsx("textarea",{value:S.description,onChange:G=>j({...S,description:G.target.value}),placeholder:"Description (optional)",rows:3,className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg mb-4 bg-white dark:bg-gray-800 text-gray-900 dark:text-white","data-testid":"input-move-description"}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:V,className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors","data-testid":"button-save-move",children:f?"Update Move":"Add Move"}),o.jsx("button",{onClick:z,className:"flex-1 border border-gray-300 dark:border-gray-600 py-2 px-4 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors","data-testid":"button-cancel-move",children:"Cancel"})]})]}),w&&o.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 border border-purple-200 dark:border-purple-800 rounded-lg p-6 mb-6",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[o.jsx(zx,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"}),o.jsx("h3",{className:"text-lg font-bold text-purple-900 dark:text-purple-100",children:"AI Counter Move Suggestions"})]}),v?o.jsx("p",{className:"text-purple-700 dark:text-purple-300",children:"Generating suggestions..."}):g.length>0?o.jsx("div",{className:"space-y-3",children:g.map((G,je)=>{const le=G.type==="attack",Ke=le?"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800":"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800",We=le?"bg-green-600 text-white":"bg-red-600 text-white";return o.jsx("div",{className:`${Ke} border rounded-lg p-4`,children:o.jsxs("div",{className:"flex items-start justify-between gap-3",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:G.moveName}),o.jsx("span",{className:`px-2 py-0.5 text-xs rounded-full ${We}`,children:le?"Attack":"Defense"})]}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:G.description})]}),o.jsx("button",{onClick:()=>{j({moveName:G.moveName,description:G.description,parentId:S.parentId}),c(!0),m(!1)},className:"px-3 py-1 text-sm bg-purple-600 text-white rounded hover:bg-purple-700 transition-colors","data-testid":`button-use-suggestion-${je}`,children:"Use This"})]})},je)})}):o.jsx("p",{className:"text-purple-700 dark:text-purple-300",children:"No suggestions available."})]}),n&&I.length>0?o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold mb-4 text-gray-900 dark:text-white",children:n}),re(I)]}):n?o.jsxs("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:[o.jsx("p",{children:"No moves in this game plan yet."}),o.jsx("p",{className:"text-sm mt-2",children:'Click "New Plan" to create your first move.'})]}):o.jsx("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:o.jsx("p",{children:"Select a game plan or create a new one to get started."})})]})}function q7(){const[t]=rl(),[e,r]=y.useState(0),n=[{path:"/",label:"Home",icon:""},{path:"/classes",label:"Classes",icon:""},{path:"/notes",label:"Notes",icon:""},{path:"/game-plans",label:"Plans",icon:""},{path:"/social",label:"Social",icon:""}];return y.useEffect(()=>{const s=()=>{if(window.visualViewport){const i=window.visualViewport,a=window.innerHeight-(i.height+i.offsetTop),l=Math.max(0,Math.min(a,80));r(l>=16?l:0)}};return s(),window.visualViewport&&(window.visualViewport.addEventListener("resize",s),window.visualViewport.addEventListener("scroll",s)),window.addEventListener("resize",s),()=>{window.visualViewport&&(window.visualViewport.removeEventListener("resize",s),window.visualViewport.removeEventListener("scroll",s)),window.removeEventListener("resize",s)}},[]),o.jsx("nav",{className:"fixed bottom-0 left-1/2 transform -translate-x-1/2 max-w-md w-full bg-gradient-to-r from-blue-600 to-purple-600 dark:from-gray-800 dark:to-gray-700 border-t border-border shadow-lg z-50",style:{paddingBottom:`max(${e}px, env(safe-area-inset-bottom), 0.25rem)`},children:o.jsx("div",{className:"flex justify-around py-1",children:n.map((s,i)=>o.jsxs(Ft,{to:s.path,className:`flex flex-col items-center p-3 transition-all duration-200 ${t===s.path?"text-yellow-300 font-bold":"text-white/80 hover:text-white"}`,children:[o.jsx("span",{className:"text-lg mb-1",children:s.icon}),o.jsx("span",{className:"text-xs",children:s.label})]},s.path))})})}function H7(){const{toasts:t,dismiss:e}=Ot();return o.jsx("div",{className:"fixed bottom-24 right-4 z-50 flex flex-col gap-2",children:t.filter(r=>r.open!==!1).map(r=>o.jsxs("div",{className:`p-4 rounded-lg shadow-lg max-w-sm relative cursor-pointer ${r.variant==="destructive"?"bg-red-600 text-white":"bg-green-600 text-white"}`,onClick:()=>e(r.id),children:[o.jsx("button",{onClick:n=>{n.stopPropagation(),e(r.id)},className:"absolute top-2 right-2 text-white hover:text-gray-200 text-xl font-bold w-6 h-6 flex items-center justify-center rounded-full hover:bg-white/20 transition-colors","aria-label":"Close notification",children:""}),r.title&&o.jsx("div",{className:"font-semibold mb-1 pr-6",children:r.title}),r.description&&o.jsx("div",{className:"text-sm opacity-90 pr-6",children:r.description})]},r.id))})}function K7(){return null}function G7(){return hF(),o.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[o.jsx(K7,{}),o.jsx("main",{className:"pb-20",children:o.jsxs(BD,{children:[o.jsx(jt,{path:"/",component:WF}),o.jsx(jt,{path:"/classes",component:KF}),o.jsx(jt,{path:"/notes",component:NU}),o.jsx(jt,{path:"/videos",component:CU}),o.jsx(jt,{path:"/game-plans",component:W7}),o.jsx(jt,{path:"/settings",component:h8}),o.jsx(jt,{path:"/belts",component:C7}),o.jsx(jt,{path:"/social",component:E7}),o.jsx(jt,{path:"/my-videos",component:P7}),o.jsx(jt,{path:"/drawing",component:T7}),o.jsx(jt,{path:"/contact",component:O7}),o.jsx(jt,{path:"/admin",component:B7}),o.jsx(jt,{path:"/forgot-password",component:R7}),o.jsx(jt,{path:"/reset-password",component:I7}),o.jsx(jt,{path:"/subscribe",component:M7}),o.jsx(jt,{path:"/subscribe/success",component:L7}),o.jsx(jt,{path:"/privacy",component:z7}),o.jsx(jt,{path:"/terms",component:V7}),o.jsx(jt,{children:o.jsxs("div",{className:"p-6 text-center",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-white mb-2",children:"Page Not Found"}),o.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"The page you're looking for doesn't exist."})]})})]})}),o.jsx(q7,{}),o.jsx(H7,{})]})}function Q7(){const{isAuthenticated:t,isLoading:e,loadingMessage:r,login:n}=Gt();return e?o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-900 via-blue-800 to-red-600 flex items-center justify-center p-4",children:o.jsxs("div",{className:"text-center max-w-md",children:[o.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center mb-4 mx-auto",children:o.jsx("div",{className:"w-8 h-8 border-4 border-white border-t-transparent rounded-full animate-spin"})}),o.jsx("p",{className:"text-white text-lg font-medium",children:r}),o.jsx("p",{className:"text-white/70 text-sm mt-2",children:"This may take a moment if the server is starting up..."})]})}):t?o.jsx(G7,{}):o.jsx(U7,{onAuthSuccess:n})}function Y7(){return o.jsx(oM,{client:sr,children:o.jsx(dF,{children:o.jsx(uF,{children:o.jsx(Q7,{})})})})}const tb="sw_cleanup_done_v2";sessionStorage.getItem(tb)||(console.log("Cleaning up service workers and caches..."),"serviceWorker"in navigator&&navigator.serviceWorker.getRegistrations().then(t=>{t.forEach(e=>e.unregister())}),"caches"in window&&caches.keys().then(t=>{t.forEach(e=>caches.delete(e))}),sessionStorage.setItem(tb,"true"),window.location.reload());"Notification"in window&&Notification.permission==="default"&&Notification.requestPermission().then(t=>{console.log("Notification permission:",t)});console.log("BJJ Journal - Full App Restored!");console.log("Open in new window if you see caching issues");f1(document.getElementById("root")).render(o.jsx(Y7,{}));export{cC as W};
